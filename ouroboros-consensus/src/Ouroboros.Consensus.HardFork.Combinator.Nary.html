<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE DisambiguateRecordFields #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE EmptyCase                #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances        #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE GADTs                    #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE RecordWildCards          #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables      #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications         #-}</span><span>
</span><span id="line-8"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Ouroboros.Consensus.HardFork.Combinator.Nary</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-9"></span><span>    </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Nary.html#Inject"><span class="hs-identifier">Inject</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-10"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Nary.html#inject%27"><span class="hs-identifier">inject'</span></a></span><span>
</span><span id="line-11"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Defaults</span></span><span>
</span><span id="line-12"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Nary.html#injectNestedCtxt_"><span class="hs-identifier">injectNestedCtxt_</span></a></span><span>
</span><span id="line-13"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Nary.html#injectQuery"><span class="hs-identifier">injectQuery</span></a></span><span>
</span><span id="line-14"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Nary.html#injectHardForkState"><span class="hs-identifier">injectHardForkState</span></a></span><span>
</span><span id="line-15"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-16"></span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Bifunctor</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">first</span></span><span class="hs-special">)</span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Coerce</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Coercible</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">coerce</span></span><span class="hs-special">)</span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.SOP.Dict</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Dict</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Data.SOP.Strict.html"><span class="hs-identifier">Data.SOP.Strict</span></a></span><span>
</span><span id="line-21"></span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Ouroboros.Consensus.Block.html"><span class="hs-identifier">Ouroboros.Consensus.Block</span></a></span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.History.html"><span class="hs-identifier">Ouroboros.Consensus.HardFork.History</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">History</span></span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Ouroboros.Consensus.HeaderValidation.html"><span class="hs-identifier">Ouroboros.Consensus.HeaderValidation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.HeaderValidation.html#AnnTip"><span class="hs-identifier">AnnTip</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HeaderValidation.html#HeaderState"><span class="hs-identifier">HeaderState</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Ouroboros.Consensus.Ledger.Extended.html"><span class="hs-identifier">Ouroboros.Consensus.Ledger.Extended</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.Ledger.Extended.html#ExtLedgerState"><span class="hs-identifier">ExtLedgerState</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Ouroboros.Consensus.Storage.Serialisation.html"><span class="hs-identifier">Ouroboros.Consensus.Storage.Serialisation</span></a></span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Ouroboros.Consensus.TypeFamilyWrappers.html"><span class="hs-identifier">Ouroboros.Consensus.TypeFamilyWrappers</span></a></span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Ouroboros.Consensus.Util.html"><span class="hs-identifier">Ouroboros.Consensus.Util</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.Util.html#.%3A"><span class="hs-operator">(.:)</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Ouroboros.Consensus.Util.Counting.html"><span class="hs-identifier">Ouroboros.Consensus.Util.Counting</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.Util.Counting.html#Exactly"><span class="hs-identifier">Exactly</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Ouroboros.Consensus.Util.SOP.html"><span class="hs-identifier">Ouroboros.Consensus.Util.SOP</span></a></span><span>
</span><span id="line-31"></span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.html"><span class="hs-identifier">Ouroboros.Consensus.HardFork.Combinator</span></a></span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.State.html"><span class="hs-identifier">Ouroboros.Consensus.HardFork.Combinator.State</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">State</span></span><span>
</span><span id="line-34"></span><span>
</span><span id="line-35"></span><span class="hs-comment">{-------------------------------------------------------------------------------
  Injection for a single block into a HardForkBlock
-------------------------------------------------------------------------------}</span><span>
</span><span id="line-38"></span><span>
</span><span id="line-39"></span><span class="hs-keyword">class</span><span> </span><span id="Inject"><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Nary.html#Inject"><span class="hs-identifier hs-var">Inject</span></a></span></span><span> </span><span id="local-6989586621680044961"><span class="annot"><a href="#local-6989586621680044961"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-40"></span><span>  </span><span id="inject"><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Nary.html#inject"><span class="hs-identifier hs-type">inject</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-41"></span><span>       </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680044957"><span class="annot"><a href="#local-6989586621680044957"><span class="hs-identifier hs-type">x</span></a></span></span><span> </span><span id="local-6989586621680044959"><span class="annot"><a href="#local-6989586621680044959"><span class="hs-identifier hs-type">xs</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Abstract.CanHardFork.html#CanHardFork"><span class="hs-identifier hs-type">CanHardFork</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680044959"><span class="hs-identifier hs-type">xs</span></a></span><span>
</span><span id="line-42"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Util.Counting.html#Exactly"><span class="hs-identifier hs-type">Exactly</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680044959"><span class="hs-identifier hs-type">xs</span></a></span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.History.Summary.html#Bound"><span class="hs-identifier hs-type">History.Bound</span></a></span><span>
</span><span id="line-43"></span><span>       </span><span class="hs-comment">-- ^ Start bound of each era</span><span>
</span><span id="line-44"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Util.SOP.html#Index"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680044957"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680044959"><span class="hs-identifier hs-type">xs</span></a></span><span>
</span><span id="line-45"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680044961"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680044957"><span class="hs-identifier hs-type">x</span></a></span><span>
</span><span id="line-46"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680044961"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Basics.html#HardForkBlock"><span class="hs-identifier hs-type">HardForkBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680044959"><span class="hs-identifier hs-type">xs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-47"></span><span>
</span><span id="line-48"></span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Nary.html#inject%27"><span class="hs-identifier hs-type">inject'</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-49"></span><span>     </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680044767"><span class="annot"><a href="#local-6989586621680044767"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span id="local-6989586621680044766"><span class="annot"><a href="#local-6989586621680044766"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621680044765"><span class="annot"><a href="#local-6989586621680044765"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span id="local-6989586621680044764"><span class="annot"><a href="#local-6989586621680044764"><span class="hs-identifier hs-type">x</span></a></span></span><span> </span><span id="local-6989586621680044763"><span class="annot"><a href="#local-6989586621680044763"><span class="hs-identifier hs-type">xs</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-50"></span><span>     </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Nary.html#Inject"><span class="hs-identifier hs-type">Inject</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680044767"><span class="hs-identifier hs-type">f</span></a></span><span>
</span><span id="line-51"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Abstract.CanHardFork.html#CanHardFork"><span class="hs-identifier hs-type">CanHardFork</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680044763"><span class="hs-identifier hs-type">xs</span></a></span><span>
</span><span id="line-52"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Coercible</span></span><span> </span><span class="annot"><a href="#local-6989586621680044766"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680044767"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680044764"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-53"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Coercible</span></span><span> </span><span class="annot"><a href="#local-6989586621680044765"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680044767"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Basics.html#HardForkBlock"><span class="hs-identifier hs-type">HardForkBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680044763"><span class="hs-identifier hs-type">xs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-54"></span><span>     </span><span class="hs-special">)</span><span>
</span><span id="line-55"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621680044767"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Util.Counting.html#Exactly"><span class="hs-identifier hs-type">Exactly</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680044763"><span class="hs-identifier hs-type">xs</span></a></span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.History.Summary.html#Bound"><span class="hs-identifier hs-type">History.Bound</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Util.SOP.html#Index"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680044764"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680044763"><span class="hs-identifier hs-type">xs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680044766"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680044765"><span class="hs-identifier hs-type">b</span></a></span><span>
</span><span id="line-56"></span><span id="inject%27"><span class="annot"><span class="annottext">inject' :: Proxy f -&gt; Exactly xs Bound -&gt; Index x xs -&gt; a -&gt; b
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Nary.html#inject%27"><span class="hs-identifier hs-var hs-var">inject'</span></a></span></span><span> </span><span class="annot"><span class="annottext">Proxy f
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680044762"><span class="annot"><span class="annottext">Exactly xs Bound
</span><a href="#local-6989586621680044762"><span class="hs-identifier hs-var">startBounds</span></a></span></span><span> </span><span id="local-6989586621680044761"><span class="annot"><span class="annottext">Index x xs
</span><a href="#local-6989586621680044761"><span class="hs-identifier hs-var">idx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">f (HardForkBlock xs) -&gt; b
</span><span class="hs-identifier hs-var">coerce</span></span><span> </span><span class="annot"><span class="annottext">(f (HardForkBlock xs) -&gt; b)
-&gt; (a -&gt; f (HardForkBlock xs)) -&gt; a -&gt; b
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Exactly xs Bound -&gt; Index x xs -&gt; f x -&gt; f (HardForkBlock xs)
forall (f :: * -&gt; *) x (xs :: [*]).
(Inject f, CanHardFork xs) =&gt;
Exactly xs Bound -&gt; Index x xs -&gt; f x -&gt; f (HardForkBlock xs)
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Nary.html#inject"><span class="hs-identifier hs-var">inject</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680044767"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><span class="annottext">Exactly xs Bound
</span><a href="#local-6989586621680044762"><span class="hs-identifier hs-var">startBounds</span></a></span><span> </span><span class="annot"><span class="annottext">Index x xs
</span><a href="#local-6989586621680044761"><span class="hs-identifier hs-var">idx</span></a></span><span> </span><span class="annot"><span class="annottext">(f x -&gt; f (HardForkBlock xs))
-&gt; (a -&gt; f x) -&gt; a -&gt; f (HardForkBlock xs)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; f x
</span><span class="hs-identifier hs-var">coerce</span></span><span>
</span><span id="line-57"></span><span>
</span><span id="line-58"></span><span class="hs-comment">{-------------------------------------------------------------------------------
  Defaults (to ease implementation)
-------------------------------------------------------------------------------}</span><span>
</span><span id="line-61"></span><span>
</span><span id="line-62"></span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Nary.html#injectNestedCtxt_"><span class="hs-identifier hs-type">injectNestedCtxt_</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-63"></span><span>     </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680044939"><span class="annot"><a href="#local-6989586621680044939"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span id="local-6989586621680044941"><span class="annot"><a href="#local-6989586621680044941"><span class="hs-identifier hs-type">x</span></a></span></span><span> </span><span id="local-6989586621680044940"><span class="annot"><a href="#local-6989586621680044940"><span class="hs-identifier hs-type">xs</span></a></span></span><span> </span><span id="local-6989586621680044938"><span class="annot"><a href="#local-6989586621680044938"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-64"></span><span>     </span><span class="annot"><a href="Ouroboros.Consensus.Util.SOP.html#Index"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680044941"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680044940"><span class="hs-identifier hs-type">xs</span></a></span><span>
</span><span id="line-65"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Block.NestedContent.html#NestedCtxt_"><span class="hs-identifier hs-type">NestedCtxt_</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680044941"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680044939"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680044938"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-66"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Block.NestedContent.html#NestedCtxt_"><span class="hs-identifier hs-type">NestedCtxt_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Basics.html#HardForkBlock"><span class="hs-identifier hs-type">HardForkBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680044940"><span class="hs-identifier hs-type">xs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680044939"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680044938"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-67"></span><span id="injectNestedCtxt_"><span class="annot"><span class="annottext">injectNestedCtxt_ :: Index x xs
-&gt; NestedCtxt_ x f a -&gt; NestedCtxt_ (HardForkBlock xs) f a
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Nary.html#injectNestedCtxt_"><span class="hs-identifier hs-var hs-var">injectNestedCtxt_</span></a></span></span><span> </span><span id="local-6989586621680044759"><span class="annot"><span class="annottext">Index x xs
</span><a href="#local-6989586621680044759"><span class="hs-identifier hs-var">idx</span></a></span></span><span> </span><span id="local-6989586621680044758"><span class="annot"><span class="annottext">NestedCtxt_ x f a
</span><a href="#local-6989586621680044758"><span class="hs-identifier hs-var">nc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Index x xs
</span><a href="#local-6989586621680044759"><span class="hs-identifier hs-var">idx</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-68"></span><span>    </span><span class="annot"><span class="annottext">Index x xs
</span><a href="Ouroboros.Consensus.Util.SOP.html#IZ"><span class="hs-identifier hs-var">IZ</span></a></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NestedCtxt_ x f a -&gt; NestedCtxt_ (HardForkBlock (x : xs)) f a
forall x (f :: * -&gt; *) a (xs :: [*]).
NestedCtxt_ x f a -&gt; NestedCtxt_ (HardForkBlock (x : xs)) f a
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Block.html#NCZ"><span class="hs-identifier hs-var">NCZ</span></a></span><span> </span><span class="annot"><span class="annottext">NestedCtxt_ x f a
</span><a href="#local-6989586621680044758"><span class="hs-identifier hs-var">nc</span></a></span><span>
</span><span id="line-69"></span><span>    </span><span class="annot"><a href="Ouroboros.Consensus.Util.SOP.html#IS"><span class="hs-identifier hs-type">IS</span></a></span><span> </span><span id="local-6989586621680044754"><span class="annot"><span class="annottext">Index x xs
</span><a href="#local-6989586621680044754"><span class="hs-identifier hs-var">idx'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NestedCtxt_ (HardForkBlock xs) f a
-&gt; NestedCtxt_ (HardForkBlock (y : xs)) f a
forall (xs :: [*]) (f :: * -&gt; *) a x.
NestedCtxt_ (HardForkBlock xs) f a
-&gt; NestedCtxt_ (HardForkBlock (x : xs)) f a
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Block.html#NCS"><span class="hs-identifier hs-var">NCS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Index x xs
-&gt; NestedCtxt_ x f a -&gt; NestedCtxt_ (HardForkBlock xs) f a
forall (f :: * -&gt; *) x (xs :: [*]) a.
Index x xs
-&gt; NestedCtxt_ x f a -&gt; NestedCtxt_ (HardForkBlock xs) f a
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Nary.html#injectNestedCtxt_"><span class="hs-identifier hs-var">injectNestedCtxt_</span></a></span><span> </span><span class="annot"><span class="annottext">Index x xs
</span><a href="#local-6989586621680044754"><span class="hs-identifier hs-var">idx'</span></a></span><span> </span><span class="annot"><span class="annottext">NestedCtxt_ x f a
</span><a href="#local-6989586621680044758"><span class="hs-identifier hs-var">nc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-70"></span><span>
</span><span id="line-71"></span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Nary.html#injectQuery"><span class="hs-identifier hs-type">injectQuery</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-72"></span><span>     </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680044924"><span class="annot"><a href="#local-6989586621680044924"><span class="hs-identifier hs-type">x</span></a></span></span><span> </span><span id="local-6989586621680044923"><span class="annot"><a href="#local-6989586621680044923"><span class="hs-identifier hs-type">xs</span></a></span></span><span> </span><span id="local-6989586621680044922"><span class="annot"><a href="#local-6989586621680044922"><span class="hs-identifier hs-type">result</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-73"></span><span>     </span><span class="annot"><a href="Ouroboros.Consensus.Util.SOP.html#Index"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680044924"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680044923"><span class="hs-identifier hs-type">xs</span></a></span><span>
</span><span id="line-74"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Ledger.Query.html#Query"><span class="hs-identifier hs-type">Query</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680044924"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680044922"><span class="hs-identifier hs-type">result</span></a></span><span>
</span><span id="line-75"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Ledger.Query.html#QueryIfCurrent"><span class="hs-identifier hs-type">QueryIfCurrent</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680044923"><span class="hs-identifier hs-type">xs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680044922"><span class="hs-identifier hs-type">result</span></a></span><span>
</span><span id="line-76"></span><span id="injectQuery"><span class="annot"><span class="annottext">injectQuery :: Index x xs -&gt; Query x result -&gt; QueryIfCurrent xs result
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Nary.html#injectQuery"><span class="hs-identifier hs-var hs-var">injectQuery</span></a></span></span><span> </span><span id="local-6989586621680044752"><span class="annot"><span class="annottext">Index x xs
</span><a href="#local-6989586621680044752"><span class="hs-identifier hs-var">idx</span></a></span></span><span> </span><span id="local-6989586621680044751"><span class="annot"><span class="annottext">Query x result
</span><a href="#local-6989586621680044751"><span class="hs-identifier hs-var">q</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Index x xs
</span><a href="#local-6989586621680044752"><span class="hs-identifier hs-var">idx</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-77"></span><span>    </span><span class="annot"><span class="annottext">Index x xs
</span><a href="Ouroboros.Consensus.Util.SOP.html#IZ"><span class="hs-identifier hs-var">IZ</span></a></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Query x result -&gt; QueryIfCurrent (x : xs) result
forall x result (xs :: [*]).
Query x result -&gt; QueryIfCurrent (x : xs) result
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Ledger.Query.html#QZ"><span class="hs-identifier hs-var">QZ</span></a></span><span> </span><span class="annot"><span class="annottext">Query x result
</span><a href="#local-6989586621680044751"><span class="hs-identifier hs-var">q</span></a></span><span>
</span><span id="line-78"></span><span>    </span><span class="annot"><a href="Ouroboros.Consensus.Util.SOP.html#IS"><span class="hs-identifier hs-type">IS</span></a></span><span> </span><span id="local-6989586621680044749"><span class="annot"><span class="annottext">Index x xs
</span><a href="#local-6989586621680044749"><span class="hs-identifier hs-var">idx'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">QueryIfCurrent xs result -&gt; QueryIfCurrent (y : xs) result
forall (xs :: [*]) result x.
QueryIfCurrent xs result -&gt; QueryIfCurrent (x : xs) result
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Ledger.Query.html#QS"><span class="hs-identifier hs-var">QS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Index x xs -&gt; Query x result -&gt; QueryIfCurrent xs result
forall x (xs :: [*]) result.
Index x xs -&gt; Query x result -&gt; QueryIfCurrent xs result
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Nary.html#injectQuery"><span class="hs-identifier hs-var">injectQuery</span></a></span><span> </span><span class="annot"><span class="annottext">Index x xs
</span><a href="#local-6989586621680044749"><span class="hs-identifier hs-var">idx'</span></a></span><span> </span><span class="annot"><span class="annottext">Query x result
</span><a href="#local-6989586621680044751"><span class="hs-identifier hs-var">q</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-79"></span><span>
</span><span id="line-80"></span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Nary.html#injectHardForkState"><span class="hs-identifier hs-type">injectHardForkState</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-81"></span><span>     </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680044793"><span class="annot"><a href="#local-6989586621680044793"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span id="local-6989586621680044794"><span class="annot"><a href="#local-6989586621680044794"><span class="hs-identifier hs-type">x</span></a></span></span><span> </span><span id="local-6989586621680044795"><span class="annot"><a href="#local-6989586621680044795"><span class="hs-identifier hs-type">xs</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-82"></span><span>     </span><span class="annot"><a href="Ouroboros.Consensus.Util.Counting.html#Exactly"><span class="hs-identifier hs-type">Exactly</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680044795"><span class="hs-identifier hs-type">xs</span></a></span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.History.Summary.html#Bound"><span class="hs-identifier hs-type">History.Bound</span></a></span><span>
</span><span id="line-83"></span><span>     </span><span class="hs-comment">-- ^ Start bound of each era</span><span>
</span><span id="line-84"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Util.SOP.html#Index"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680044794"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680044795"><span class="hs-identifier hs-type">xs</span></a></span><span>
</span><span id="line-85"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680044793"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680044794"><span class="hs-identifier hs-type">x</span></a></span><span>
</span><span id="line-86"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.State.Types.html#HardForkState"><span class="hs-identifier hs-type">HardForkState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680044793"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680044795"><span class="hs-identifier hs-type">xs</span></a></span><span>
</span><span id="line-87"></span><span id="injectHardForkState"><span class="annot"><span class="annottext">injectHardForkState :: Exactly xs Bound -&gt; Index x xs -&gt; f x -&gt; HardForkState f xs
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Nary.html#injectHardForkState"><span class="hs-identifier hs-var hs-var">injectHardForkState</span></a></span></span><span> </span><span id="local-6989586621680044747"><span class="annot"><span class="annottext">Exactly xs Bound
</span><a href="#local-6989586621680044747"><span class="hs-identifier hs-var">startBounds</span></a></span></span><span> </span><span id="local-6989586621680044746"><span class="annot"><span class="annottext">Index x xs
</span><a href="#local-6989586621680044746"><span class="hs-identifier hs-var">idx</span></a></span></span><span> </span><span id="local-6989586621680044745"><span class="annot"><span class="annottext">f x
</span><a href="#local-6989586621680044745"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-88"></span><span>    </span><span class="annot"><span class="annottext">Telescope (K Past) (Current f) xs -&gt; HardForkState f xs
forall (f :: * -&gt; *) (xs :: [*]).
Telescope (K Past) (Current f) xs -&gt; HardForkState f xs
</span><a href="Ouroboros.Consensus.HardFork.Combinator.State.Types.html#HardForkState"><span class="hs-identifier hs-var">HardForkState</span></a></span><span> </span><span class="annot"><span class="annottext">(Telescope (K Past) (Current f) xs -&gt; HardForkState f xs)
-&gt; Telescope (K Past) (Current f) xs -&gt; HardForkState f xs
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Exactly xs Bound -&gt; Index x xs -&gt; Telescope (K Past) (Current f) xs
forall (xs' :: [*]).
Exactly xs' Bound
-&gt; Index x xs' -&gt; Telescope (K Past) (Current f) xs'
</span><a href="#local-6989586621680044743"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Exactly xs Bound
</span><a href="#local-6989586621680044747"><span class="hs-identifier hs-var">startBounds</span></a></span><span> </span><span class="annot"><span class="annottext">Index x xs
</span><a href="#local-6989586621680044746"><span class="hs-identifier hs-var">idx</span></a></span><span>
</span><span id="line-89"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-90"></span><span>    </span><span id="local-6989586621680044908"><span class="annot"><a href="#local-6989586621680044743"><span class="hs-identifier hs-type">go</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-91"></span><span>         </span><span class="annot"><a href="Ouroboros.Consensus.Util.Counting.html#Exactly"><span class="hs-identifier hs-type">Exactly</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680044908"><span class="hs-identifier hs-type">xs'</span></a></span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.History.Summary.html#Bound"><span class="hs-identifier hs-type">History.Bound</span></a></span><span>
</span><span id="line-92"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Util.SOP.html#Index"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680044794"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680044908"><span class="hs-identifier hs-type">xs'</span></a></span><span>
</span><span id="line-93"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Util.Telescope.html#Telescope"><span class="hs-identifier hs-type">Telescope</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">K</span></span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.State.Types.html#Past"><span class="hs-identifier hs-type">State.Past</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.State.Types.html#Current"><span class="hs-identifier hs-type">State.Current</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680044793"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680044908"><span class="hs-identifier hs-type">xs'</span></a></span></span><span>
</span><span id="line-94"></span><span>    </span><span id="local-6989586621680044743"><span class="annot"><span class="annottext">go :: Exactly xs' Bound
-&gt; Index x xs' -&gt; Telescope (K Past) (Current f) xs'
</span><a href="#local-6989586621680044743"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.Util.Counting.html#ExactlyCons"><span class="hs-identifier hs-type">ExactlyCons</span></a></span><span> </span><span id="local-6989586621680044741"><span class="annot"><span class="annottext">Bound
</span><a href="#local-6989586621680044741"><span class="hs-identifier hs-var">start</span></a></span></span><span> </span><span class="annot"><span class="annottext">Exactly xs Bound
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Index x xs'
</span><a href="Ouroboros.Consensus.Util.SOP.html#IZ"><span class="hs-identifier hs-var">IZ</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-95"></span><span>        </span><span class="annot"><span class="annottext">Current f x -&gt; Telescope (K Past) (Current f) (x : xs)
forall a (f :: a -&gt; *) (x :: a) (g :: a -&gt; *) (xs :: [a]).
f x -&gt; Telescope g f (x : xs)
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Util.Telescope.html#TZ"><span class="hs-identifier hs-var">TZ</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Current :: forall (f :: * -&gt; *) blk. Bound -&gt; f blk -&gt; Current f blk
</span><a href="Ouroboros.Consensus.HardFork.Combinator.State.Types.html#Current"><span class="hs-identifier hs-type">State.Current</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">currentStart :: Bound
</span><a href="Ouroboros.Consensus.HardFork.Combinator.State.Types.html#currentStart"><span class="hs-identifier hs-var">currentStart</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bound
</span><a href="#local-6989586621680044741"><span class="hs-identifier hs-var">start</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">currentState :: f x
</span><a href="Ouroboros.Consensus.HardFork.Combinator.State.Types.html#currentState"><span class="hs-identifier hs-var">currentState</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">f x
</span><a href="#local-6989586621680044745"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-96"></span><span>    </span><span class="annot"><a href="#local-6989586621680044743"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.Util.Counting.html#ExactlyCons"><span class="hs-identifier hs-type">ExactlyCons</span></a></span><span> </span><span id="local-6989586621680044736"><span class="annot"><span class="annottext">Bound
</span><a href="#local-6989586621680044736"><span class="hs-identifier hs-var">start</span></a></span></span><span> </span><span id="local-6989586621680044735"><span class="annot"><span class="annottext">startBounds' :: Exactly xs Bound
</span><a href="#local-6989586621680044735"><span class="hs-identifier hs-var">startBounds'</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.Util.Counting.html#ExactlyCons"><span class="hs-identifier hs-type">ExactlyCons</span></a></span><span> </span><span id="local-6989586621680044734"><span class="annot"><span class="annottext">Bound
</span><a href="#local-6989586621680044734"><span class="hs-identifier hs-var">nextStart</span></a></span></span><span> </span><span class="annot"><span class="annottext">Exactly xs Bound
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.Util.SOP.html#IS"><span class="hs-identifier hs-type">IS</span></a></span><span> </span><span id="local-6989586621680044733"><span class="annot"><span class="annottext">Index x xs
</span><a href="#local-6989586621680044733"><span class="hs-identifier hs-var">idx'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-97"></span><span>        </span><span class="annot"><span class="annottext">K Past x
-&gt; Telescope (K Past) (Current f) xs
-&gt; Telescope (K Past) (Current f) (x : xs)
forall a (g :: a -&gt; *) (x :: a) (f :: a -&gt; *) (xs :: [a]).
g x -&gt; Telescope g f xs -&gt; Telescope g f (x : xs)
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Util.Telescope.html#TS"><span class="hs-identifier hs-var">TS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Past -&gt; K Past x
forall k a (b :: k). a -&gt; K a b
</span><span class="hs-identifier hs-var">K</span></span><span> </span><span class="annot"><span class="annottext">Past :: Bound -&gt; Bound -&gt; Past
</span><a href="Ouroboros.Consensus.HardFork.Combinator.State.Types.html#Past"><span class="hs-identifier hs-type">State.Past</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">pastStart :: Bound
</span><a href="Ouroboros.Consensus.HardFork.Combinator.State.Types.html#pastStart"><span class="hs-identifier hs-var">pastStart</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bound
</span><a href="#local-6989586621680044736"><span class="hs-identifier hs-var">start</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">pastEnd :: Bound
</span><a href="Ouroboros.Consensus.HardFork.Combinator.State.Types.html#pastEnd"><span class="hs-identifier hs-var">pastEnd</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bound
</span><a href="#local-6989586621680044734"><span class="hs-identifier hs-var">nextStart</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-98"></span><span>           </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Exactly xs Bound -&gt; Index x xs -&gt; Telescope (K Past) (Current f) xs
forall (xs' :: [*]).
Exactly xs' Bound
-&gt; Index x xs' -&gt; Telescope (K Past) (Current f) xs'
</span><a href="#local-6989586621680044743"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Exactly xs Bound
</span><a href="#local-6989586621680044735"><span class="hs-identifier hs-var">startBounds'</span></a></span><span> </span><span class="annot"><span class="annottext">Index x xs
Index x xs
</span><a href="#local-6989586621680044733"><span class="hs-identifier hs-var">idx'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-99"></span><span>    </span><span class="annot"><a href="#local-6989586621680044743"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.Util.Counting.html#ExactlyCons"><span class="hs-identifier hs-type">ExactlyCons</span></a></span><span> </span><span class="annot"><span class="annottext">Bound
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Exactly xs Bound
</span><a href="Ouroboros.Consensus.Util.Counting.html#ExactlyNil"><span class="hs-identifier hs-var">ExactlyNil</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.Util.SOP.html#IS"><span class="hs-identifier hs-type">IS</span></a></span><span> </span><span id="local-6989586621680044726"><span class="annot"><span class="annottext">Index x xs
</span><a href="#local-6989586621680044726"><span class="hs-identifier hs-var">idx'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Index x xs
</span><a href="#local-6989586621680044726"><span class="hs-identifier hs-var">idx'</span></a></span><span> </span><span class="hs-keyword">of</span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>
</span><span id="line-100"></span><span>
</span><span id="line-101"></span><span class="hs-comment">{-------------------------------------------------------------------------------
  Instances
-------------------------------------------------------------------------------}</span><span>
</span><span id="line-104"></span><span>
</span><span id="line-105"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Nary.html#Inject"><span class="hs-identifier hs-type">Inject</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">I</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-106"></span><span>  </span><span id="local-6989586621680044723"><span class="annot"><span class="annottext">inject :: Exactly xs Bound -&gt; Index x xs -&gt; I x -&gt; I (HardForkBlock xs)
</span><a href="#local-6989586621680044723"><span class="hs-identifier hs-var hs-var hs-var hs-var">inject</span></a></span></span><span> </span><span class="annot"><span class="annottext">Exactly xs Bound
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proxy I -&gt; Index x xs -&gt; I x -&gt; I (HardForkBlock xs)
forall a1 (f :: a1 -&gt; *) a2 b (x :: a1) (xs :: [a1]).
(Coercible a2 (f x), Coercible b (NS f xs)) =&gt;
Proxy f -&gt; Index x xs -&gt; a2 -&gt; b
</span><a href="Ouroboros.Consensus.Util.SOP.html#injectNS%27"><span class="hs-identifier hs-var">injectNS'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy I
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier hs-type">I</span></span><span class="hs-special">)</span><span>
</span><span id="line-107"></span><span>
</span><span id="line-108"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Nary.html#Inject"><span class="hs-identifier hs-type">Inject</span></a></span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Block.Abstract.html#Header"><span class="hs-identifier hs-type">Header</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-109"></span><span>  </span><span id="local-6989586621680044719"><span class="annot"><span class="annottext">inject :: Exactly xs Bound
-&gt; Index x xs -&gt; Header x -&gt; Header (HardForkBlock xs)
</span><a href="#local-6989586621680044719"><span class="hs-identifier hs-var hs-var hs-var hs-var">inject</span></a></span></span><span> </span><span class="annot"><span class="annottext">Exactly xs Bound
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proxy Header -&gt; Index x xs -&gt; Header x -&gt; Header (HardForkBlock xs)
forall a1 (f :: a1 -&gt; *) a2 b (x :: a1) (xs :: [a1]).
(Coercible a2 (f x), Coercible b (NS f xs)) =&gt;
Proxy f -&gt; Index x xs -&gt; a2 -&gt; b
</span><a href="Ouroboros.Consensus.Util.SOP.html#injectNS%27"><span class="hs-identifier hs-var">injectNS'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy Header
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Ouroboros.Consensus.Block.Abstract.html#Header"><span class="hs-identifier hs-type">Header</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-110"></span><span>
</span><span id="line-111"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Nary.html#Inject"><span class="hs-identifier hs-type">Inject</span></a></span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Storage.Serialisation.html#SerialisedHeader"><span class="hs-identifier hs-type">SerialisedHeader</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-112"></span><span>  </span><span id="local-6989586621680044717"><span class="annot"><span class="annottext">inject :: Exactly xs Bound
-&gt; Index x xs
-&gt; SerialisedHeader x
-&gt; SerialisedHeader (HardForkBlock xs)
</span><a href="#local-6989586621680044717"><span class="hs-identifier hs-var hs-var hs-var hs-var">inject</span></a></span></span><span> </span><span class="annot"><span class="annottext">Exactly xs Bound
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680044716"><span class="annot"><span class="annottext">Index x xs
</span><a href="#local-6989586621680044716"><span class="hs-identifier hs-var">idx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-113"></span><span>        </span><span class="annot"><span class="annottext">(SomeSecond (NestedCtxt Header) (HardForkBlock xs), ByteString)
-&gt; SerialisedHeader (HardForkBlock xs)
forall blk.
(SomeSecond (NestedCtxt Header) blk, ByteString)
-&gt; SerialisedHeader blk
</span><a href="Ouroboros.Consensus.Storage.Serialisation.html#serialisedHeaderFromPair"><span class="hs-identifier hs-var">serialisedHeaderFromPair</span></a></span><span>
</span><span id="line-114"></span><span>      </span><span class="annot"><span class="annottext">((SomeSecond (NestedCtxt Header) (HardForkBlock xs), ByteString)
 -&gt; SerialisedHeader (HardForkBlock xs))
-&gt; (SerialisedHeader x
    -&gt; (SomeSecond (NestedCtxt Header) (HardForkBlock xs), ByteString))
-&gt; SerialisedHeader x
-&gt; SerialisedHeader (HardForkBlock xs)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(SomeSecond (NestedCtxt Header) x
 -&gt; SomeSecond (NestedCtxt Header) (HardForkBlock xs))
-&gt; (SomeSecond (NestedCtxt Header) x, ByteString)
-&gt; (SomeSecond (NestedCtxt Header) (HardForkBlock xs), ByteString)
forall (p :: * -&gt; * -&gt; *) a b c.
Bifunctor p =&gt;
(a -&gt; b) -&gt; p a c -&gt; p b c
</span><span class="hs-identifier hs-var">first</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(forall a.
 NestedCtxt_ x Header a -&gt; NestedCtxt_ (HardForkBlock xs) Header a)
-&gt; SomeSecond (NestedCtxt Header) x
-&gt; SomeSecond (NestedCtxt Header) (HardForkBlock xs)
forall blk (f :: * -&gt; *) blk' (f' :: * -&gt; *).
(forall a. NestedCtxt_ blk f a -&gt; NestedCtxt_ blk' f' a)
-&gt; SomeSecond (NestedCtxt f) blk -&gt; SomeSecond (NestedCtxt f') blk'
</span><a href="Ouroboros.Consensus.Block.NestedContent.html#mapSomeNestedCtxt"><span class="hs-identifier hs-var">mapSomeNestedCtxt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Index x xs
-&gt; NestedCtxt_ x Header a
-&gt; NestedCtxt_ (HardForkBlock xs) Header a
forall (f :: * -&gt; *) x (xs :: [*]) a.
Index x xs
-&gt; NestedCtxt_ x f a -&gt; NestedCtxt_ (HardForkBlock xs) f a
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Nary.html#injectNestedCtxt_"><span class="hs-identifier hs-var">injectNestedCtxt_</span></a></span><span> </span><span class="annot"><span class="annottext">Index x xs
</span><a href="#local-6989586621680044716"><span class="hs-identifier hs-var">idx</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-115"></span><span>      </span><span class="annot"><span class="annottext">((SomeSecond (NestedCtxt Header) x, ByteString)
 -&gt; (SomeSecond (NestedCtxt Header) (HardForkBlock xs), ByteString))
-&gt; (SerialisedHeader x
    -&gt; (SomeSecond (NestedCtxt Header) x, ByteString))
-&gt; SerialisedHeader x
-&gt; (SomeSecond (NestedCtxt Header) (HardForkBlock xs), ByteString)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">SerialisedHeader x
-&gt; (SomeSecond (NestedCtxt Header) x, ByteString)
forall blk.
SerialisedHeader blk
-&gt; (SomeSecond (NestedCtxt Header) blk, ByteString)
</span><a href="Ouroboros.Consensus.Storage.Serialisation.html#serialisedHeaderToPair"><span class="hs-identifier hs-var">serialisedHeaderToPair</span></a></span><span>
</span><span id="line-116"></span><span>
</span><span id="line-117"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Nary.html#Inject"><span class="hs-identifier hs-type">Inject</span></a></span><span> </span><span class="annot"><a href="Ouroboros.Consensus.TypeFamilyWrappers.html#WrapHeaderHash"><span class="hs-identifier hs-type">WrapHeaderHash</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-118"></span><span>  </span><span id="local-6989586621680044711"><span class="annot"><span class="annottext">inject :: Exactly xs Bound
-&gt; Index x xs
-&gt; WrapHeaderHash x
-&gt; WrapHeaderHash (HardForkBlock xs)
</span><a href="#local-6989586621680044711"><span class="hs-identifier hs-var hs-var hs-var hs-var">inject</span></a></span></span><span> </span><span class="annot"><span class="annottext">Exactly xs Bound
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680044709"><span id="local-6989586621680044710"><span id="local-6989586621680044708"><span class="annot"><span class="annottext">Index x xs
</span><a href="#local-6989586621680044708"><span class="hs-identifier hs-var">idx</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Util.SOP.html#Index"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680044710"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680044709"><span class="hs-identifier hs-type">xs</span></a></span></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-119"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Proxy SingleEraBlock -&gt; Index x xs -&gt; Dict SingleEraBlock x
forall k (c :: k -&gt; Constraint) (xs :: [k]) (x :: k).
All c xs =&gt;
Proxy c -&gt; Index x xs -&gt; Dict c x
</span><a href="Ouroboros.Consensus.Util.SOP.html#dictIndexAll"><span class="hs-identifier hs-var">dictIndexAll</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy SingleEraBlock
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Abstract.SingleEraBlock.html#SingleEraBlock"><span class="hs-identifier hs-type">SingleEraBlock</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Index x xs
</span><a href="#local-6989586621680044708"><span class="hs-identifier hs-var">idx</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-120"></span><span>      </span><span class="annot"><span class="annottext">Dict SingleEraBlock x
</span><span class="hs-identifier hs-var">Dict</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-121"></span><span>          </span><span class="annot"><span class="annottext">OneEraHash xs -&gt; WrapHeaderHash (HardForkBlock xs)
forall blk. HeaderHash blk -&gt; WrapHeaderHash blk
</span><a href="Ouroboros.Consensus.TypeFamilyWrappers.html#WrapHeaderHash"><span class="hs-identifier hs-var">WrapHeaderHash</span></a></span><span>
</span><span id="line-122"></span><span>        </span><span class="annot"><span class="annottext">(OneEraHash xs -&gt; WrapHeaderHash (HardForkBlock xs))
-&gt; (WrapHeaderHash x -&gt; OneEraHash xs)
-&gt; WrapHeaderHash x
-&gt; WrapHeaderHash (HardForkBlock xs)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ShortByteString -&gt; OneEraHash xs
forall k (xs :: [k]). ShortByteString -&gt; OneEraHash xs
</span><a href="Ouroboros.Consensus.HardFork.Combinator.AcrossEras.html#OneEraHash"><span class="hs-identifier hs-var">OneEraHash</span></a></span><span>
</span><span id="line-123"></span><span>        </span><span class="annot"><span class="annottext">(ShortByteString -&gt; OneEraHash xs)
-&gt; (WrapHeaderHash x -&gt; ShortByteString)
-&gt; WrapHeaderHash x
-&gt; OneEraHash xs
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Proxy x -&gt; HeaderHash x -&gt; ShortByteString
forall blk (proxy :: * -&gt; *).
ConvertRawHash blk =&gt;
proxy blk -&gt; HeaderHash blk -&gt; ShortByteString
</span><a href="Ouroboros.Consensus.Block.Abstract.html#toShortRawHash"><span class="hs-identifier hs-var">toShortRawHash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy x
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680044710"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-124"></span><span>        </span><span class="annot"><span class="annottext">(HeaderHash x -&gt; ShortByteString)
-&gt; (WrapHeaderHash x -&gt; HeaderHash x)
-&gt; WrapHeaderHash x
-&gt; ShortByteString
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">WrapHeaderHash x -&gt; HeaderHash x
forall blk. WrapHeaderHash blk -&gt; HeaderHash blk
</span><a href="Ouroboros.Consensus.TypeFamilyWrappers.html#unwrapHeaderHash"><span class="hs-identifier hs-var hs-var">unwrapHeaderHash</span></a></span><span>
</span><span id="line-125"></span><span>
</span><span id="line-126"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Nary.html#Inject"><span class="hs-identifier hs-type">Inject</span></a></span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Ledger.SupportsMempool.html#GenTx"><span class="hs-identifier hs-type">GenTx</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-127"></span><span>  </span><span id="local-6989586621680044700"><span class="annot"><span class="annottext">inject :: Exactly xs Bound
-&gt; Index x xs -&gt; GenTx x -&gt; GenTx (HardForkBlock xs)
</span><a href="#local-6989586621680044700"><span class="hs-identifier hs-var hs-var hs-var hs-var">inject</span></a></span></span><span> </span><span class="annot"><span class="annottext">Exactly xs Bound
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proxy GenTx -&gt; Index x xs -&gt; GenTx x -&gt; GenTx (HardForkBlock xs)
forall a1 (f :: a1 -&gt; *) a2 b (x :: a1) (xs :: [a1]).
(Coercible a2 (f x), Coercible b (NS f xs)) =&gt;
Proxy f -&gt; Index x xs -&gt; a2 -&gt; b
</span><a href="Ouroboros.Consensus.Util.SOP.html#injectNS%27"><span class="hs-identifier hs-var">injectNS'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy GenTx
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Ouroboros.Consensus.Ledger.SupportsMempool.html#GenTx"><span class="hs-identifier hs-type">GenTx</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-128"></span><span>
</span><span id="line-129"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Nary.html#Inject"><span class="hs-identifier hs-type">Inject</span></a></span><span> </span><span class="annot"><a href="Ouroboros.Consensus.TypeFamilyWrappers.html#WrapGenTxId"><span class="hs-identifier hs-type">WrapGenTxId</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-130"></span><span>  </span><span id="local-6989586621680044698"><span class="annot"><span class="annottext">inject :: Exactly xs Bound
-&gt; Index x xs -&gt; WrapGenTxId x -&gt; WrapGenTxId (HardForkBlock xs)
</span><a href="#local-6989586621680044698"><span class="hs-identifier hs-var hs-var hs-var hs-var">inject</span></a></span></span><span> </span><span class="annot"><span class="annottext">Exactly xs Bound
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proxy WrapGenTxId
-&gt; Index x xs -&gt; WrapGenTxId x -&gt; WrapGenTxId (HardForkBlock xs)
forall a1 (f :: a1 -&gt; *) a2 b (x :: a1) (xs :: [a1]).
(Coercible a2 (f x), Coercible b (NS f xs)) =&gt;
Proxy f -&gt; Index x xs -&gt; a2 -&gt; b
</span><a href="Ouroboros.Consensus.Util.SOP.html#injectNS%27"><span class="hs-identifier hs-var">injectNS'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy WrapGenTxId
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Ouroboros.Consensus.TypeFamilyWrappers.html#WrapGenTxId"><span class="hs-identifier hs-type">WrapGenTxId</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-131"></span><span>
</span><span id="line-132"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Nary.html#Inject"><span class="hs-identifier hs-type">Inject</span></a></span><span> </span><span class="annot"><a href="Ouroboros.Consensus.TypeFamilyWrappers.html#WrapApplyTxErr"><span class="hs-identifier hs-type">WrapApplyTxErr</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-133"></span><span>  </span><span id="local-6989586621680044696"><span class="annot"><span class="annottext">inject :: Exactly xs Bound
-&gt; Index x xs
-&gt; WrapApplyTxErr x
-&gt; WrapApplyTxErr (HardForkBlock xs)
</span><a href="#local-6989586621680044696"><span class="hs-identifier hs-var hs-var hs-var hs-var">inject</span></a></span></span><span> </span><span class="annot"><span class="annottext">Exactly xs Bound
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-134"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HardForkApplyTxErr xs -&gt; WrapApplyTxErr (HardForkBlock xs)
forall blk. ApplyTxErr blk -&gt; WrapApplyTxErr blk
</span><a href="Ouroboros.Consensus.TypeFamilyWrappers.html#WrapApplyTxErr"><span class="hs-identifier hs-var">WrapApplyTxErr</span></a></span><span> </span><span class="annot"><span class="annottext">(HardForkApplyTxErr xs -&gt; WrapApplyTxErr (HardForkBlock xs))
-&gt; (OneEraApplyTxErr xs -&gt; HardForkApplyTxErr xs)
-&gt; OneEraApplyTxErr xs
-&gt; WrapApplyTxErr (HardForkBlock xs)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">OneEraApplyTxErr xs -&gt; HardForkApplyTxErr xs
forall (xs :: [*]). OneEraApplyTxErr xs -&gt; HardForkApplyTxErr xs
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Mempool.html#HardForkApplyTxErrFromEra"><span class="hs-identifier hs-var">HardForkApplyTxErrFromEra</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-135"></span><span>        </span><span class="annot"><span class="annottext">(OneEraApplyTxErr xs -&gt; WrapApplyTxErr (HardForkBlock xs))
-&gt; (Index x xs -&gt; WrapApplyTxErr x -&gt; OneEraApplyTxErr xs)
-&gt; Index x xs
-&gt; WrapApplyTxErr x
-&gt; WrapApplyTxErr (HardForkBlock xs)
forall y z x0 x1. (y -&gt; z) -&gt; (x0 -&gt; x1 -&gt; y) -&gt; x0 -&gt; x1 -&gt; z
</span><a href="Ouroboros.Consensus.Util.html#.%3A"><span class="hs-operator hs-var">.:</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy WrapApplyTxErr
-&gt; Index x xs -&gt; WrapApplyTxErr x -&gt; OneEraApplyTxErr xs
forall a1 (f :: a1 -&gt; *) a2 b (x :: a1) (xs :: [a1]).
(Coercible a2 (f x), Coercible b (NS f xs)) =&gt;
Proxy f -&gt; Index x xs -&gt; a2 -&gt; b
</span><a href="Ouroboros.Consensus.Util.SOP.html#injectNS%27"><span class="hs-identifier hs-var">injectNS'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy WrapApplyTxErr
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Ouroboros.Consensus.TypeFamilyWrappers.html#WrapApplyTxErr"><span class="hs-identifier hs-type">WrapApplyTxErr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-136"></span><span>
</span><span id="line-137"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Nary.html#Inject"><span class="hs-identifier hs-type">Inject</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.Util.html#SomeSecond"><span class="hs-identifier hs-type">SomeSecond</span></a></span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Ledger.Query.html#Query"><span class="hs-identifier hs-type">Query</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-138"></span><span>  </span><span id="local-6989586621680044692"><span class="annot"><span class="annottext">inject :: Exactly xs Bound
-&gt; Index x xs
-&gt; SomeSecond Query x
-&gt; SomeSecond Query (HardForkBlock xs)
</span><a href="#local-6989586621680044692"><span class="hs-identifier hs-var hs-var hs-var hs-var">inject</span></a></span></span><span> </span><span class="annot"><span class="annottext">Exactly xs Bound
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680044691"><span class="annot"><span class="annottext">Index x xs
</span><a href="#local-6989586621680044691"><span class="hs-identifier hs-var">idx</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.Util.html#SomeSecond"><span class="hs-identifier hs-type">SomeSecond</span></a></span><span> </span><span id="local-6989586621680044689"><span class="annot"><span class="annottext">Query x b
</span><a href="#local-6989586621680044689"><span class="hs-identifier hs-var">q</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Query (HardForkBlock xs) (HardForkQueryResult xs b)
-&gt; SomeSecond Query (HardForkBlock xs)
forall (f :: * -&gt; * -&gt; *) a b. f a b -&gt; SomeSecond f a
</span><a href="Ouroboros.Consensus.Util.html#SomeSecond"><span class="hs-identifier hs-var">SomeSecond</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">QueryIfCurrent xs b
-&gt; Query (HardForkBlock xs) (HardForkQueryResult xs b)
forall (xs :: [*]) result.
QueryIfCurrent xs result
-&gt; Query (HardForkBlock xs) (HardForkQueryResult xs result)
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Ledger.Query.html#QueryIfCurrent"><span class="hs-identifier hs-var">QueryIfCurrent</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Index x xs -&gt; Query x b -&gt; QueryIfCurrent xs b
forall x (xs :: [*]) result.
Index x xs -&gt; Query x result -&gt; QueryIfCurrent xs result
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Nary.html#injectQuery"><span class="hs-identifier hs-var">injectQuery</span></a></span><span> </span><span class="annot"><span class="annottext">Index x xs
</span><a href="#local-6989586621680044691"><span class="hs-identifier hs-var">idx</span></a></span><span> </span><span class="annot"><span class="annottext">Query x b
</span><a href="#local-6989586621680044689"><span class="hs-identifier hs-var">q</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-139"></span><span>
</span><span id="line-140"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Nary.html#Inject"><span class="hs-identifier hs-type">Inject</span></a></span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HeaderValidation.html#AnnTip"><span class="hs-identifier hs-type">AnnTip</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-141"></span><span>  </span><span id="local-6989586621680044686"><span class="annot"><span class="annottext">inject :: Exactly xs Bound
-&gt; Index x xs -&gt; AnnTip x -&gt; AnnTip (HardForkBlock xs)
</span><a href="#local-6989586621680044686"><span class="hs-identifier hs-var hs-var hs-var hs-var">inject</span></a></span></span><span> </span><span class="annot"><span class="annottext">Exactly xs Bound
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NS AnnTip xs -&gt; AnnTip (HardForkBlock xs)
forall (xs :: [*]).
SListI xs =&gt;
NS AnnTip xs -&gt; AnnTip (HardForkBlock xs)
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Block.html#undistribAnnTip"><span class="hs-identifier hs-var">undistribAnnTip</span></a></span><span> </span><span class="annot"><span class="annottext">(NS AnnTip xs -&gt; AnnTip (HardForkBlock xs))
-&gt; (Index x xs -&gt; AnnTip x -&gt; NS AnnTip xs)
-&gt; Index x xs
-&gt; AnnTip x
-&gt; AnnTip (HardForkBlock xs)
forall y z x0 x1. (y -&gt; z) -&gt; (x0 -&gt; x1 -&gt; y) -&gt; x0 -&gt; x1 -&gt; z
</span><a href="Ouroboros.Consensus.Util.html#.%3A"><span class="hs-operator hs-var">.:</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy AnnTip -&gt; Index x xs -&gt; AnnTip x -&gt; NS AnnTip xs
forall a1 (f :: a1 -&gt; *) a2 b (x :: a1) (xs :: [a1]).
(Coercible a2 (f x), Coercible b (NS f xs)) =&gt;
Proxy f -&gt; Index x xs -&gt; a2 -&gt; b
</span><a href="Ouroboros.Consensus.Util.SOP.html#injectNS%27"><span class="hs-identifier hs-var">injectNS'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy AnnTip
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Ouroboros.Consensus.HeaderValidation.html#AnnTip"><span class="hs-identifier hs-type">AnnTip</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-142"></span><span>
</span><span id="line-143"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Nary.html#Inject"><span class="hs-identifier hs-type">Inject</span></a></span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Ledger.Basics.html#LedgerState"><span class="hs-identifier hs-type">LedgerState</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-144"></span><span>  </span><span id="local-6989586621680044683"><span class="annot"><span class="annottext">inject :: Exactly xs Bound
-&gt; Index x xs -&gt; LedgerState x -&gt; LedgerState (HardForkBlock xs)
</span><a href="#local-6989586621680044683"><span class="hs-identifier hs-var hs-var hs-var hs-var">inject</span></a></span></span><span> </span><span id="local-6989586621680044682"><span class="annot"><span class="annottext">Exactly xs Bound
</span><a href="#local-6989586621680044682"><span class="hs-identifier hs-var">startBounds</span></a></span></span><span> </span><span id="local-6989586621680044681"><span class="annot"><span class="annottext">Index x xs
</span><a href="#local-6989586621680044681"><span class="hs-identifier hs-var">idx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-145"></span><span>      </span><span class="annot"><span class="annottext">HardForkState LedgerState xs -&gt; LedgerState (HardForkBlock xs)
forall (xs :: [*]).
HardForkState LedgerState xs -&gt; LedgerState (HardForkBlock xs)
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Basics.html#HardForkLedgerState"><span class="hs-identifier hs-var">HardForkLedgerState</span></a></span><span> </span><span class="annot"><span class="annottext">(HardForkState LedgerState xs -&gt; LedgerState (HardForkBlock xs))
-&gt; (LedgerState x -&gt; HardForkState LedgerState xs)
-&gt; LedgerState x
-&gt; LedgerState (HardForkBlock xs)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Exactly xs Bound
-&gt; Index x xs -&gt; LedgerState x -&gt; HardForkState LedgerState xs
forall (f :: * -&gt; *) x (xs :: [*]).
Exactly xs Bound -&gt; Index x xs -&gt; f x -&gt; HardForkState f xs
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Nary.html#injectHardForkState"><span class="hs-identifier hs-var">injectHardForkState</span></a></span><span> </span><span class="annot"><span class="annottext">Exactly xs Bound
</span><a href="#local-6989586621680044682"><span class="hs-identifier hs-var">startBounds</span></a></span><span> </span><span class="annot"><span class="annottext">Index x xs
</span><a href="#local-6989586621680044681"><span class="hs-identifier hs-var">idx</span></a></span><span>
</span><span id="line-146"></span><span>
</span><span id="line-147"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Nary.html#Inject"><span class="hs-identifier hs-type">Inject</span></a></span><span> </span><span class="annot"><a href="Ouroboros.Consensus.TypeFamilyWrappers.html#WrapChainDepState"><span class="hs-identifier hs-type">WrapChainDepState</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-148"></span><span>  </span><span id="local-6989586621680044678"><span class="annot"><span class="annottext">inject :: Exactly xs Bound
-&gt; Index x xs
-&gt; WrapChainDepState x
-&gt; WrapChainDepState (HardForkBlock xs)
</span><a href="#local-6989586621680044678"><span class="hs-identifier hs-var hs-var hs-var hs-var">inject</span></a></span></span><span> </span><span id="local-6989586621680044677"><span class="annot"><span class="annottext">Exactly xs Bound
</span><a href="#local-6989586621680044677"><span class="hs-identifier hs-var">startBounds</span></a></span></span><span> </span><span id="local-6989586621680044676"><span class="annot"><span class="annottext">Index x xs
</span><a href="#local-6989586621680044676"><span class="hs-identifier hs-var">idx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-149"></span><span>      </span><span class="annot"><span class="annottext">HardForkState WrapChainDepState xs
-&gt; WrapChainDepState (HardForkBlock xs)
</span><span class="hs-identifier hs-var">coerce</span></span><span> </span><span class="annot"><span class="annottext">(HardForkState WrapChainDepState xs
 -&gt; WrapChainDepState (HardForkBlock xs))
-&gt; (WrapChainDepState x -&gt; HardForkState WrapChainDepState xs)
-&gt; WrapChainDepState x
-&gt; WrapChainDepState (HardForkBlock xs)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Exactly xs Bound
-&gt; Index x xs
-&gt; WrapChainDepState x
-&gt; HardForkState WrapChainDepState xs
forall (f :: * -&gt; *) x (xs :: [*]).
Exactly xs Bound -&gt; Index x xs -&gt; f x -&gt; HardForkState f xs
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Nary.html#injectHardForkState"><span class="hs-identifier hs-var">injectHardForkState</span></a></span><span> </span><span class="annot"><span class="annottext">Exactly xs Bound
</span><a href="#local-6989586621680044677"><span class="hs-identifier hs-var">startBounds</span></a></span><span> </span><span class="annot"><span class="annottext">Index x xs
</span><a href="#local-6989586621680044676"><span class="hs-identifier hs-var">idx</span></a></span><span>
</span><span id="line-150"></span><span>
</span><span id="line-151"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Nary.html#Inject"><span class="hs-identifier hs-type">Inject</span></a></span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HeaderValidation.html#HeaderState"><span class="hs-identifier hs-type">HeaderState</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-152"></span><span>  </span><span id="local-6989586621680044674"><span class="annot"><span class="annottext">inject :: Exactly xs Bound
-&gt; Index x xs -&gt; HeaderState x -&gt; HeaderState (HardForkBlock xs)
</span><a href="#local-6989586621680044674"><span class="hs-identifier hs-var hs-var hs-var hs-var">inject</span></a></span></span><span> </span><span id="local-6989586621680044673"><span class="annot"><span class="annottext">Exactly xs Bound
</span><a href="#local-6989586621680044673"><span class="hs-identifier hs-var">startBounds</span></a></span></span><span> </span><span id="local-6989586621680044672"><span class="annot"><span class="annottext">Index x xs
</span><a href="#local-6989586621680044672"><span class="hs-identifier hs-var">idx</span></a></span></span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HeaderValidation.html#HeaderState"><span class="hs-identifier hs-type">HeaderState</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621680044669"><span id="local-6989586621680044670"><span class="annot"><span class="annottext">WithOrigin (AnnTip x)
ChainDepState (BlockProtocol x)
headerStateChainDep :: forall blk. HeaderState blk -&gt; ChainDepState (BlockProtocol blk)
headerStateTip :: forall blk. HeaderState blk -&gt; WithOrigin (AnnTip blk)
headerStateChainDep :: ChainDepState (BlockProtocol x)
headerStateTip :: WithOrigin (AnnTip x)
</span><a href="Ouroboros.Consensus.HeaderValidation.html#headerStateChainDep"><span class="hs-glyph hs-var hs-var hs-var hs-var">..</span></a></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HeaderState :: forall blk.
WithOrigin (AnnTip blk)
-&gt; ChainDepState (BlockProtocol blk) -&gt; HeaderState blk
</span><a href="Ouroboros.Consensus.HeaderValidation.html#HeaderState"><span class="hs-identifier hs-type">HeaderState</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-153"></span><span>        </span><span class="annot"><span class="annottext">headerStateTip :: WithOrigin (AnnTip (HardForkBlock xs))
</span><a href="Ouroboros.Consensus.HeaderValidation.html#headerStateTip"><span class="hs-identifier hs-var">headerStateTip</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Exactly xs Bound
-&gt; Index x xs -&gt; AnnTip x -&gt; AnnTip (HardForkBlock xs)
forall (f :: * -&gt; *) x (xs :: [*]).
(Inject f, CanHardFork xs) =&gt;
Exactly xs Bound -&gt; Index x xs -&gt; f x -&gt; f (HardForkBlock xs)
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Nary.html#inject"><span class="hs-identifier hs-var">inject</span></a></span><span> </span><span class="annot"><span class="annottext">Exactly xs Bound
</span><a href="#local-6989586621680044673"><span class="hs-identifier hs-var">startBounds</span></a></span><span> </span><span class="annot"><span class="annottext">Index x xs
</span><a href="#local-6989586621680044672"><span class="hs-identifier hs-var">idx</span></a></span><span> </span><span class="annot"><span class="annottext">(AnnTip x -&gt; AnnTip (HardForkBlock xs))
-&gt; WithOrigin (AnnTip x) -&gt; WithOrigin (AnnTip (HardForkBlock xs))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">WithOrigin (AnnTip x)
</span><a href="#local-6989586621680044670"><span class="hs-identifier hs-var">headerStateTip</span></a></span><span>
</span><span id="line-154"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">headerStateChainDep :: ChainDepState (BlockProtocol (HardForkBlock xs))
</span><a href="Ouroboros.Consensus.HeaderValidation.html#headerStateChainDep"><span class="hs-identifier hs-var">headerStateChainDep</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WrapChainDepState (HardForkBlock xs)
-&gt; ChainDepState (BlockProtocol (HardForkBlock xs))
forall blk.
WrapChainDepState blk -&gt; ChainDepState (BlockProtocol blk)
</span><a href="Ouroboros.Consensus.TypeFamilyWrappers.html#unwrapChainDepState"><span class="hs-identifier hs-var hs-var">unwrapChainDepState</span></a></span><span>
</span><span id="line-155"></span><span>                            </span><span class="annot"><span class="annottext">(WrapChainDepState (HardForkBlock xs)
 -&gt; ChainDepState (BlockProtocol (HardForkBlock xs)))
-&gt; WrapChainDepState (HardForkBlock xs)
-&gt; ChainDepState (BlockProtocol (HardForkBlock xs))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Exactly xs Bound
-&gt; Index x xs
-&gt; WrapChainDepState x
-&gt; WrapChainDepState (HardForkBlock xs)
forall (f :: * -&gt; *) x (xs :: [*]).
(Inject f, CanHardFork xs) =&gt;
Exactly xs Bound -&gt; Index x xs -&gt; f x -&gt; f (HardForkBlock xs)
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Nary.html#inject"><span class="hs-identifier hs-var">inject</span></a></span><span> </span><span class="annot"><span class="annottext">Exactly xs Bound
</span><a href="#local-6989586621680044673"><span class="hs-identifier hs-var">startBounds</span></a></span><span> </span><span class="annot"><span class="annottext">Index x xs
</span><a href="#local-6989586621680044672"><span class="hs-identifier hs-var">idx</span></a></span><span>
</span><span id="line-156"></span><span>                            </span><span class="annot"><span class="annottext">(WrapChainDepState x -&gt; WrapChainDepState (HardForkBlock xs))
-&gt; WrapChainDepState x -&gt; WrapChainDepState (HardForkBlock xs)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ChainDepState (BlockProtocol x) -&gt; WrapChainDepState x
forall blk.
ChainDepState (BlockProtocol blk) -&gt; WrapChainDepState blk
</span><a href="Ouroboros.Consensus.TypeFamilyWrappers.html#WrapChainDepState"><span class="hs-identifier hs-var">WrapChainDepState</span></a></span><span> </span><span class="annot"><span class="annottext">ChainDepState (BlockProtocol x)
</span><a href="#local-6989586621680044669"><span class="hs-identifier hs-var">headerStateChainDep</span></a></span><span>
</span><span id="line-157"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-158"></span><span>
</span><span id="line-159"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Nary.html#Inject"><span class="hs-identifier hs-type">Inject</span></a></span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Ledger.Extended.html#ExtLedgerState"><span class="hs-identifier hs-type">ExtLedgerState</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-160"></span><span>  </span><span id="local-6989586621680044662"><span class="annot"><span class="annottext">inject :: Exactly xs Bound
-&gt; Index x xs
-&gt; ExtLedgerState x
-&gt; ExtLedgerState (HardForkBlock xs)
</span><a href="#local-6989586621680044662"><span class="hs-identifier hs-var hs-var hs-var hs-var">inject</span></a></span></span><span> </span><span id="local-6989586621680044661"><span class="annot"><span class="annottext">Exactly xs Bound
</span><a href="#local-6989586621680044661"><span class="hs-identifier hs-var">startBounds</span></a></span></span><span> </span><span id="local-6989586621680044660"><span class="annot"><span class="annottext">Index x xs
</span><a href="#local-6989586621680044660"><span class="hs-identifier hs-var">idx</span></a></span></span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Ledger.Extended.html#ExtLedgerState"><span class="hs-identifier hs-type">ExtLedgerState</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621680044657"><span id="local-6989586621680044658"><span class="annot"><span class="annottext">LedgerState x
HeaderState x
headerState :: forall blk. ExtLedgerState blk -&gt; HeaderState blk
ledgerState :: forall blk. ExtLedgerState blk -&gt; LedgerState blk
headerState :: HeaderState x
ledgerState :: LedgerState x
</span><a href="Ouroboros.Consensus.Ledger.Extended.html#headerState"><span class="hs-glyph hs-var hs-var hs-var hs-var">..</span></a></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExtLedgerState :: forall blk.
LedgerState blk -&gt; HeaderState blk -&gt; ExtLedgerState blk
</span><a href="Ouroboros.Consensus.Ledger.Extended.html#ExtLedgerState"><span class="hs-identifier hs-type">ExtLedgerState</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-161"></span><span>        </span><span class="annot"><span class="annottext">ledgerState :: LedgerState (HardForkBlock xs)
</span><a href="Ouroboros.Consensus.Ledger.Extended.html#ledgerState"><span class="hs-identifier hs-var">ledgerState</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Exactly xs Bound
-&gt; Index x xs -&gt; LedgerState x -&gt; LedgerState (HardForkBlock xs)
forall (f :: * -&gt; *) x (xs :: [*]).
(Inject f, CanHardFork xs) =&gt;
Exactly xs Bound -&gt; Index x xs -&gt; f x -&gt; f (HardForkBlock xs)
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Nary.html#inject"><span class="hs-identifier hs-var">inject</span></a></span><span> </span><span class="annot"><span class="annottext">Exactly xs Bound
</span><a href="#local-6989586621680044661"><span class="hs-identifier hs-var">startBounds</span></a></span><span> </span><span class="annot"><span class="annottext">Index x xs
</span><a href="#local-6989586621680044660"><span class="hs-identifier hs-var">idx</span></a></span><span> </span><span class="annot"><span class="annottext">LedgerState x
</span><a href="#local-6989586621680044658"><span class="hs-identifier hs-var">ledgerState</span></a></span><span>
</span><span id="line-162"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">headerState :: HeaderState (HardForkBlock xs)
</span><a href="Ouroboros.Consensus.Ledger.Extended.html#headerState"><span class="hs-identifier hs-var">headerState</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Exactly xs Bound
-&gt; Index x xs -&gt; HeaderState x -&gt; HeaderState (HardForkBlock xs)
forall (f :: * -&gt; *) x (xs :: [*]).
(Inject f, CanHardFork xs) =&gt;
Exactly xs Bound -&gt; Index x xs -&gt; f x -&gt; f (HardForkBlock xs)
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Nary.html#inject"><span class="hs-identifier hs-var">inject</span></a></span><span> </span><span class="annot"><span class="annottext">Exactly xs Bound
</span><a href="#local-6989586621680044661"><span class="hs-identifier hs-var">startBounds</span></a></span><span> </span><span class="annot"><span class="annottext">Index x xs
</span><a href="#local-6989586621680044660"><span class="hs-identifier hs-var">idx</span></a></span><span> </span><span class="annot"><span class="annottext">HeaderState x
</span><a href="#local-6989586621680044657"><span class="hs-identifier hs-var">headerState</span></a></span><span>
</span><span id="line-163"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-164"></span></pre></body></html>