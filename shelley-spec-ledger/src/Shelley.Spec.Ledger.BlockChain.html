<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span id="%24con2tag_AZQZEE4MqY75Qu2sXK1Su2"></span><span class="hs-pragma">{-# LANGUAGE DataKinds #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE DeriveAnyClass #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE DeriveGeneric #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE DerivingStrategies #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE DerivingVia #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE EmptyDataDecls #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE GeneralizedNewtypeDeriving #-}</span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# LANGUAGE LambdaCase #-}</span><span>
</span><span id="line-11"></span><span class="hs-pragma">{-# LANGUAGE MultiParamTypeClasses #-}</span><span>
</span><span id="line-12"></span><span class="hs-pragma">{-# LANGUAGE NamedFieldPuns #-}</span><span>
</span><span id="line-13"></span><span class="hs-pragma">{-# LANGUAGE OverloadedStrings #-}</span><span>
</span><span id="line-14"></span><span class="hs-pragma">{-# LANGUAGE PatternSynonyms #-}</span><span>
</span><span id="line-15"></span><span class="hs-pragma">{-# LANGUAGE Rank2Types #-}</span><span>
</span><span id="line-16"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-17"></span><span class="hs-pragma">{-# LANGUAGE StandaloneDeriving #-}</span><span>
</span><span id="line-18"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications #-}</span><span>
</span><span id="line-19"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilies #-}</span><span>
</span><span id="line-20"></span><span class="hs-pragma">{-# LANGUAGE UndecidableInstances #-}</span><span>
</span><span id="line-21"></span><span>
</span><span id="line-22"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Shelley.Spec.Ledger.BlockChain</span><span>
</span><span id="line-23"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#HashHeader"><span class="hs-identifier">HashHeader</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-24"></span><span>    </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#PrevHash"><span class="hs-identifier">PrevHash</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-25"></span><span>    </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#LastAppliedBlock"><span class="hs-identifier">LastAppliedBlock</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-26"></span><span>    </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#lastAppliedHash"><span class="hs-identifier">lastAppliedHash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-27"></span><span>    </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#BHBody"><span class="hs-identifier">BHBody</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-28"></span><span>    </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#poolIDfromBHBody"><span class="hs-identifier">poolIDfromBHBody</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-29"></span><span>    </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#issuerIDfromBHBody"><span class="hs-identifier">issuerIDfromBHBody</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-30"></span><span>    </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#BHeader"><span class="hs-identifier">BHeader</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#BHeader"><span class="hs-identifier">BHeader</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-31"></span><span>    </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#Block"><span class="hs-identifier">Block</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#Block"><span class="hs-identifier">Block</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#Block%27"><span class="hs-identifier">Block'</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-32"></span><span>    </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#LaxBlock"><span class="hs-identifier">LaxBlock</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-33"></span><span>    </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#TxSeq"><span class="hs-identifier">TxSeq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#TxSeq"><span class="hs-identifier">TxSeq</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#txSeqTxns%27"><span class="hs-identifier">txSeqTxns'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#TxSeq%27"><span class="hs-identifier">TxSeq'</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-34"></span><span>    </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#HashBBody"><span class="hs-identifier">HashBBody</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-35"></span><span>    </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#bhHash"><span class="hs-identifier">bhHash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-36"></span><span>    </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#bbHash"><span class="hs-identifier">bbHash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-37"></span><span>    </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#hashHeaderToNonce"><span class="hs-identifier">hashHeaderToNonce</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-38"></span><span>    </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#prevHashToNonce"><span class="hs-identifier">prevHashToNonce</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-39"></span><span>    </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#bHeaderSize"><span class="hs-identifier">bHeaderSize</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-40"></span><span>    </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#bBodySize"><span class="hs-identifier">bBodySize</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-41"></span><span>    </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#slotToNonce"><span class="hs-identifier">slotToNonce</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-42"></span><span>    </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#hBbsize"><span class="hs-identifier">hBbsize</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-43"></span><span>    </span><span class="hs-comment">-- accessor functions</span><span>
</span><span id="line-44"></span><span>    </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#bheader"><span class="hs-identifier">bheader</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-45"></span><span>    </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#bhbody"><span class="hs-identifier">bhbody</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-46"></span><span>    </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#bbody"><span class="hs-identifier">bbody</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-47"></span><span>    </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#bnonce"><span class="hs-identifier">bnonce</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-48"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-49"></span><span>    </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#seedEta"><span class="hs-identifier">seedEta</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-50"></span><span>    </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#seedL"><span class="hs-identifier">seedL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-51"></span><span>    </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#incrBlocks"><span class="hs-identifier">incrBlocks</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-52"></span><span>    </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#mkSeed"><span class="hs-identifier">mkSeed</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-53"></span><span>    </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#checkLeaderValue"><span class="hs-identifier">checkLeaderValue</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-54"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-55"></span><span class="hs-keyword">where</span><span>
</span><span id="line-56"></span><span>
</span><span id="line-57"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier">Cardano.Binary</span></a></span><span>
</span><span id="line-58"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier">Annotator</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-59"></span><span>    </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier">Case</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-60"></span><span>    </span><span class="annot"><span class="hs-identifier">Decoder</span></span><span class="hs-special">,</span><span>
</span><span id="line-61"></span><span>    </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier">FromCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier">fromCBOR</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-62"></span><span>    </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier">ToCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-63"></span><span>    </span><span class="annot"><span class="hs-identifier">TokenType</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">TypeNull</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-64"></span><span>    </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier">annotatorSlice</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-65"></span><span>    </span><span class="annot"><span class="hs-identifier">decodeNull</span></span><span class="hs-special">,</span><span>
</span><span id="line-66"></span><span>    </span><span class="annot"><span class="hs-identifier">encodeListLen</span></span><span class="hs-special">,</span><span>
</span><span id="line-67"></span><span>    </span><span class="annot"><span class="hs-identifier">encodeNull</span></span><span class="hs-special">,</span><span>
</span><span id="line-68"></span><span>    </span><span class="annot"><span class="hs-identifier">encodePreEncoded</span></span><span class="hs-special">,</span><span>
</span><span id="line-69"></span><span>    </span><span class="annot"><span class="hs-identifier">peekTokenType</span></span><span class="hs-special">,</span><span>
</span><span id="line-70"></span><span>    </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier">serialize'</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-71"></span><span>    </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier">serializeEncoding</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-72"></span><span>    </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier">serializeEncoding'</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-73"></span><span>    </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier">szCases</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-74"></span><span>    </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier">withSlice</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-75"></span><span>    </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier">withWordSize</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-76"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-77"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-crypto-class-2.0.0/noopt/doc/html/cardano-crypto-class/src"><span class="hs-identifier">Cardano.Crypto.Hash.Class</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Hash</span></span><span>
</span><span id="line-78"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-crypto-class-2.0.0/noopt/doc/html/cardano-crypto-class/src"><span class="hs-identifier">Cardano.Crypto.KES</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">KES</span></span><span>
</span><span id="line-79"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-crypto-class-2.0.0/noopt/doc/html/cardano-crypto-class/src"><span class="hs-identifier">Cardano.Crypto.Util</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-crypto-class-2.0.0/noopt/doc/html/cardano-crypto-class/src"><span class="hs-identifier">SignableRepresentation</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-80"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-crypto-class-2.0.0/noopt/doc/html/cardano-crypto-class/src"><span class="hs-identifier">Cardano.Crypto.VRF</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">VRF</span></span><span>
</span><span id="line-81"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Cardano.Ledger.Crypto.html"><span class="hs-identifier">Cardano.Ledger.Crypto</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">CC</span></span><span>
</span><span id="line-82"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cardano.Ledger.Era.html"><span class="hs-identifier">Cardano.Ledger.Era</span></a></span><span>
</span><span id="line-83"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cardano.Ledger.Shelley.html"><span class="hs-identifier">Cardano.Ledger.Shelley</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.html#ShelleyBased"><span class="hs-identifier">ShelleyBased</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-84"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Cardano.Ledger.Shelley.html"><span class="hs-identifier">Cardano.Ledger.Shelley</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Shelley</span></span><span>
</span><span id="line-85"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-slotting-0.1.0.0/noopt/doc/html/cardano-slotting/src"><span class="hs-identifier">Cardano.Slotting.Slot</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-slotting-0.1.0.0/noopt/doc/html/cardano-slotting/src"><span class="hs-identifier">WithOrigin</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-86"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.DeepSeq</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">NFData</span></span><span class="hs-special">)</span><span>
</span><span id="line-87"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">unless</span></span><span class="hs-special">)</span><span>
</span><span id="line-88"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.ByteString</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">ByteString</span></span><span class="hs-special">)</span><span>
</span><span id="line-89"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.ByteString.Builder</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">BS</span></span><span>
</span><span id="line-90"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.ByteString.Builder.Extra</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">BS</span></span><span>
</span><span id="line-91"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.ByteString.Char8</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">BS</span></span><span>
</span><span id="line-92"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.ByteString.Lazy</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">BSL</span></span><span>
</span><span id="line-93"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Coerce</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">coerce</span></span><span class="hs-special">)</span><span>
</span><span id="line-94"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map.Strict</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Map</span></span><span class="hs-special">)</span><span>
</span><span id="line-95"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map.Strict</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-96"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Proxy</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Proxy</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-97"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Ratio</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-operator">(%)</span></span><span class="hs-special">)</span><span>
</span><span id="line-98"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Sequence</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Seq</span></span><span class="hs-special">)</span><span>
</span><span id="line-99"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Sequence</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Seq</span></span><span>
</span><span id="line-100"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/src"><span class="hs-identifier">Data.Sequence.Strict</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/src"><span class="hs-identifier">StrictSeq</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-101"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/src"><span class="hs-identifier">Data.Sequence.Strict</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">StrictSeq</span></span><span>
</span><span id="line-102"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Word</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Word64</span></span><span class="hs-special">)</span><span>
</span><span id="line-103"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">GHC.Generics</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-104"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">NoThunks.Class</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">AllowThunksIn</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">NoThunks</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-105"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Numeric.Natural</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Natural</span></span><span class="hs-special">)</span><span>
</span><span id="line-106"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Shelley.Spec.Ledger.BaseTypes.html"><span class="hs-identifier">Shelley.Spec.Ledger.BaseTypes</span></a></span><span>
</span><span id="line-107"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Shelley.Spec.Ledger.BaseTypes.html#ActiveSlotCoeff"><span class="hs-identifier">ActiveSlotCoeff</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-108"></span><span>    </span><span class="annot"><a href="Shelley.Spec.Ledger.BaseTypes.html#FixedPoint"><span class="hs-identifier">FixedPoint</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-109"></span><span>    </span><span class="annot"><a href="Shelley.Spec.Ledger.BaseTypes.html#Nonce"><span class="hs-identifier">Nonce</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-110"></span><span>    </span><span class="annot"><a href="Shelley.Spec.Ledger.BaseTypes.html#Seed"><span class="hs-identifier">Seed</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-111"></span><span>    </span><span class="annot"><a href="Shelley.Spec.Ledger.BaseTypes.html#activeSlotLog"><span class="hs-identifier">activeSlotLog</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-112"></span><span>    </span><span class="annot"><a href="Shelley.Spec.Ledger.BaseTypes.html#activeSlotVal"><span class="hs-identifier">activeSlotVal</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-113"></span><span>    </span><span class="annot"><a href="Shelley.Spec.Ledger.BaseTypes.html#intervalValue"><span class="hs-identifier">intervalValue</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-114"></span><span>    </span><span class="annot"><a href="Shelley.Spec.Ledger.BaseTypes.html#mkNonceFromNumber"><span class="hs-identifier">mkNonceFromNumber</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-115"></span><span>    </span><span class="annot"><a href="Shelley.Spec.Ledger.BaseTypes.html#mkNonceFromOutputVRF"><span class="hs-identifier">mkNonceFromOutputVRF</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-116"></span><span>    </span><span class="annot"><a href="Shelley.Spec.Ledger.BaseTypes.html#strictMaybeToMaybe"><span class="hs-identifier">strictMaybeToMaybe</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-117"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-118"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Shelley.Spec.Ledger.EpochBoundary.html"><span class="hs-identifier">Shelley.Spec.Ledger.EpochBoundary</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.EpochBoundary.html#BlocksMade"><span class="hs-identifier">BlocksMade</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-119"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Shelley.Spec.Ledger.Hashing.html"><span class="hs-identifier">Shelley.Spec.Ledger.Hashing</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.Hashing.html#EraIndependentBlockBody"><span class="hs-identifier">EraIndependentBlockBody</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-120"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Shelley.Spec.Ledger.Keys.html"><span class="hs-identifier">Shelley.Spec.Ledger.Keys</span></a></span><span>
</span><span id="line-121"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Shelley.Spec.Ledger.Keys.html#CertifiedVRF"><span class="hs-identifier">CertifiedVRF</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-122"></span><span>    </span><span class="annot"><a href="Shelley.Spec.Ledger.Keys.html#Hash"><span class="hs-identifier">Hash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-123"></span><span>    </span><span class="annot"><a href="Shelley.Spec.Ledger.Keys.html#KeyHash"><span class="hs-identifier">KeyHash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-124"></span><span>    </span><span class="annot"><a href="Shelley.Spec.Ledger.Keys.html#KeyRole"><span class="hs-identifier">KeyRole</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-125"></span><span>    </span><span class="annot"><a href="Shelley.Spec.Ledger.Keys.html#SignedKES"><span class="hs-identifier">SignedKES</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-126"></span><span>    </span><span class="annot"><a href="Shelley.Spec.Ledger.Keys.html#VKey"><span class="hs-identifier">VKey</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-127"></span><span>    </span><span class="annot"><a href="Shelley.Spec.Ledger.Keys.html#VerKeyVRF"><span class="hs-identifier">VerKeyVRF</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-128"></span><span>    </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-crypto-class-2.0.0/noopt/doc/html/cardano-crypto-class/src"><span class="hs-identifier">decodeSignedKES</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-129"></span><span>    </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-crypto-class-2.0.0/noopt/doc/html/cardano-crypto-class/src"><span class="hs-identifier">decodeVerKeyVRF</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-130"></span><span>    </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-crypto-class-2.0.0/noopt/doc/html/cardano-crypto-class/src"><span class="hs-identifier">encodeSignedKES</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-131"></span><span>    </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-crypto-class-2.0.0/noopt/doc/html/cardano-crypto-class/src"><span class="hs-identifier">encodeVerKeyVRF</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-132"></span><span>    </span><span class="annot"><a href="Shelley.Spec.Ledger.Keys.html#hashKey"><span class="hs-identifier">hashKey</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-133"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-134"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Shelley.Spec.Ledger.OCert.html"><span class="hs-identifier">Shelley.Spec.Ledger.OCert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.OCert.html#OCert"><span class="hs-identifier">OCert</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-135"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Shelley.Spec.Ledger.PParams.html"><span class="hs-identifier">Shelley.Spec.Ledger.PParams</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.PParams.html#ProtVer"><span class="hs-identifier">ProtVer</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-136"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Shelley.Spec.Ledger.Serialization.html"><span class="hs-identifier">Shelley.Spec.Ledger.Serialization</span></a></span><span>
</span><span id="line-137"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Shelley.Spec.Ledger.Serialization.html#FromCBORGroup"><span class="hs-identifier">FromCBORGroup</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-138"></span><span>    </span><span class="annot"><a href="Shelley.Spec.Ledger.Serialization.html#ToCBORGroup"><span class="hs-identifier">ToCBORGroup</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-139"></span><span>    </span><span class="annot"><a href="Shelley.Spec.Ledger.Serialization.html#decodeMap"><span class="hs-identifier">decodeMap</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-140"></span><span>    </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier">decodeRecordNamed</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-141"></span><span>    </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier">decodeSeq</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-142"></span><span>    </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier">encodeFoldableEncoder</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-143"></span><span>    </span><span class="annot"><a href="Shelley.Spec.Ledger.Serialization.html#encodeFoldableMapEncoder"><span class="hs-identifier">encodeFoldableMapEncoder</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-144"></span><span>    </span><span class="annot"><a href="Shelley.Spec.Ledger.Serialization.html#listLenInt"><span class="hs-identifier">listLenInt</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-145"></span><span>    </span><span class="annot"><a href="Shelley.Spec.Ledger.Serialization.html#runByteBuilder"><span class="hs-identifier">runByteBuilder</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-146"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-147"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Shelley.Spec.Ledger.Slot.html"><span class="hs-identifier">Shelley.Spec.Ledger.Slot</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-slotting-0.1.0.0/noopt/doc/html/cardano-slotting/src"><span class="hs-identifier">BlockNo</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-slotting-0.1.0.0/noopt/doc/html/cardano-slotting/src"><span class="hs-identifier">SlotNo</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-148"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Shelley.Spec.Ledger.Tx.html"><span class="hs-identifier">Shelley.Spec.Ledger.Tx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.Tx.html#Tx"><span class="hs-identifier">Tx</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Shelley.Spec.Ledger.Tx.html#ValidateScript"><span class="hs-identifier">ValidateScript</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Shelley.Spec.Ledger.Tx.html#decodeWits"><span class="hs-identifier">decodeWits</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Shelley.Spec.Ledger.Tx.html#segwitTx"><span class="hs-identifier">segwitTx</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Shelley.Spec.Ledger.Tx.html#txWitsBytes"><span class="hs-identifier">txWitsBytes</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-149"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/shelley-spec-non-integral-0.1.0.0/noopt/doc/html/shelley-spec-non-integral/src"><span class="hs-identifier">Shelley.Spec.NonIntegral</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/shelley-spec-non-integral-0.1.0.0/noopt/doc/html/shelley-spec-non-integral/src"><span class="hs-identifier">CompareResult</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/shelley-spec-non-integral-0.1.0.0/noopt/doc/html/shelley-spec-non-integral/src"><span class="hs-identifier">taylorExpCmp</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-150"></span><span>
</span><span id="line-151"></span><span class="hs-comment">-- | The hash of a Block Header</span><span>
</span><span id="line-152"></span><span id="local-6989586621680030466"><span id="local-6989586621680030467"></span></span><span class="hs-keyword">newtype</span><span> </span><span id="HashHeader"><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#HashHeader"><span class="hs-identifier hs-var">HashHeader</span></a></span></span><span> </span><span id="local-6989586621680030797"><span class="annot"><a href="#local-6989586621680030797"><span class="hs-identifier hs-type">crypto</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="HashHeader"><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#HashHeader"><span class="hs-identifier hs-var">HashHeader</span></a></span></span><span> </span><span class="hs-special">{</span><span id="unHashHeader"><span class="annot"><span class="annottext">HashHeader crypto -&gt; Hash crypto (BHeader crypto)
</span><a href="Shelley.Spec.Ledger.BlockChain.html#unHashHeader"><span class="hs-identifier hs-var hs-var">unHashHeader</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.Keys.html#Hash"><span class="hs-identifier hs-type">Hash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030797"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#BHeader"><span class="hs-identifier hs-type">BHeader</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030797"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">}</span><span>
</span><span id="line-153"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680030458"><span id="local-6989586621680030460"><span id="local-6989586621680030462"><span class="annot"><span class="annottext">Int -&gt; HashHeader crypto -&gt; ShowS
[HashHeader crypto] -&gt; ShowS
HashHeader crypto -&gt; String
(Int -&gt; HashHeader crypto -&gt; ShowS)
-&gt; (HashHeader crypto -&gt; String)
-&gt; ([HashHeader crypto] -&gt; ShowS)
-&gt; Show (HashHeader crypto)
forall crypto. Int -&gt; HashHeader crypto -&gt; ShowS
forall crypto. [HashHeader crypto] -&gt; ShowS
forall crypto. HashHeader crypto -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [HashHeader crypto] -&gt; ShowS
$cshowList :: forall crypto. [HashHeader crypto] -&gt; ShowS
show :: HashHeader crypto -&gt; String
$cshow :: forall crypto. HashHeader crypto -&gt; String
showsPrec :: Int -&gt; HashHeader crypto -&gt; ShowS
$cshowsPrec :: forall crypto. Int -&gt; HashHeader crypto -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680030453"><span id="local-6989586621680030455"><span class="annot"><span class="annottext">HashHeader crypto -&gt; HashHeader crypto -&gt; Bool
(HashHeader crypto -&gt; HashHeader crypto -&gt; Bool)
-&gt; (HashHeader crypto -&gt; HashHeader crypto -&gt; Bool)
-&gt; Eq (HashHeader crypto)
forall crypto. HashHeader crypto -&gt; HashHeader crypto -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: HashHeader crypto -&gt; HashHeader crypto -&gt; Bool
$c/= :: forall crypto. HashHeader crypto -&gt; HashHeader crypto -&gt; Bool
== :: HashHeader crypto -&gt; HashHeader crypto -&gt; Bool
$c== :: forall crypto. HashHeader crypto -&gt; HashHeader crypto -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. HashHeader crypto -&gt; Rep (HashHeader crypto) x)
-&gt; (forall x. Rep (HashHeader crypto) x -&gt; HashHeader crypto)
-&gt; Generic (HashHeader crypto)
forall x. Rep (HashHeader crypto) x -&gt; HashHeader crypto
forall x. HashHeader crypto -&gt; Rep (HashHeader crypto) x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
forall crypto x. Rep (HashHeader crypto) x -&gt; HashHeader crypto
forall crypto x. HashHeader crypto -&gt; Rep (HashHeader crypto) x
$cto :: forall crypto x. Rep (HashHeader crypto) x -&gt; HashHeader crypto
$cfrom :: forall crypto x. HashHeader crypto -&gt; Rep (HashHeader crypto) x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680030434"><span id="local-6989586621680030436"><span id="local-6989586621680030438"><span id="local-6989586621680030440"><span id="local-6989586621680030442"><span id="local-6989586621680030444"><span id="local-6989586621680030446"><span class="annot"><span class="annottext">Eq (HashHeader crypto)
Eq (HashHeader crypto)
-&gt; (HashHeader crypto -&gt; HashHeader crypto -&gt; Ordering)
-&gt; (HashHeader crypto -&gt; HashHeader crypto -&gt; Bool)
-&gt; (HashHeader crypto -&gt; HashHeader crypto -&gt; Bool)
-&gt; (HashHeader crypto -&gt; HashHeader crypto -&gt; Bool)
-&gt; (HashHeader crypto -&gt; HashHeader crypto -&gt; Bool)
-&gt; (HashHeader crypto -&gt; HashHeader crypto -&gt; HashHeader crypto)
-&gt; (HashHeader crypto -&gt; HashHeader crypto -&gt; HashHeader crypto)
-&gt; Ord (HashHeader crypto)
HashHeader crypto -&gt; HashHeader crypto -&gt; Bool
HashHeader crypto -&gt; HashHeader crypto -&gt; Ordering
HashHeader crypto -&gt; HashHeader crypto -&gt; HashHeader crypto
forall crypto. Eq (HashHeader crypto)
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
forall crypto. HashHeader crypto -&gt; HashHeader crypto -&gt; Bool
forall crypto. HashHeader crypto -&gt; HashHeader crypto -&gt; Ordering
forall crypto.
HashHeader crypto -&gt; HashHeader crypto -&gt; HashHeader crypto
min :: HashHeader crypto -&gt; HashHeader crypto -&gt; HashHeader crypto
$cmin :: forall crypto.
HashHeader crypto -&gt; HashHeader crypto -&gt; HashHeader crypto
max :: HashHeader crypto -&gt; HashHeader crypto -&gt; HashHeader crypto
$cmax :: forall crypto.
HashHeader crypto -&gt; HashHeader crypto -&gt; HashHeader crypto
&gt;= :: HashHeader crypto -&gt; HashHeader crypto -&gt; Bool
$c&gt;= :: forall crypto. HashHeader crypto -&gt; HashHeader crypto -&gt; Bool
&gt; :: HashHeader crypto -&gt; HashHeader crypto -&gt; Bool
$c&gt; :: forall crypto. HashHeader crypto -&gt; HashHeader crypto -&gt; Bool
&lt;= :: HashHeader crypto -&gt; HashHeader crypto -&gt; Bool
$c&lt;= :: forall crypto. HashHeader crypto -&gt; HashHeader crypto -&gt; Bool
&lt; :: HashHeader crypto -&gt; HashHeader crypto -&gt; Bool
$c&lt; :: forall crypto. HashHeader crypto -&gt; HashHeader crypto -&gt; Bool
compare :: HashHeader crypto -&gt; HashHeader crypto -&gt; Ordering
$ccompare :: forall crypto. HashHeader crypto -&gt; HashHeader crypto -&gt; Ordering
$cp1Ord :: forall crypto. Eq (HashHeader crypto)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-154"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">newtype</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680030431"><span class="annot"><span class="annottext">HashHeader crypto -&gt; ()
(HashHeader crypto -&gt; ()) -&gt; NFData (HashHeader crypto)
forall crypto. HashHeader crypto -&gt; ()
forall a. (a -&gt; ()) -&gt; NFData a
rnf :: HashHeader crypto -&gt; ()
$crnf :: forall crypto. HashHeader crypto -&gt; ()
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">NFData</span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680030424"><span id="local-6989586621680030426"><span id="local-6989586621680030428"><span class="annot"><span class="annottext">Context -&gt; HashHeader crypto -&gt; IO (Maybe ThunkInfo)
Proxy (HashHeader crypto) -&gt; String
(Context -&gt; HashHeader crypto -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; HashHeader crypto -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy (HashHeader crypto) -&gt; String)
-&gt; NoThunks (HashHeader crypto)
forall crypto. Context -&gt; HashHeader crypto -&gt; IO (Maybe ThunkInfo)
forall crypto. Proxy (HashHeader crypto) -&gt; String
forall a.
(Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy a -&gt; String)
-&gt; NoThunks a
showTypeOf :: Proxy (HashHeader crypto) -&gt; String
$cshowTypeOf :: forall crypto. Proxy (HashHeader crypto) -&gt; String
wNoThunks :: Context -&gt; HashHeader crypto -&gt; IO (Maybe ThunkInfo)
$cwNoThunks :: forall crypto. Context -&gt; HashHeader crypto -&gt; IO (Maybe ThunkInfo)
noThunks :: Context -&gt; HashHeader crypto -&gt; IO (Maybe ThunkInfo)
$cnoThunks :: forall crypto. Context -&gt; HashHeader crypto -&gt; IO (Maybe ThunkInfo)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">NoThunks</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-155"></span><span>
</span><span id="line-156"></span><span id="local-6989586621680030416"><span id="local-6989586621680030418"><span id="local-6989586621680030420"><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621680030414"><span class="annot"><a href="#local-6989586621680030414"><span class="hs-keyword hs-type">newtype</span></a></span></span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">CC.Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030414"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-type">ToCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#HashHeader"><span class="hs-identifier hs-type">HashHeader</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030414"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-157"></span><span>
</span><span id="line-158"></span><span id="local-6989586621680030409"><span id="local-6989586621680030411"><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621680030407"><span class="annot"><a href="#local-6989586621680030407"><span class="hs-keyword hs-type">newtype</span></a></span></span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">CC.Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030407"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-type">FromCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#HashHeader"><span class="hs-identifier hs-type">HashHeader</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030407"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-159"></span><span>
</span><span id="line-160"></span><span id="local-6989586621680030405"><span id="local-6989586621680030406"></span></span><span class="hs-keyword">data</span><span> </span><span id="TxSeq"><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#TxSeq"><span class="hs-identifier hs-var">TxSeq</span></a></span></span><span> </span><span id="local-6989586621680030827"><span class="annot"><a href="#local-6989586621680030827"><span class="hs-identifier hs-type">era</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="TxSeq%27"><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#TxSeq%27"><span class="hs-identifier hs-var">TxSeq'</span></a></span></span><span>
</span><span id="line-161"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="txSeqTxns%27"><span class="annot"><span class="annottext">TxSeq era -&gt; StrictSeq (Tx era)
</span><a href="Shelley.Spec.Ledger.BlockChain.html#txSeqTxns%27"><span class="hs-identifier hs-var hs-var">txSeqTxns'</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/src"><span class="hs-identifier hs-type">StrictSeq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.Tx.html#Tx"><span class="hs-identifier hs-type">Tx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030827"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-162"></span><span>    </span><span id="txSeqBodyBytes"><span class="annot"><span class="annottext">TxSeq era -&gt; ByteString
</span><a href="Shelley.Spec.Ledger.BlockChain.html#txSeqBodyBytes"><span class="hs-identifier hs-var hs-var">txSeqBodyBytes</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">BSL.ByteString</span></span><span class="hs-special">,</span><span>
</span><span id="line-163"></span><span>    </span><span id="txSeqWitsBytes"><span class="annot"><span class="annottext">TxSeq era -&gt; ByteString
</span><a href="Shelley.Spec.Ledger.BlockChain.html#txSeqWitsBytes"><span class="hs-identifier hs-var hs-var">txSeqWitsBytes</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">BSL.ByteString</span></span><span class="hs-special">,</span><span>
</span><span id="line-164"></span><span>    </span><span id="txSeqMetadataBytes"><span class="annot"><span class="annottext">TxSeq era -&gt; ByteString
</span><a href="Shelley.Spec.Ledger.BlockChain.html#txSeqMetadataBytes"><span class="hs-identifier hs-var hs-var">txSeqMetadataBytes</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">BSL.ByteString</span></span><span>
</span><span id="line-165"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-166"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(forall x. TxSeq era -&gt; Rep (TxSeq era) x)
-&gt; (forall x. Rep (TxSeq era) x -&gt; TxSeq era)
-&gt; Generic (TxSeq era)
forall x. Rep (TxSeq era) x -&gt; TxSeq era
forall x. TxSeq era -&gt; Rep (TxSeq era) x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
forall era x. Rep (TxSeq era) x -&gt; TxSeq era
forall era x. TxSeq era -&gt; Rep (TxSeq era) x
$cto :: forall era x. Rep (TxSeq era) x -&gt; TxSeq era
$cfrom :: forall era x. TxSeq era -&gt; Rep (TxSeq era) x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-167"></span><span>
</span><span id="line-168"></span><span id="local-6989586621680030394"><span id="local-6989586621680030396"><span id="local-6989586621680030398"><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621680030393"><span class="hs-keyword">via</span><span>
</span><span id="line-169"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">AllowThunksIn</span></span><span>
</span><span id="line-170"></span><span>    </span><span class="hs-special">'</span><span class="hs-special">[</span><span> </span><span class="annot"><span class="hs-string">&quot;txSeqBodyBytes&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-171"></span><span>       </span><span class="annot"><span class="hs-string">&quot;txSeqWitsBytes&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-172"></span><span>       </span><span class="annot"><span class="hs-string">&quot;txSeqMetadataBytes&quot;</span></span><span>
</span><span id="line-173"></span><span>     </span><span class="hs-special">]</span><span>
</span><span id="line-174"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#TxSeq"><span class="hs-identifier hs-type">TxSeq</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030393"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-175"></span><span>  </span><span class="hs-keyword">instance</span><span>
</span><span id="line-176"></span><span>    </span><span class="annot"><a href="Cardano.Ledger.Shelley.html#ShelleyBased"><span class="hs-identifier hs-type">ShelleyBased</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030393"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NoThunks</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#TxSeq"><span class="hs-identifier hs-type">TxSeq</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030393"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-177"></span><span>
</span><span id="line-178"></span><span id="local-6989586621680030387"><span id="local-6989586621680030389"><span id="local-6989586621680030391"><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621680030386"><span class="annot"><a href="#local-6989586621680030386"><span class="hs-keyword hs-type">stock</span></a></span></span><span> </span><span class="hs-keyword">instance</span><span>
</span><span id="line-179"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Shelley.html#ShelleyBased"><span class="hs-identifier hs-type">ShelleyBased</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030386"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-180"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#TxSeq"><span class="hs-identifier hs-type">TxSeq</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030386"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-181"></span><span>
</span><span id="line-182"></span><span id="local-6989586621680030382"><span id="local-6989586621680030384"><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621680030381"><span class="annot"><a href="#local-6989586621680030381"><span class="hs-keyword hs-type">stock</span></a></span></span><span> </span><span class="hs-keyword">instance</span><span>
</span><span id="line-183"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Shelley.html#ShelleyBased"><span class="hs-identifier hs-type">ShelleyBased</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030381"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-184"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#TxSeq"><span class="hs-identifier hs-type">TxSeq</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030381"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-185"></span><span>
</span><span id="line-186"></span><span id="local-6989586621680030850"><span class="hs-keyword">pattern</span><span> </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#TxSeq"><span class="hs-identifier hs-type">TxSeq</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-187"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Era.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030850"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.Shelley.html#TxBodyConstraints"><span class="hs-identifier hs-type">Shelley.TxBodyConstraints</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030850"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-188"></span><span>  </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/src"><span class="hs-identifier hs-type">StrictSeq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.Tx.html#Tx"><span class="hs-identifier hs-type">Tx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030850"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-189"></span><span>  </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#TxSeq"><span class="hs-identifier hs-type">TxSeq</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030850"><span class="hs-identifier hs-type">era</span></a></span></span><span>
</span><span id="line-190"></span><span class="hs-keyword">pattern</span><span> </span><span id="%24bTxSeq"><span id="%24mTxSeq"><span id="TxSeq"><span class="annot"><span class="annottext">$bTxSeq :: StrictSeq (Tx era) -&gt; TxSeq era
$mTxSeq :: forall r era.
(Era era, TxBodyConstraints era) =&gt;
TxSeq era -&gt; (StrictSeq (Tx era) -&gt; r) -&gt; (Void# -&gt; r) -&gt; r
</span><a href="Shelley.Spec.Ledger.BlockChain.html#%24bTxSeq"><span class="hs-identifier hs-var hs-var hs-var hs-var">TxSeq</span></a></span></span></span></span><span> </span><span class="annot"><a href="#local-6989586621680030378"><span class="hs-identifier hs-type">xs</span></a></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-191"></span><span>  </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#TxSeq%27"><span class="hs-identifier hs-type">TxSeq'</span></a></span><span> </span><span id="local-6989586621680030378"><span class="annot"><a href="#local-6989586621680030378"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span>
</span><span id="line-192"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-193"></span><span>    </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#TxSeq"><span class="hs-identifier hs-var">TxSeq</span></a></span><span> </span><span id="local-6989586621680030377"><span class="annot"><span class="annottext">StrictSeq (Tx era)
</span><a href="#local-6989586621680030377"><span class="hs-identifier hs-var">txns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-194"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680030376"><span class="annot"><span class="annottext">serializeFoldable :: f ByteString -&gt; ByteString
</span><a href="#local-6989586621680030376"><span class="hs-identifier hs-var hs-var">serializeFoldable</span></a></span></span><span> </span><span id="local-6989586621680030375"><span class="annot"><span class="annottext">f ByteString
</span><a href="#local-6989586621680030375"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-195"></span><span>            </span><span class="annot"><span class="annottext">Encoding -&gt; ByteString
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">serializeEncoding</span></a></span><span> </span><span class="annot"><span class="annottext">(Encoding -&gt; ByteString) -&gt; Encoding -&gt; ByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-196"></span><span>              </span><span class="annot"><span class="annottext">(ByteString -&gt; Encoding) -&gt; f ByteString -&gt; Encoding
forall (f :: * -&gt; *) a.
Foldable f =&gt;
(a -&gt; Encoding) -&gt; f a -&gt; Encoding
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">encodeFoldableEncoder</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString -&gt; Encoding
</span><span class="hs-identifier hs-var">encodePreEncoded</span></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; Encoding)
-&gt; (ByteString -&gt; ByteString) -&gt; ByteString -&gt; Encoding
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; ByteString
</span><span class="hs-identifier hs-var">BSL.toStrict</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">f ByteString
</span><a href="#local-6989586621680030375"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-197"></span><span>          </span><span id="local-6989586621680030372"><span class="annot"><span class="annottext">metaChunk :: a -&gt; StrictMaybe a -&gt; Maybe Encoding
</span><a href="#local-6989586621680030372"><span class="hs-identifier hs-var hs-var">metaChunk</span></a></span></span><span> </span><span id="local-6989586621680030371"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680030371"><span class="hs-identifier hs-var">index</span></a></span></span><span> </span><span id="local-6989586621680030370"><span class="annot"><span class="annottext">StrictMaybe a
</span><a href="#local-6989586621680030370"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-198"></span><span>            </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621680030369"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680030369"><span class="hs-identifier hs-var">metadata</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-199"></span><span>                </span><span class="annot"><span class="annottext">a -&gt; Encoding
forall a. ToCBOR a =&gt; a -&gt; Encoding
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">toCBOR</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680030371"><span class="hs-identifier hs-var">index</span></a></span><span> </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; Encoding
forall a. ToCBOR a =&gt; a -&gt; Encoding
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">toCBOR</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680030369"><span class="hs-identifier hs-var">metadata</span></a></span><span>
</span><span id="line-200"></span><span>            </span><span class="hs-special">)</span><span>
</span><span id="line-201"></span><span>              </span><span class="annot"><span class="annottext">(a -&gt; Encoding) -&gt; Maybe a -&gt; Maybe Encoding
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">StrictMaybe a -&gt; Maybe a
forall a. StrictMaybe a -&gt; Maybe a
</span><a href="Shelley.Spec.Ledger.BaseTypes.html#strictMaybeToMaybe"><span class="hs-identifier hs-var">strictMaybeToMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">StrictMaybe a
</span><a href="#local-6989586621680030370"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-202"></span><span>       </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">TxSeq' :: forall era.
StrictSeq (Tx era)
-&gt; ByteString -&gt; ByteString -&gt; ByteString -&gt; TxSeq era
</span><a href="Shelley.Spec.Ledger.BlockChain.html#TxSeq%27"><span class="hs-identifier hs-type">TxSeq'</span></a></span><span>
</span><span id="line-203"></span><span>            </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">txSeqTxns' :: StrictSeq (Tx era)
</span><a href="Shelley.Spec.Ledger.BlockChain.html#txSeqTxns%27"><span class="hs-identifier hs-var">txSeqTxns'</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StrictSeq (Tx era)
</span><a href="#local-6989586621680030377"><span class="hs-identifier hs-var">txns</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-204"></span><span>              </span><span class="annot"><span class="annottext">txSeqBodyBytes :: ByteString
</span><a href="Shelley.Spec.Ledger.BlockChain.html#txSeqBodyBytes"><span class="hs-identifier hs-var">txSeqBodyBytes</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-205"></span><span>                </span><span class="annot"><span class="annottext">Encoding -&gt; ByteString
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">serializeEncoding</span></a></span><span> </span><span class="annot"><span class="annottext">(Encoding -&gt; ByteString)
-&gt; (StrictSeq (Tx era) -&gt; Encoding)
-&gt; StrictSeq (Tx era)
-&gt; ByteString
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Tx era -&gt; Encoding) -&gt; StrictSeq (Tx era) -&gt; Encoding
forall (f :: * -&gt; *) a.
Foldable f =&gt;
(a -&gt; Encoding) -&gt; f a -&gt; Encoding
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">encodeFoldableEncoder</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxBody era -&gt; Encoding
forall a. ToCBOR a =&gt; a -&gt; Encoding
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">toCBOR</span></a></span><span> </span><span class="annot"><span class="annottext">(TxBody era -&gt; Encoding)
-&gt; (Tx era -&gt; TxBody era) -&gt; Tx era -&gt; Encoding
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Tx era -&gt; TxBody era
forall era. Tx era -&gt; TxBodyConstraints era =&gt; TxBody era
</span><a href="Shelley.Spec.Ledger.Tx.html#_body"><span class="hs-identifier hs-var">_body</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(StrictSeq (Tx era) -&gt; ByteString)
-&gt; StrictSeq (Tx era) -&gt; ByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">StrictSeq (Tx era)
</span><a href="#local-6989586621680030377"><span class="hs-identifier hs-var">txns</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-206"></span><span>              </span><span class="annot"><span class="annottext">txSeqWitsBytes :: ByteString
</span><a href="Shelley.Spec.Ledger.BlockChain.html#txSeqWitsBytes"><span class="hs-identifier hs-var">txSeqWitsBytes</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StrictSeq ByteString -&gt; ByteString
forall (f :: * -&gt; *). Foldable f =&gt; f ByteString -&gt; ByteString
</span><a href="#local-6989586621680030376"><span class="hs-identifier hs-var">serializeFoldable</span></a></span><span> </span><span class="annot"><span class="annottext">(StrictSeq ByteString -&gt; ByteString)
-&gt; StrictSeq ByteString -&gt; ByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">WitnessSetHKD Identity era -&gt; ByteString
forall (f :: * -&gt; *) era. WitnessSetHKD f era -&gt; ByteString
</span><a href="Shelley.Spec.Ledger.Tx.html#txWitsBytes"><span class="hs-identifier hs-var hs-var">txWitsBytes</span></a></span><span> </span><span class="annot"><span class="annottext">(WitnessSetHKD Identity era -&gt; ByteString)
-&gt; (Tx era -&gt; WitnessSetHKD Identity era) -&gt; Tx era -&gt; ByteString
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Tx era -&gt; WitnessSetHKD Identity era
forall era. Tx era -&gt; TxBodyConstraints era =&gt; WitnessSet era
</span><a href="Shelley.Spec.Ledger.Tx.html#_witnessSet"><span class="hs-identifier hs-var">_witnessSet</span></a></span><span> </span><span class="annot"><span class="annottext">(Tx era -&gt; ByteString)
-&gt; StrictSeq (Tx era) -&gt; StrictSeq ByteString
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">StrictSeq (Tx era)
</span><a href="#local-6989586621680030377"><span class="hs-identifier hs-var">txns</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-207"></span><span>              </span><span class="annot"><span class="annottext">txSeqMetadataBytes :: ByteString
</span><a href="Shelley.Spec.Ledger.BlockChain.html#txSeqMetadataBytes"><span class="hs-identifier hs-var">txSeqMetadataBytes</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-208"></span><span>                </span><span class="annot"><span class="annottext">Encoding -&gt; ByteString
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">serializeEncoding</span></a></span><span> </span><span class="annot"><span class="annottext">(Encoding -&gt; ByteString)
-&gt; (StrictSeq (StrictMaybe MetaData) -&gt; Encoding)
-&gt; StrictSeq (StrictMaybe MetaData)
-&gt; ByteString
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Word -&gt; StrictMaybe MetaData -&gt; Maybe Encoding)
-&gt; StrictSeq (StrictMaybe MetaData) -&gt; Encoding
forall (f :: * -&gt; *) a.
Foldable f =&gt;
(Word -&gt; a -&gt; Maybe Encoding) -&gt; f a -&gt; Encoding
</span><a href="Shelley.Spec.Ledger.Serialization.html#encodeFoldableMapEncoder"><span class="hs-identifier hs-var">encodeFoldableMapEncoder</span></a></span><span> </span><span class="annot"><span class="annottext">Word -&gt; StrictMaybe MetaData -&gt; Maybe Encoding
forall a a.
(ToCBOR a, ToCBOR a) =&gt;
a -&gt; StrictMaybe a -&gt; Maybe Encoding
</span><a href="#local-6989586621680030372"><span class="hs-identifier hs-var">metaChunk</span></a></span><span> </span><span class="annot"><span class="annottext">(StrictSeq (StrictMaybe MetaData) -&gt; ByteString)
-&gt; StrictSeq (StrictMaybe MetaData) -&gt; ByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-209"></span><span>                  </span><span class="annot"><span class="annottext">Tx era -&gt; StrictMaybe MetaData
forall era. Tx era -&gt; TxBodyConstraints era =&gt; StrictMaybe MetaData
</span><a href="Shelley.Spec.Ledger.Tx.html#_metadata"><span class="hs-identifier hs-var">_metadata</span></a></span><span> </span><span class="annot"><span class="annottext">(Tx era -&gt; StrictMaybe MetaData)
-&gt; StrictSeq (Tx era) -&gt; StrictSeq (StrictMaybe MetaData)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">StrictSeq (Tx era)
</span><a href="#local-6989586621680030377"><span class="hs-identifier hs-var">txns</span></a></span><span>
</span><span id="line-210"></span><span>            </span><span class="hs-special">}</span><span>
</span><span id="line-211"></span><span>
</span><span id="line-212"></span><span class="hs-pragma">{-# COMPLETE</span><span> </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#TxSeq"><span class="hs-pragma hs-type">TxSeq</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-213"></span><span>
</span><span id="line-214"></span><span id="local-6989586621680030363"><span class="hs-keyword">instance</span><span>
</span><span id="line-215"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Era.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030363"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-216"></span><span>  </span><span class="annot"><a href="Shelley.Spec.Ledger.Serialization.html#ToCBORGroup"><span class="hs-identifier hs-type">ToCBORGroup</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#TxSeq"><span class="hs-identifier hs-type">TxSeq</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030363"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-217"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-218"></span><span>  </span><span id="local-6989586621680030356"><span class="annot"><span class="annottext">toCBORGroup :: TxSeq era -&gt; Encoding
</span><a href="Shelley.Spec.Ledger.Serialization.html#toCBORGroup"><span class="hs-identifier hs-var hs-var hs-var hs-var">toCBORGroup</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#TxSeq%27"><span class="hs-identifier hs-type">TxSeq'</span></a></span><span> </span><span class="annot"><span class="annottext">StrictSeq (Tx era)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680030354"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621680030354"><span class="hs-identifier hs-var">bodyBytes</span></a></span></span><span> </span><span id="local-6989586621680030353"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621680030353"><span class="hs-identifier hs-var">witsBytes</span></a></span></span><span> </span><span id="local-6989586621680030352"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621680030352"><span class="hs-identifier hs-var">metadataBytes</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-219"></span><span>    </span><span class="annot"><span class="annottext">ByteString -&gt; Encoding
</span><span class="hs-identifier hs-var">encodePreEncoded</span></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; Encoding) -&gt; ByteString -&gt; Encoding
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-220"></span><span>      </span><span class="annot"><span class="annottext">ByteString -&gt; ByteString
</span><span class="hs-identifier hs-var">BSL.toStrict</span></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; ByteString) -&gt; ByteString -&gt; ByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-221"></span><span>        </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621680030354"><span class="hs-identifier hs-var">bodyBytes</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; ByteString -&gt; ByteString
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621680030353"><span class="hs-identifier hs-var">witsBytes</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; ByteString -&gt; ByteString
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621680030352"><span class="hs-identifier hs-var">metadataBytes</span></a></span><span>
</span><span id="line-222"></span><span>  </span><span id="local-6989586621680030351"><span class="annot"><span class="annottext">encodedGroupSizeExpr :: (forall t. ToCBOR t =&gt; Proxy t -&gt; Size)
-&gt; Proxy (TxSeq era) -&gt; Size
</span><a href="Shelley.Spec.Ledger.Serialization.html#encodedGroupSizeExpr"><span class="hs-identifier hs-var hs-var hs-var hs-var">encodedGroupSizeExpr</span></a></span></span><span> </span><span id="local-6989586621680030349"><span class="annot"><span class="annottext">forall t. ToCBOR t =&gt; Proxy t -&gt; Size
</span><a href="#local-6989586621680030349"><span class="hs-identifier hs-var">size</span></a></span></span><span> </span><span id="local-6989586621680030348"><span class="annot"><span class="annottext">Proxy (TxSeq era)
</span><a href="#local-6989586621680030348"><span class="hs-identifier hs-var">_proxy</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-223"></span><span>    </span><span class="annot"><span class="annottext">(forall t. ToCBOR t =&gt; Proxy t -&gt; Size) -&gt; Proxy ByteString -&gt; Size
forall a.
ToCBOR a =&gt;
(forall t. ToCBOR t =&gt; Proxy t -&gt; Size) -&gt; Proxy a -&gt; Size
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">encodedSizeExpr</span></a></span><span> </span><span class="annot"><span class="annottext">forall t. ToCBOR t =&gt; Proxy t -&gt; Size
</span><a href="#local-6989586621680030349"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy ByteString
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span class="hs-special">)</span><span>
</span><span id="line-224"></span><span>      </span><span class="annot"><span class="annottext">Size -&gt; Size -&gt; Size
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">(forall t. ToCBOR t =&gt; Proxy t -&gt; Size) -&gt; Proxy ByteString -&gt; Size
forall a.
ToCBOR a =&gt;
(forall t. ToCBOR t =&gt; Proxy t -&gt; Size) -&gt; Proxy a -&gt; Size
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">encodedSizeExpr</span></a></span><span> </span><span class="annot"><span class="annottext">forall t. ToCBOR t =&gt; Proxy t -&gt; Size
</span><a href="#local-6989586621680030349"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy ByteString
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span class="hs-special">)</span><span>
</span><span id="line-225"></span><span>      </span><span class="annot"><span class="annottext">Size -&gt; Size -&gt; Size
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">(forall t. ToCBOR t =&gt; Proxy t -&gt; Size) -&gt; Proxy ByteString -&gt; Size
forall a.
ToCBOR a =&gt;
(forall t. ToCBOR t =&gt; Proxy t -&gt; Size) -&gt; Proxy a -&gt; Size
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">encodedSizeExpr</span></a></span><span> </span><span class="annot"><span class="annottext">forall t. ToCBOR t =&gt; Proxy t -&gt; Size
</span><a href="#local-6989586621680030349"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy ByteString
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span class="hs-special">)</span><span>
</span><span id="line-226"></span><span>  </span><span id="local-6989586621680030344"><span class="annot"><span class="annottext">listLen :: TxSeq era -&gt; Word
</span><a href="Shelley.Spec.Ledger.Serialization.html#listLen"><span class="hs-identifier hs-var hs-var hs-var hs-var">listLen</span></a></span></span><span> </span><span class="annot"><span class="annottext">TxSeq era
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">3</span></span><span>
</span><span id="line-227"></span><span>  </span><span id="local-6989586621680030342"><span class="annot"><span class="annottext">listLenBound :: Proxy (TxSeq era) -&gt; Word
</span><a href="Shelley.Spec.Ledger.Serialization.html#listLenBound"><span class="hs-identifier hs-var hs-var hs-var hs-var">listLenBound</span></a></span></span><span> </span><span class="annot"><span class="annottext">Proxy (TxSeq era)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">3</span></span></span><span>
</span><span id="line-228"></span><span>
</span><span id="line-229"></span><span class="hs-comment">-- | Hash of block body</span><span>
</span><span id="line-230"></span><span class="hs-keyword">newtype</span><span> </span><span id="HashBBody"><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#HashBBody"><span class="hs-identifier hs-var">HashBBody</span></a></span></span><span> </span><span id="local-6989586621680030791"><span class="annot"><a href="#local-6989586621680030791"><span class="hs-identifier hs-type">crypto</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="UnsafeHashBBody"><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#UnsafeHashBBody"><span class="hs-identifier hs-var">UnsafeHashBBody</span></a></span></span><span> </span><span class="hs-special">{</span><span id="unHashBody"><span class="annot"><span class="annottext">HashBBody crypto -&gt; Hash crypto EraIndependentBlockBody
</span><a href="Shelley.Spec.Ledger.BlockChain.html#unHashBody"><span class="hs-identifier hs-var hs-var">unHashBody</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.Keys.html#Hash"><span class="hs-identifier hs-type">Hash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030791"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="annot"><a href="Shelley.Spec.Ledger.Hashing.html#EraIndependentBlockBody"><span class="hs-identifier hs-type">EraIndependentBlockBody</span></a></span><span class="hs-special">)</span><span class="hs-special">}</span><span>
</span><span id="line-231"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680030333"><span id="local-6989586621680030335"><span id="local-6989586621680030337"><span class="annot"><span class="annottext">Int -&gt; HashBBody crypto -&gt; ShowS
[HashBBody crypto] -&gt; ShowS
HashBBody crypto -&gt; String
(Int -&gt; HashBBody crypto -&gt; ShowS)
-&gt; (HashBBody crypto -&gt; String)
-&gt; ([HashBBody crypto] -&gt; ShowS)
-&gt; Show (HashBBody crypto)
forall crypto. Int -&gt; HashBBody crypto -&gt; ShowS
forall crypto. [HashBBody crypto] -&gt; ShowS
forall crypto. HashBBody crypto -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [HashBBody crypto] -&gt; ShowS
$cshowList :: forall crypto. [HashBBody crypto] -&gt; ShowS
show :: HashBBody crypto -&gt; String
$cshow :: forall crypto. HashBBody crypto -&gt; String
showsPrec :: Int -&gt; HashBBody crypto -&gt; ShowS
$cshowsPrec :: forall crypto. Int -&gt; HashBBody crypto -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680030329"><span id="local-6989586621680030331"><span class="annot"><span class="annottext">HashBBody crypto -&gt; HashBBody crypto -&gt; Bool
(HashBBody crypto -&gt; HashBBody crypto -&gt; Bool)
-&gt; (HashBBody crypto -&gt; HashBBody crypto -&gt; Bool)
-&gt; Eq (HashBBody crypto)
forall crypto. HashBBody crypto -&gt; HashBBody crypto -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: HashBBody crypto -&gt; HashBBody crypto -&gt; Bool
$c/= :: forall crypto. HashBBody crypto -&gt; HashBBody crypto -&gt; Bool
== :: HashBBody crypto -&gt; HashBBody crypto -&gt; Bool
$c== :: forall crypto. HashBBody crypto -&gt; HashBBody crypto -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680030314"><span id="local-6989586621680030316"><span id="local-6989586621680030318"><span id="local-6989586621680030320"><span id="local-6989586621680030322"><span id="local-6989586621680030324"><span id="local-6989586621680030326"><span class="annot"><span class="annottext">Eq (HashBBody crypto)
Eq (HashBBody crypto)
-&gt; (HashBBody crypto -&gt; HashBBody crypto -&gt; Ordering)
-&gt; (HashBBody crypto -&gt; HashBBody crypto -&gt; Bool)
-&gt; (HashBBody crypto -&gt; HashBBody crypto -&gt; Bool)
-&gt; (HashBBody crypto -&gt; HashBBody crypto -&gt; Bool)
-&gt; (HashBBody crypto -&gt; HashBBody crypto -&gt; Bool)
-&gt; (HashBBody crypto -&gt; HashBBody crypto -&gt; HashBBody crypto)
-&gt; (HashBBody crypto -&gt; HashBBody crypto -&gt; HashBBody crypto)
-&gt; Ord (HashBBody crypto)
HashBBody crypto -&gt; HashBBody crypto -&gt; Bool
HashBBody crypto -&gt; HashBBody crypto -&gt; Ordering
HashBBody crypto -&gt; HashBBody crypto -&gt; HashBBody crypto
forall crypto. Eq (HashBBody crypto)
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
forall crypto. HashBBody crypto -&gt; HashBBody crypto -&gt; Bool
forall crypto. HashBBody crypto -&gt; HashBBody crypto -&gt; Ordering
forall crypto.
HashBBody crypto -&gt; HashBBody crypto -&gt; HashBBody crypto
min :: HashBBody crypto -&gt; HashBBody crypto -&gt; HashBBody crypto
$cmin :: forall crypto.
HashBBody crypto -&gt; HashBBody crypto -&gt; HashBBody crypto
max :: HashBBody crypto -&gt; HashBBody crypto -&gt; HashBBody crypto
$cmax :: forall crypto.
HashBBody crypto -&gt; HashBBody crypto -&gt; HashBBody crypto
&gt;= :: HashBBody crypto -&gt; HashBBody crypto -&gt; Bool
$c&gt;= :: forall crypto. HashBBody crypto -&gt; HashBBody crypto -&gt; Bool
&gt; :: HashBBody crypto -&gt; HashBBody crypto -&gt; Bool
$c&gt; :: forall crypto. HashBBody crypto -&gt; HashBBody crypto -&gt; Bool
&lt;= :: HashBBody crypto -&gt; HashBBody crypto -&gt; Bool
$c&lt;= :: forall crypto. HashBBody crypto -&gt; HashBBody crypto -&gt; Bool
&lt; :: HashBBody crypto -&gt; HashBBody crypto -&gt; Bool
$c&lt; :: forall crypto. HashBBody crypto -&gt; HashBBody crypto -&gt; Bool
compare :: HashBBody crypto -&gt; HashBBody crypto -&gt; Ordering
$ccompare :: forall crypto. HashBBody crypto -&gt; HashBBody crypto -&gt; Ordering
$cp1Ord :: forall crypto. Eq (HashBBody crypto)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-232"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">newtype</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680030308"><span id="local-6989586621680030310"><span id="local-6989586621680030312"><span class="annot"><span class="annottext">Context -&gt; HashBBody crypto -&gt; IO (Maybe ThunkInfo)
Proxy (HashBBody crypto) -&gt; String
(Context -&gt; HashBBody crypto -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; HashBBody crypto -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy (HashBBody crypto) -&gt; String)
-&gt; NoThunks (HashBBody crypto)
forall crypto. Context -&gt; HashBBody crypto -&gt; IO (Maybe ThunkInfo)
forall crypto. Proxy (HashBBody crypto) -&gt; String
forall a.
(Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy a -&gt; String)
-&gt; NoThunks a
showTypeOf :: Proxy (HashBBody crypto) -&gt; String
$cshowTypeOf :: forall crypto. Proxy (HashBBody crypto) -&gt; String
wNoThunks :: Context -&gt; HashBBody crypto -&gt; IO (Maybe ThunkInfo)
$cwNoThunks :: forall crypto. Context -&gt; HashBBody crypto -&gt; IO (Maybe ThunkInfo)
noThunks :: Context -&gt; HashBBody crypto -&gt; IO (Maybe ThunkInfo)
$cnoThunks :: forall crypto. Context -&gt; HashBBody crypto -&gt; IO (Maybe ThunkInfo)
</span><a href="#local-6989586621680030308"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">NoThunks</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-233"></span><span>
</span><span id="line-234"></span><span id="local-6989586621680030301"><span id="local-6989586621680030303"><span id="local-6989586621680030305"><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621680030300"><span class="annot"><a href="#local-6989586621680030300"><span class="hs-keyword hs-type">newtype</span></a></span></span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">CC.Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030300"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-type">ToCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#HashBBody"><span class="hs-identifier hs-type">HashBBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030300"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-235"></span><span>
</span><span id="line-236"></span><span id="local-6989586621680030295"><span id="local-6989586621680030297"><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621680030294"><span class="annot"><a href="#local-6989586621680030294"><span class="hs-keyword hs-type">newtype</span></a></span></span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">CC.Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030294"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-type">FromCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#HashBBody"><span class="hs-identifier hs-type">HashBBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030294"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-237"></span><span>
</span><span id="line-238"></span><span class="hs-comment">-- | Hash a given block header</span><span>
</span><span id="line-239"></span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#bhHash"><span class="hs-identifier hs-type">bhHash</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-240"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680030293"><span class="annot"><a href="#local-6989586621680030293"><span class="hs-identifier hs-type">crypto</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-241"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">CC.Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030293"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-242"></span><span>  </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#BHeader"><span class="hs-identifier hs-type">BHeader</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030293"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-243"></span><span>  </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#HashHeader"><span class="hs-identifier hs-type">HashHeader</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030293"><span class="hs-identifier hs-type">crypto</span></a></span><span>
</span><span id="line-244"></span><span id="bhHash"><span class="annot"><span class="annottext">bhHash :: BHeader crypto -&gt; HashHeader crypto
</span><a href="Shelley.Spec.Ledger.BlockChain.html#bhHash"><span class="hs-identifier hs-var hs-var">bhHash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Hash (HASH crypto) (BHeader crypto) -&gt; HashHeader crypto
forall crypto. Hash crypto (BHeader crypto) -&gt; HashHeader crypto
</span><a href="Shelley.Spec.Ledger.BlockChain.html#HashHeader"><span class="hs-identifier hs-var">HashHeader</span></a></span><span> </span><span class="annot"><span class="annottext">(Hash (HASH crypto) (BHeader crypto) -&gt; HashHeader crypto)
-&gt; (BHeader crypto -&gt; Hash (HASH crypto) (BHeader crypto))
-&gt; BHeader crypto
-&gt; HashHeader crypto
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(BHeader crypto -&gt; Encoding)
-&gt; BHeader crypto -&gt; Hash (HASH crypto) (BHeader crypto)
forall h a. HashAlgorithm h =&gt; (a -&gt; Encoding) -&gt; a -&gt; Hash h a
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-crypto-class-2.0.0/noopt/doc/html/cardano-crypto-class/src"><span class="hs-identifier hs-var">Hash.hashWithSerialiser</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Crypto.html#HASH"><span class="hs-identifier hs-type">CC.HASH</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030293"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">BHeader crypto -&gt; Encoding
forall a. ToCBOR a =&gt; a -&gt; Encoding
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">toCBOR</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-245"></span><span>
</span><span id="line-246"></span><span class="hs-comment">-- | Hash a given block body</span><span>
</span><span id="line-247"></span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#bbHash"><span class="hs-identifier hs-type">bbHash</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-248"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680030291"><span class="annot"><a href="#local-6989586621680030291"><span class="hs-identifier hs-type">era</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-249"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Era.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030291"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-250"></span><span>  </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#TxSeq"><span class="hs-identifier hs-type">TxSeq</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030291"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-251"></span><span>  </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#HashBBody"><span class="hs-identifier hs-type">HashBBody</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Era.html#Crypto"><span class="hs-identifier hs-type">Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030291"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-252"></span><span id="bbHash"><span class="annot"><span class="annottext">bbHash :: TxSeq era -&gt; HashBBody (Crypto era)
</span><a href="Shelley.Spec.Ledger.BlockChain.html#bbHash"><span class="hs-identifier hs-var hs-var">bbHash</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#TxSeq%27"><span class="hs-identifier hs-type">TxSeq'</span></a></span><span> </span><span class="annot"><span class="annottext">StrictSeq (Tx era)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680030290"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621680030290"><span class="hs-identifier hs-var">bodies</span></a></span></span><span> </span><span id="local-6989586621680030289"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621680030289"><span class="hs-identifier hs-var">wits</span></a></span></span><span> </span><span id="local-6989586621680030288"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621680030288"><span class="hs-identifier hs-var">md</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-253"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Hash (HASH (Crypto era)) EraIndependentBlockBody
-&gt; HashBBody (Crypto era)
forall crypto.
Hash crypto EraIndependentBlockBody -&gt; HashBBody crypto
</span><a href="Shelley.Spec.Ledger.BlockChain.html#UnsafeHashBBody"><span class="hs-identifier hs-var">UnsafeHashBBody</span></a></span><span> </span><span class="annot"><span class="annottext">(Hash (HASH (Crypto era)) EraIndependentBlockBody
 -&gt; HashBBody (Crypto era))
-&gt; (Hash (HASH (Crypto era)) ByteString
    -&gt; Hash (HASH (Crypto era)) EraIndependentBlockBody)
-&gt; Hash (HASH (Crypto era)) ByteString
-&gt; HashBBody (Crypto era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Hash (HASH (Crypto era)) ByteString
-&gt; Hash (HASH (Crypto era)) EraIndependentBlockBody
</span><span class="hs-identifier hs-var">coerce</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Hash (HASH (Crypto era)) ByteString -&gt; HashBBody (Crypto era))
-&gt; Hash (HASH (Crypto era)) ByteString -&gt; HashBBody (Crypto era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-254"></span><span>    </span><span class="annot"><span class="annottext">ByteString -&gt; Hash (HASH (Crypto era)) ByteString
</span><a href="#local-6989586621680030287"><span class="hs-identifier hs-var">hashStrict</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString -&gt; ByteString
</span><a href="#local-6989586621680030286"><span class="hs-identifier hs-var">hashPart</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621680030290"><span class="hs-identifier hs-var">bodies</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; ByteString -&gt; ByteString
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; ByteString
</span><a href="#local-6989586621680030286"><span class="hs-identifier hs-var">hashPart</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621680030289"><span class="hs-identifier hs-var">wits</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; ByteString -&gt; ByteString
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; ByteString
</span><a href="#local-6989586621680030286"><span class="hs-identifier hs-var">hashPart</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621680030288"><span class="hs-identifier hs-var">md</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-255"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-256"></span><span>    </span><span class="annot"><a href="#local-6989586621680030287"><span class="hs-identifier hs-type">hashStrict</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Shelley.Spec.Ledger.Keys.html#Hash"><span class="hs-identifier hs-type">Hash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Era.html#Crypto"><span class="hs-identifier hs-type">Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030291"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span>
</span><span id="line-257"></span><span>    </span><span id="local-6989586621680030287"><span class="annot"><span class="annottext">hashStrict :: ByteString -&gt; Hash (HASH (Crypto era)) ByteString
</span><a href="#local-6989586621680030287"><span class="hs-identifier hs-var hs-var">hashStrict</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; ByteString)
-&gt; ByteString -&gt; Hash (HASH (Crypto era)) ByteString
forall h a. HashAlgorithm h =&gt; (a -&gt; ByteString) -&gt; a -&gt; Hash h a
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-crypto-class-2.0.0/noopt/doc/html/cardano-crypto-class/src"><span class="hs-identifier hs-var">Hash.hashWith</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; ByteString
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-258"></span><span>    </span><span id="local-6989586621680030286"><span class="annot"><span class="annottext">hashPart :: ByteString -&gt; ByteString
</span><a href="#local-6989586621680030286"><span class="hs-identifier hs-var hs-var">hashPart</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Hash (HASH (Crypto era)) ByteString -&gt; ByteString
forall h a. Hash h a -&gt; ByteString
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-crypto-class-2.0.0/noopt/doc/html/cardano-crypto-class/src"><span class="hs-identifier hs-var">Hash.hashToBytes</span></a></span><span> </span><span class="annot"><span class="annottext">(Hash (HASH (Crypto era)) ByteString -&gt; ByteString)
-&gt; (ByteString -&gt; Hash (HASH (Crypto era)) ByteString)
-&gt; ByteString
-&gt; ByteString
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Hash (HASH (Crypto era)) ByteString
</span><a href="#local-6989586621680030287"><span class="hs-identifier hs-var">hashStrict</span></a></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; Hash (HASH (Crypto era)) ByteString)
-&gt; (ByteString -&gt; ByteString)
-&gt; ByteString
-&gt; Hash (HASH (Crypto era)) ByteString
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; ByteString
</span><span class="hs-identifier hs-var">BSL.toStrict</span></span><span>
</span><span id="line-259"></span><span>
</span><span id="line-260"></span><span class="hs-comment">-- | HashHeader to Nonce</span><span>
</span><span id="line-261"></span><span id="local-6989586621680030711"><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#hashHeaderToNonce"><span class="hs-identifier hs-type">hashHeaderToNonce</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#HashHeader"><span class="hs-identifier hs-type">HashHeader</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030711"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Shelley.Spec.Ledger.BaseTypes.html#Nonce"><span class="hs-identifier hs-type">Nonce</span></a></span></span><span>
</span><span id="line-262"></span><span id="hashHeaderToNonce"><span class="annot"><span class="annottext">hashHeaderToNonce :: HashHeader crypto -&gt; Nonce
</span><a href="Shelley.Spec.Ledger.BlockChain.html#hashHeaderToNonce"><span class="hs-identifier hs-var hs-var">hashHeaderToNonce</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Hash Blake2b_256 Nonce -&gt; Nonce
</span><a href="Shelley.Spec.Ledger.BaseTypes.html#Nonce"><span class="hs-identifier hs-var">Nonce</span></a></span><span> </span><span class="annot"><span class="annottext">(Hash Blake2b_256 Nonce -&gt; Nonce)
-&gt; (HashHeader crypto -&gt; Hash Blake2b_256 Nonce)
-&gt; HashHeader crypto
-&gt; Nonce
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">HashHeader crypto -&gt; Hash Blake2b_256 Nonce
</span><span class="hs-identifier hs-var">coerce</span></span><span>
</span><span id="line-263"></span><span>
</span><span id="line-264"></span><span id="local-6989586621680030280"><span id="local-6989586621680030281"></span></span><span class="hs-keyword">data</span><span> </span><span id="BHeader"><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#BHeader"><span class="hs-identifier hs-var">BHeader</span></a></span></span><span> </span><span id="local-6989586621680030757"><span class="annot"><a href="#local-6989586621680030757"><span class="hs-identifier hs-type">crypto</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="BHeader%27"><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#BHeader%27"><span class="hs-identifier hs-var">BHeader'</span></a></span></span><span>
</span><span id="line-265"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="bHeaderBody%27"><span class="annot"><span class="annottext">BHeader crypto -&gt; BHBody crypto
</span><a href="Shelley.Spec.Ledger.BlockChain.html#bHeaderBody%27"><span class="hs-identifier hs-var hs-var">bHeaderBody'</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#BHBody"><span class="hs-identifier hs-type">BHBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030757"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-266"></span><span>    </span><span id="bHeaderSig%27"><span class="annot"><span class="annottext">BHeader crypto -&gt; SignedKES crypto (BHBody crypto)
</span><a href="Shelley.Spec.Ledger.BlockChain.html#bHeaderSig%27"><span class="hs-identifier hs-var hs-var">bHeaderSig'</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.Keys.html#SignedKES"><span class="hs-identifier hs-type">SignedKES</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030757"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#BHBody"><span class="hs-identifier hs-type">BHBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030757"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-267"></span><span>    </span><span id="bHeaderBytes"><span class="annot"><span class="annottext">BHeader crypto -&gt; ByteString
</span><a href="Shelley.Spec.Ledger.BlockChain.html#bHeaderBytes"><span class="hs-identifier hs-var hs-var">bHeaderBytes</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">BSL.ByteString</span></span><span>
</span><span id="line-268"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-269"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(forall x. BHeader crypto -&gt; Rep (BHeader crypto) x)
-&gt; (forall x. Rep (BHeader crypto) x -&gt; BHeader crypto)
-&gt; Generic (BHeader crypto)
forall x. Rep (BHeader crypto) x -&gt; BHeader crypto
forall x. BHeader crypto -&gt; Rep (BHeader crypto) x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
forall crypto x. Rep (BHeader crypto) x -&gt; BHeader crypto
forall crypto x. BHeader crypto -&gt; Rep (BHeader crypto) x
$cto :: forall crypto x. Rep (BHeader crypto) x -&gt; BHeader crypto
$cfrom :: forall crypto x. BHeader crypto -&gt; Rep (BHeader crypto) x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-270"></span><span>
</span><span id="line-271"></span><span id="local-6989586621680030268"><span id="local-6989586621680030270"><span id="local-6989586621680030272"><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621680030267"><span class="hs-keyword">via</span><span> </span><span class="annot"><span class="hs-identifier hs-type">AllowThunksIn</span></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="annot"><span class="hs-string">&quot;bHeaderBytes&quot;</span></span><span class="hs-special">]</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#BHeader"><span class="hs-identifier hs-type">BHeader</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030267"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">CC.Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030267"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NoThunks</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#BHeader"><span class="hs-identifier hs-type">BHeader</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030267"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-272"></span><span>
</span><span id="line-273"></span><span id="local-6989586621680030262"><span id="local-6989586621680030264"><span id="local-6989586621680030266"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">CC.Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030266"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#BHeader"><span class="hs-identifier hs-type">BHeader</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030266"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-274"></span><span>
</span><span id="line-275"></span><span id="local-6989586621680030255"><span id="local-6989586621680030257"><span id="local-6989586621680030259"><span id="local-6989586621680030261"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">CC.Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030261"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#BHeader"><span class="hs-identifier hs-type">BHeader</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030261"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-276"></span><span>
</span><span id="line-277"></span><span id="local-6989586621680030767"><span class="hs-keyword">pattern</span><span> </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#BHeader"><span class="hs-identifier hs-type">BHeader</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">CC.Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030767"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#BHBody"><span class="hs-identifier hs-type">BHBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030767"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Shelley.Spec.Ledger.Keys.html#SignedKES"><span class="hs-identifier hs-type">SignedKES</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030767"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#BHBody"><span class="hs-identifier hs-type">BHBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030767"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#BHeader"><span class="hs-identifier hs-type">BHeader</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030767"><span class="hs-identifier hs-type">crypto</span></a></span></span><span>
</span><span id="line-278"></span><span class="hs-keyword">pattern</span><span> </span><span id="%24bBHeader"><span id="%24mBHeader"><span id="BHeader"><span class="annot"><span class="annottext">$bBHeader :: BHBody crypto -&gt; SignedKES crypto (BHBody crypto) -&gt; BHeader crypto
$mBHeader :: forall r crypto.
Crypto crypto =&gt;
BHeader crypto
-&gt; (BHBody crypto -&gt; SignedKES crypto (BHBody crypto) -&gt; r)
-&gt; (Void# -&gt; r)
-&gt; r
</span><a href="Shelley.Spec.Ledger.BlockChain.html#%24bBHeader"><span class="hs-identifier hs-var hs-var hs-var hs-var">BHeader</span></a></span></span></span></span><span> </span><span class="annot"><a href="#local-6989586621680030252"><span class="hs-identifier hs-type">bHeaderBody'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030251"><span class="hs-identifier hs-type">bHeaderSig'</span></a></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-279"></span><span>  </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#BHeader%27"><span class="hs-identifier hs-type">BHeader'</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621680030252"><span class="annot"><a href="#local-6989586621680030252"><span class="hs-identifier hs-var hs-var">bHeaderBody'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680030251"><span class="annot"><a href="#local-6989586621680030251"><span class="hs-identifier hs-var hs-var">bHeaderSig'</span></a></span></span><span class="hs-special">}</span><span>
</span><span id="line-280"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-281"></span><span>    </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#BHeader"><span class="hs-identifier hs-var">BHeader</span></a></span><span> </span><span id="local-6989586621680030250"><span class="annot"><span class="annottext">BHBody crypto
</span><a href="#local-6989586621680030250"><span class="hs-identifier hs-var">body</span></a></span></span><span> </span><span id="local-6989586621680030249"><span class="annot"><span class="annottext">SignedKES crypto (BHBody crypto)
</span><a href="#local-6989586621680030249"><span class="hs-identifier hs-var">sig</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-282"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680030248"><span class="annot"><span class="annottext">mkBytes :: a -&gt; SignedKES v a -&gt; ByteString
</span><a href="#local-6989586621680030248"><span class="hs-identifier hs-var hs-var">mkBytes</span></a></span></span><span> </span><span id="local-6989586621680030247"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680030247"><span class="hs-identifier hs-var">bhBody</span></a></span></span><span> </span><span id="local-6989586621680030246"><span class="annot"><span class="annottext">SignedKES v a
</span><a href="#local-6989586621680030246"><span class="hs-identifier hs-var">kESig</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-283"></span><span>            </span><span class="annot"><span class="annottext">Encoding -&gt; ByteString
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">serializeEncoding</span></a></span><span> </span><span class="annot"><span class="annottext">(Encoding -&gt; ByteString) -&gt; Encoding -&gt; ByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-284"></span><span>              </span><span class="annot"><span class="annottext">Word -&gt; Encoding
</span><span class="hs-identifier hs-var">encodeListLen</span></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">2</span></span><span>
</span><span id="line-285"></span><span>                </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; Encoding
forall a. ToCBOR a =&gt; a -&gt; Encoding
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">toCBOR</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680030247"><span class="hs-identifier hs-var">bhBody</span></a></span><span>
</span><span id="line-286"></span><span>                </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">SignedKES v a -&gt; Encoding
forall v a. KESAlgorithm v =&gt; SignedKES v a -&gt; Encoding
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-crypto-class-2.0.0/noopt/doc/html/cardano-crypto-class/src"><span class="hs-identifier hs-var">encodeSignedKES</span></a></span><span> </span><span class="annot"><span class="annottext">SignedKES v a
</span><a href="#local-6989586621680030246"><span class="hs-identifier hs-var">kESig</span></a></span><span>
</span><span id="line-287"></span><span>       </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">BHBody crypto
-&gt; SignedKES crypto (BHBody crypto) -&gt; ByteString -&gt; BHeader crypto
forall crypto.
BHBody crypto
-&gt; SignedKES crypto (BHBody crypto) -&gt; ByteString -&gt; BHeader crypto
</span><a href="Shelley.Spec.Ledger.BlockChain.html#BHeader%27"><span class="hs-identifier hs-var">BHeader'</span></a></span><span> </span><span class="annot"><span class="annottext">BHBody crypto
</span><a href="#local-6989586621680030250"><span class="hs-identifier hs-var">body</span></a></span><span> </span><span class="annot"><span class="annottext">SignedKES crypto (BHBody crypto)
</span><a href="#local-6989586621680030249"><span class="hs-identifier hs-var">sig</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BHBody crypto -&gt; SignedKES crypto (BHBody crypto) -&gt; ByteString
forall a v a.
(ToCBOR a, KESAlgorithm v) =&gt;
a -&gt; SignedKES v a -&gt; ByteString
</span><a href="#local-6989586621680030248"><span class="hs-identifier hs-var">mkBytes</span></a></span><span> </span><span class="annot"><span class="annottext">BHBody crypto
</span><a href="#local-6989586621680030250"><span class="hs-identifier hs-var">body</span></a></span><span> </span><span class="annot"><span class="annottext">SignedKES crypto (BHBody crypto)
</span><a href="#local-6989586621680030249"><span class="hs-identifier hs-var">sig</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-288"></span><span>
</span><span id="line-289"></span><span class="hs-pragma">{-# COMPLETE</span><span> </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#BHeader"><span class="hs-pragma hs-type">BHeader</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-290"></span><span>
</span><span id="line-291"></span><span id="local-6989586621680030245"><span class="hs-keyword">instance</span><span>
</span><span id="line-292"></span><span>  </span><span id="local-6989586621680030240"><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">CC.Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030245"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-293"></span><span>  </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-type">ToCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#BHeader"><span class="hs-identifier hs-type">BHeader</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030245"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-294"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-295"></span><span>  </span><span id="local-6989586621680030239"><span class="annot"><span class="annottext">toCBOR :: BHeader crypto -&gt; Encoding
</span><a href="#local-6989586621680030239"><span class="hs-identifier hs-var hs-var hs-var hs-var">toCBOR</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#BHeader%27"><span class="hs-identifier hs-type">BHeader'</span></a></span><span> </span><span class="annot"><span class="annottext">BHBody crypto
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SignedKES crypto (BHBody crypto)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680030238"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621680030238"><span class="hs-identifier hs-var">bytes</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Encoding
</span><span class="hs-identifier hs-var">encodePreEncoded</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString -&gt; ByteString
</span><span class="hs-identifier hs-var">BSL.toStrict</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621680030238"><span class="hs-identifier hs-var">bytes</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-296"></span><span>  </span><span id="local-6989586621680030237"><span class="annot"><span class="annottext">encodedSizeExpr :: (forall t. ToCBOR t =&gt; Proxy t -&gt; Size)
-&gt; Proxy (BHeader crypto) -&gt; Size
</span><a href="#local-6989586621680030237"><span class="hs-identifier hs-var hs-var hs-var hs-var">encodedSizeExpr</span></a></span></span><span> </span><span id="local-6989586621680030236"><span class="annot"><span class="annottext">forall t. ToCBOR t =&gt; Proxy t -&gt; Size
</span><a href="#local-6989586621680030236"><span class="hs-identifier hs-var">size</span></a></span></span><span> </span><span id="local-6989586621680030235"><span class="annot"><span class="annottext">Proxy (BHeader crypto)
</span><a href="#local-6989586621680030235"><span class="hs-identifier hs-var">proxy</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-297"></span><span>    </span><span class="annot"><span class="annottext">Size
</span><span class="hs-number">1</span></span><span>
</span><span id="line-298"></span><span>      </span><span class="annot"><span class="annottext">Size -&gt; Size -&gt; Size
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">(forall t. ToCBOR t =&gt; Proxy t -&gt; Size)
-&gt; Proxy (BHBody crypto) -&gt; Size
forall a.
ToCBOR a =&gt;
(forall t. ToCBOR t =&gt; Proxy t -&gt; Size) -&gt; Proxy a -&gt; Size
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">encodedSizeExpr</span></a></span><span> </span><span class="annot"><span class="annottext">forall t. ToCBOR t =&gt; Proxy t -&gt; Size
</span><a href="#local-6989586621680030236"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BHeader crypto -&gt; BHBody crypto
forall crypto. BHeader crypto -&gt; BHBody crypto
</span><a href="Shelley.Spec.Ledger.BlockChain.html#bHeaderBody%27"><span class="hs-identifier hs-var hs-var">bHeaderBody'</span></a></span><span> </span><span class="annot"><span class="annottext">(BHeader crypto -&gt; BHBody crypto)
-&gt; Proxy (BHeader crypto) -&gt; Proxy (BHBody crypto)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Proxy (BHeader crypto)
</span><a href="#local-6989586621680030235"><span class="hs-identifier hs-var">proxy</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-299"></span><span>      </span><span class="annot"><span class="annottext">Size -&gt; Size -&gt; Size
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Proxy (SigKES (KES crypto)) -&gt; Size
forall v. KESAlgorithm v =&gt; Proxy (SigKES v) -&gt; Size
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-crypto-class-2.0.0/noopt/doc/html/cardano-crypto-class/src"><span class="hs-identifier hs-var">KES.encodedSigKESSizeExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">SignedKES crypto (BHBody crypto) -&gt; SigKES (KES crypto)
forall v a. SignedKES v a -&gt; SigKES v
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-crypto-class-2.0.0/noopt/doc/html/cardano-crypto-class/src"><span class="hs-identifier hs-var hs-var">KES.getSig</span></a></span><span> </span><span class="annot"><span class="annottext">(SignedKES crypto (BHBody crypto) -&gt; SigKES (KES crypto))
-&gt; (BHeader crypto -&gt; SignedKES crypto (BHBody crypto))
-&gt; BHeader crypto
-&gt; SigKES (KES crypto)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">BHeader crypto -&gt; SignedKES crypto (BHBody crypto)
forall crypto. BHeader crypto -&gt; SignedKES crypto (BHBody crypto)
</span><a href="Shelley.Spec.Ledger.BlockChain.html#bHeaderSig%27"><span class="hs-identifier hs-var hs-var">bHeaderSig'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(BHeader crypto -&gt; SigKES (KES crypto))
-&gt; Proxy (BHeader crypto) -&gt; Proxy (SigKES (KES crypto))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Proxy (BHeader crypto)
</span><a href="#local-6989586621680030235"><span class="hs-identifier hs-var">proxy</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-300"></span><span>
</span><span id="line-301"></span><span id="local-6989586621680030232"><span class="hs-keyword">instance</span><span>
</span><span id="line-302"></span><span>  </span><span id="local-6989586621680030228"><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">CC.Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030232"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-303"></span><span>  </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-type">FromCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-type">Annotator</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#BHeader"><span class="hs-identifier hs-type">BHeader</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030232"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-304"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-305"></span><span>  </span><span id="local-6989586621680030227"><span class="annot"><span class="annottext">fromCBOR :: Decoder s (Annotator (BHeader crypto))
</span><a href="#local-6989586621680030227"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromCBOR</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Decoder s (Annotator (ByteString -&gt; BHeader crypto))
-&gt; Decoder s (Annotator (BHeader crypto))
forall s a.
Decoder s (Annotator (ByteString -&gt; a)) -&gt; Decoder s (Annotator a)
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">annotatorSlice</span></a></span><span> </span><span class="annot"><span class="annottext">(Decoder s (Annotator (ByteString -&gt; BHeader crypto))
 -&gt; Decoder s (Annotator (BHeader crypto)))
-&gt; Decoder s (Annotator (ByteString -&gt; BHeader crypto))
-&gt; Decoder s (Annotator (BHeader crypto))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-306"></span><span>    </span><span class="annot"><span class="annottext">Text
-&gt; (Annotator (ByteString -&gt; BHeader crypto) -&gt; Int)
-&gt; Decoder s (Annotator (ByteString -&gt; BHeader crypto))
-&gt; Decoder s (Annotator (ByteString -&gt; BHeader crypto))
forall a s. Text -&gt; (a -&gt; Int) -&gt; Decoder s a -&gt; Decoder s a
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">decodeRecordNamed</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Header&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Annotator (ByteString -&gt; BHeader crypto) -&gt; Int
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Decoder s (Annotator (ByteString -&gt; BHeader crypto))
 -&gt; Decoder s (Annotator (ByteString -&gt; BHeader crypto)))
-&gt; Decoder s (Annotator (ByteString -&gt; BHeader crypto))
-&gt; Decoder s (Annotator (ByteString -&gt; BHeader crypto))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-307"></span><span>      </span><span id="local-6989586621680030225"><span class="annot"><span class="annottext">BHBody crypto
</span><a href="#local-6989586621680030225"><span class="hs-identifier hs-var">bhb</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decoder s (BHBody crypto)
forall a s. FromCBOR a =&gt; Decoder s a
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">fromCBOR</span></a></span><span>
</span><span id="line-308"></span><span>      </span><span id="local-6989586621680030224"><span class="annot"><span class="annottext">SignedKES (KES crypto) (BHBody crypto)
</span><a href="#local-6989586621680030224"><span class="hs-identifier hs-var">sig</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decoder s (SignedKES (KES crypto) (BHBody crypto))
forall v s a. KESAlgorithm v =&gt; Decoder s (SignedKES v a)
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-crypto-class-2.0.0/noopt/doc/html/cardano-crypto-class/src"><span class="hs-identifier hs-var">decodeSignedKES</span></a></span><span>
</span><span id="line-309"></span><span>      </span><span class="annot"><span class="annottext">Annotator (ByteString -&gt; BHeader crypto)
-&gt; Decoder s (Annotator (ByteString -&gt; BHeader crypto))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Annotator (ByteString -&gt; BHeader crypto)
 -&gt; Decoder s (Annotator (ByteString -&gt; BHeader crypto)))
-&gt; Annotator (ByteString -&gt; BHeader crypto)
-&gt; Decoder s (Annotator (ByteString -&gt; BHeader crypto))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">BHBody crypto
-&gt; SignedKES (KES crypto) (BHBody crypto)
-&gt; ByteString
-&gt; BHeader crypto
forall crypto.
BHBody crypto
-&gt; SignedKES crypto (BHBody crypto) -&gt; ByteString -&gt; BHeader crypto
</span><a href="Shelley.Spec.Ledger.BlockChain.html#BHeader%27"><span class="hs-identifier hs-var">BHeader'</span></a></span><span> </span><span class="annot"><span class="annottext">(BHBody crypto
 -&gt; SignedKES (KES crypto) (BHBody crypto)
 -&gt; ByteString
 -&gt; BHeader crypto)
-&gt; Annotator (BHBody crypto)
-&gt; Annotator
     (SignedKES (KES crypto) (BHBody crypto)
      -&gt; ByteString -&gt; BHeader crypto)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">BHBody crypto -&gt; Annotator (BHBody crypto)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">BHBody crypto
</span><a href="#local-6989586621680030225"><span class="hs-identifier hs-var">bhb</span></a></span><span> </span><span class="annot"><span class="annottext">Annotator
  (SignedKES (KES crypto) (BHBody crypto)
   -&gt; ByteString -&gt; BHeader crypto)
-&gt; Annotator (SignedKES (KES crypto) (BHBody crypto))
-&gt; Annotator (ByteString -&gt; BHeader crypto)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">SignedKES (KES crypto) (BHBody crypto)
-&gt; Annotator (SignedKES (KES crypto) (BHBody crypto))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SignedKES (KES crypto) (BHBody crypto)
</span><a href="#local-6989586621680030224"><span class="hs-identifier hs-var">sig</span></a></span></span><span>
</span><span id="line-310"></span><span>
</span><span id="line-311"></span><span class="hs-comment">-- | The previous hash of a block</span><span>
</span><span id="line-312"></span><span id="local-6989586621680030222"><span id="local-6989586621680030223"></span></span><span class="hs-keyword">data</span><span> </span><span id="PrevHash"><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#PrevHash"><span class="hs-identifier hs-var">PrevHash</span></a></span></span><span> </span><span id="local-6989586621680030713"><span class="annot"><a href="#local-6989586621680030713"><span class="hs-identifier hs-type">crypto</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="GenesisHash"><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#GenesisHash"><span class="hs-identifier hs-var">GenesisHash</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="BlockHash"><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#BlockHash"><span class="hs-identifier hs-var">BlockHash</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#HashHeader"><span class="hs-identifier hs-type">HashHeader</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030713"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-313"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680030214"><span id="local-6989586621680030216"><span id="local-6989586621680030218"><span class="annot"><span class="annottext">Int -&gt; PrevHash crypto -&gt; ShowS
[PrevHash crypto] -&gt; ShowS
PrevHash crypto -&gt; String
(Int -&gt; PrevHash crypto -&gt; ShowS)
-&gt; (PrevHash crypto -&gt; String)
-&gt; ([PrevHash crypto] -&gt; ShowS)
-&gt; Show (PrevHash crypto)
forall crypto. Int -&gt; PrevHash crypto -&gt; ShowS
forall crypto. [PrevHash crypto] -&gt; ShowS
forall crypto. PrevHash crypto -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [PrevHash crypto] -&gt; ShowS
$cshowList :: forall crypto. [PrevHash crypto] -&gt; ShowS
show :: PrevHash crypto -&gt; String
$cshow :: forall crypto. PrevHash crypto -&gt; String
showsPrec :: Int -&gt; PrevHash crypto -&gt; ShowS
$cshowsPrec :: forall crypto. Int -&gt; PrevHash crypto -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680030210"><span id="local-6989586621680030212"><span class="annot"><span class="annottext">PrevHash crypto -&gt; PrevHash crypto -&gt; Bool
(PrevHash crypto -&gt; PrevHash crypto -&gt; Bool)
-&gt; (PrevHash crypto -&gt; PrevHash crypto -&gt; Bool)
-&gt; Eq (PrevHash crypto)
forall crypto. PrevHash crypto -&gt; PrevHash crypto -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: PrevHash crypto -&gt; PrevHash crypto -&gt; Bool
$c/= :: forall crypto. PrevHash crypto -&gt; PrevHash crypto -&gt; Bool
== :: PrevHash crypto -&gt; PrevHash crypto -&gt; Bool
$c== :: forall crypto. PrevHash crypto -&gt; PrevHash crypto -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. PrevHash crypto -&gt; Rep (PrevHash crypto) x)
-&gt; (forall x. Rep (PrevHash crypto) x -&gt; PrevHash crypto)
-&gt; Generic (PrevHash crypto)
forall x. Rep (PrevHash crypto) x -&gt; PrevHash crypto
forall x. PrevHash crypto -&gt; Rep (PrevHash crypto) x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
forall crypto x. Rep (PrevHash crypto) x -&gt; PrevHash crypto
forall crypto x. PrevHash crypto -&gt; Rep (PrevHash crypto) x
$cto :: forall crypto x. Rep (PrevHash crypto) x -&gt; PrevHash crypto
$cfrom :: forall crypto x. PrevHash crypto -&gt; Rep (PrevHash crypto) x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680030193"><span id="local-6989586621680030195"><span id="local-6989586621680030197"><span id="local-6989586621680030199"><span id="local-6989586621680030201"><span id="local-6989586621680030203"><span id="local-6989586621680030205"><span class="annot"><span class="annottext">Eq (PrevHash crypto)
Eq (PrevHash crypto)
-&gt; (PrevHash crypto -&gt; PrevHash crypto -&gt; Ordering)
-&gt; (PrevHash crypto -&gt; PrevHash crypto -&gt; Bool)
-&gt; (PrevHash crypto -&gt; PrevHash crypto -&gt; Bool)
-&gt; (PrevHash crypto -&gt; PrevHash crypto -&gt; Bool)
-&gt; (PrevHash crypto -&gt; PrevHash crypto -&gt; Bool)
-&gt; (PrevHash crypto -&gt; PrevHash crypto -&gt; PrevHash crypto)
-&gt; (PrevHash crypto -&gt; PrevHash crypto -&gt; PrevHash crypto)
-&gt; Ord (PrevHash crypto)
PrevHash crypto -&gt; PrevHash crypto -&gt; Bool
PrevHash crypto -&gt; PrevHash crypto -&gt; Ordering
PrevHash crypto -&gt; PrevHash crypto -&gt; PrevHash crypto
forall crypto. Eq (PrevHash crypto)
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
forall crypto. PrevHash crypto -&gt; PrevHash crypto -&gt; Bool
forall crypto. PrevHash crypto -&gt; PrevHash crypto -&gt; Ordering
forall crypto.
PrevHash crypto -&gt; PrevHash crypto -&gt; PrevHash crypto
min :: PrevHash crypto -&gt; PrevHash crypto -&gt; PrevHash crypto
$cmin :: forall crypto.
PrevHash crypto -&gt; PrevHash crypto -&gt; PrevHash crypto
max :: PrevHash crypto -&gt; PrevHash crypto -&gt; PrevHash crypto
$cmax :: forall crypto.
PrevHash crypto -&gt; PrevHash crypto -&gt; PrevHash crypto
&gt;= :: PrevHash crypto -&gt; PrevHash crypto -&gt; Bool
$c&gt;= :: forall crypto. PrevHash crypto -&gt; PrevHash crypto -&gt; Bool
&gt; :: PrevHash crypto -&gt; PrevHash crypto -&gt; Bool
$c&gt; :: forall crypto. PrevHash crypto -&gt; PrevHash crypto -&gt; Bool
&lt;= :: PrevHash crypto -&gt; PrevHash crypto -&gt; Bool
$c&lt;= :: forall crypto. PrevHash crypto -&gt; PrevHash crypto -&gt; Bool
&lt; :: PrevHash crypto -&gt; PrevHash crypto -&gt; Bool
$c&lt; :: forall crypto. PrevHash crypto -&gt; PrevHash crypto -&gt; Bool
compare :: PrevHash crypto -&gt; PrevHash crypto -&gt; Ordering
$ccompare :: forall crypto. PrevHash crypto -&gt; PrevHash crypto -&gt; Ordering
$cp1Ord :: forall crypto. Eq (PrevHash crypto)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-314"></span><span>
</span><span id="line-315"></span><span id="local-6989586621680030192"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680030186"><span id="local-6989586621680030188"><span id="local-6989586621680030190"><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">CC.Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030192"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NoThunks</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#PrevHash"><span class="hs-identifier hs-type">PrevHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030192"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-316"></span><span>
</span><span id="line-317"></span><span id="local-6989586621680030185"><span class="hs-keyword">instance</span><span>
</span><span id="line-318"></span><span>  </span><span id="local-6989586621680030180"><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">CC.Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030185"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-319"></span><span>  </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-type">ToCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#PrevHash"><span class="hs-identifier hs-type">PrevHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030185"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-320"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-321"></span><span>  </span><span id="local-6989586621680030179"><span class="annot"><span class="annottext">toCBOR :: PrevHash crypto -&gt; Encoding
</span><a href="#local-6989586621680030179"><span class="hs-identifier hs-var hs-var hs-var hs-var">toCBOR</span></a></span></span><span> </span><span class="annot"><span class="annottext">PrevHash crypto
</span><a href="Shelley.Spec.Ledger.BlockChain.html#GenesisHash"><span class="hs-identifier hs-var">GenesisHash</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Encoding
</span><span class="hs-identifier hs-var">encodeNull</span></span><span>
</span><span id="line-322"></span><span>  </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">toCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#BlockHash"><span class="hs-identifier hs-type">BlockHash</span></a></span><span> </span><span id="local-6989586621680030178"><span class="annot"><span class="annottext">HashHeader crypto
</span><a href="#local-6989586621680030178"><span class="hs-identifier hs-var">h</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HashHeader crypto -&gt; Encoding
forall a. ToCBOR a =&gt; a -&gt; Encoding
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">toCBOR</span></a></span><span> </span><span class="annot"><span class="annottext">HashHeader crypto
</span><a href="#local-6989586621680030178"><span class="hs-identifier hs-var">h</span></a></span><span>
</span><span id="line-323"></span><span>  </span><span id="local-6989586621680030177"><span class="annot"><span class="annottext">encodedSizeExpr :: (forall t. ToCBOR t =&gt; Proxy t -&gt; Size)
-&gt; Proxy (PrevHash crypto) -&gt; Size
</span><a href="#local-6989586621680030177"><span class="hs-identifier hs-var hs-var hs-var hs-var">encodedSizeExpr</span></a></span></span><span> </span><span id="local-6989586621680030176"><span class="annot"><span class="annottext">forall t. ToCBOR t =&gt; Proxy t -&gt; Size
</span><a href="#local-6989586621680030176"><span class="hs-identifier hs-var">size</span></a></span></span><span> </span><span id="local-6989586621680030175"><span class="annot"><span class="annottext">Proxy (PrevHash crypto)
</span><a href="#local-6989586621680030175"><span class="hs-identifier hs-var">proxy</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-324"></span><span>    </span><span class="annot"><span class="annottext">[Case Size] -&gt; Size
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">szCases</span></a></span><span>
</span><span id="line-325"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Size -&gt; Case Size
forall t. Text -&gt; t -&gt; Case t
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">Case</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;GenesisHash&quot;</span></span><span> </span><span class="annot"><span class="annottext">Size
</span><span class="hs-number">1</span></span><span class="hs-special">,</span><span>
</span><span id="line-326"></span><span>        </span><span class="annot"><span class="annottext">Text -&gt; Size -&gt; Case Size
forall t. Text -&gt; t -&gt; Case t
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">Case</span></a></span><span>
</span><span id="line-327"></span><span>          </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;BlockHash&quot;</span></span><span>
</span><span id="line-328"></span><span>          </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">(forall t. ToCBOR t =&gt; Proxy t -&gt; Size)
-&gt; Proxy (HashHeader crypto) -&gt; Size
forall a.
ToCBOR a =&gt;
(forall t. ToCBOR t =&gt; Proxy t -&gt; Size) -&gt; Proxy a -&gt; Size
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">encodedSizeExpr</span></a></span><span>
</span><span id="line-329"></span><span>              </span><span class="annot"><span class="annottext">forall t. ToCBOR t =&gt; Proxy t -&gt; Size
</span><a href="#local-6989586621680030176"><span class="hs-identifier hs-var">size</span></a></span><span>
</span><span id="line-330"></span><span>              </span><span class="hs-special">(</span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-331"></span><span>                    </span><span class="hs-comment">-- we are mapping a 'Proxy', so nothing can</span><span>
</span><span id="line-332"></span><span>                    </span><span class="hs-comment">-- go wrong here</span><span>
</span><span id="line-333"></span><span>                    </span><span class="annot"><span class="annottext">PrevHash crypto
</span><a href="Shelley.Spec.Ledger.BlockChain.html#GenesisHash"><span class="hs-identifier hs-var">GenesisHash</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; HashHeader crypto
forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;impossible happend&quot;</span></span><span>
</span><span id="line-334"></span><span>                    </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#BlockHash"><span class="hs-identifier hs-type">BlockHash</span></a></span><span> </span><span id="local-6989586621680030172"><span class="annot"><span class="annottext">HashHeader crypto
</span><a href="#local-6989586621680030172"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">HashHeader crypto
</span><a href="#local-6989586621680030172"><span class="hs-identifier hs-var">h</span></a></span><span>
</span><span id="line-335"></span><span>                </span><span class="hs-special">)</span><span>
</span><span id="line-336"></span><span>                  </span><span class="annot"><span class="annottext">(PrevHash crypto -&gt; HashHeader crypto)
-&gt; Proxy (PrevHash crypto) -&gt; Proxy (HashHeader crypto)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Proxy (PrevHash crypto)
</span><a href="#local-6989586621680030175"><span class="hs-identifier hs-var">proxy</span></a></span><span>
</span><span id="line-337"></span><span>              </span><span class="hs-special">)</span><span>
</span><span id="line-338"></span><span>          </span><span class="hs-special">)</span><span>
</span><span id="line-339"></span><span>      </span><span class="hs-special">]</span></span><span>
</span><span id="line-340"></span><span>
</span><span id="line-341"></span><span id="local-6989586621680030171"><span class="hs-keyword">instance</span><span>
</span><span id="line-342"></span><span>  </span><span id="local-6989586621680030167"><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">CC.Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030171"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-343"></span><span>  </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-type">FromCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#PrevHash"><span class="hs-identifier hs-type">PrevHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030171"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-344"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-345"></span><span>  </span><span id="local-6989586621680030166"><span class="annot"><span class="annottext">fromCBOR :: Decoder s (PrevHash crypto)
</span><a href="#local-6989586621680030166"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromCBOR</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-346"></span><span>    </span><span class="annot"><span class="annottext">Decoder s TokenType
forall s. Decoder s TokenType
</span><span class="hs-identifier hs-var">peekTokenType</span></span><span> </span><span class="annot"><span class="annottext">Decoder s TokenType
-&gt; (TokenType -&gt; Decoder s (PrevHash crypto))
-&gt; Decoder s (PrevHash crypto)
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-347"></span><span>      </span><span class="annot"><span class="annottext">TokenType
</span><span class="hs-identifier hs-var">TypeNull</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-348"></span><span>        </span><span class="annot"><span class="annottext">Decoder s ()
forall s. Decoder s ()
</span><span class="hs-identifier hs-var">decodeNull</span></span><span>
</span><span id="line-349"></span><span>        </span><span class="annot"><span class="annottext">PrevHash crypto -&gt; Decoder s (PrevHash crypto)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">PrevHash crypto
forall crypto. PrevHash crypto
</span><a href="Shelley.Spec.Ledger.BlockChain.html#GenesisHash"><span class="hs-identifier hs-var">GenesisHash</span></a></span><span>
</span><span id="line-350"></span><span>      </span><span class="annot"><span class="annottext">TokenType
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">HashHeader crypto -&gt; PrevHash crypto
forall crypto. HashHeader crypto -&gt; PrevHash crypto
</span><a href="Shelley.Spec.Ledger.BlockChain.html#BlockHash"><span class="hs-identifier hs-var">BlockHash</span></a></span><span> </span><span class="annot"><span class="annottext">(HashHeader crypto -&gt; PrevHash crypto)
-&gt; Decoder s (HashHeader crypto) -&gt; Decoder s (PrevHash crypto)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Decoder s (HashHeader crypto)
forall a s. FromCBOR a =&gt; Decoder s a
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">fromCBOR</span></a></span></span><span>
</span><span id="line-351"></span><span>
</span><span id="line-352"></span><span id="local-6989586621680030165"><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#prevHashToNonce"><span class="hs-identifier hs-type">prevHashToNonce</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-353"></span><span>  </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#PrevHash"><span class="hs-identifier hs-type">PrevHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030165"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-354"></span><span>  </span><span class="annot"><a href="Shelley.Spec.Ledger.BaseTypes.html#Nonce"><span class="hs-identifier hs-type">Nonce</span></a></span></span><span>
</span><span id="line-355"></span><span id="prevHashToNonce"><span class="annot"><span class="annottext">prevHashToNonce :: PrevHash crypto -&gt; Nonce
</span><a href="Shelley.Spec.Ledger.BlockChain.html#prevHashToNonce"><span class="hs-identifier hs-var hs-var">prevHashToNonce</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-356"></span><span>  </span><span class="annot"><span class="annottext">PrevHash crypto
</span><a href="Shelley.Spec.Ledger.BlockChain.html#GenesisHash"><span class="hs-identifier hs-var">GenesisHash</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Nonce
</span><a href="Shelley.Spec.Ledger.BaseTypes.html#NeutralNonce"><span class="hs-identifier hs-var">NeutralNonce</span></a></span><span> </span><span class="hs-comment">-- This case can only happen when starting Shelley from genesis,</span><span>
</span><span id="line-357"></span><span>  </span><span class="hs-comment">-- setting the intial chain state to some epoch e,</span><span>
</span><span id="line-358"></span><span>  </span><span class="hs-comment">-- and having the first block be in epoch e+1.</span><span>
</span><span id="line-359"></span><span>  </span><span class="hs-comment">-- In this edge case there is no need to add any extra</span><span>
</span><span id="line-360"></span><span>  </span><span class="hs-comment">-- entropy via the previous header hash to the next epoch nonce,</span><span>
</span><span id="line-361"></span><span>  </span><span class="hs-comment">-- so using the neutral nonce is appropriate.</span><span>
</span><span id="line-362"></span><span>  </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#BlockHash"><span class="hs-identifier hs-type">BlockHash</span></a></span><span> </span><span id="local-6989586621680030163"><span class="annot"><span class="annottext">HashHeader crypto
</span><a href="#local-6989586621680030163"><span class="hs-identifier hs-var">ph</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">HashHeader crypto -&gt; Nonce
forall crypto. HashHeader crypto -&gt; Nonce
</span><a href="Shelley.Spec.Ledger.BlockChain.html#hashHeaderToNonce"><span class="hs-identifier hs-var">hashHeaderToNonce</span></a></span><span> </span><span class="annot"><span class="annottext">HashHeader crypto
</span><a href="#local-6989586621680030163"><span class="hs-identifier hs-var">ph</span></a></span><span>
</span><span id="line-363"></span><span>
</span><span id="line-364"></span><span id="local-6989586621680030161"><span id="local-6989586621680030162"></span></span><span class="hs-keyword">data</span><span> </span><span id="LastAppliedBlock"><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#LastAppliedBlock"><span class="hs-identifier hs-var">LastAppliedBlock</span></a></span></span><span> </span><span id="local-6989586621680030694"><span class="annot"><a href="#local-6989586621680030694"><span class="hs-identifier hs-type">crypto</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="LastAppliedBlock"><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#LastAppliedBlock"><span class="hs-identifier hs-var">LastAppliedBlock</span></a></span></span><span>
</span><span id="line-365"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="labBlockNo"><span class="annot"><span class="annottext">LastAppliedBlock crypto -&gt; BlockNo
</span><a href="Shelley.Spec.Ledger.BlockChain.html#labBlockNo"><span class="hs-identifier hs-var hs-var">labBlockNo</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-slotting-0.1.0.0/noopt/doc/html/cardano-slotting/src"><span class="hs-identifier hs-type">BlockNo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-366"></span><span>    </span><span id="labSlotNo"><span class="annot"><span class="annottext">LastAppliedBlock crypto -&gt; SlotNo
</span><a href="Shelley.Spec.Ledger.BlockChain.html#labSlotNo"><span class="hs-identifier hs-var hs-var">labSlotNo</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-slotting-0.1.0.0/noopt/doc/html/cardano-slotting/src"><span class="hs-identifier hs-type">SlotNo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-367"></span><span>    </span><span id="labHash"><span class="annot"><span class="annottext">LastAppliedBlock crypto -&gt; HashHeader crypto
</span><a href="Shelley.Spec.Ledger.BlockChain.html#labHash"><span class="hs-identifier hs-var hs-var">labHash</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#HashHeader"><span class="hs-identifier hs-type">HashHeader</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030694"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-368"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-369"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680030151"><span id="local-6989586621680030153"><span id="local-6989586621680030155"><span class="annot"><span class="annottext">Int -&gt; LastAppliedBlock crypto -&gt; ShowS
[LastAppliedBlock crypto] -&gt; ShowS
LastAppliedBlock crypto -&gt; String
(Int -&gt; LastAppliedBlock crypto -&gt; ShowS)
-&gt; (LastAppliedBlock crypto -&gt; String)
-&gt; ([LastAppliedBlock crypto] -&gt; ShowS)
-&gt; Show (LastAppliedBlock crypto)
forall crypto. Int -&gt; LastAppliedBlock crypto -&gt; ShowS
forall crypto. [LastAppliedBlock crypto] -&gt; ShowS
forall crypto. LastAppliedBlock crypto -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [LastAppliedBlock crypto] -&gt; ShowS
$cshowList :: forall crypto. [LastAppliedBlock crypto] -&gt; ShowS
show :: LastAppliedBlock crypto -&gt; String
$cshow :: forall crypto. LastAppliedBlock crypto -&gt; String
showsPrec :: Int -&gt; LastAppliedBlock crypto -&gt; ShowS
$cshowsPrec :: forall crypto. Int -&gt; LastAppliedBlock crypto -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680030147"><span id="local-6989586621680030149"><span class="annot"><span class="annottext">LastAppliedBlock crypto -&gt; LastAppliedBlock crypto -&gt; Bool
(LastAppliedBlock crypto -&gt; LastAppliedBlock crypto -&gt; Bool)
-&gt; (LastAppliedBlock crypto -&gt; LastAppliedBlock crypto -&gt; Bool)
-&gt; Eq (LastAppliedBlock crypto)
forall crypto.
LastAppliedBlock crypto -&gt; LastAppliedBlock crypto -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: LastAppliedBlock crypto -&gt; LastAppliedBlock crypto -&gt; Bool
$c/= :: forall crypto.
LastAppliedBlock crypto -&gt; LastAppliedBlock crypto -&gt; Bool
== :: LastAppliedBlock crypto -&gt; LastAppliedBlock crypto -&gt; Bool
$c== :: forall crypto.
LastAppliedBlock crypto -&gt; LastAppliedBlock crypto -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x.
 LastAppliedBlock crypto -&gt; Rep (LastAppliedBlock crypto) x)
-&gt; (forall x.
    Rep (LastAppliedBlock crypto) x -&gt; LastAppliedBlock crypto)
-&gt; Generic (LastAppliedBlock crypto)
forall x.
Rep (LastAppliedBlock crypto) x -&gt; LastAppliedBlock crypto
forall x.
LastAppliedBlock crypto -&gt; Rep (LastAppliedBlock crypto) x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
forall crypto x.
Rep (LastAppliedBlock crypto) x -&gt; LastAppliedBlock crypto
forall crypto x.
LastAppliedBlock crypto -&gt; Rep (LastAppliedBlock crypto) x
$cto :: forall crypto x.
Rep (LastAppliedBlock crypto) x -&gt; LastAppliedBlock crypto
$cfrom :: forall crypto x.
LastAppliedBlock crypto -&gt; Rep (LastAppliedBlock crypto) x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-370"></span><span>
</span><span id="line-371"></span><span id="local-6989586621680030144"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680030138"><span id="local-6989586621680030140"><span id="local-6989586621680030142"><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">CC.Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030144"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NoThunks</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#LastAppliedBlock"><span class="hs-identifier hs-type">LastAppliedBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030144"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-372"></span><span>
</span><span id="line-373"></span><span id="local-6989586621680030137"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680030135"><span class="annot"><span class="hs-identifier hs-type">NFData</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#LastAppliedBlock"><span class="hs-identifier hs-type">LastAppliedBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030137"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-374"></span><span>
</span><span id="line-375"></span><span id="local-6989586621680030134"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680030128"><span id="local-6989586621680030130"><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">CC.Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030134"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-type">ToCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#LastAppliedBlock"><span class="hs-identifier hs-type">LastAppliedBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030134"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-376"></span><span>  </span><span id="local-6989586621680030127"><span class="annot"><span class="annottext">toCBOR :: LastAppliedBlock crypto -&gt; Encoding
</span><a href="#local-6989586621680030127"><span class="hs-identifier hs-var hs-var hs-var hs-var">toCBOR</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#LastAppliedBlock"><span class="hs-identifier hs-type">LastAppliedBlock</span></a></span><span> </span><span id="local-6989586621680030126"><span class="annot"><span class="annottext">BlockNo
</span><a href="#local-6989586621680030126"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621680030125"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621680030125"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621680030124"><span class="annot"><span class="annottext">HashHeader crypto
</span><a href="#local-6989586621680030124"><span class="hs-identifier hs-var">h</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-377"></span><span>    </span><span class="annot"><span class="annottext">Word -&gt; Encoding
</span><span class="hs-identifier hs-var">encodeListLen</span></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">3</span></span><span> </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">BlockNo -&gt; Encoding
forall a. ToCBOR a =&gt; a -&gt; Encoding
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">toCBOR</span></a></span><span> </span><span class="annot"><span class="annottext">BlockNo
</span><a href="#local-6989586621680030126"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">SlotNo -&gt; Encoding
forall a. ToCBOR a =&gt; a -&gt; Encoding
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">toCBOR</span></a></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621680030125"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">HashHeader crypto -&gt; Encoding
forall a. ToCBOR a =&gt; a -&gt; Encoding
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">toCBOR</span></a></span><span> </span><span class="annot"><span class="annottext">HashHeader crypto
</span><a href="#local-6989586621680030124"><span class="hs-identifier hs-var">h</span></a></span></span><span>
</span><span id="line-378"></span><span>
</span><span id="line-379"></span><span id="local-6989586621680030123"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680030119"><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">CC.Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030123"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-type">FromCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#LastAppliedBlock"><span class="hs-identifier hs-type">LastAppliedBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030123"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-380"></span><span>  </span><span id="local-6989586621680030118"><span class="annot"><span class="annottext">fromCBOR :: Decoder s (LastAppliedBlock crypto)
</span><a href="#local-6989586621680030118"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromCBOR</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-381"></span><span>    </span><span class="annot"><span class="annottext">Text
-&gt; (LastAppliedBlock crypto -&gt; Int)
-&gt; Decoder s (LastAppliedBlock crypto)
-&gt; Decoder s (LastAppliedBlock crypto)
forall a s. Text -&gt; (a -&gt; Int) -&gt; Decoder s a -&gt; Decoder s a
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">decodeRecordNamed</span></a></span><span>
</span><span id="line-382"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;lastAppliedBlock&quot;</span></span><span>
</span><span id="line-383"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; LastAppliedBlock crypto -&gt; Int
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">3</span></span><span class="hs-special">)</span><span>
</span><span id="line-384"></span><span>      </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">BlockNo -&gt; SlotNo -&gt; HashHeader crypto -&gt; LastAppliedBlock crypto
forall crypto.
BlockNo -&gt; SlotNo -&gt; HashHeader crypto -&gt; LastAppliedBlock crypto
</span><a href="Shelley.Spec.Ledger.BlockChain.html#LastAppliedBlock"><span class="hs-identifier hs-var">LastAppliedBlock</span></a></span><span>
</span><span id="line-385"></span><span>          </span><span class="annot"><span class="annottext">(BlockNo -&gt; SlotNo -&gt; HashHeader crypto -&gt; LastAppliedBlock crypto)
-&gt; Decoder s BlockNo
-&gt; Decoder
     s (SlotNo -&gt; HashHeader crypto -&gt; LastAppliedBlock crypto)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Decoder s BlockNo
forall a s. FromCBOR a =&gt; Decoder s a
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">fromCBOR</span></a></span><span>
</span><span id="line-386"></span><span>          </span><span class="annot"><span class="annottext">Decoder s (SlotNo -&gt; HashHeader crypto -&gt; LastAppliedBlock crypto)
-&gt; Decoder s SlotNo
-&gt; Decoder s (HashHeader crypto -&gt; LastAppliedBlock crypto)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Decoder s SlotNo
forall a s. FromCBOR a =&gt; Decoder s a
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">fromCBOR</span></a></span><span>
</span><span id="line-387"></span><span>          </span><span class="annot"><span class="annottext">Decoder s (HashHeader crypto -&gt; LastAppliedBlock crypto)
-&gt; Decoder s (HashHeader crypto)
-&gt; Decoder s (LastAppliedBlock crypto)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Decoder s (HashHeader crypto)
forall a s. FromCBOR a =&gt; Decoder s a
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">fromCBOR</span></a></span><span>
</span><span id="line-388"></span><span>      </span><span class="hs-special">)</span></span><span>
</span><span id="line-389"></span><span>
</span><span id="line-390"></span><span id="local-6989586621680030117"><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#lastAppliedHash"><span class="hs-identifier hs-type">lastAppliedHash</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-slotting-0.1.0.0/noopt/doc/html/cardano-slotting/src"><span class="hs-identifier hs-type">WithOrigin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#LastAppliedBlock"><span class="hs-identifier hs-type">LastAppliedBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030117"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#PrevHash"><span class="hs-identifier hs-type">PrevHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030117"><span class="hs-identifier hs-type">crypto</span></a></span></span><span>
</span><span id="line-391"></span><span id="lastAppliedHash"><span class="annot"><span class="annottext">lastAppliedHash :: WithOrigin (LastAppliedBlock crypto) -&gt; PrevHash crypto
</span><a href="Shelley.Spec.Ledger.BlockChain.html#lastAppliedHash"><span class="hs-identifier hs-var hs-var">lastAppliedHash</span></a></span></span><span> </span><span class="annot"><span class="annottext">WithOrigin (LastAppliedBlock crypto)
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-slotting-0.1.0.0/noopt/doc/html/cardano-slotting/src"><span class="hs-identifier hs-var">Origin</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PrevHash crypto
forall crypto. PrevHash crypto
</span><a href="Shelley.Spec.Ledger.BlockChain.html#GenesisHash"><span class="hs-identifier hs-var">GenesisHash</span></a></span><span>
</span><span id="line-392"></span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#lastAppliedHash"><span class="hs-identifier hs-var">lastAppliedHash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-slotting-0.1.0.0/noopt/doc/html/cardano-slotting/src"><span class="hs-identifier hs-type">At</span></a></span><span> </span><span id="local-6989586621680030114"><span class="annot"><span class="annottext">LastAppliedBlock crypto
</span><a href="#local-6989586621680030114"><span class="hs-identifier hs-var">lab</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HashHeader crypto -&gt; PrevHash crypto
forall crypto. HashHeader crypto -&gt; PrevHash crypto
</span><a href="Shelley.Spec.Ledger.BlockChain.html#BlockHash"><span class="hs-identifier hs-var">BlockHash</span></a></span><span> </span><span class="annot"><span class="annottext">(HashHeader crypto -&gt; PrevHash crypto)
-&gt; HashHeader crypto -&gt; PrevHash crypto
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">LastAppliedBlock crypto -&gt; HashHeader crypto
forall crypto. LastAppliedBlock crypto -&gt; HashHeader crypto
</span><a href="Shelley.Spec.Ledger.BlockChain.html#labHash"><span class="hs-identifier hs-var hs-var">labHash</span></a></span><span> </span><span class="annot"><span class="annottext">LastAppliedBlock crypto
</span><a href="#local-6989586621680030114"><span class="hs-identifier hs-var">lab</span></a></span><span>
</span><span id="line-393"></span><span>
</span><span id="line-394"></span><span id="local-6989586621680030112"><span id="local-6989586621680030113"></span></span><span class="hs-keyword">data</span><span> </span><span id="BHBody"><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#BHBody"><span class="hs-identifier hs-var">BHBody</span></a></span></span><span> </span><span id="local-6989586621680030663"><span class="annot"><a href="#local-6989586621680030663"><span class="hs-identifier hs-type">crypto</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="BHBody"><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#BHBody"><span class="hs-identifier hs-var">BHBody</span></a></span></span><span>
</span><span id="line-395"></span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-comment">-- | block number</span><span>
</span><span id="line-396"></span><span>    </span><span id="bheaderBlockNo"><span class="annot"><span class="annottext">BHBody crypto -&gt; BlockNo
</span><a href="Shelley.Spec.Ledger.BlockChain.html#bheaderBlockNo"><span class="hs-identifier hs-var hs-var">bheaderBlockNo</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-slotting-0.1.0.0/noopt/doc/html/cardano-slotting/src"><span class="hs-identifier hs-type">BlockNo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-397"></span><span>    </span><span class="hs-comment">-- | block slot</span><span>
</span><span id="line-398"></span><span>    </span><span id="bheaderSlotNo"><span class="annot"><span class="annottext">BHBody crypto -&gt; SlotNo
</span><a href="Shelley.Spec.Ledger.BlockChain.html#bheaderSlotNo"><span class="hs-identifier hs-var hs-var">bheaderSlotNo</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-slotting-0.1.0.0/noopt/doc/html/cardano-slotting/src"><span class="hs-identifier hs-type">SlotNo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-399"></span><span>    </span><span class="hs-comment">-- | Hash of the previous block header</span><span>
</span><span id="line-400"></span><span>    </span><span id="bheaderPrev"><span class="annot"><span class="annottext">BHBody crypto -&gt; PrevHash crypto
</span><a href="Shelley.Spec.Ledger.BlockChain.html#bheaderPrev"><span class="hs-identifier hs-var hs-var">bheaderPrev</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#PrevHash"><span class="hs-identifier hs-type">PrevHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030663"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-401"></span><span>    </span><span class="hs-comment">-- | verification key of block issuer</span><span>
</span><span id="line-402"></span><span>    </span><span id="bheaderVk"><span class="annot"><span class="annottext">BHBody crypto -&gt; VKey 'BlockIssuer crypto
</span><a href="Shelley.Spec.Ledger.BlockChain.html#bheaderVk"><span class="hs-identifier hs-var hs-var">bheaderVk</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.Keys.html#VKey"><span class="hs-identifier hs-type">VKey</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Shelley.Spec.Ledger.Keys.html#BlockIssuer"><span class="hs-identifier hs-type">BlockIssuer</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030663"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-403"></span><span>    </span><span class="hs-comment">-- | VRF verification key for block issuer</span><span>
</span><span id="line-404"></span><span>    </span><span id="bheaderVrfVk"><span class="annot"><span class="annottext">BHBody crypto -&gt; VerKeyVRF crypto
</span><a href="Shelley.Spec.Ledger.BlockChain.html#bheaderVrfVk"><span class="hs-identifier hs-var hs-var">bheaderVrfVk</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.Keys.html#VerKeyVRF"><span class="hs-identifier hs-type">VerKeyVRF</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030663"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-405"></span><span>    </span><span class="hs-comment">-- | block nonce</span><span>
</span><span id="line-406"></span><span>    </span><span id="bheaderEta"><span class="annot"><span class="annottext">BHBody crypto -&gt; CertifiedVRF crypto Nonce
</span><a href="Shelley.Spec.Ledger.BlockChain.html#bheaderEta"><span class="hs-identifier hs-var hs-var">bheaderEta</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.Keys.html#CertifiedVRF"><span class="hs-identifier hs-type">CertifiedVRF</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030663"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="annot"><a href="Shelley.Spec.Ledger.BaseTypes.html#Nonce"><span class="hs-identifier hs-type">Nonce</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-407"></span><span>    </span><span class="hs-comment">-- | leader election value</span><span>
</span><span id="line-408"></span><span>    </span><span id="bheaderL"><span class="annot"><span class="annottext">BHBody crypto -&gt; CertifiedVRF crypto Natural
</span><a href="Shelley.Spec.Ledger.BlockChain.html#bheaderL"><span class="hs-identifier hs-var hs-var">bheaderL</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.Keys.html#CertifiedVRF"><span class="hs-identifier hs-type">CertifiedVRF</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030663"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Natural</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-409"></span><span>    </span><span class="hs-comment">-- | Size of the block body</span><span>
</span><span id="line-410"></span><span>    </span><span id="bsize"><span class="annot"><span class="annottext">BHBody crypto -&gt; Natural
</span><a href="Shelley.Spec.Ledger.BlockChain.html#bsize"><span class="hs-identifier hs-var hs-var">bsize</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Natural</span></span><span class="hs-special">,</span><span>
</span><span id="line-411"></span><span>    </span><span class="hs-comment">-- | Hash of block body</span><span>
</span><span id="line-412"></span><span>    </span><span id="bhash"><span class="annot"><span class="annottext">BHBody crypto -&gt; HashBBody crypto
</span><a href="Shelley.Spec.Ledger.BlockChain.html#bhash"><span class="hs-identifier hs-var hs-var">bhash</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#HashBBody"><span class="hs-identifier hs-type">HashBBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030663"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-413"></span><span>    </span><span class="hs-comment">-- | operational certificate</span><span>
</span><span id="line-414"></span><span>    </span><span id="bheaderOCert"><span class="annot"><span class="annottext">BHBody crypto -&gt; OCert crypto
</span><a href="Shelley.Spec.Ledger.BlockChain.html#bheaderOCert"><span class="hs-identifier hs-var hs-var">bheaderOCert</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.OCert.html#OCert"><span class="hs-identifier hs-type">OCert</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030663"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-415"></span><span>    </span><span class="hs-comment">-- | protocol version</span><span>
</span><span id="line-416"></span><span>    </span><span id="bprotver"><span class="annot"><span class="annottext">BHBody crypto -&gt; ProtVer
</span><a href="Shelley.Spec.Ledger.BlockChain.html#bprotver"><span class="hs-identifier hs-var hs-var">bprotver</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Shelley.Spec.Ledger.PParams.html#ProtVer"><span class="hs-identifier hs-type">ProtVer</span></a></span><span>
</span><span id="line-417"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-418"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(forall x. BHBody crypto -&gt; Rep (BHBody crypto) x)
-&gt; (forall x. Rep (BHBody crypto) x -&gt; BHBody crypto)
-&gt; Generic (BHBody crypto)
forall x. Rep (BHBody crypto) x -&gt; BHBody crypto
forall x. BHBody crypto -&gt; Rep (BHBody crypto) x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
forall crypto x. Rep (BHBody crypto) x -&gt; BHBody crypto
forall crypto x. BHBody crypto -&gt; Rep (BHBody crypto) x
$cto :: forall crypto x. Rep (BHBody crypto) x -&gt; BHBody crypto
$cfrom :: forall crypto x. BHBody crypto -&gt; Rep (BHBody crypto) x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-419"></span><span>
</span><span id="line-420"></span><span id="local-6989586621680030091"><span id="local-6989586621680030093"><span id="local-6989586621680030095"><span id="local-6989586621680030097"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">CC.Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030097"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#BHBody"><span class="hs-identifier hs-type">BHBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030097"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-421"></span><span>
</span><span id="line-422"></span><span id="local-6989586621680030086"><span id="local-6989586621680030088"><span id="local-6989586621680030090"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">CC.Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030090"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#BHBody"><span class="hs-identifier hs-type">BHBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030090"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-423"></span><span>
</span><span id="line-424"></span><span id="local-6989586621680030085"><span class="hs-keyword">instance</span><span>
</span><span id="line-425"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">CC.Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030085"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-426"></span><span>  </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-crypto-class-2.0.0/noopt/doc/html/cardano-crypto-class/src"><span class="hs-identifier hs-type">SignableRepresentation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#BHBody"><span class="hs-identifier hs-type">BHBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030085"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-427"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-428"></span><span>  </span><span id="local-6989586621680030082"><span class="annot"><span class="annottext">getSignableRepresentation :: BHBody crypto -&gt; ByteString
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-crypto-class-2.0.0/noopt/doc/html/cardano-crypto-class/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">getSignableRepresentation</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BHBody crypto -&gt; ByteString
forall a. ToCBOR a =&gt; a -&gt; ByteString
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">serialize'</span></a></span></span><span>
</span><span id="line-429"></span><span>
</span><span id="line-430"></span><span id="local-6989586621680030080"><span class="hs-keyword">instance</span><span>
</span><span id="line-431"></span><span>  </span><span id="local-6989586621680030074"><span id="local-6989586621680030076"><span id="local-6989586621680030078"><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">CC.Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030080"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-432"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">NoThunks</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#BHBody"><span class="hs-identifier hs-type">BHBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030080"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-433"></span><span>
</span><span id="line-434"></span><span id="local-6989586621680030073"><span class="hs-keyword">instance</span><span>
</span><span id="line-435"></span><span>  </span><span id="local-6989586621680030068"><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">CC.Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030073"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-436"></span><span>  </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-type">ToCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#BHBody"><span class="hs-identifier hs-type">BHBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030073"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-437"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-438"></span><span>  </span><span id="local-6989586621680030067"><span class="annot"><span class="annottext">toCBOR :: BHBody crypto -&gt; Encoding
</span><a href="#local-6989586621680030067"><span class="hs-identifier hs-var hs-var hs-var hs-var">toCBOR</span></a></span></span><span> </span><span id="local-6989586621680030066"><span class="annot"><span class="annottext">BHBody crypto
</span><a href="#local-6989586621680030066"><span class="hs-identifier hs-var">bhBody</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-439"></span><span>    </span><span class="annot"><span class="annottext">Word -&gt; Encoding
</span><span class="hs-identifier hs-var">encodeListLen</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">9</span></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Word -&gt; Word
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">OCert crypto -&gt; Word
forall a. ToCBORGroup a =&gt; a -&gt; Word
</span><a href="Shelley.Spec.Ledger.Serialization.html#listLen"><span class="hs-identifier hs-var">listLen</span></a></span><span> </span><span class="annot"><span class="annottext">OCert crypto
</span><a href="#local-6989586621680030065"><span class="hs-identifier hs-var">oc</span></a></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Word -&gt; Word
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">ProtVer -&gt; Word
forall a. ToCBORGroup a =&gt; a -&gt; Word
</span><a href="Shelley.Spec.Ledger.Serialization.html#listLen"><span class="hs-identifier hs-var">listLen</span></a></span><span> </span><span class="annot"><span class="annottext">ProtVer
</span><a href="#local-6989586621680030064"><span class="hs-identifier hs-var">pv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-440"></span><span>      </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">BlockNo -&gt; Encoding
forall a. ToCBOR a =&gt; a -&gt; Encoding
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">toCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BHBody crypto -&gt; BlockNo
forall crypto. BHBody crypto -&gt; BlockNo
</span><a href="Shelley.Spec.Ledger.BlockChain.html#bheaderBlockNo"><span class="hs-identifier hs-var hs-var">bheaderBlockNo</span></a></span><span> </span><span class="annot"><span class="annottext">BHBody crypto
</span><a href="#local-6989586621680030066"><span class="hs-identifier hs-var">bhBody</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-441"></span><span>      </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">SlotNo -&gt; Encoding
forall a. ToCBOR a =&gt; a -&gt; Encoding
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">toCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BHBody crypto -&gt; SlotNo
forall crypto. BHBody crypto -&gt; SlotNo
</span><a href="Shelley.Spec.Ledger.BlockChain.html#bheaderSlotNo"><span class="hs-identifier hs-var hs-var">bheaderSlotNo</span></a></span><span> </span><span class="annot"><span class="annottext">BHBody crypto
</span><a href="#local-6989586621680030066"><span class="hs-identifier hs-var">bhBody</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-442"></span><span>      </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">PrevHash crypto -&gt; Encoding
forall a. ToCBOR a =&gt; a -&gt; Encoding
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">toCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BHBody crypto -&gt; PrevHash crypto
forall crypto. BHBody crypto -&gt; PrevHash crypto
</span><a href="Shelley.Spec.Ledger.BlockChain.html#bheaderPrev"><span class="hs-identifier hs-var hs-var">bheaderPrev</span></a></span><span> </span><span class="annot"><span class="annottext">BHBody crypto
</span><a href="#local-6989586621680030066"><span class="hs-identifier hs-var">bhBody</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-443"></span><span>      </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">VKey 'BlockIssuer crypto -&gt; Encoding
forall a. ToCBOR a =&gt; a -&gt; Encoding
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">toCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BHBody crypto -&gt; VKey 'BlockIssuer crypto
forall crypto. BHBody crypto -&gt; VKey 'BlockIssuer crypto
</span><a href="Shelley.Spec.Ledger.BlockChain.html#bheaderVk"><span class="hs-identifier hs-var hs-var">bheaderVk</span></a></span><span> </span><span class="annot"><span class="annottext">BHBody crypto
</span><a href="#local-6989586621680030066"><span class="hs-identifier hs-var">bhBody</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-444"></span><span>      </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">VerKeyVRF (VRF crypto) -&gt; Encoding
forall v. VRFAlgorithm v =&gt; VerKeyVRF v -&gt; Encoding
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-crypto-class-2.0.0/noopt/doc/html/cardano-crypto-class/src"><span class="hs-identifier hs-var">encodeVerKeyVRF</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BHBody crypto -&gt; VerKeyVRF (VRF crypto)
forall crypto. BHBody crypto -&gt; VerKeyVRF crypto
</span><a href="Shelley.Spec.Ledger.BlockChain.html#bheaderVrfVk"><span class="hs-identifier hs-var hs-var">bheaderVrfVk</span></a></span><span> </span><span class="annot"><span class="annottext">BHBody crypto
</span><a href="#local-6989586621680030066"><span class="hs-identifier hs-var">bhBody</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-445"></span><span>      </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">CertifiedVRF (VRF crypto) Nonce -&gt; Encoding
forall a. ToCBOR a =&gt; a -&gt; Encoding
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">toCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BHBody crypto -&gt; CertifiedVRF (VRF crypto) Nonce
forall crypto. BHBody crypto -&gt; CertifiedVRF crypto Nonce
</span><a href="Shelley.Spec.Ledger.BlockChain.html#bheaderEta"><span class="hs-identifier hs-var hs-var">bheaderEta</span></a></span><span> </span><span class="annot"><span class="annottext">BHBody crypto
</span><a href="#local-6989586621680030066"><span class="hs-identifier hs-var">bhBody</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-446"></span><span>      </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">CertifiedVRF (VRF crypto) Natural -&gt; Encoding
forall a. ToCBOR a =&gt; a -&gt; Encoding
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">toCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BHBody crypto -&gt; CertifiedVRF (VRF crypto) Natural
forall crypto. BHBody crypto -&gt; CertifiedVRF crypto Natural
</span><a href="Shelley.Spec.Ledger.BlockChain.html#bheaderL"><span class="hs-identifier hs-var hs-var">bheaderL</span></a></span><span> </span><span class="annot"><span class="annottext">BHBody crypto
</span><a href="#local-6989586621680030066"><span class="hs-identifier hs-var">bhBody</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-447"></span><span>      </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Encoding
forall a. ToCBOR a =&gt; a -&gt; Encoding
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">toCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BHBody crypto -&gt; Natural
forall crypto. BHBody crypto -&gt; Natural
</span><a href="Shelley.Spec.Ledger.BlockChain.html#bsize"><span class="hs-identifier hs-var hs-var">bsize</span></a></span><span> </span><span class="annot"><span class="annottext">BHBody crypto
</span><a href="#local-6989586621680030066"><span class="hs-identifier hs-var">bhBody</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-448"></span><span>      </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">HashBBody crypto -&gt; Encoding
forall a. ToCBOR a =&gt; a -&gt; Encoding
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">toCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BHBody crypto -&gt; HashBBody crypto
forall crypto. BHBody crypto -&gt; HashBBody crypto
</span><a href="Shelley.Spec.Ledger.BlockChain.html#bhash"><span class="hs-identifier hs-var hs-var">bhash</span></a></span><span> </span><span class="annot"><span class="annottext">BHBody crypto
</span><a href="#local-6989586621680030066"><span class="hs-identifier hs-var">bhBody</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-449"></span><span>      </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">OCert crypto -&gt; Encoding
forall a. ToCBORGroup a =&gt; a -&gt; Encoding
</span><a href="Shelley.Spec.Ledger.Serialization.html#toCBORGroup"><span class="hs-identifier hs-var">toCBORGroup</span></a></span><span> </span><span class="annot"><span class="annottext">OCert crypto
</span><a href="#local-6989586621680030065"><span class="hs-identifier hs-var">oc</span></a></span><span>
</span><span id="line-450"></span><span>      </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">ProtVer -&gt; Encoding
forall a. ToCBORGroup a =&gt; a -&gt; Encoding
</span><a href="Shelley.Spec.Ledger.Serialization.html#toCBORGroup"><span class="hs-identifier hs-var">toCBORGroup</span></a></span><span> </span><span class="annot"><span class="annottext">ProtVer
</span><a href="#local-6989586621680030064"><span class="hs-identifier hs-var">pv</span></a></span><span>
</span><span id="line-451"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-452"></span><span>      </span><span id="local-6989586621680030065"><span class="annot"><span class="annottext">oc :: OCert crypto
</span><a href="#local-6989586621680030065"><span class="hs-identifier hs-var hs-var">oc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BHBody crypto -&gt; OCert crypto
forall crypto. BHBody crypto -&gt; OCert crypto
</span><a href="Shelley.Spec.Ledger.BlockChain.html#bheaderOCert"><span class="hs-identifier hs-var hs-var">bheaderOCert</span></a></span><span> </span><span class="annot"><span class="annottext">BHBody crypto
</span><a href="#local-6989586621680030066"><span class="hs-identifier hs-var">bhBody</span></a></span><span>
</span><span id="line-453"></span><span>      </span><span id="local-6989586621680030064"><span class="annot"><span class="annottext">pv :: ProtVer
</span><a href="#local-6989586621680030064"><span class="hs-identifier hs-var hs-var">pv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BHBody crypto -&gt; ProtVer
forall crypto. BHBody crypto -&gt; ProtVer
</span><a href="Shelley.Spec.Ledger.BlockChain.html#bprotver"><span class="hs-identifier hs-var hs-var">bprotver</span></a></span><span> </span><span class="annot"><span class="annottext">BHBody crypto
</span><a href="#local-6989586621680030066"><span class="hs-identifier hs-var">bhBody</span></a></span><span>
</span><span id="line-454"></span><span>
</span><span id="line-455"></span><span>  </span><span id="local-6989586621680030063"><span class="annot"><span class="annottext">encodedSizeExpr :: (forall t. ToCBOR t =&gt; Proxy t -&gt; Size)
-&gt; Proxy (BHBody crypto) -&gt; Size
</span><a href="#local-6989586621680030063"><span class="hs-identifier hs-var hs-var hs-var hs-var">encodedSizeExpr</span></a></span></span><span> </span><span id="local-6989586621680030062"><span class="annot"><span class="annottext">forall t. ToCBOR t =&gt; Proxy t -&gt; Size
</span><a href="#local-6989586621680030062"><span class="hs-identifier hs-var">size</span></a></span></span><span> </span><span id="local-6989586621680030061"><span class="annot"><span class="annottext">Proxy (BHBody crypto)
</span><a href="#local-6989586621680030061"><span class="hs-identifier hs-var">proxy</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-456"></span><span>    </span><span class="annot"><span class="annottext">Integer -&gt; Size
forall a. Num a =&gt; Integer -&gt; a
</span><span class="hs-identifier hs-var">fromInteger</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word -&gt; Integer
forall s a. (Integral s, Integral a) =&gt; s -&gt; a
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">withWordSize</span></a></span><span> </span><span class="annot"><span class="annottext">(Word -&gt; Integer) -&gt; Word -&gt; Integer
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">9</span></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Word -&gt; Word
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Proxy (OCert crypto) -&gt; Word
forall a. ToCBORGroup a =&gt; Proxy a -&gt; Word
</span><a href="Shelley.Spec.Ledger.Serialization.html#listLenBound"><span class="hs-identifier hs-var">listLenBound</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy (OCert crypto)
</span><a href="#local-6989586621680030060"><span class="hs-identifier hs-var">oc</span></a></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Word -&gt; Word
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Proxy ProtVer -&gt; Word
forall a. ToCBORGroup a =&gt; Proxy a -&gt; Word
</span><a href="Shelley.Spec.Ledger.Serialization.html#listLenBound"><span class="hs-identifier hs-var">listLenBound</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy ProtVer
</span><a href="#local-6989586621680030059"><span class="hs-identifier hs-var">pv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-457"></span><span>      </span><span class="annot"><span class="annottext">Size -&gt; Size -&gt; Size
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">(forall t. ToCBOR t =&gt; Proxy t -&gt; Size) -&gt; Proxy BlockNo -&gt; Size
forall a.
ToCBOR a =&gt;
(forall t. ToCBOR t =&gt; Proxy t -&gt; Size) -&gt; Proxy a -&gt; Size
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">encodedSizeExpr</span></a></span><span> </span><span class="annot"><span class="annottext">forall t. ToCBOR t =&gt; Proxy t -&gt; Size
</span><a href="#local-6989586621680030062"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BHBody crypto -&gt; BlockNo
forall crypto. BHBody crypto -&gt; BlockNo
</span><a href="Shelley.Spec.Ledger.BlockChain.html#bheaderBlockNo"><span class="hs-identifier hs-var hs-var">bheaderBlockNo</span></a></span><span> </span><span class="annot"><span class="annottext">(BHBody crypto -&gt; BlockNo)
-&gt; Proxy (BHBody crypto) -&gt; Proxy BlockNo
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Proxy (BHBody crypto)
</span><a href="#local-6989586621680030061"><span class="hs-identifier hs-var">proxy</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-458"></span><span>      </span><span class="annot"><span class="annottext">Size -&gt; Size -&gt; Size
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">(forall t. ToCBOR t =&gt; Proxy t -&gt; Size) -&gt; Proxy SlotNo -&gt; Size
forall a.
ToCBOR a =&gt;
(forall t. ToCBOR t =&gt; Proxy t -&gt; Size) -&gt; Proxy a -&gt; Size
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">encodedSizeExpr</span></a></span><span> </span><span class="annot"><span class="annottext">forall t. ToCBOR t =&gt; Proxy t -&gt; Size
</span><a href="#local-6989586621680030062"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BHBody crypto -&gt; SlotNo
forall crypto. BHBody crypto -&gt; SlotNo
</span><a href="Shelley.Spec.Ledger.BlockChain.html#bheaderSlotNo"><span class="hs-identifier hs-var hs-var">bheaderSlotNo</span></a></span><span> </span><span class="annot"><span class="annottext">(BHBody crypto -&gt; SlotNo) -&gt; Proxy (BHBody crypto) -&gt; Proxy SlotNo
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Proxy (BHBody crypto)
</span><a href="#local-6989586621680030061"><span class="hs-identifier hs-var">proxy</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-459"></span><span>      </span><span class="annot"><span class="annottext">Size -&gt; Size -&gt; Size
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">(forall t. ToCBOR t =&gt; Proxy t -&gt; Size)
-&gt; Proxy (PrevHash crypto) -&gt; Size
forall a.
ToCBOR a =&gt;
(forall t. ToCBOR t =&gt; Proxy t -&gt; Size) -&gt; Proxy a -&gt; Size
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">encodedSizeExpr</span></a></span><span> </span><span class="annot"><span class="annottext">forall t. ToCBOR t =&gt; Proxy t -&gt; Size
</span><a href="#local-6989586621680030062"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BHBody crypto -&gt; PrevHash crypto
forall crypto. BHBody crypto -&gt; PrevHash crypto
</span><a href="Shelley.Spec.Ledger.BlockChain.html#bheaderPrev"><span class="hs-identifier hs-var hs-var">bheaderPrev</span></a></span><span> </span><span class="annot"><span class="annottext">(BHBody crypto -&gt; PrevHash crypto)
-&gt; Proxy (BHBody crypto) -&gt; Proxy (PrevHash crypto)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Proxy (BHBody crypto)
</span><a href="#local-6989586621680030061"><span class="hs-identifier hs-var">proxy</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-460"></span><span>      </span><span class="annot"><span class="annottext">Size -&gt; Size -&gt; Size
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">(forall t. ToCBOR t =&gt; Proxy t -&gt; Size)
-&gt; Proxy (VKey 'BlockIssuer crypto) -&gt; Size
forall a.
ToCBOR a =&gt;
(forall t. ToCBOR t =&gt; Proxy t -&gt; Size) -&gt; Proxy a -&gt; Size
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">encodedSizeExpr</span></a></span><span> </span><span class="annot"><span class="annottext">forall t. ToCBOR t =&gt; Proxy t -&gt; Size
</span><a href="#local-6989586621680030062"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BHBody crypto -&gt; VKey 'BlockIssuer crypto
forall crypto. BHBody crypto -&gt; VKey 'BlockIssuer crypto
</span><a href="Shelley.Spec.Ledger.BlockChain.html#bheaderVk"><span class="hs-identifier hs-var hs-var">bheaderVk</span></a></span><span> </span><span class="annot"><span class="annottext">(BHBody crypto -&gt; VKey 'BlockIssuer crypto)
-&gt; Proxy (BHBody crypto) -&gt; Proxy (VKey 'BlockIssuer crypto)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Proxy (BHBody crypto)
</span><a href="#local-6989586621680030061"><span class="hs-identifier hs-var">proxy</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-461"></span><span>      </span><span class="annot"><span class="annottext">Size -&gt; Size -&gt; Size
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Proxy (VerKeyVRF (VRF crypto)) -&gt; Size
forall v. VRFAlgorithm v =&gt; Proxy (VerKeyVRF v) -&gt; Size
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-crypto-class-2.0.0/noopt/doc/html/cardano-crypto-class/src"><span class="hs-identifier hs-var">VRF.encodedVerKeyVRFSizeExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BHBody crypto -&gt; VerKeyVRF (VRF crypto)
forall crypto. BHBody crypto -&gt; VerKeyVRF crypto
</span><a href="Shelley.Spec.Ledger.BlockChain.html#bheaderVrfVk"><span class="hs-identifier hs-var hs-var">bheaderVrfVk</span></a></span><span> </span><span class="annot"><span class="annottext">(BHBody crypto -&gt; VerKeyVRF (VRF crypto))
-&gt; Proxy (BHBody crypto) -&gt; Proxy (VerKeyVRF (VRF crypto))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Proxy (BHBody crypto)
</span><a href="#local-6989586621680030061"><span class="hs-identifier hs-var">proxy</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-462"></span><span>      </span><span class="annot"><span class="annottext">Size -&gt; Size -&gt; Size
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">(forall t. ToCBOR t =&gt; Proxy t -&gt; Size)
-&gt; Proxy (CertifiedVRF (VRF crypto) Nonce) -&gt; Size
forall a.
ToCBOR a =&gt;
(forall t. ToCBOR t =&gt; Proxy t -&gt; Size) -&gt; Proxy a -&gt; Size
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">encodedSizeExpr</span></a></span><span> </span><span class="annot"><span class="annottext">forall t. ToCBOR t =&gt; Proxy t -&gt; Size
</span><a href="#local-6989586621680030062"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BHBody crypto -&gt; CertifiedVRF (VRF crypto) Nonce
forall crypto. BHBody crypto -&gt; CertifiedVRF crypto Nonce
</span><a href="Shelley.Spec.Ledger.BlockChain.html#bheaderEta"><span class="hs-identifier hs-var hs-var">bheaderEta</span></a></span><span> </span><span class="annot"><span class="annottext">(BHBody crypto -&gt; CertifiedVRF (VRF crypto) Nonce)
-&gt; Proxy (BHBody crypto) -&gt; Proxy (CertifiedVRF (VRF crypto) Nonce)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Proxy (BHBody crypto)
</span><a href="#local-6989586621680030061"><span class="hs-identifier hs-var">proxy</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-463"></span><span>      </span><span class="annot"><span class="annottext">Size -&gt; Size -&gt; Size
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">(forall t. ToCBOR t =&gt; Proxy t -&gt; Size)
-&gt; Proxy (CertifiedVRF (VRF crypto) Natural) -&gt; Size
forall a.
ToCBOR a =&gt;
(forall t. ToCBOR t =&gt; Proxy t -&gt; Size) -&gt; Proxy a -&gt; Size
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">encodedSizeExpr</span></a></span><span> </span><span class="annot"><span class="annottext">forall t. ToCBOR t =&gt; Proxy t -&gt; Size
</span><a href="#local-6989586621680030062"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BHBody crypto -&gt; CertifiedVRF (VRF crypto) Natural
forall crypto. BHBody crypto -&gt; CertifiedVRF crypto Natural
</span><a href="Shelley.Spec.Ledger.BlockChain.html#bheaderL"><span class="hs-identifier hs-var hs-var">bheaderL</span></a></span><span> </span><span class="annot"><span class="annottext">(BHBody crypto -&gt; CertifiedVRF (VRF crypto) Natural)
-&gt; Proxy (BHBody crypto)
-&gt; Proxy (CertifiedVRF (VRF crypto) Natural)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Proxy (BHBody crypto)
</span><a href="#local-6989586621680030061"><span class="hs-identifier hs-var">proxy</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-464"></span><span>      </span><span class="annot"><span class="annottext">Size -&gt; Size -&gt; Size
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">(forall t. ToCBOR t =&gt; Proxy t -&gt; Size) -&gt; Proxy Word64 -&gt; Size
forall a.
ToCBOR a =&gt;
(forall t. ToCBOR t =&gt; Proxy t -&gt; Size) -&gt; Proxy a -&gt; Size
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">encodedSizeExpr</span></a></span><span> </span><span class="annot"><span class="annottext">forall t. ToCBOR t =&gt; Proxy t -&gt; Size
</span><a href="#local-6989586621680030062"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Natural -&gt; Word64
</span><a href="#local-6989586621680030057"><span class="hs-identifier hs-var">toWord64</span></a></span><span> </span><span class="annot"><span class="annottext">(Natural -&gt; Word64)
-&gt; (BHBody crypto -&gt; Natural) -&gt; BHBody crypto -&gt; Word64
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">BHBody crypto -&gt; Natural
forall crypto. BHBody crypto -&gt; Natural
</span><a href="Shelley.Spec.Ledger.BlockChain.html#bsize"><span class="hs-identifier hs-var hs-var">bsize</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(BHBody crypto -&gt; Word64) -&gt; Proxy (BHBody crypto) -&gt; Proxy Word64
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Proxy (BHBody crypto)
</span><a href="#local-6989586621680030061"><span class="hs-identifier hs-var">proxy</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-465"></span><span>      </span><span class="annot"><span class="annottext">Size -&gt; Size -&gt; Size
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">(forall t. ToCBOR t =&gt; Proxy t -&gt; Size)
-&gt; Proxy (HashBBody crypto) -&gt; Size
forall a.
ToCBOR a =&gt;
(forall t. ToCBOR t =&gt; Proxy t -&gt; Size) -&gt; Proxy a -&gt; Size
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">encodedSizeExpr</span></a></span><span> </span><span class="annot"><span class="annottext">forall t. ToCBOR t =&gt; Proxy t -&gt; Size
</span><a href="#local-6989586621680030062"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BHBody crypto -&gt; HashBBody crypto
forall crypto. BHBody crypto -&gt; HashBBody crypto
</span><a href="Shelley.Spec.Ledger.BlockChain.html#bhash"><span class="hs-identifier hs-var hs-var">bhash</span></a></span><span> </span><span class="annot"><span class="annottext">(BHBody crypto -&gt; HashBBody crypto)
-&gt; Proxy (BHBody crypto) -&gt; Proxy (HashBBody crypto)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Proxy (BHBody crypto)
</span><a href="#local-6989586621680030061"><span class="hs-identifier hs-var">proxy</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-466"></span><span>      </span><span class="annot"><span class="annottext">Size -&gt; Size -&gt; Size
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">(forall t. ToCBOR t =&gt; Proxy t -&gt; Size)
-&gt; Proxy (OCert crypto) -&gt; Size
forall a.
ToCBOR a =&gt;
(forall t. ToCBOR t =&gt; Proxy t -&gt; Size) -&gt; Proxy a -&gt; Size
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">encodedSizeExpr</span></a></span><span> </span><span class="annot"><span class="annottext">forall t. ToCBOR t =&gt; Proxy t -&gt; Size
</span><a href="#local-6989586621680030062"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BHBody crypto -&gt; OCert crypto
forall crypto. BHBody crypto -&gt; OCert crypto
</span><a href="Shelley.Spec.Ledger.BlockChain.html#bheaderOCert"><span class="hs-identifier hs-var hs-var">bheaderOCert</span></a></span><span> </span><span class="annot"><span class="annottext">(BHBody crypto -&gt; OCert crypto)
-&gt; Proxy (BHBody crypto) -&gt; Proxy (OCert crypto)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Proxy (BHBody crypto)
</span><a href="#local-6989586621680030061"><span class="hs-identifier hs-var">proxy</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-467"></span><span>      </span><span class="annot"><span class="annottext">Size -&gt; Size -&gt; Size
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">(forall t. ToCBOR t =&gt; Proxy t -&gt; Size) -&gt; Proxy ProtVer -&gt; Size
forall a.
ToCBOR a =&gt;
(forall t. ToCBOR t =&gt; Proxy t -&gt; Size) -&gt; Proxy a -&gt; Size
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">encodedSizeExpr</span></a></span><span> </span><span class="annot"><span class="annottext">forall t. ToCBOR t =&gt; Proxy t -&gt; Size
</span><a href="#local-6989586621680030062"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BHBody crypto -&gt; ProtVer
forall crypto. BHBody crypto -&gt; ProtVer
</span><a href="Shelley.Spec.Ledger.BlockChain.html#bprotver"><span class="hs-identifier hs-var hs-var">bprotver</span></a></span><span> </span><span class="annot"><span class="annottext">(BHBody crypto -&gt; ProtVer)
-&gt; Proxy (BHBody crypto) -&gt; Proxy ProtVer
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Proxy (BHBody crypto)
</span><a href="#local-6989586621680030061"><span class="hs-identifier hs-var">proxy</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-468"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-469"></span><span>      </span><span id="local-6989586621680030060"><span class="annot"><span class="annottext">oc :: Proxy (OCert crypto)
</span><a href="#local-6989586621680030060"><span class="hs-identifier hs-var hs-var">oc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BHBody crypto -&gt; OCert crypto
forall crypto. BHBody crypto -&gt; OCert crypto
</span><a href="Shelley.Spec.Ledger.BlockChain.html#bheaderOCert"><span class="hs-identifier hs-var hs-var">bheaderOCert</span></a></span><span> </span><span class="annot"><span class="annottext">(BHBody crypto -&gt; OCert crypto)
-&gt; Proxy (BHBody crypto) -&gt; Proxy (OCert crypto)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Proxy (BHBody crypto)
</span><a href="#local-6989586621680030061"><span class="hs-identifier hs-var">proxy</span></a></span><span>
</span><span id="line-470"></span><span>      </span><span id="local-6989586621680030059"><span class="annot"><span class="annottext">pv :: Proxy ProtVer
</span><a href="#local-6989586621680030059"><span class="hs-identifier hs-var hs-var">pv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BHBody crypto -&gt; ProtVer
forall crypto. BHBody crypto -&gt; ProtVer
</span><a href="Shelley.Spec.Ledger.BlockChain.html#bprotver"><span class="hs-identifier hs-var hs-var">bprotver</span></a></span><span> </span><span class="annot"><span class="annottext">(BHBody crypto -&gt; ProtVer)
-&gt; Proxy (BHBody crypto) -&gt; Proxy ProtVer
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Proxy (BHBody crypto)
</span><a href="#local-6989586621680030061"><span class="hs-identifier hs-var">proxy</span></a></span><span>
</span><span id="line-471"></span><span>      </span><span class="annot"><a href="#local-6989586621680030057"><span class="hs-identifier hs-type">toWord64</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Natural</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word64</span></span><span>
</span><span id="line-472"></span><span>      </span><span id="local-6989586621680030057"><span class="annot"><span class="annottext">toWord64 :: Natural -&gt; Word64
</span><a href="#local-6989586621680030057"><span class="hs-identifier hs-var hs-var">toWord64</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Word64
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span></span><span>
</span><span id="line-473"></span><span>
</span><span id="line-474"></span><span id="local-6989586621680030056"><span class="hs-keyword">instance</span><span>
</span><span id="line-475"></span><span>  </span><span id="local-6989586621680030052"><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">CC.Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030056"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-476"></span><span>  </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-type">FromCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#BHBody"><span class="hs-identifier hs-type">BHBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030056"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-477"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-478"></span><span>  </span><span id="local-6989586621680030051"><span class="annot"><span class="annottext">fromCBOR :: Decoder s (BHBody crypto)
</span><a href="#local-6989586621680030051"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromCBOR</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text
-&gt; (BHBody crypto -&gt; Int)
-&gt; Decoder s (BHBody crypto)
-&gt; Decoder s (BHBody crypto)
forall a s. Text -&gt; (a -&gt; Int) -&gt; Decoder s a -&gt; Decoder s a
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">decodeRecordNamed</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;BHBody&quot;</span></span><span> </span><span class="annot"><span class="annottext">BHBody crypto -&gt; Int
forall crypto. Crypto crypto =&gt; BHBody crypto -&gt; Int
</span><a href="#local-6989586621680030050"><span class="hs-identifier hs-var">bhBodySize</span></a></span><span> </span><span class="annot"><span class="annottext">(Decoder s (BHBody crypto) -&gt; Decoder s (BHBody crypto))
-&gt; Decoder s (BHBody crypto) -&gt; Decoder s (BHBody crypto)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-479"></span><span>    </span><span id="local-6989586621680030049"><span class="annot"><span class="annottext">BlockNo
</span><a href="#local-6989586621680030049"><span class="hs-identifier hs-var">bheaderBlockNo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decoder s BlockNo
forall a s. FromCBOR a =&gt; Decoder s a
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">fromCBOR</span></a></span><span>
</span><span id="line-480"></span><span>    </span><span id="local-6989586621680030048"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621680030048"><span class="hs-identifier hs-var">bheaderSlotNo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decoder s SlotNo
forall a s. FromCBOR a =&gt; Decoder s a
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">fromCBOR</span></a></span><span>
</span><span id="line-481"></span><span>    </span><span id="local-6989586621680030047"><span class="annot"><span class="annottext">PrevHash crypto
</span><a href="#local-6989586621680030047"><span class="hs-identifier hs-var">bheaderPrev</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decoder s (PrevHash crypto)
forall a s. FromCBOR a =&gt; Decoder s a
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">fromCBOR</span></a></span><span>
</span><span id="line-482"></span><span>    </span><span id="local-6989586621680030046"><span class="annot"><span class="annottext">VKey 'BlockIssuer crypto
</span><a href="#local-6989586621680030046"><span class="hs-identifier hs-var">bheaderVk</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decoder s (VKey 'BlockIssuer crypto)
forall a s. FromCBOR a =&gt; Decoder s a
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">fromCBOR</span></a></span><span>
</span><span id="line-483"></span><span>    </span><span id="local-6989586621680030045"><span class="annot"><span class="annottext">VerKeyVRF (VRF crypto)
</span><a href="#local-6989586621680030045"><span class="hs-identifier hs-var">bheaderVrfVk</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decoder s (VerKeyVRF (VRF crypto))
forall v s. VRFAlgorithm v =&gt; Decoder s (VerKeyVRF v)
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-crypto-class-2.0.0/noopt/doc/html/cardano-crypto-class/src"><span class="hs-identifier hs-var">decodeVerKeyVRF</span></a></span><span>
</span><span id="line-484"></span><span>    </span><span id="local-6989586621680030044"><span class="annot"><span class="annottext">CertifiedVRF (VRF crypto) Nonce
</span><a href="#local-6989586621680030044"><span class="hs-identifier hs-var">bheaderEta</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decoder s (CertifiedVRF (VRF crypto) Nonce)
forall a s. FromCBOR a =&gt; Decoder s a
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">fromCBOR</span></a></span><span>
</span><span id="line-485"></span><span>    </span><span id="local-6989586621680030043"><span class="annot"><span class="annottext">CertifiedVRF (VRF crypto) Natural
</span><a href="#local-6989586621680030043"><span class="hs-identifier hs-var">bheaderL</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decoder s (CertifiedVRF (VRF crypto) Natural)
forall a s. FromCBOR a =&gt; Decoder s a
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">fromCBOR</span></a></span><span>
</span><span id="line-486"></span><span>    </span><span id="local-6989586621680030042"><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621680030042"><span class="hs-identifier hs-var">bsize</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decoder s Natural
forall a s. FromCBOR a =&gt; Decoder s a
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">fromCBOR</span></a></span><span>
</span><span id="line-487"></span><span>    </span><span id="local-6989586621680030041"><span class="annot"><span class="annottext">HashBBody crypto
</span><a href="#local-6989586621680030041"><span class="hs-identifier hs-var">bhash</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decoder s (HashBBody crypto)
forall a s. FromCBOR a =&gt; Decoder s a
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">fromCBOR</span></a></span><span>
</span><span id="line-488"></span><span>    </span><span id="local-6989586621680030040"><span class="annot"><span class="annottext">OCert crypto
</span><a href="#local-6989586621680030040"><span class="hs-identifier hs-var">bheaderOCert</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decoder s (OCert crypto)
forall a s. FromCBORGroup a =&gt; Decoder s a
</span><a href="Shelley.Spec.Ledger.Serialization.html#fromCBORGroup"><span class="hs-identifier hs-var">fromCBORGroup</span></a></span><span>
</span><span id="line-489"></span><span>    </span><span id="local-6989586621680030038"><span class="annot"><span class="annottext">ProtVer
</span><a href="#local-6989586621680030038"><span class="hs-identifier hs-var">bprotver</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decoder s ProtVer
forall a s. FromCBORGroup a =&gt; Decoder s a
</span><a href="Shelley.Spec.Ledger.Serialization.html#fromCBORGroup"><span class="hs-identifier hs-var">fromCBORGroup</span></a></span><span>
</span><span id="line-490"></span><span>    </span><span class="annot"><span class="annottext">BHBody crypto -&gt; Decoder s (BHBody crypto)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(BHBody crypto -&gt; Decoder s (BHBody crypto))
-&gt; BHBody crypto -&gt; Decoder s (BHBody crypto)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-491"></span><span>      </span><span class="annot"><span class="annottext">BHBody :: forall crypto.
BlockNo
-&gt; SlotNo
-&gt; PrevHash crypto
-&gt; VKey 'BlockIssuer crypto
-&gt; VerKeyVRF crypto
-&gt; CertifiedVRF crypto Nonce
-&gt; CertifiedVRF crypto Natural
-&gt; Natural
-&gt; HashBBody crypto
-&gt; OCert crypto
-&gt; ProtVer
-&gt; BHBody crypto
</span><a href="Shelley.Spec.Ledger.BlockChain.html#BHBody"><span class="hs-identifier hs-type">BHBody</span></a></span><span>
</span><span id="line-492"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">BlockNo
bheaderBlockNo :: BlockNo
bheaderBlockNo :: BlockNo
</span><a href="#local-6989586621680030049"><span class="hs-identifier hs-var hs-var">bheaderBlockNo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-493"></span><span>          </span><span class="annot"><span class="annottext">SlotNo
bheaderSlotNo :: SlotNo
bheaderSlotNo :: SlotNo
</span><a href="#local-6989586621680030048"><span class="hs-identifier hs-var hs-var">bheaderSlotNo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-494"></span><span>          </span><span class="annot"><span class="annottext">PrevHash crypto
bheaderPrev :: PrevHash crypto
bheaderPrev :: PrevHash crypto
</span><a href="#local-6989586621680030047"><span class="hs-identifier hs-var hs-var">bheaderPrev</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-495"></span><span>          </span><span class="annot"><span class="annottext">VKey 'BlockIssuer crypto
bheaderVk :: VKey 'BlockIssuer crypto
bheaderVk :: VKey 'BlockIssuer crypto
</span><a href="#local-6989586621680030046"><span class="hs-identifier hs-var hs-var">bheaderVk</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-496"></span><span>          </span><span class="annot"><span class="annottext">VerKeyVRF (VRF crypto)
bheaderVrfVk :: VerKeyVRF (VRF crypto)
bheaderVrfVk :: VerKeyVRF (VRF crypto)
</span><a href="#local-6989586621680030045"><span class="hs-identifier hs-var hs-var">bheaderVrfVk</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-497"></span><span>          </span><span class="annot"><span class="annottext">CertifiedVRF (VRF crypto) Nonce
bheaderEta :: CertifiedVRF (VRF crypto) Nonce
bheaderEta :: CertifiedVRF (VRF crypto) Nonce
</span><a href="#local-6989586621680030044"><span class="hs-identifier hs-var hs-var">bheaderEta</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-498"></span><span>          </span><span class="annot"><span class="annottext">CertifiedVRF (VRF crypto) Natural
bheaderL :: CertifiedVRF (VRF crypto) Natural
bheaderL :: CertifiedVRF (VRF crypto) Natural
</span><a href="#local-6989586621680030043"><span class="hs-identifier hs-var hs-var">bheaderL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-499"></span><span>          </span><span class="annot"><span class="annottext">Natural
bsize :: Natural
bsize :: Natural
</span><a href="#local-6989586621680030042"><span class="hs-identifier hs-var hs-var">bsize</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-500"></span><span>          </span><span class="annot"><span class="annottext">HashBBody crypto
bhash :: HashBBody crypto
bhash :: HashBBody crypto
</span><a href="#local-6989586621680030041"><span class="hs-identifier hs-var hs-var">bhash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-501"></span><span>          </span><span class="annot"><span class="annottext">OCert crypto
bheaderOCert :: OCert crypto
bheaderOCert :: OCert crypto
</span><a href="#local-6989586621680030040"><span class="hs-identifier hs-var hs-var">bheaderOCert</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-502"></span><span>          </span><span class="annot"><span class="annottext">ProtVer
bprotver :: ProtVer
bprotver :: ProtVer
</span><a href="#local-6989586621680030038"><span class="hs-identifier hs-var hs-var">bprotver</span></a></span><span>
</span><span id="line-503"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-504"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-505"></span><span>      </span><span id="local-6989586621680030050"><span class="annot"><span class="annottext">bhBodySize :: BHBody crypto -&gt; Int
</span><a href="#local-6989586621680030050"><span class="hs-identifier hs-var hs-var">bhBodySize</span></a></span></span><span> </span><span id="local-6989586621680030037"><span class="annot"><span class="annottext">BHBody crypto
</span><a href="#local-6989586621680030037"><span class="hs-identifier hs-var">body</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">9</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">OCert crypto -&gt; Int
forall a. ToCBORGroup a =&gt; a -&gt; Int
</span><a href="Shelley.Spec.Ledger.Serialization.html#listLenInt"><span class="hs-identifier hs-var">listLenInt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BHBody crypto -&gt; OCert crypto
forall crypto. BHBody crypto -&gt; OCert crypto
</span><a href="Shelley.Spec.Ledger.BlockChain.html#bheaderOCert"><span class="hs-identifier hs-var hs-var">bheaderOCert</span></a></span><span> </span><span class="annot"><span class="annottext">BHBody crypto
</span><a href="#local-6989586621680030037"><span class="hs-identifier hs-var">body</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">ProtVer -&gt; Int
forall a. ToCBORGroup a =&gt; a -&gt; Int
</span><a href="Shelley.Spec.Ledger.Serialization.html#listLenInt"><span class="hs-identifier hs-var">listLenInt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BHBody crypto -&gt; ProtVer
forall crypto. BHBody crypto -&gt; ProtVer
</span><a href="Shelley.Spec.Ledger.BlockChain.html#bprotver"><span class="hs-identifier hs-var hs-var">bprotver</span></a></span><span> </span><span class="annot"><span class="annottext">BHBody crypto
</span><a href="#local-6989586621680030037"><span class="hs-identifier hs-var">body</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-506"></span><span>
</span><span id="line-507"></span><span class="hs-comment">-- | Retrieve the pool id (the hash of the pool operator's cold key)</span><span>
</span><span id="line-508"></span><span class="hs-comment">-- from the body of the block header.</span><span>
</span><span id="line-509"></span><span id="local-6989586621680030036"><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#poolIDfromBHBody"><span class="hs-identifier hs-type">poolIDfromBHBody</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">CC.Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030036"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#BHBody"><span class="hs-identifier hs-type">BHBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030036"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Shelley.Spec.Ledger.Keys.html#KeyHash"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Shelley.Spec.Ledger.Keys.html#BlockIssuer"><span class="hs-identifier hs-type">BlockIssuer</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030036"><span class="hs-identifier hs-type">crypto</span></a></span></span><span>
</span><span id="line-510"></span><span id="poolIDfromBHBody"><span class="annot"><span class="annottext">poolIDfromBHBody :: BHBody crypto -&gt; KeyHash 'BlockIssuer crypto
</span><a href="Shelley.Spec.Ledger.BlockChain.html#poolIDfromBHBody"><span class="hs-identifier hs-var hs-var">poolIDfromBHBody</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">VKey 'BlockIssuer crypto -&gt; KeyHash 'BlockIssuer crypto
forall crypto (kd :: KeyRole).
Crypto crypto =&gt;
VKey kd crypto -&gt; KeyHash kd crypto
</span><a href="Shelley.Spec.Ledger.Keys.html#hashKey"><span class="hs-identifier hs-var">hashKey</span></a></span><span> </span><span class="annot"><span class="annottext">(VKey 'BlockIssuer crypto -&gt; KeyHash 'BlockIssuer crypto)
-&gt; (BHBody crypto -&gt; VKey 'BlockIssuer crypto)
-&gt; BHBody crypto
-&gt; KeyHash 'BlockIssuer crypto
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">BHBody crypto -&gt; VKey 'BlockIssuer crypto
forall crypto. BHBody crypto -&gt; VKey 'BlockIssuer crypto
</span><a href="Shelley.Spec.Ledger.BlockChain.html#bheaderVk"><span class="hs-identifier hs-var hs-var">bheaderVk</span></a></span><span>
</span><span id="line-511"></span><span class="hs-pragma">{-# DEPRECATED</span><span> </span><span class="hs-pragma">poolIDfromBHBody</span><span> </span><span class="hs-pragma">&quot;poolIDfromBHBody has been deprecated (the name is misleading), use issuerIDfromBHBody&quot;</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-512"></span><span>
</span><span id="line-513"></span><span class="hs-comment">-- | Retrieve the issuer id (the hash of the cold key) from the body of the block header.</span><span>
</span><span id="line-514"></span><span class="hs-comment">-- This corresponds to either a genesis/core node or a stake pool.</span><span>
</span><span id="line-515"></span><span id="local-6989586621680030035"><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#issuerIDfromBHBody"><span class="hs-identifier hs-type">issuerIDfromBHBody</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">CC.Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030035"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#BHBody"><span class="hs-identifier hs-type">BHBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030035"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Shelley.Spec.Ledger.Keys.html#KeyHash"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Shelley.Spec.Ledger.Keys.html#BlockIssuer"><span class="hs-identifier hs-type">BlockIssuer</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030035"><span class="hs-identifier hs-type">crypto</span></a></span></span><span>
</span><span id="line-516"></span><span id="issuerIDfromBHBody"><span class="annot"><span class="annottext">issuerIDfromBHBody :: BHBody crypto -&gt; KeyHash 'BlockIssuer crypto
</span><a href="Shelley.Spec.Ledger.BlockChain.html#issuerIDfromBHBody"><span class="hs-identifier hs-var hs-var">issuerIDfromBHBody</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">VKey 'BlockIssuer crypto -&gt; KeyHash 'BlockIssuer crypto
forall crypto (kd :: KeyRole).
Crypto crypto =&gt;
VKey kd crypto -&gt; KeyHash kd crypto
</span><a href="Shelley.Spec.Ledger.Keys.html#hashKey"><span class="hs-identifier hs-var">hashKey</span></a></span><span> </span><span class="annot"><span class="annottext">(VKey 'BlockIssuer crypto -&gt; KeyHash 'BlockIssuer crypto)
-&gt; (BHBody crypto -&gt; VKey 'BlockIssuer crypto)
-&gt; BHBody crypto
-&gt; KeyHash 'BlockIssuer crypto
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">BHBody crypto -&gt; VKey 'BlockIssuer crypto
forall crypto. BHBody crypto -&gt; VKey 'BlockIssuer crypto
</span><a href="Shelley.Spec.Ledger.BlockChain.html#bheaderVk"><span class="hs-identifier hs-var hs-var">bheaderVk</span></a></span><span>
</span><span id="line-517"></span><span>
</span><span id="line-518"></span><span class="hs-comment">-- | Retrieve the new nonce from the block header body.</span><span>
</span><span id="line-519"></span><span id="local-6989586621680030034"><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#bnonce"><span class="hs-identifier hs-type">bnonce</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#BHBody"><span class="hs-identifier hs-type">BHBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030034"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Shelley.Spec.Ledger.BaseTypes.html#Nonce"><span class="hs-identifier hs-type">Nonce</span></a></span></span><span>
</span><span id="line-520"></span><span id="bnonce"><span class="annot"><span class="annottext">bnonce :: BHBody crypto -&gt; Nonce
</span><a href="Shelley.Spec.Ledger.BlockChain.html#bnonce"><span class="hs-identifier hs-var hs-var">bnonce</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OutputVRF (VRF crypto) -&gt; Nonce
forall v. OutputVRF v -&gt; Nonce
</span><a href="Shelley.Spec.Ledger.BaseTypes.html#mkNonceFromOutputVRF"><span class="hs-identifier hs-var">mkNonceFromOutputVRF</span></a></span><span> </span><span class="annot"><span class="annottext">(OutputVRF (VRF crypto) -&gt; Nonce)
-&gt; (BHBody crypto -&gt; OutputVRF (VRF crypto))
-&gt; BHBody crypto
-&gt; Nonce
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">CertifiedVRF (VRF crypto) Nonce -&gt; OutputVRF (VRF crypto)
forall v a. CertifiedVRF v a -&gt; OutputVRF v
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-crypto-class-2.0.0/noopt/doc/html/cardano-crypto-class/src"><span class="hs-identifier hs-var hs-var">VRF.certifiedOutput</span></a></span><span> </span><span class="annot"><span class="annottext">(CertifiedVRF (VRF crypto) Nonce -&gt; OutputVRF (VRF crypto))
-&gt; (BHBody crypto -&gt; CertifiedVRF (VRF crypto) Nonce)
-&gt; BHBody crypto
-&gt; OutputVRF (VRF crypto)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">BHBody crypto -&gt; CertifiedVRF (VRF crypto) Nonce
forall crypto. BHBody crypto -&gt; CertifiedVRF crypto Nonce
</span><a href="Shelley.Spec.Ledger.BlockChain.html#bheaderEta"><span class="hs-identifier hs-var hs-var">bheaderEta</span></a></span><span>
</span><span id="line-521"></span><span>
</span><span id="line-522"></span><span id="local-6989586621680030031"><span id="local-6989586621680030032"></span></span><span class="hs-keyword">data</span><span> </span><span id="Block"><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#Block"><span class="hs-identifier hs-var">Block</span></a></span></span><span> </span><span id="local-6989586621680030621"><span class="annot"><a href="#local-6989586621680030621"><span class="hs-identifier hs-type">era</span></a></span></span><span>
</span><span id="line-523"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="Block%27"><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#Block%27"><span class="hs-identifier hs-var">Block'</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#BHeader"><span class="hs-identifier hs-type">BHeader</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Era.html#Crypto"><span class="hs-identifier hs-type">Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030621"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#TxSeq"><span class="hs-identifier hs-type">TxSeq</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030621"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-identifier hs-type">BSL.ByteString</span></span><span>
</span><span id="line-524"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(forall x. Block era -&gt; Rep (Block era) x)
-&gt; (forall x. Rep (Block era) x -&gt; Block era)
-&gt; Generic (Block era)
forall x. Rep (Block era) x -&gt; Block era
forall x. Block era -&gt; Rep (Block era) x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
forall era x. Rep (Block era) x -&gt; Block era
forall era x. Block era -&gt; Rep (Block era) x
$cto :: forall era x. Rep (Block era) x -&gt; Block era
$cfrom :: forall era x. Block era -&gt; Rep (Block era) x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-525"></span><span>
</span><span id="line-526"></span><span id="local-6989586621680030023"><span id="local-6989586621680030025"><span id="local-6989586621680030027"><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621680030022"><span class="annot"><a href="#local-6989586621680030022"><span class="hs-keyword hs-type">stock</span></a></span></span><span> </span><span class="hs-keyword">instance</span><span>
</span><span id="line-527"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Shelley.html#ShelleyBased"><span class="hs-identifier hs-type">ShelleyBased</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030022"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-528"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#Block"><span class="hs-identifier hs-type">Block</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030022"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-529"></span><span>
</span><span id="line-530"></span><span id="local-6989586621680030018"><span id="local-6989586621680030020"><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621680030017"><span class="annot"><a href="#local-6989586621680030017"><span class="hs-keyword hs-type">stock</span></a></span></span><span> </span><span class="hs-keyword">instance</span><span>
</span><span id="line-531"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Shelley.html#ShelleyBased"><span class="hs-identifier hs-type">ShelleyBased</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030017"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-532"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#Block"><span class="hs-identifier hs-type">Block</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030017"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-533"></span><span>
</span><span id="line-534"></span><span id="local-6989586621680030011"><span id="local-6989586621680030013"><span id="local-6989586621680030015"><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621680030010"><span class="annot"><a href="#local-6989586621680030010"><span class="hs-keyword hs-type">anyclass</span></a></span></span><span> </span><span class="hs-keyword">instance</span><span>
</span><span id="line-535"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Shelley.html#ShelleyBased"><span class="hs-identifier hs-type">ShelleyBased</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030010"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-536"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">NoThunks</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#Block"><span class="hs-identifier hs-type">Block</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030010"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-537"></span><span>
</span><span id="line-538"></span><span id="local-6989586621680030624"><span class="hs-keyword">pattern</span><span> </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#Block"><span class="hs-identifier hs-type">Block</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Ledger.Era.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030624"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#BHeader"><span class="hs-identifier hs-type">BHeader</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Era.html#Crypto"><span class="hs-identifier hs-type">Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030624"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#TxSeq"><span class="hs-identifier hs-type">TxSeq</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030624"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#Block"><span class="hs-identifier hs-type">Block</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030624"><span class="hs-identifier hs-type">era</span></a></span></span><span>
</span><span id="line-539"></span><span class="hs-keyword">pattern</span><span> </span><span id="%24bBlock"><span id="%24mBlock"><span id="Block"><span class="annot"><span class="annottext">$bBlock :: BHeader (Crypto era) -&gt; TxSeq era -&gt; Block era
$mBlock :: forall r era.
Era era =&gt;
Block era
-&gt; (BHeader (Crypto era) -&gt; TxSeq era -&gt; r) -&gt; (Void# -&gt; r) -&gt; r
</span><a href="Shelley.Spec.Ledger.BlockChain.html#%24bBlock"><span class="hs-identifier hs-var hs-var hs-var hs-var">Block</span></a></span></span></span></span><span> </span><span class="annot"><a href="#local-6989586621680030007"><span class="hs-identifier hs-type">h</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030006"><span class="hs-identifier hs-type">txns</span></a></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-540"></span><span>  </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#Block%27"><span class="hs-identifier hs-type">Block'</span></a></span><span> </span><span id="local-6989586621680030007"><span class="annot"><a href="#local-6989586621680030007"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span id="local-6989586621680030006"><span class="annot"><a href="#local-6989586621680030006"><span class="hs-identifier hs-var">txns</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span>
</span><span id="line-541"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-542"></span><span>    </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#Block"><span class="hs-identifier hs-var">Block</span></a></span><span> </span><span id="local-6989586621680030005"><span class="annot"><span class="annottext">BHeader (Crypto era)
</span><a href="#local-6989586621680030005"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span id="local-6989586621680030004"><span class="annot"><span class="annottext">TxSeq era
</span><a href="#local-6989586621680030004"><span class="hs-identifier hs-var">txns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-543"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680030003"><span class="annot"><span class="annottext">bytes :: ByteString
</span><a href="#local-6989586621680030003"><span class="hs-identifier hs-var hs-var">bytes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-544"></span><span>            </span><span class="annot"><span class="annottext">Encoding -&gt; ByteString
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">serializeEncoding</span></a></span><span> </span><span class="annot"><span class="annottext">(Encoding -&gt; ByteString) -&gt; Encoding -&gt; ByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-545"></span><span>              </span><span class="annot"><span class="annottext">Word -&gt; Encoding
</span><span class="hs-identifier hs-var">encodeListLen</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Word -&gt; Word
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">TxSeq era -&gt; Word
forall a. ToCBORGroup a =&gt; a -&gt; Word
</span><a href="Shelley.Spec.Ledger.Serialization.html#listLen"><span class="hs-identifier hs-var">listLen</span></a></span><span> </span><span class="annot"><span class="annottext">TxSeq era
</span><a href="#local-6989586621680030004"><span class="hs-identifier hs-var">txns</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">BHeader (Crypto era) -&gt; Encoding
forall a. ToCBOR a =&gt; a -&gt; Encoding
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">toCBOR</span></a></span><span> </span><span class="annot"><span class="annottext">BHeader (Crypto era)
</span><a href="#local-6989586621680030005"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">TxSeq era -&gt; Encoding
forall a. ToCBORGroup a =&gt; a -&gt; Encoding
</span><a href="Shelley.Spec.Ledger.Serialization.html#toCBORGroup"><span class="hs-identifier hs-var">toCBORGroup</span></a></span><span> </span><span class="annot"><span class="annottext">TxSeq era
</span><a href="#local-6989586621680030004"><span class="hs-identifier hs-var">txns</span></a></span><span>
</span><span id="line-546"></span><span>       </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">BHeader (Crypto era) -&gt; TxSeq era -&gt; ByteString -&gt; Block era
forall era.
BHeader (Crypto era) -&gt; TxSeq era -&gt; ByteString -&gt; Block era
</span><a href="Shelley.Spec.Ledger.BlockChain.html#Block%27"><span class="hs-identifier hs-var">Block'</span></a></span><span> </span><span class="annot"><span class="annottext">BHeader (Crypto era)
</span><a href="#local-6989586621680030005"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">TxSeq era
</span><a href="#local-6989586621680030004"><span class="hs-identifier hs-var">txns</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621680030003"><span class="hs-identifier hs-var">bytes</span></a></span><span>
</span><span id="line-547"></span><span>
</span><span id="line-548"></span><span class="hs-pragma">{-# COMPLETE</span><span> </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#Block"><span class="hs-pragma hs-type">Block</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-549"></span><span>
</span><span id="line-550"></span><span class="hs-comment">-- | Given a size and a mapping from indices to maybe metadata,</span><span>
</span><span id="line-551"></span><span class="hs-comment">--  return a sequence whose size is the size paramater and</span><span>
</span><span id="line-552"></span><span class="hs-comment">--  whose non-Nothing values correspond no the values in the mapping.</span><span>
</span><span id="line-553"></span><span id="local-6989586621680030592"><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#constructMetaData"><span class="hs-identifier hs-type">constructMetaData</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="annot"><a href="#local-6989586621680030592"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Seq</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621680030592"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-554"></span><span id="constructMetaData"><span class="annot"><span class="annottext">constructMetaData :: Int -&gt; Map Int a -&gt; Seq (Maybe a)
</span><a href="Shelley.Spec.Ledger.BlockChain.html#constructMetaData"><span class="hs-identifier hs-var hs-var">constructMetaData</span></a></span></span><span> </span><span id="local-6989586621680030001"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680030001"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621680030000"><span class="annot"><span class="annottext">Map Int a
</span><a href="#local-6989586621680030000"><span class="hs-identifier hs-var">md</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Maybe a) -&gt; Seq Int -&gt; Seq (Maybe a)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Map Int a -&gt; Maybe a
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><span class="hs-operator hs-var">`Map.lookup`</span></span><span> </span><span class="annot"><span class="annottext">Map Int a
</span><a href="#local-6989586621680030000"><span class="hs-identifier hs-var">md</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Int] -&gt; Seq Int
forall a. [a] -&gt; Seq a
</span><span class="hs-identifier hs-var">Seq.fromList</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">..</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680030001"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-555"></span><span>
</span><span id="line-556"></span><span id="local-6989586621680029997"><span class="hs-keyword">instance</span><span>
</span><span id="line-557"></span><span>  </span><span id="local-6989586621680029991"><span id="local-6989586621680029993"><span class="annot"><a href="Cardano.Ledger.Era.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680029997"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-558"></span><span>  </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-type">ToCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#Block"><span class="hs-identifier hs-type">Block</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680029997"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-559"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-560"></span><span>  </span><span id="local-6989586621680029990"><span class="annot"><span class="annottext">toCBOR :: Block era -&gt; Encoding
</span><a href="#local-6989586621680029990"><span class="hs-identifier hs-var hs-var hs-var hs-var">toCBOR</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#Block%27"><span class="hs-identifier hs-type">Block'</span></a></span><span> </span><span class="annot"><span class="annottext">BHeader (Crypto era)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">TxSeq era
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680029989"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621680029989"><span class="hs-identifier hs-var">blockBytes</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Encoding
</span><span class="hs-identifier hs-var">encodePreEncoded</span></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; Encoding) -&gt; ByteString -&gt; Encoding
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; ByteString
</span><span class="hs-identifier hs-var">BSL.toStrict</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621680029989"><span class="hs-identifier hs-var">blockBytes</span></a></span></span><span>
</span><span id="line-561"></span><span>
</span><span id="line-562"></span><span id="local-6989586621680030574"><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#blockDecoder"><span class="hs-identifier hs-type">blockDecoder</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-563"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.html#ShelleyBased"><span class="hs-identifier hs-type">ShelleyBased</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030574"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Shelley.Spec.Ledger.Tx.html#ValidateScript"><span class="hs-identifier hs-type">ValidateScript</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030574"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-564"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-565"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680030610"><span class="annot"><a href="#local-6989586621680030610"><span class="hs-identifier hs-type">s</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Decoder</span></span><span> </span><span class="annot"><a href="#local-6989586621680030610"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-type">Annotator</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#Block"><span class="hs-identifier hs-type">Block</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030574"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-566"></span><span id="blockDecoder"><span class="annot"><span class="annottext">blockDecoder :: Bool -&gt; forall s. Decoder s (Annotator (Block era))
</span><a href="Shelley.Spec.Ledger.BlockChain.html#blockDecoder"><span class="hs-identifier hs-var hs-var">blockDecoder</span></a></span></span><span> </span><span id="local-6989586621680029987"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680029987"><span class="hs-identifier hs-var">lax</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Decoder s (Annotator (ByteString -&gt; Block era))
-&gt; Decoder s (Annotator (Block era))
forall s a.
Decoder s (Annotator (ByteString -&gt; a)) -&gt; Decoder s (Annotator a)
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">annotatorSlice</span></a></span><span> </span><span class="annot"><span class="annottext">(Decoder s (Annotator (ByteString -&gt; Block era))
 -&gt; Decoder s (Annotator (Block era)))
-&gt; Decoder s (Annotator (ByteString -&gt; Block era))
-&gt; Decoder s (Annotator (Block era))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-567"></span><span>  </span><span class="annot"><span class="annottext">Text
-&gt; (Annotator (ByteString -&gt; Block era) -&gt; Int)
-&gt; Decoder s (Annotator (ByteString -&gt; Block era))
-&gt; Decoder s (Annotator (ByteString -&gt; Block era))
forall a s. Text -&gt; (a -&gt; Int) -&gt; Decoder s a -&gt; Decoder s a
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">decodeRecordNamed</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Block&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Annotator (ByteString -&gt; Block era) -&gt; Int
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">4</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Decoder s (Annotator (ByteString -&gt; Block era))
 -&gt; Decoder s (Annotator (ByteString -&gt; Block era)))
-&gt; Decoder s (Annotator (ByteString -&gt; Block era))
-&gt; Decoder s (Annotator (ByteString -&gt; Block era))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-568"></span><span>    </span><span id="local-6989586621680029986"><span class="annot"><span class="annottext">Annotator (BHeader (Crypto era))
</span><a href="#local-6989586621680029986"><span class="hs-identifier hs-var">header</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decoder s (Annotator (BHeader (Crypto era)))
forall a s. FromCBOR a =&gt; Decoder s a
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">fromCBOR</span></a></span><span>
</span><span id="line-569"></span><span>    </span><span id="local-6989586621680029985"><span class="annot"><span class="annottext">Annotator (TxSeq era)
</span><a href="#local-6989586621680029985"><span class="hs-identifier hs-var">txns</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; forall s. Decoder s (Annotator (TxSeq era))
forall era.
(ShelleyBased era, ValidateScript era) =&gt;
Bool -&gt; forall s. Decoder s (Annotator (TxSeq era))
</span><a href="Shelley.Spec.Ledger.BlockChain.html#txSeqDecoder"><span class="hs-identifier hs-var">txSeqDecoder</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680029987"><span class="hs-identifier hs-var">lax</span></a></span><span>
</span><span id="line-570"></span><span>    </span><span class="annot"><span class="annottext">Annotator (ByteString -&gt; Block era)
-&gt; Decoder s (Annotator (ByteString -&gt; Block era))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Annotator (ByteString -&gt; Block era)
 -&gt; Decoder s (Annotator (ByteString -&gt; Block era)))
-&gt; Annotator (ByteString -&gt; Block era)
-&gt; Decoder s (Annotator (ByteString -&gt; Block era))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">BHeader (Crypto era) -&gt; TxSeq era -&gt; ByteString -&gt; Block era
forall era.
BHeader (Crypto era) -&gt; TxSeq era -&gt; ByteString -&gt; Block era
</span><a href="Shelley.Spec.Ledger.BlockChain.html#Block%27"><span class="hs-identifier hs-var">Block'</span></a></span><span> </span><span class="annot"><span class="annottext">(BHeader (Crypto era) -&gt; TxSeq era -&gt; ByteString -&gt; Block era)
-&gt; Annotator (BHeader (Crypto era))
-&gt; Annotator (TxSeq era -&gt; ByteString -&gt; Block era)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Annotator (BHeader (Crypto era))
</span><a href="#local-6989586621680029986"><span class="hs-identifier hs-var">header</span></a></span><span> </span><span class="annot"><span class="annottext">Annotator (TxSeq era -&gt; ByteString -&gt; Block era)
-&gt; Annotator (TxSeq era) -&gt; Annotator (ByteString -&gt; Block era)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Annotator (TxSeq era)
</span><a href="#local-6989586621680029985"><span class="hs-identifier hs-var">txns</span></a></span><span>
</span><span id="line-571"></span><span>
</span><span id="line-572"></span><span id="local-6989586621680030606"><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#txSeqDecoder"><span class="hs-identifier hs-type">txSeqDecoder</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-573"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.html#ShelleyBased"><span class="hs-identifier hs-type">ShelleyBased</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030606"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Shelley.Spec.Ledger.Tx.html#ValidateScript"><span class="hs-identifier hs-type">ValidateScript</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030606"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-574"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-575"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680030607"><span class="annot"><a href="#local-6989586621680030607"><span class="hs-identifier hs-type">s</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Decoder</span></span><span> </span><span class="annot"><a href="#local-6989586621680030607"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-type">Annotator</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#TxSeq"><span class="hs-identifier hs-type">TxSeq</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030606"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-576"></span><span id="txSeqDecoder"><span class="annot"><span class="annottext">txSeqDecoder :: Bool -&gt; forall s. Decoder s (Annotator (TxSeq era))
</span><a href="Shelley.Spec.Ledger.BlockChain.html#txSeqDecoder"><span class="hs-identifier hs-var hs-var">txSeqDecoder</span></a></span></span><span> </span><span id="local-6989586621680029983"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680029983"><span class="hs-identifier hs-var">lax</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-577"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621680029982"><span class="annot"><span class="annottext">Seq (Annotator (TxBody era))
</span><a href="#local-6989586621680029982"><span class="hs-identifier hs-var">bodies</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680029981"><span class="annot"><span class="annottext">Annotator ByteString
</span><a href="#local-6989586621680029981"><span class="hs-identifier hs-var">bodiesAnn</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decoder s (Seq (Annotator (TxBody era)))
-&gt; Decoder s (Seq (Annotator (TxBody era)), Annotator ByteString)
forall s a. Decoder s a -&gt; Decoder s (a, Annotator ByteString)
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">withSlice</span></a></span><span> </span><span class="annot"><span class="annottext">(Decoder s (Seq (Annotator (TxBody era)))
 -&gt; Decoder s (Seq (Annotator (TxBody era)), Annotator ByteString))
-&gt; Decoder s (Seq (Annotator (TxBody era)))
-&gt; Decoder s (Seq (Annotator (TxBody era)), Annotator ByteString)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Decoder s (Annotator (TxBody era))
-&gt; Decoder s (Seq (Annotator (TxBody era)))
forall s a. Decoder s a -&gt; Decoder s (Seq a)
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">decodeSeq</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s (Annotator (TxBody era))
forall a s. FromCBOR a =&gt; Decoder s a
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">fromCBOR</span></a></span><span>
</span><span id="line-578"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621680029980"><span class="annot"><span class="annottext">Seq (Annotator (WitnessSet era))
</span><a href="#local-6989586621680029980"><span class="hs-identifier hs-var">wits</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680029979"><span class="annot"><span class="annottext">Annotator ByteString
</span><a href="#local-6989586621680029979"><span class="hs-identifier hs-var">witsAnn</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decoder s (Seq (Annotator (WitnessSet era)))
-&gt; Decoder
     s (Seq (Annotator (WitnessSet era)), Annotator ByteString)
forall s a. Decoder s a -&gt; Decoder s (a, Annotator ByteString)
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">withSlice</span></a></span><span> </span><span class="annot"><span class="annottext">(Decoder s (Seq (Annotator (WitnessSet era)))
 -&gt; Decoder
      s (Seq (Annotator (WitnessSet era)), Annotator ByteString))
-&gt; Decoder s (Seq (Annotator (WitnessSet era)))
-&gt; Decoder
     s (Seq (Annotator (WitnessSet era)), Annotator ByteString)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Decoder s (Annotator (WitnessSet era))
-&gt; Decoder s (Seq (Annotator (WitnessSet era)))
forall s a. Decoder s a -&gt; Decoder s (Seq a)
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">decodeSeq</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s (Annotator (WitnessSet era))
forall era s.
(TxBodyConstraints era, AnnotatedData (Script era),
 ValidateScript era) =&gt;
Decoder s (Annotator (WitnessSet era))
</span><a href="Shelley.Spec.Ledger.Tx.html#decodeWits"><span class="hs-identifier hs-var">decodeWits</span></a></span><span>
</span><span id="line-579"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680029978"><span class="annot"><span class="annottext">b :: Int
</span><a href="#local-6989586621680029978"><span class="hs-identifier hs-var hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Seq (Annotator (TxBody era)) -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">Seq (Annotator (TxBody era))
</span><a href="#local-6989586621680029982"><span class="hs-identifier hs-var">bodies</span></a></span><span>
</span><span id="line-580"></span><span>      </span><span id="local-6989586621680029976"><span class="annot"><span class="annottext">w :: Int
</span><a href="#local-6989586621680029976"><span class="hs-identifier hs-var hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Seq (Annotator (WitnessSet era)) -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">Seq (Annotator (WitnessSet era))
</span><a href="#local-6989586621680029980"><span class="hs-identifier hs-var">wits</span></a></span><span>
</span><span id="line-581"></span><span>
</span><span id="line-582"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621680029975"><span class="annot"><span class="annottext">Seq (Maybe (Annotator MetaData))
</span><a href="#local-6989586621680029975"><span class="hs-identifier hs-var">metadata</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680029974"><span class="annot"><span class="annottext">Annotator ByteString
</span><a href="#local-6989586621680029974"><span class="hs-identifier hs-var">metadataAnn</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-583"></span><span>    </span><span class="annot"><span class="annottext">Decoder s (Seq (Maybe (Annotator MetaData)))
-&gt; Decoder
     s (Seq (Maybe (Annotator MetaData)), Annotator ByteString)
forall s a. Decoder s a -&gt; Decoder s (a, Annotator ByteString)
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">withSlice</span></a></span><span> </span><span class="annot"><span class="annottext">(Decoder s (Seq (Maybe (Annotator MetaData)))
 -&gt; Decoder
      s (Seq (Maybe (Annotator MetaData)), Annotator ByteString))
-&gt; Decoder s (Seq (Maybe (Annotator MetaData)))
-&gt; Decoder
     s (Seq (Maybe (Annotator MetaData)), Annotator ByteString)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-584"></span><span>      </span><span class="annot"><span class="annottext">Int
-&gt; Map Int (Annotator MetaData) -&gt; Seq (Maybe (Annotator MetaData))
forall a. Int -&gt; Map Int a -&gt; Seq (Maybe a)
</span><a href="Shelley.Spec.Ledger.BlockChain.html#constructMetaData"><span class="hs-identifier hs-var">constructMetaData</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680029978"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-585"></span><span>        </span><span class="annot"><span class="annottext">(Map Int (Annotator MetaData) -&gt; Seq (Maybe (Annotator MetaData)))
-&gt; Decoder s (Map Int (Annotator MetaData))
-&gt; Decoder s (Seq (Maybe (Annotator MetaData)))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Decoder s Int
-&gt; Decoder s (Annotator MetaData)
-&gt; Decoder s (Map Int (Annotator MetaData))
forall a s b.
Ord a =&gt;
Decoder s a -&gt; Decoder s b -&gt; Decoder s (Map a b)
</span><a href="Shelley.Spec.Ledger.Serialization.html#decodeMap"><span class="hs-identifier hs-var">decodeMap</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s Int
forall a s. FromCBOR a =&gt; Decoder s a
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">fromCBOR</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s (Annotator MetaData)
forall a s. FromCBOR a =&gt; Decoder s a
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">fromCBOR</span></a></span><span>
</span><span id="line-586"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680029973"><span class="annot"><span class="annottext">m :: Int
</span><a href="#local-6989586621680029973"><span class="hs-identifier hs-var hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Seq (Maybe (Annotator MetaData)) -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">Seq (Maybe (Annotator MetaData))
</span><a href="#local-6989586621680029975"><span class="hs-identifier hs-var">metadata</span></a></span><span>
</span><span id="line-587"></span><span>
</span><span id="line-588"></span><span>  </span><span class="annot"><span class="annottext">Bool -&gt; Decoder s () -&gt; Decoder s ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">unless</span></span><span>
</span><span id="line-589"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680029983"><span class="hs-identifier hs-var">lax</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680029978"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680029976"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-590"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">String -&gt; Decoder s ()
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><span class="hs-identifier hs-var">fail</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Decoder s ()) -&gt; String -&gt; Decoder s ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-591"></span><span>        </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;different number of transaction bodies (&quot;</span></span><span>
</span><span id="line-592"></span><span>          </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680029978"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-593"></span><span>          </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;) and witness sets (&quot;</span></span><span>
</span><span id="line-594"></span><span>          </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680029976"><span class="hs-identifier hs-var">w</span></a></span><span>
</span><span id="line-595"></span><span>          </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;)&quot;</span></span><span>
</span><span id="line-596"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-597"></span><span>  </span><span class="annot"><span class="annottext">Bool -&gt; Decoder s () -&gt; Decoder s ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">unless</span></span><span>
</span><span id="line-598"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680029983"><span class="hs-identifier hs-var">lax</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680029978"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680029973"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-599"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">String -&gt; Decoder s ()
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><span class="hs-identifier hs-var">fail</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Decoder s ()) -&gt; String -&gt; Decoder s ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-600"></span><span>        </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;mismatch between transaction bodies (&quot;</span></span><span>
</span><span id="line-601"></span><span>          </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680029978"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-602"></span><span>          </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;) and metadata (&quot;</span></span><span>
</span><span id="line-603"></span><span>          </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680029976"><span class="hs-identifier hs-var">w</span></a></span><span>
</span><span id="line-604"></span><span>          </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;)&quot;</span></span><span>
</span><span id="line-605"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-606"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680029970"><span class="annot"><span class="annottext">txns :: Annotator (StrictSeq (Tx era))
</span><a href="#local-6989586621680029970"><span class="hs-identifier hs-var hs-var">txns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StrictSeq (Annotator (Tx era)) -&gt; Annotator (StrictSeq (Tx era))
forall (t :: * -&gt; *) (f :: * -&gt; *) a.
(Traversable t, Applicative f) =&gt;
t (f a) -&gt; f (t a)
</span><span class="hs-identifier hs-var">sequenceA</span></span><span> </span><span class="annot"><span class="annottext">(StrictSeq (Annotator (Tx era)) -&gt; Annotator (StrictSeq (Tx era)))
-&gt; StrictSeq (Annotator (Tx era)) -&gt; Annotator (StrictSeq (Tx era))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Seq (Annotator (Tx era)) -&gt; StrictSeq (Annotator (Tx era))
forall a. Seq a -&gt; StrictSeq a
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/src"><span class="hs-identifier hs-var">StrictSeq.toStrict</span></a></span><span> </span><span class="annot"><span class="annottext">(Seq (Annotator (Tx era)) -&gt; StrictSeq (Annotator (Tx era)))
-&gt; Seq (Annotator (Tx era)) -&gt; StrictSeq (Annotator (Tx era))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Annotator (TxBody era)
 -&gt; Annotator (WitnessSet era)
 -&gt; Maybe (Annotator MetaData)
 -&gt; Annotator (Tx era))
-&gt; Seq (Annotator (TxBody era))
-&gt; Seq (Annotator (WitnessSet era))
-&gt; Seq (Maybe (Annotator MetaData))
-&gt; Seq (Annotator (Tx era))
forall a b c d.
(a -&gt; b -&gt; c -&gt; d) -&gt; Seq a -&gt; Seq b -&gt; Seq c -&gt; Seq d
</span><span class="hs-identifier hs-var">Seq.zipWith3</span></span><span> </span><span class="annot"><span class="annottext">Annotator (TxBody era)
-&gt; Annotator (WitnessSet era)
-&gt; Maybe (Annotator MetaData)
-&gt; Annotator (Tx era)
forall era.
TxBodyConstraints era =&gt;
Annotator (TxBody era)
-&gt; Annotator (WitnessSet era)
-&gt; Maybe (Annotator MetaData)
-&gt; Annotator (Tx era)
</span><a href="Shelley.Spec.Ledger.Tx.html#segwitTx"><span class="hs-identifier hs-var">segwitTx</span></a></span><span> </span><span class="annot"><span class="annottext">Seq (Annotator (TxBody era))
</span><a href="#local-6989586621680029982"><span class="hs-identifier hs-var">bodies</span></a></span><span> </span><span class="annot"><span class="annottext">Seq (Annotator (WitnessSet era))
</span><a href="#local-6989586621680029980"><span class="hs-identifier hs-var">wits</span></a></span><span> </span><span class="annot"><span class="annottext">Seq (Maybe (Annotator MetaData))
</span><a href="#local-6989586621680029975"><span class="hs-identifier hs-var">metadata</span></a></span><span>
</span><span id="line-607"></span><span>  </span><span class="annot"><span class="annottext">Annotator (TxSeq era) -&gt; Decoder s (Annotator (TxSeq era))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Annotator (TxSeq era) -&gt; Decoder s (Annotator (TxSeq era)))
-&gt; Annotator (TxSeq era) -&gt; Decoder s (Annotator (TxSeq era))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">StrictSeq (Tx era)
-&gt; ByteString -&gt; ByteString -&gt; ByteString -&gt; TxSeq era
forall era.
StrictSeq (Tx era)
-&gt; ByteString -&gt; ByteString -&gt; ByteString -&gt; TxSeq era
</span><a href="Shelley.Spec.Ledger.BlockChain.html#TxSeq%27"><span class="hs-identifier hs-var">TxSeq'</span></a></span><span> </span><span class="annot"><span class="annottext">(StrictSeq (Tx era)
 -&gt; ByteString -&gt; ByteString -&gt; ByteString -&gt; TxSeq era)
-&gt; Annotator (StrictSeq (Tx era))
-&gt; Annotator (ByteString -&gt; ByteString -&gt; ByteString -&gt; TxSeq era)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Annotator (StrictSeq (Tx era))
</span><a href="#local-6989586621680029970"><span class="hs-identifier hs-var">txns</span></a></span><span> </span><span class="annot"><span class="annottext">Annotator (ByteString -&gt; ByteString -&gt; ByteString -&gt; TxSeq era)
-&gt; Annotator ByteString
-&gt; Annotator (ByteString -&gt; ByteString -&gt; TxSeq era)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Annotator ByteString
</span><a href="#local-6989586621680029981"><span class="hs-identifier hs-var">bodiesAnn</span></a></span><span> </span><span class="annot"><span class="annottext">Annotator (ByteString -&gt; ByteString -&gt; TxSeq era)
-&gt; Annotator ByteString -&gt; Annotator (ByteString -&gt; TxSeq era)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Annotator ByteString
</span><a href="#local-6989586621680029979"><span class="hs-identifier hs-var">witsAnn</span></a></span><span> </span><span class="annot"><span class="annottext">Annotator (ByteString -&gt; TxSeq era)
-&gt; Annotator ByteString -&gt; Annotator (TxSeq era)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Annotator ByteString
</span><a href="#local-6989586621680029974"><span class="hs-identifier hs-var">metadataAnn</span></a></span><span>
</span><span id="line-608"></span><span>
</span><span id="line-609"></span><span id="local-6989586621680029966"><span class="hs-keyword">instance</span><span>
</span><span id="line-610"></span><span>  </span><span id="local-6989586621680029962"><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.html#ShelleyBased"><span class="hs-identifier hs-type">ShelleyBased</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680029966"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Shelley.Spec.Ledger.Tx.html#ValidateScript"><span class="hs-identifier hs-type">ValidateScript</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680029966"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-611"></span><span>  </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-type">FromCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-type">Annotator</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#Block"><span class="hs-identifier hs-type">Block</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680029966"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-612"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-613"></span><span>  </span><span id="local-6989586621680029961"><span class="annot"><span class="annottext">fromCBOR :: Decoder s (Annotator (Block era))
</span><a href="#local-6989586621680029961"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromCBOR</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; forall s. Decoder s (Annotator (Block era))
forall era.
(ShelleyBased era, ValidateScript era) =&gt;
Bool -&gt; forall s. Decoder s (Annotator (Block era))
</span><a href="Shelley.Spec.Ledger.BlockChain.html#blockDecoder"><span class="hs-identifier hs-var">blockDecoder</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span></span><span>
</span><span id="line-614"></span><span>
</span><span id="line-615"></span><span class="hs-keyword">newtype</span><span> </span><span id="LaxBlock"><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#LaxBlock"><span class="hs-identifier hs-var">LaxBlock</span></a></span></span><span> </span><span id="local-6989586621680030568"><span class="annot"><a href="#local-6989586621680030568"><span class="hs-identifier hs-type">era</span></a></span></span><span>
</span><span id="line-616"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="LaxBlock"><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#LaxBlock"><span class="hs-identifier hs-var">LaxBlock</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#Block"><span class="hs-identifier hs-type">Block</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030568"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-617"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680029953"><span id="local-6989586621680029955"><span id="local-6989586621680029957"><span class="annot"><span class="annottext">Typeable (LaxBlock era)
Typeable (LaxBlock era)
-&gt; (LaxBlock era -&gt; Encoding)
-&gt; ((forall t. ToCBOR t =&gt; Proxy t -&gt; Size)
    -&gt; Proxy (LaxBlock era) -&gt; Size)
-&gt; ((forall t. ToCBOR t =&gt; Proxy t -&gt; Size)
    -&gt; Proxy [LaxBlock era] -&gt; Size)
-&gt; ToCBOR (LaxBlock era)
LaxBlock era -&gt; Encoding
(forall t. ToCBOR t =&gt; Proxy t -&gt; Size)
-&gt; Proxy [LaxBlock era] -&gt; Size
(forall t. ToCBOR t =&gt; Proxy t -&gt; Size)
-&gt; Proxy (LaxBlock era) -&gt; Size
forall a.
Typeable a
-&gt; (a -&gt; Encoding)
-&gt; ((forall t. ToCBOR t =&gt; Proxy t -&gt; Size) -&gt; Proxy a -&gt; Size)
-&gt; ((forall t. ToCBOR t =&gt; Proxy t -&gt; Size) -&gt; Proxy [a] -&gt; Size)
-&gt; ToCBOR a
forall era. Era era =&gt; Typeable (LaxBlock era)
forall era. Era era =&gt; LaxBlock era -&gt; Encoding
forall era.
Era era =&gt;
(forall t. ToCBOR t =&gt; Proxy t -&gt; Size)
-&gt; Proxy [LaxBlock era] -&gt; Size
forall era.
Era era =&gt;
(forall t. ToCBOR t =&gt; Proxy t -&gt; Size)
-&gt; Proxy (LaxBlock era) -&gt; Size
encodedListSizeExpr :: (forall t. ToCBOR t =&gt; Proxy t -&gt; Size)
-&gt; Proxy [LaxBlock era] -&gt; Size
$cencodedListSizeExpr :: forall era.
Era era =&gt;
(forall t. ToCBOR t =&gt; Proxy t -&gt; Size)
-&gt; Proxy [LaxBlock era] -&gt; Size
encodedSizeExpr :: (forall t. ToCBOR t =&gt; Proxy t -&gt; Size)
-&gt; Proxy (LaxBlock era) -&gt; Size
$cencodedSizeExpr :: forall era.
Era era =&gt;
(forall t. ToCBOR t =&gt; Proxy t -&gt; Size)
-&gt; Proxy (LaxBlock era) -&gt; Size
toCBOR :: LaxBlock era -&gt; Encoding
$ctoCBOR :: forall era. Era era =&gt; LaxBlock era -&gt; Encoding
$cp1ToCBOR :: forall era. Era era =&gt; Typeable (LaxBlock era)
</span><a href="#local-6989586621680029953"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">ToCBOR</span></a></span></span></span></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">via</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#Block"><span class="hs-identifier hs-type">Block</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680030568"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-618"></span><span>
</span><span id="line-619"></span><span id="local-6989586621680029947"><span id="local-6989586621680029949"><span id="local-6989586621680029951"><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621680029946"><span class="annot"><a href="#local-6989586621680029946"><span class="hs-keyword hs-type">stock</span></a></span></span><span> </span><span class="hs-keyword">instance</span><span>
</span><span id="line-620"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Shelley.html#ShelleyBased"><span class="hs-identifier hs-type">ShelleyBased</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680029946"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-621"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#LaxBlock"><span class="hs-identifier hs-type">LaxBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680029946"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-622"></span><span>
</span><span id="line-623"></span><span id="local-6989586621680029945"><span class="hs-keyword">instance</span><span>
</span><span id="line-624"></span><span>  </span><span id="local-6989586621680029941"><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.html#ShelleyBased"><span class="hs-identifier hs-type">ShelleyBased</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680029945"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Shelley.Spec.Ledger.Tx.html#ValidateScript"><span class="hs-identifier hs-type">ValidateScript</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680029945"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-625"></span><span>  </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-type">FromCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-type">Annotator</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#LaxBlock"><span class="hs-identifier hs-type">LaxBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680029945"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-626"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-627"></span><span>  </span><span id="local-6989586621680029940"><span class="annot"><span class="annottext">fromCBOR :: Decoder s (Annotator (LaxBlock era))
</span><a href="#local-6989586621680029940"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromCBOR</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Block era -&gt; LaxBlock era)
-&gt; Annotator (Block era) -&gt; Annotator (LaxBlock era)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Block era -&gt; LaxBlock era
forall era. Block era -&gt; LaxBlock era
</span><a href="Shelley.Spec.Ledger.BlockChain.html#LaxBlock"><span class="hs-identifier hs-var">LaxBlock</span></a></span><span> </span><span class="annot"><span class="annottext">(Annotator (Block era) -&gt; Annotator (LaxBlock era))
-&gt; Decoder s (Annotator (Block era))
-&gt; Decoder s (Annotator (LaxBlock era))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; forall s. Decoder s (Annotator (Block era))
forall era.
(ShelleyBased era, ValidateScript era) =&gt;
Bool -&gt; forall s. Decoder s (Annotator (Block era))
</span><a href="Shelley.Spec.Ledger.BlockChain.html#blockDecoder"><span class="hs-identifier hs-var">blockDecoder</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span></span><span>
</span><span id="line-628"></span><span>
</span><span id="line-629"></span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#bHeaderSize"><span class="hs-identifier hs-type">bHeaderSize</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-630"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680029939"><span class="annot"><a href="#local-6989586621680029939"><span class="hs-identifier hs-type">crypto</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-631"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">CC.Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680029939"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-632"></span><span>  </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#BHeader"><span class="hs-identifier hs-type">BHeader</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680029939"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-633"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-634"></span><span id="bHeaderSize"><span class="annot"><span class="annottext">bHeaderSize :: BHeader crypto -&gt; Int
</span><a href="Shelley.Spec.Ledger.BlockChain.html#bHeaderSize"><span class="hs-identifier hs-var hs-var">bHeaderSize</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Int
</span><span class="hs-identifier hs-var">BS.length</span></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; Int)
-&gt; (BHeader crypto -&gt; ByteString) -&gt; BHeader crypto -&gt; Int
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">BHeader crypto -&gt; ByteString
forall a. ToCBOR a =&gt; a -&gt; ByteString
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">serialize'</span></a></span><span>
</span><span id="line-635"></span><span>
</span><span id="line-636"></span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#bBodySize"><span class="hs-identifier hs-type">bBodySize</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-637"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680029937"><span class="annot"><a href="#local-6989586621680029937"><span class="hs-identifier hs-type">era</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-638"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Era.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680029937"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-639"></span><span>  </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#TxSeq"><span class="hs-identifier hs-type">TxSeq</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680029937"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-640"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-641"></span><span id="bBodySize"><span class="annot"><span class="annottext">bBodySize :: TxSeq era -&gt; Int
</span><a href="Shelley.Spec.Ledger.BlockChain.html#bBodySize"><span class="hs-identifier hs-var hs-var">bBodySize</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Int
</span><span class="hs-identifier hs-var">BS.length</span></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; Int)
-&gt; (TxSeq era -&gt; ByteString) -&gt; TxSeq era -&gt; Int
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Encoding -&gt; ByteString
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">serializeEncoding'</span></a></span><span> </span><span class="annot"><span class="annottext">(Encoding -&gt; ByteString)
-&gt; (TxSeq era -&gt; Encoding) -&gt; TxSeq era -&gt; ByteString
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">TxSeq era -&gt; Encoding
forall a. ToCBORGroup a =&gt; a -&gt; Encoding
</span><a href="Shelley.Spec.Ledger.Serialization.html#toCBORGroup"><span class="hs-identifier hs-var">toCBORGroup</span></a></span><span>
</span><span id="line-642"></span><span>
</span><span id="line-643"></span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#slotToNonce"><span class="hs-identifier hs-type">slotToNonce</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-slotting-0.1.0.0/noopt/doc/html/cardano-slotting/src"><span class="hs-identifier hs-type">SlotNo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Shelley.Spec.Ledger.BaseTypes.html#Nonce"><span class="hs-identifier hs-type">Nonce</span></a></span><span>
</span><span id="line-644"></span><span id="slotToNonce"><span class="annot"><span class="annottext">slotToNonce :: SlotNo -&gt; Nonce
</span><a href="Shelley.Spec.Ledger.BlockChain.html#slotToNonce"><span class="hs-identifier hs-var hs-var">slotToNonce</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-slotting-0.1.0.0/noopt/doc/html/cardano-slotting/src"><span class="hs-identifier hs-type">SlotNo</span></a></span><span> </span><span id="local-6989586621680029935"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621680029935"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Nonce
</span><a href="Shelley.Spec.Ledger.BaseTypes.html#mkNonceFromNumber"><span class="hs-identifier hs-var">mkNonceFromNumber</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621680029935"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-645"></span><span>
</span><span id="line-646"></span><span id="local-6989586621680029934"><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#bheader"><span class="hs-identifier hs-type">bheader</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-647"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Era.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680029934"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-648"></span><span>  </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#Block"><span class="hs-identifier hs-type">Block</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680029934"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-649"></span><span>  </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#BHeader"><span class="hs-identifier hs-type">BHeader</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Era.html#Crypto"><span class="hs-identifier hs-type">Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680029934"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-650"></span><span id="bheader"><span class="annot"><span class="annottext">bheader :: Block era -&gt; BHeader (Crypto era)
</span><a href="Shelley.Spec.Ledger.BlockChain.html#bheader"><span class="hs-identifier hs-var hs-var">bheader</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#Block"><span class="hs-identifier hs-type">Block</span></a></span><span> </span><span id="local-6989586621680029933"><span class="annot"><span class="annottext">BHeader (Crypto era)
</span><a href="#local-6989586621680029933"><span class="hs-identifier hs-var">bh</span></a></span></span><span> </span><span class="annot"><span class="annottext">TxSeq era
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BHeader (Crypto era)
</span><a href="#local-6989586621680029933"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-651"></span><span>
</span><span id="line-652"></span><span id="local-6989586621680029932"><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#bbody"><span class="hs-identifier hs-type">bbody</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Ledger.Era.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680029932"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#Block"><span class="hs-identifier hs-type">Block</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680029932"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#TxSeq"><span class="hs-identifier hs-type">TxSeq</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680029932"><span class="hs-identifier hs-type">era</span></a></span></span><span>
</span><span id="line-653"></span><span id="bbody"><span class="annot"><span class="annottext">bbody :: Block era -&gt; TxSeq era
</span><a href="Shelley.Spec.Ledger.BlockChain.html#bbody"><span class="hs-identifier hs-var hs-var">bbody</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#Block"><span class="hs-identifier hs-type">Block</span></a></span><span> </span><span class="annot"><span class="annottext">BHeader (Crypto era)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680029931"><span class="annot"><span class="annottext">TxSeq era
</span><a href="#local-6989586621680029931"><span class="hs-identifier hs-var">txs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxSeq era
</span><a href="#local-6989586621680029931"><span class="hs-identifier hs-var">txs</span></a></span><span>
</span><span id="line-654"></span><span>
</span><span id="line-655"></span><span id="local-6989586621680029930"><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#bhbody"><span class="hs-identifier hs-type">bhbody</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-656"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">CC.Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680029930"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-657"></span><span>  </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#BHeader"><span class="hs-identifier hs-type">BHeader</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680029930"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-658"></span><span>  </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#BHBody"><span class="hs-identifier hs-type">BHBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680029930"><span class="hs-identifier hs-type">crypto</span></a></span></span><span>
</span><span id="line-659"></span><span id="bhbody"><span class="annot"><span class="annottext">bhbody :: BHeader crypto -&gt; BHBody crypto
</span><a href="Shelley.Spec.Ledger.BlockChain.html#bhbody"><span class="hs-identifier hs-var hs-var">bhbody</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#BHeader"><span class="hs-identifier hs-type">BHeader</span></a></span><span> </span><span id="local-6989586621680029929"><span class="annot"><span class="annottext">BHBody crypto
</span><a href="#local-6989586621680029929"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="annot"><span class="annottext">SignedKES crypto (BHBody crypto)
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BHBody crypto
</span><a href="#local-6989586621680029929"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-660"></span><span>
</span><span id="line-661"></span><span class="hs-comment">-- | Construct a seed to use in the VRF computation.</span><span>
</span><span id="line-662"></span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#mkSeed"><span class="hs-identifier hs-type">mkSeed</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-663"></span><span>  </span><span class="hs-comment">-- | Universal constant</span><span>
</span><span id="line-664"></span><span>  </span><span class="annot"><a href="Shelley.Spec.Ledger.BaseTypes.html#Nonce"><span class="hs-identifier hs-type">Nonce</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-665"></span><span>  </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-slotting-0.1.0.0/noopt/doc/html/cardano-slotting/src"><span class="hs-identifier hs-type">SlotNo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-666"></span><span>  </span><span class="hs-comment">-- | Epoch nonce</span><span>
</span><span id="line-667"></span><span>  </span><span class="annot"><a href="Shelley.Spec.Ledger.BaseTypes.html#Nonce"><span class="hs-identifier hs-type">Nonce</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-668"></span><span>  </span><span class="annot"><a href="Shelley.Spec.Ledger.BaseTypes.html#Seed"><span class="hs-identifier hs-type">Seed</span></a></span><span>
</span><span id="line-669"></span><span id="mkSeed"><span class="annot"><span class="annottext">mkSeed :: Nonce -&gt; SlotNo -&gt; Nonce -&gt; Seed
</span><a href="Shelley.Spec.Ledger.BlockChain.html#mkSeed"><span class="hs-identifier hs-var hs-var">mkSeed</span></a></span></span><span> </span><span id="local-6989586621680029928"><span class="annot"><span class="annottext">Nonce
</span><a href="#local-6989586621680029928"><span class="hs-identifier hs-var">ucNonce</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-slotting-0.1.0.0/noopt/doc/html/cardano-slotting/src"><span class="hs-identifier hs-type">SlotNo</span></a></span><span> </span><span id="local-6989586621680029927"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621680029927"><span class="hs-identifier hs-var">slot</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680029926"><span class="annot"><span class="annottext">Nonce
</span><a href="#local-6989586621680029926"><span class="hs-identifier hs-var">eNonce</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-670"></span><span>  </span><span class="annot"><span class="annottext">Hash Blake2b_256 Seed -&gt; Seed
</span><a href="Shelley.Spec.Ledger.BaseTypes.html#Seed"><span class="hs-identifier hs-var">Seed</span></a></span><span>
</span><span id="line-671"></span><span>    </span><span class="annot"><span class="annottext">(Hash Blake2b_256 Seed -&gt; Seed)
-&gt; (Builder -&gt; Hash Blake2b_256 Seed) -&gt; Builder -&gt; Seed
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Nonce
</span><a href="#local-6989586621680029928"><span class="hs-identifier hs-var">ucNonce</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-672"></span><span>          </span><span class="annot"><span class="annottext">Nonce
</span><a href="Shelley.Spec.Ledger.BaseTypes.html#NeutralNonce"><span class="hs-identifier hs-var">NeutralNonce</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Hash Blake2b_256 Seed -&gt; Hash Blake2b_256 Seed
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-673"></span><span>          </span><span class="annot"><a href="Shelley.Spec.Ledger.BaseTypes.html#Nonce"><span class="hs-identifier hs-type">Nonce</span></a></span><span> </span><span id="local-6989586621680029924"><span class="annot"><span class="annottext">Hash Blake2b_256 Nonce
</span><a href="#local-6989586621680029924"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Hash Blake2b_256 Seed
-&gt; Hash Blake2b_256 Seed -&gt; Hash Blake2b_256 Seed
forall h a. Hash h a -&gt; Hash h a -&gt; Hash h a
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-crypto-class-2.0.0/noopt/doc/html/cardano-crypto-class/src"><span class="hs-identifier hs-var">Hash.xor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Hash Blake2b_256 Nonce -&gt; Hash Blake2b_256 Seed
forall h a b. Hash h a -&gt; Hash h b
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-crypto-class-2.0.0/noopt/doc/html/cardano-crypto-class/src"><span class="hs-identifier hs-var">Hash.castHash</span></a></span><span> </span><span class="annot"><span class="annottext">Hash Blake2b_256 Nonce
</span><a href="#local-6989586621680029924"><span class="hs-identifier hs-var">h</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-674"></span><span>      </span><span class="hs-special">)</span><span>
</span><span id="line-675"></span><span>    </span><span class="annot"><span class="annottext">(Hash Blake2b_256 Seed -&gt; Hash Blake2b_256 Seed)
-&gt; (Builder -&gt; Hash Blake2b_256 Seed)
-&gt; Builder
-&gt; Hash Blake2b_256 Seed
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Hash Blake2b_256 ByteString -&gt; Hash Blake2b_256 Seed
forall h a b. Hash h a -&gt; Hash h b
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-crypto-class-2.0.0/noopt/doc/html/cardano-crypto-class/src"><span class="hs-identifier hs-var">Hash.castHash</span></a></span><span>
</span><span id="line-676"></span><span>    </span><span class="annot"><span class="annottext">(Hash Blake2b_256 ByteString -&gt; Hash Blake2b_256 Seed)
-&gt; (Builder -&gt; Hash Blake2b_256 ByteString)
-&gt; Builder
-&gt; Hash Blake2b_256 Seed
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; ByteString)
-&gt; ByteString -&gt; Hash Blake2b_256 ByteString
forall h a. HashAlgorithm h =&gt; (a -&gt; ByteString) -&gt; a -&gt; Hash h a
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-crypto-class-2.0.0/noopt/doc/html/cardano-crypto-class/src"><span class="hs-identifier hs-var">Hash.hashWith</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; ByteString
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-677"></span><span>    </span><span class="annot"><span class="annottext">(ByteString -&gt; Hash Blake2b_256 ByteString)
-&gt; (Builder -&gt; ByteString)
-&gt; Builder
-&gt; Hash Blake2b_256 ByteString
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Builder -&gt; ByteString
</span><a href="Shelley.Spec.Ledger.Serialization.html#runByteBuilder"><span class="hs-identifier hs-var">runByteBuilder</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">8</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">32</span></span><span class="hs-special">)</span><span>
</span><span id="line-678"></span><span>    </span><span class="annot"><span class="annottext">(Builder -&gt; Seed) -&gt; Builder -&gt; Seed
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Builder
</span><span class="hs-identifier hs-var">BS.word64BE</span></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621680029927"><span class="hs-identifier hs-var">slot</span></a></span><span>
</span><span id="line-679"></span><span>      </span><span class="annot"><span class="annottext">Builder -&gt; Builder -&gt; Builder
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Nonce
</span><a href="#local-6989586621680029926"><span class="hs-identifier hs-var">eNonce</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-680"></span><span>             </span><span class="annot"><span class="annottext">Nonce
</span><a href="Shelley.Spec.Ledger.BaseTypes.html#NeutralNonce"><span class="hs-identifier hs-var">NeutralNonce</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Builder
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-681"></span><span>             </span><span class="annot"><a href="Shelley.Spec.Ledger.BaseTypes.html#Nonce"><span class="hs-identifier hs-type">Nonce</span></a></span><span> </span><span id="local-6989586621680029920"><span class="annot"><span class="annottext">Hash Blake2b_256 Nonce
</span><a href="#local-6989586621680029920"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Builder
</span><span class="hs-identifier hs-var">BS.byteStringCopy</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Hash Blake2b_256 Nonce -&gt; ByteString
forall h a. Hash h a -&gt; ByteString
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-crypto-class-2.0.0/noopt/doc/html/cardano-crypto-class/src"><span class="hs-identifier hs-var">Hash.hashToBytes</span></a></span><span> </span><span class="annot"><span class="annottext">Hash Blake2b_256 Nonce
</span><a href="#local-6989586621680029920"><span class="hs-identifier hs-var">h</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-682"></span><span>         </span><span class="hs-special">)</span><span>
</span><span id="line-683"></span><span>
</span><span id="line-684"></span><span class="hs-comment">-- | Check that the certified input natural is valid for being slot leader. This</span><span>
</span><span id="line-685"></span><span class="hs-comment">-- means we check that</span><span>
</span><span id="line-686"></span><span class="hs-comment">--</span><span>
</span><span id="line-687"></span><span class="hs-comment">-- fromNat (certNat) &lt; 1 - (1 - f)^&#963;</span><span>
</span><span id="line-688"></span><span class="hs-comment">--</span><span>
</span><span id="line-689"></span><span class="hs-comment">-- where fromNat creates an appropriate value in [0;1] from the certified</span><span>
</span><span id="line-690"></span><span class="hs-comment">-- natural. The calculation is done using the following optimization:</span><span>
</span><span id="line-691"></span><span class="hs-comment">--</span><span>
</span><span id="line-692"></span><span class="hs-comment">-- let p = fromNat (certNat) and c = ln(1 - f)</span><span>
</span><span id="line-693"></span><span class="hs-comment">--</span><span>
</span><span id="line-694"></span><span class="hs-comment">-- then           p &lt; 1 - (1 - f)^&#963;</span><span>
</span><span id="line-695"></span><span class="hs-comment">-- &lt;=&gt;  1 / (1 - p) &lt; exp(-&#963; * c)</span><span>
</span><span id="line-696"></span><span class="hs-comment">--</span><span>
</span><span id="line-697"></span><span class="hs-comment">-- this can be efficiently be computed by `taylorExpCmp` which returns `ABOVE`</span><span>
</span><span id="line-698"></span><span class="hs-comment">-- in case the reference value `1 / (1 - p)` is above the exponential function</span><span>
</span><span id="line-699"></span><span class="hs-comment">-- at `-&#963; * c`, `BELOW` if it is below or `MaxReached` if it couldn't</span><span>
</span><span id="line-700"></span><span class="hs-comment">-- conclusively compute this within the given iteration bounds.</span><span>
</span><span id="line-701"></span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#checkLeaderValue"><span class="hs-identifier hs-type">checkLeaderValue</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-702"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680029918"><span class="annot"><a href="#local-6989586621680029918"><span class="hs-identifier hs-type">v</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-703"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-crypto-class-2.0.0/noopt/doc/html/cardano-crypto-class/src"><span class="hs-identifier hs-type">VRF.VRFAlgorithm</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680029918"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-704"></span><span>  </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-crypto-class-2.0.0/noopt/doc/html/cardano-crypto-class/src"><span class="hs-identifier hs-type">VRF.OutputVRF</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680029918"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-705"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Rational</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-706"></span><span>  </span><span class="annot"><a href="Shelley.Spec.Ledger.BaseTypes.html#ActiveSlotCoeff"><span class="hs-identifier hs-type">ActiveSlotCoeff</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-707"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-708"></span><span id="checkLeaderValue"><span class="annot"><span class="annottext">checkLeaderValue :: OutputVRF v -&gt; Rational -&gt; ActiveSlotCoeff -&gt; Bool
</span><a href="Shelley.Spec.Ledger.BlockChain.html#checkLeaderValue"><span class="hs-identifier hs-var hs-var">checkLeaderValue</span></a></span></span><span> </span><span id="local-6989586621680029917"><span class="annot"><span class="annottext">OutputVRF v
</span><a href="#local-6989586621680029917"><span class="hs-identifier hs-var">certVRF</span></a></span></span><span> </span><span id="local-6989586621680029916"><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621680029916"><span class="hs-identifier hs-var">&#963;</span></a></span></span><span> </span><span id="local-6989586621680029915"><span class="annot"><span class="annottext">ActiveSlotCoeff
</span><a href="#local-6989586621680029915"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-709"></span><span>  </span><span class="hs-keyword">if</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UnitInterval -&gt; Ratio Word64
</span><a href="Shelley.Spec.Ledger.BaseTypes.html#intervalValue"><span class="hs-identifier hs-var">intervalValue</span></a></span><span> </span><span class="annot"><span class="annottext">(UnitInterval -&gt; Ratio Word64) -&gt; UnitInterval -&gt; Ratio Word64
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ActiveSlotCoeff -&gt; UnitInterval
</span><a href="Shelley.Spec.Ledger.BaseTypes.html#activeSlotVal"><span class="hs-identifier hs-var">activeSlotVal</span></a></span><span> </span><span class="annot"><span class="annottext">ActiveSlotCoeff
</span><a href="#local-6989586621680029915"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Ratio Word64 -&gt; Ratio Word64 -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Ratio Word64
</span><span class="hs-number">1</span></span><span>
</span><span id="line-710"></span><span>    </span><span class="hs-keyword">then</span><span> </span><span class="hs-comment">-- If the active slot coefficient is equal to one,</span><span>
</span><span id="line-711"></span><span>    </span><span class="hs-comment">-- then nearly every stake pool can produce a block every slot.</span><span>
</span><span id="line-712"></span><span>    </span><span class="hs-comment">-- In this degenerate case, where ln (1-f) is not defined,</span><span>
</span><span id="line-713"></span><span>    </span><span class="hs-comment">-- we let the VRF leader check always succeed.</span><span>
</span><span id="line-714"></span><span>    </span><span class="hs-comment">-- This is a testing convenience, the active slot coefficient should not</span><span>
</span><span id="line-715"></span><span>    </span><span class="hs-comment">-- bet set above one half otherwise.</span><span>
</span><span id="line-716"></span><span>      </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-717"></span><span>    </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">FixedPoint -&gt; FixedPoint -&gt; FixedPoint -&gt; CompareResult FixedPoint
forall a. RealFrac a =&gt; a -&gt; a -&gt; a -&gt; CompareResult a
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/shelley-spec-non-integral-0.1.0.0/noopt/doc/html/shelley-spec-non-integral/src"><span class="hs-identifier hs-var">taylorExpCmp</span></a></span><span> </span><span class="annot"><span class="annottext">FixedPoint
</span><span class="hs-number">3</span></span><span> </span><span class="annot"><span class="annottext">FixedPoint
</span><a href="#local-6989586621680029914"><span class="hs-identifier hs-var">recip_q</span></a></span><span> </span><span class="annot"><span class="annottext">FixedPoint
</span><a href="#local-6989586621680029913"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-718"></span><span>      </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/shelley-spec-non-integral-0.1.0.0/noopt/doc/html/shelley-spec-non-integral/src"><span class="hs-identifier hs-type">ABOVE</span></a></span><span> </span><span class="annot"><span class="annottext">FixedPoint
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-719"></span><span>      </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/shelley-spec-non-integral-0.1.0.0/noopt/doc/html/shelley-spec-non-integral/src"><span class="hs-identifier hs-type">BELOW</span></a></span><span> </span><span class="annot"><span class="annottext">FixedPoint
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-720"></span><span>      </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/shelley-spec-non-integral-0.1.0.0/noopt/doc/html/shelley-spec-non-integral/src"><span class="hs-identifier hs-type">MaxReached</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-721"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-722"></span><span>    </span><span class="annot"><a href="#local-6989586621680029909"><span class="hs-identifier hs-type">certNatMax</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Natural</span></span><span>
</span><span id="line-723"></span><span>    </span><span id="local-6989586621680029909"><span class="annot"><span class="annottext">certNatMax :: Natural
</span><a href="#local-6989586621680029909"><span class="hs-identifier hs-var hs-var">certNatMax</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">2</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Natural</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Word -&gt; Natural
forall a b. (Num a, Integral b) =&gt; a -&gt; b -&gt; a
</span><span class="hs-operator hs-var">^</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">8</span></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Word -&gt; Word
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">*</span></span><span> </span><span class="annot"><span class="annottext">Proxy v -&gt; Word
forall v (proxy :: * -&gt; *). VRFAlgorithm v =&gt; proxy v -&gt; Word
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-crypto-class-2.0.0/noopt/doc/html/cardano-crypto-class/src"><span class="hs-identifier hs-var">VRF.sizeOutputVRF</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy v
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680029918"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-724"></span><span>    </span><span class="annot"><a href="#local-6989586621680029905"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680029914"><span class="hs-identifier hs-type">recip_q</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680029913"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Shelley.Spec.Ledger.BaseTypes.html#FixedPoint"><span class="hs-identifier hs-type">FixedPoint</span></a></span><span>
</span><span id="line-725"></span><span>    </span><span id="local-6989586621680029905"><span class="annot"><span class="annottext">c :: FixedPoint
</span><a href="#local-6989586621680029905"><span class="hs-identifier hs-var hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ActiveSlotCoeff -&gt; FixedPoint
</span><a href="Shelley.Spec.Ledger.BaseTypes.html#activeSlotLog"><span class="hs-identifier hs-var">activeSlotLog</span></a></span><span> </span><span class="annot"><span class="annottext">ActiveSlotCoeff
</span><a href="#local-6989586621680029915"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-726"></span><span>    </span><span id="local-6989586621680029914"><span class="annot"><span class="annottext">recip_q :: FixedPoint
</span><a href="#local-6989586621680029914"><span class="hs-identifier hs-var hs-var">recip_q</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Rational -&gt; FixedPoint
forall a. Fractional a =&gt; Rational -&gt; a
</span><span class="hs-identifier hs-var">fromRational</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Natural -&gt; Integer
forall a. Integral a =&gt; a -&gt; Integer
</span><span class="hs-identifier hs-var">toInteger</span></span><span> </span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621680029909"><span class="hs-identifier hs-var">certNatMax</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Rational
forall a. Integral a =&gt; a -&gt; a -&gt; Ratio a
</span><span class="hs-operator hs-var">%</span></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Integer
forall a. Integral a =&gt; a -&gt; Integer
</span><span class="hs-identifier hs-var">toInteger</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621680029909"><span class="hs-identifier hs-var">certNatMax</span></a></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Natural -&gt; Natural
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621680029904"><span class="hs-identifier hs-var">certNat</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-727"></span><span>    </span><span id="local-6989586621680029913"><span class="annot"><span class="annottext">x :: FixedPoint
</span><a href="#local-6989586621680029913"><span class="hs-identifier hs-var hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span> </span><span class="annot"><span class="annottext">Rational -&gt; FixedPoint
forall a. Fractional a =&gt; Rational -&gt; a
</span><span class="hs-identifier hs-var">fromRational</span></span><span> </span><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621680029916"><span class="hs-identifier hs-var">&#963;</span></a></span><span> </span><span class="annot"><span class="annottext">FixedPoint -&gt; FixedPoint -&gt; FixedPoint
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">*</span></span><span> </span><span class="annot"><span class="annottext">FixedPoint
</span><a href="#local-6989586621680029905"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-728"></span><span>    </span><span class="annot"><a href="#local-6989586621680029904"><span class="hs-identifier hs-type">certNat</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Natural</span></span><span>
</span><span id="line-729"></span><span>    </span><span id="local-6989586621680029904"><span class="annot"><span class="annottext">certNat :: Natural
</span><a href="#local-6989586621680029904"><span class="hs-identifier hs-var hs-var">certNat</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OutputVRF v -&gt; Natural
forall v. OutputVRF v -&gt; Natural
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-crypto-class-2.0.0/noopt/doc/html/cardano-crypto-class/src"><span class="hs-identifier hs-var">VRF.getOutputVRFNatural</span></a></span><span> </span><span class="annot"><span class="annottext">OutputVRF v
</span><a href="#local-6989586621680029917"><span class="hs-identifier hs-var">certVRF</span></a></span><span>
</span><span id="line-730"></span><span>
</span><span id="line-731"></span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#seedEta"><span class="hs-identifier hs-type">seedEta</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Shelley.Spec.Ledger.BaseTypes.html#Nonce"><span class="hs-identifier hs-type">Nonce</span></a></span><span>
</span><span id="line-732"></span><span id="seedEta"><span class="annot"><span class="annottext">seedEta :: Nonce
</span><a href="Shelley.Spec.Ledger.BlockChain.html#seedEta"><span class="hs-identifier hs-var hs-var">seedEta</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Nonce
</span><a href="Shelley.Spec.Ledger.BaseTypes.html#mkNonceFromNumber"><span class="hs-identifier hs-var">mkNonceFromNumber</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">0</span></span><span>
</span><span id="line-733"></span><span>
</span><span id="line-734"></span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#seedL"><span class="hs-identifier hs-type">seedL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Shelley.Spec.Ledger.BaseTypes.html#Nonce"><span class="hs-identifier hs-type">Nonce</span></a></span><span>
</span><span id="line-735"></span><span id="seedL"><span class="annot"><span class="annottext">seedL :: Nonce
</span><a href="Shelley.Spec.Ledger.BlockChain.html#seedL"><span class="hs-identifier hs-var hs-var">seedL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Nonce
</span><a href="Shelley.Spec.Ledger.BaseTypes.html#mkNonceFromNumber"><span class="hs-identifier hs-var">mkNonceFromNumber</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">1</span></span><span>
</span><span id="line-736"></span><span>
</span><span id="line-737"></span><span id="local-6989586621680029902"><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#hBbsize"><span class="hs-identifier hs-type">hBbsize</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#BHBody"><span class="hs-identifier hs-type">BHBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680029902"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Natural</span></span></span><span>
</span><span id="line-738"></span><span id="hBbsize"><span class="annot"><span class="annottext">hBbsize :: BHBody era -&gt; Natural
</span><a href="Shelley.Spec.Ledger.BlockChain.html#hBbsize"><span class="hs-identifier hs-var hs-var">hBbsize</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BHBody era -&gt; Natural
forall crypto. BHBody crypto -&gt; Natural
</span><a href="Shelley.Spec.Ledger.BlockChain.html#bsize"><span class="hs-identifier hs-var hs-var">bsize</span></a></span><span>
</span><span id="line-739"></span><span>
</span><span id="line-740"></span><span id="local-6989586621680029901"><span class="annot"><a href="Shelley.Spec.Ledger.BlockChain.html#incrBlocks"><span class="hs-identifier hs-type">incrBlocks</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-741"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-742"></span><span>  </span><span class="annot"><a href="Shelley.Spec.Ledger.Keys.html#KeyHash"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Shelley.Spec.Ledger.Keys.html#StakePool"><span class="hs-identifier hs-type">StakePool</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Era.html#Crypto"><span class="hs-identifier hs-type">Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680029901"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-743"></span><span>  </span><span class="annot"><a href="Shelley.Spec.Ledger.EpochBoundary.html#BlocksMade"><span class="hs-identifier hs-type">BlocksMade</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680029901"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-744"></span><span>  </span><span class="annot"><a href="Shelley.Spec.Ledger.EpochBoundary.html#BlocksMade"><span class="hs-identifier hs-type">BlocksMade</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680029901"><span class="hs-identifier hs-type">era</span></a></span></span><span>
</span><span id="line-745"></span><span id="incrBlocks"><span class="annot"><span class="annottext">incrBlocks :: Bool
-&gt; KeyHash 'StakePool (Crypto era)
-&gt; BlocksMade era
-&gt; BlocksMade era
</span><a href="Shelley.Spec.Ledger.BlockChain.html#incrBlocks"><span class="hs-identifier hs-var hs-var">incrBlocks</span></a></span></span><span> </span><span id="local-6989586621680029900"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680029900"><span class="hs-identifier hs-var">isOverlay</span></a></span></span><span> </span><span id="local-6989586621680029899"><span class="annot"><span class="annottext">KeyHash 'StakePool (Crypto era)
</span><a href="#local-6989586621680029899"><span class="hs-identifier hs-var">hk</span></a></span></span><span> </span><span id="local-6989586621680029898"><span class="annot"><span class="annottext">b' :: BlocksMade era
</span><a href="#local-6989586621680029898"><span class="hs-identifier hs-var">b'</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Shelley.Spec.Ledger.EpochBoundary.html#BlocksMade"><span class="hs-identifier hs-type">BlocksMade</span></a></span><span> </span><span id="local-6989586621680029896"><span class="annot"><span class="annottext">Map (KeyHash 'StakePool (Crypto era)) Natural
</span><a href="#local-6989586621680029896"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-746"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680029900"><span class="hs-identifier hs-var">isOverlay</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BlocksMade era
</span><a href="#local-6989586621680029898"><span class="hs-identifier hs-var">b'</span></a></span><span>
</span><span id="line-747"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map (KeyHash 'StakePool (Crypto era)) Natural -&gt; BlocksMade era
forall era.
Map (KeyHash 'StakePool (Crypto era)) Natural -&gt; BlocksMade era
</span><a href="Shelley.Spec.Ledger.EpochBoundary.html#BlocksMade"><span class="hs-identifier hs-var">BlocksMade</span></a></span><span> </span><span class="annot"><span class="annottext">(Map (KeyHash 'StakePool (Crypto era)) Natural -&gt; BlocksMade era)
-&gt; Map (KeyHash 'StakePool (Crypto era)) Natural -&gt; BlocksMade era
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe Natural
</span><a href="#local-6989586621680029895"><span class="hs-identifier hs-var">hkVal</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-748"></span><span>    </span><span class="annot"><span class="annottext">Maybe Natural
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">KeyHash 'StakePool (Crypto era)
-&gt; Natural
-&gt; Map (KeyHash 'StakePool (Crypto era)) Natural
-&gt; Map (KeyHash 'StakePool (Crypto era)) Natural
forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.insert</span></span><span> </span><span class="annot"><span class="annottext">KeyHash 'StakePool (Crypto era)
</span><a href="#local-6989586621680029899"><span class="hs-identifier hs-var">hk</span></a></span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Map (KeyHash 'StakePool (Crypto era)) Natural
</span><a href="#local-6989586621680029896"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-749"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621680029893"><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621680029893"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">KeyHash 'StakePool (Crypto era)
-&gt; Natural
-&gt; Map (KeyHash 'StakePool (Crypto era)) Natural
-&gt; Map (KeyHash 'StakePool (Crypto era)) Natural
forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.insert</span></span><span> </span><span class="annot"><span class="annottext">KeyHash 'StakePool (Crypto era)
</span><a href="#local-6989586621680029899"><span class="hs-identifier hs-var">hk</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621680029893"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Natural -&gt; Natural
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map (KeyHash 'StakePool (Crypto era)) Natural
</span><a href="#local-6989586621680029896"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-750"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-751"></span><span>    </span><span id="local-6989586621680029895"><span class="annot"><span class="annottext">hkVal :: Maybe Natural
</span><a href="#local-6989586621680029895"><span class="hs-identifier hs-var hs-var">hkVal</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">KeyHash 'StakePool (Crypto era)
-&gt; Map (KeyHash 'StakePool (Crypto era)) Natural -&gt; Maybe Natural
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="annot"><span class="annottext">KeyHash 'StakePool (Crypto era)
</span><a href="#local-6989586621680029899"><span class="hs-identifier hs-var">hk</span></a></span><span> </span><span class="annot"><span class="annottext">Map (KeyHash 'StakePool (Crypto era)) Natural
</span><a href="#local-6989586621680029896"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-752"></span></pre></body></html>