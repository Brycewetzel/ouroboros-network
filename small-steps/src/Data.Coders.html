<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE DataKinds #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE DeriveGeneric #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE DerivingVia #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE GADTs #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE GeneralizedNewtypeDeriving #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE LambdaCase #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE MultiParamTypeClasses #-}</span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# LANGUAGE OverloadedStrings #-}</span><span>
</span><span id="line-11"></span><span class="hs-pragma">{-# LANGUAGE RankNTypes #-}</span><span>
</span><span id="line-12"></span><span class="hs-pragma">{-# LANGUAGE StandaloneDeriving #-}</span><span>
</span><span id="line-13"></span><span class="hs-pragma">{-# LANGUAGE TupleSections #-}</span><span>
</span><span id="line-14"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilies #-}</span><span>
</span><span id="line-15"></span><span class="hs-pragma">{-# LANGUAGE BangPatterns #-}</span><span>
</span><span id="line-16"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications #-}</span><span>
</span><span id="line-17"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-18"></span><span class="hs-pragma">{-# LANGUAGE UndecidableInstances  #-}</span><span>
</span><span id="line-19"></span><span class="hs-pragma">{-# LANGUAGE PatternSynonyms #-}</span><span>
</span><span id="line-20"></span><span class="hs-pragma">{-# LANGUAGE TypeOperators  #-}</span><span>
</span><span id="line-21"></span><span class="hs-pragma">{-# LANGUAGE ConstraintKinds #-}</span><span>
</span><span id="line-22"></span><span class="hs-pragma">{-# LANGUAGE FunctionalDependencies #-}</span><span>
</span><span id="line-23"></span><span>
</span><span id="line-24"></span><span>
</span><span id="line-25"></span><span class="hs-comment">-- {-# OPTIONS_GHC  -fno-warn-orphans #-}</span><span>
</span><span id="line-26"></span><span>
</span><span id="line-27"></span><span class="hs-comment">-- | MemoBytes is an abstration for a datetype that encodes its own seriialization.</span><span>
</span><span id="line-28"></span><span class="hs-comment">--   The idea is to use a newtype around a MemoBytes non-memoizing version.</span><span>
</span><span id="line-29"></span><span class="hs-comment">--   For example:   newtype Foo = Foo(MemoBytes NonMemoizingFoo)</span><span>
</span><span id="line-30"></span><span class="hs-comment">--   This way all the instances for Foo (Eq,Show,Ord,ToCBOR,FromCBOR,NoThunks,Generic)</span><span>
</span><span id="line-31"></span><span class="hs-comment">--   can be derived for free.</span><span>
</span><span id="line-32"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Data.Coders</span><span>
</span><span id="line-33"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Data.Coders.html#Encode"><span class="hs-identifier">Encode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-34"></span><span>    </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier">Decode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-35"></span><span>    </span><span class="annot"><a href="Data.Coders.html#%21%3E"><span class="hs-operator">(!&gt;)</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-36"></span><span>    </span><span class="annot"><a href="Data.Coders.html#%3C%21"><span class="hs-operator">(&lt;!)</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-37"></span><span>    </span><span class="annot"><a href="Data.Coders.html#%3C%2A%21"><span class="hs-operator">(&lt;*!)</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-38"></span><span>    </span><span class="annot"><a href="Data.Coders.html#Density"><span class="hs-identifier">Density</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-39"></span><span>    </span><span class="annot"><a href="Data.Coders.html#Wrapped"><span class="hs-identifier">Wrapped</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-40"></span><span>    </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier">Annotator</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-41"></span><span>    </span><span class="annot"><a href="Data.Coders.html#Dual"><span class="hs-identifier">Dual</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-42"></span><span>    </span><span class="annot"><a href="Data.Coders.html#Field"><span class="hs-identifier">Field</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-43"></span><span>    </span><span class="annot"><a href="Data.Coders.html#encode"><span class="hs-identifier">encode</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-44"></span><span>    </span><span class="annot"><a href="Data.Coders.html#decode"><span class="hs-identifier">decode</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-45"></span><span>    </span><span class="annot"><a href="Data.Coders.html#runE"><span class="hs-identifier">runE</span></a></span><span class="hs-special">,</span><span>            </span><span class="hs-comment">-- Used in testing</span><span>
</span><span id="line-46"></span><span>    </span><span class="annot"><a href="Data.Coders.html#decodeList"><span class="hs-identifier">decodeList</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-47"></span><span>    </span><span class="annot"><a href="Data.Coders.html#decodeSeq"><span class="hs-identifier">decodeSeq</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-48"></span><span>    </span><span class="annot"><a href="Data.Coders.html#decodeStrictSeq"><span class="hs-identifier">decodeStrictSeq</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-49"></span><span>    </span><span class="annot"><a href="Data.Coders.html#decodeSet"><span class="hs-identifier">decodeSet</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-50"></span><span>    </span><span class="annot"><a href="Data.Coders.html#decodeRecordNamed"><span class="hs-identifier">decodeRecordNamed</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-51"></span><span>    </span><span class="annot"><a href="Data.Coders.html#decodeRecordSum"><span class="hs-identifier">decodeRecordSum</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-52"></span><span>    </span><span class="annot"><a href="Data.Coders.html#invalidKey"><span class="hs-identifier">invalidKey</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-53"></span><span>    </span><span class="annot"><a href="Data.Coders.html#wrapCBORArray"><span class="hs-identifier">wrapCBORArray</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-54"></span><span>    </span><span class="annot"><a href="Data.Coders.html#encodeFoldable"><span class="hs-identifier">encodeFoldable</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-55"></span><span>    </span><span class="annot"><a href="Data.Coders.html#decodeCollectionWithLen"><span class="hs-identifier">decodeCollectionWithLen</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-56"></span><span>    </span><span class="annot"><a href="Data.Coders.html#decodeCollection"><span class="hs-identifier">decodeCollection</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-57"></span><span>    </span><span class="annot"><a href="Data.Coders.html#encodeFoldableEncoder"><span class="hs-identifier">encodeFoldableEncoder</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-58"></span><span>    </span><span class="annot"><a href="Data.Coders.html#dualList"><span class="hs-identifier">dualList</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- Dual values for export</span><span>
</span><span id="line-59"></span><span>    </span><span class="annot"><a href="Data.Coders.html#dualSeq"><span class="hs-identifier">dualSeq</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-60"></span><span>    </span><span class="annot"><a href="Data.Coders.html#dualSet"><span class="hs-identifier">dualSet</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-61"></span><span>    </span><span class="annot"><a href="Data.Coders.html#dualMaybeAsList"><span class="hs-identifier">dualMaybeAsList</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-62"></span><span>    </span><span class="annot"><a href="Data.Coders.html#dualMaybeAsNull"><span class="hs-identifier">dualMaybeAsNull</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-63"></span><span>    </span><span class="annot"><a href="Data.Coders.html#dualText"><span class="hs-identifier">dualText</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-64"></span><span>    </span><span class="annot"><a href="Data.Coders.html#dualStrictSeq"><span class="hs-identifier">dualStrictSeq</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-65"></span><span>    </span><span class="annot"><a href="Data.Coders.html#dualCBOR"><span class="hs-identifier">dualCBOR</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-66"></span><span>    </span><span class="annot"><a href="Data.Coders.html#to"><span class="hs-identifier">to</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-67"></span><span>    </span><span class="annot"><a href="Data.Coders.html#from"><span class="hs-identifier">from</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-68"></span><span>    </span><span class="annot"><span class="hs-identifier">Decoder</span></span><span class="hs-special">,</span><span>
</span><span id="line-69"></span><span>    </span><span class="annot"><span class="hs-identifier">Encoding</span></span><span class="hs-special">,</span><span>
</span><span id="line-70"></span><span>    </span><span class="annot"><a href="Data.Coders.html#encodeNullMaybe"><span class="hs-identifier">encodeNullMaybe</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-71"></span><span>    </span><span class="annot"><a href="Data.Coders.html#decodeNullMaybe"><span class="hs-identifier">decodeNullMaybe</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-72"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-73"></span><span class="hs-keyword">where</span><span>
</span><span id="line-74"></span><span>
</span><span id="line-75"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/src"><span class="hs-identifier">Cardano.Prelude</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/src"><span class="hs-identifier">cborError</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-76"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">replicateM</span></span><span class="hs-special">,</span><span class="annot"><span class="hs-identifier">unless</span></span><span class="hs-special">)</span><span>
</span><span id="line-77"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Codec.CBOR.Decoding</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Decoder</span></span><span class="hs-special">)</span><span>
</span><span id="line-78"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Codec.CBOR.Encoding</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Encoding</span></span><span class="hs-special">)</span><span>
</span><span id="line-79"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier">Cardano.Binary</span></a></span><span>
</span><span id="line-80"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier">FromCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier">fromCBOR</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-81"></span><span>    </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier">ToCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier">toCBOR</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-82"></span><span>    </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier">Annotator</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-83"></span><span>    </span><span class="annot"><span class="hs-identifier">encodeListLen</span></span><span class="hs-special">,</span><span>
</span><span id="line-84"></span><span>    </span><span class="annot"><span class="hs-identifier">encodeMapLen</span></span><span class="hs-special">,</span><span>
</span><span id="line-85"></span><span>    </span><span class="annot"><span class="hs-identifier">encodeWord</span></span><span class="hs-special">,</span><span>
</span><span id="line-86"></span><span>    </span><span class="annot"><span class="hs-identifier">encodeBreak</span></span><span class="hs-special">,</span><span>
</span><span id="line-87"></span><span>    </span><span class="annot"><span class="hs-identifier">encodeListLenIndef</span></span><span class="hs-special">,</span><span>
</span><span id="line-88"></span><span>    </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier">DecoderError</span></a></span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier">DecoderErrorCustom</span></a></span><span> </span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-89"></span><span>    </span><span class="annot"><span class="hs-identifier">decodeBreakOr</span></span><span class="hs-special">,</span><span>
</span><span id="line-90"></span><span>    </span><span class="annot"><span class="hs-identifier">decodeListLenOrIndef</span></span><span class="hs-special">,</span><span>
</span><span id="line-91"></span><span>    </span><span class="annot"><span class="hs-identifier">decodeMapLenOrIndef</span></span><span class="hs-special">,</span><span>
</span><span id="line-92"></span><span>    </span><span class="annot"><span class="hs-identifier">decodeWord</span></span><span class="hs-special">,</span><span>
</span><span id="line-93"></span><span>    </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier">matchSize</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-94"></span><span>    </span><span class="annot"><span class="hs-identifier">TokenType</span></span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">TypeNull</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-95"></span><span>    </span><span class="annot"><span class="hs-identifier">peekTokenType</span></span><span class="hs-special">,</span><span>
</span><span id="line-96"></span><span>    </span><span class="annot"><span class="hs-identifier">decodeNull</span></span><span class="hs-special">,</span><span>
</span><span id="line-97"></span><span>    </span><span class="annot"><span class="hs-identifier">encodeNull</span></span><span class="hs-special">,</span><span>
</span><span id="line-98"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-99"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Sequence</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Seq</span></span><span>
</span><span id="line-100"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/src"><span class="hs-identifier">Data.Sequence.Strict</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">StrictSeq</span></span><span>
</span><span id="line-101"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Set</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Set</span></span><span>
</span><span id="line-102"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Text</span></span><span>
</span><span id="line-103"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/src"><span class="hs-identifier">Data.Sequence.Strict</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/src"><span class="hs-identifier">StrictSeq</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-104"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Sequence</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Seq</span></span><span class="hs-special">)</span><span>
</span><span id="line-105"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Set</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Set</span></span><span class="hs-special">,</span><span class="annot"><span class="hs-identifier">insert</span></span><span class="hs-special">,</span><span class="annot"><span class="hs-identifier">member</span></span><span class="hs-special">)</span><span>
</span><span id="line-106"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Foldable</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">foldl'</span></span><span class="hs-special">)</span><span>
</span><span id="line-107"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Typeable</span></span><span>
</span><span id="line-108"></span><span>
</span><span id="line-109"></span><span class="hs-comment">-- ====================================================================</span><span>
</span><span id="line-110"></span><span>
</span><span id="line-111"></span><span id="local-6989586621679128967"><span id="local-6989586621679128968"><span class="annot"><a href="Data.Coders.html#decodeRecordNamed"><span class="hs-identifier hs-type">decodeRecordNamed</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text.Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679128968"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Decoder</span></span><span> </span><span class="annot"><a href="#local-6989586621679128967"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128968"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Decoder</span></span><span> </span><span class="annot"><a href="#local-6989586621679128967"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128968"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-112"></span><span id="decodeRecordNamed"><span class="annot"><span class="annottext">decodeRecordNamed :: Text -&gt; (a -&gt; Int) -&gt; Decoder s a -&gt; Decoder s a
</span><a href="Data.Coders.html#decodeRecordNamed"><span class="hs-identifier hs-var hs-var">decodeRecordNamed</span></a></span></span><span> </span><span id="local-6989586621679128794"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679128794"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621679128793"><span class="annot"><span class="annottext">a -&gt; Int
</span><a href="#local-6989586621679128793"><span class="hs-identifier hs-var">getRecordSize</span></a></span></span><span> </span><span id="local-6989586621679128792"><span class="annot"><span class="annottext">Decoder s a
</span><a href="#local-6989586621679128792"><span class="hs-identifier hs-var">decoder</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-113"></span><span>  </span><span id="local-6989586621679128791"><span class="annot"><span class="annottext">Maybe Int
</span><a href="#local-6989586621679128791"><span class="hs-identifier hs-var">lenOrIndef</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decoder s (Maybe Int)
forall s. Decoder s (Maybe Int)
</span><span class="hs-identifier hs-var">decodeListLenOrIndef</span></span><span>
</span><span id="line-114"></span><span>  </span><span id="local-6989586621679128790"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679128790"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decoder s a
</span><a href="#local-6989586621679128792"><span class="hs-identifier hs-var">decoder</span></a></span><span>
</span><span id="line-115"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe Int
</span><a href="#local-6989586621679128791"><span class="hs-identifier hs-var">lenOrIndef</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-116"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679128789"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679128789"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Int -&gt; Int -&gt; Decoder s ()
forall s. Text -&gt; Int -&gt; Int -&gt; Decoder s ()
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">matchSize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Text
</span><span class="hs-identifier hs-var">Text.pack</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\nRecord &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679128794"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679128789"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; Int
</span><a href="#local-6989586621679128793"><span class="hs-identifier hs-var">getRecordSize</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679128790"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-117"></span><span>    </span><span class="annot"><span class="annottext">Maybe Int
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-118"></span><span>      </span><span id="local-6989586621679128787"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679128787"><span class="hs-identifier hs-var">isBreak</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decoder s Bool
forall s. Decoder s Bool
</span><span class="hs-identifier hs-var">decodeBreakOr</span></span><span>
</span><span id="line-119"></span><span>      </span><span class="annot"><span class="annottext">Bool -&gt; Decoder s () -&gt; Decoder s ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">unless</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679128787"><span class="hs-identifier hs-var">isBreak</span></a></span><span> </span><span class="annot"><span class="annottext">(Decoder s () -&gt; Decoder s ()) -&gt; Decoder s () -&gt; Decoder s ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">DecoderError -&gt; Decoder s ()
forall e s a. Buildable e =&gt; e -&gt; Decoder s a
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/src"><span class="hs-identifier hs-var">cborError</span></a></span><span> </span><span class="annot"><span class="annottext">(DecoderError -&gt; Decoder s ()) -&gt; DecoderError -&gt; Decoder s ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; DecoderError
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">DecoderErrorCustom</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679128794"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Excess terms in array&quot;</span></span><span>
</span><span id="line-120"></span><span>  </span><span class="annot"><span class="annottext">a -&gt; Decoder s a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679128790"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-121"></span><span>
</span><span id="line-122"></span><span id="local-6989586621679128969"><span id="local-6989586621679128970"><span class="annot"><a href="Data.Coders.html#decodeRecordSum"><span class="hs-identifier hs-type">decodeRecordSum</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Word</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Decoder</span></span><span> </span><span class="annot"><a href="#local-6989586621679128970"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679128969"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Decoder</span></span><span> </span><span class="annot"><a href="#local-6989586621679128970"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128969"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-123"></span><span id="decodeRecordSum"><span class="annot"><span class="annottext">decodeRecordSum :: String -&gt; (Word -&gt; Decoder s (Int, a)) -&gt; Decoder s a
</span><a href="Data.Coders.html#decodeRecordSum"><span class="hs-identifier hs-var hs-var">decodeRecordSum</span></a></span></span><span> </span><span id="local-6989586621679128786"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679128786"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621679128785"><span class="annot"><span class="annottext">Word -&gt; Decoder s (Int, a)
</span><a href="#local-6989586621679128785"><span class="hs-identifier hs-var">decoder</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-124"></span><span>  </span><span id="local-6989586621679128784"><span class="annot"><span class="annottext">Maybe Int
</span><a href="#local-6989586621679128784"><span class="hs-identifier hs-var">lenOrIndef</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decoder s (Maybe Int)
forall s. Decoder s (Maybe Int)
</span><span class="hs-identifier hs-var">decodeListLenOrIndef</span></span><span>
</span><span id="line-125"></span><span>  </span><span id="local-6989586621679128783"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679128783"><span class="hs-identifier hs-var">tag</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decoder s Word
forall s. Decoder s Word
</span><span class="hs-identifier hs-var">decodeWord</span></span><span>
</span><span id="line-126"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621679128782"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679128782"><span class="hs-identifier hs-var">size</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679128781"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679128781"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Word -&gt; Decoder s (Int, a)
</span><a href="#local-6989586621679128785"><span class="hs-identifier hs-var">decoder</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679128783"><span class="hs-identifier hs-var">tag</span></a></span><span> </span><span class="hs-comment">-- we decode all the stuff we want</span><span>
</span><span id="line-127"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe Int
</span><a href="#local-6989586621679128784"><span class="hs-identifier hs-var">lenOrIndef</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-128"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679128780"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679128780"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Int -&gt; Int -&gt; Decoder s ()
forall s. Text -&gt; Int -&gt; Int -&gt; Decoder s ()
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">matchSize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Text
</span><span class="hs-identifier hs-var">Text.pack</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\nSum &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679128786"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\nreturned=&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679128782"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; actually read= &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679128780"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679128782"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679128780"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-129"></span><span>    </span><span class="annot"><span class="annottext">Maybe Int
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-130"></span><span>      </span><span id="local-6989586621679128778"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679128778"><span class="hs-identifier hs-var">isBreak</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decoder s Bool
forall s. Decoder s Bool
</span><span class="hs-identifier hs-var">decodeBreakOr</span></span><span> </span><span class="hs-comment">-- if there is stuff left, it is unnecessary extra stuff</span><span>
</span><span id="line-131"></span><span>      </span><span class="annot"><span class="annottext">Bool -&gt; Decoder s () -&gt; Decoder s ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">unless</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679128778"><span class="hs-identifier hs-var">isBreak</span></a></span><span> </span><span class="annot"><span class="annottext">(Decoder s () -&gt; Decoder s ()) -&gt; Decoder s () -&gt; Decoder s ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">DecoderError -&gt; Decoder s ()
forall e s a. Buildable e =&gt; e -&gt; Decoder s a
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/src"><span class="hs-identifier hs-var">cborError</span></a></span><span> </span><span class="annot"><span class="annottext">(DecoderError -&gt; Decoder s ()) -&gt; DecoderError -&gt; Decoder s ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; DecoderError
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">DecoderErrorCustom</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Text
</span><span class="hs-identifier hs-var">Text.pack</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679128786"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Excess terms in array&quot;</span></span><span>
</span><span id="line-132"></span><span>  </span><span class="annot"><span class="annottext">a -&gt; Decoder s a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679128781"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-133"></span><span>
</span><span id="line-134"></span><span id="local-6989586621679128861"><span class="annot"><a href="Data.Coders.html#encodeNullMaybe"><span class="hs-identifier hs-type">encodeNullMaybe</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679128861"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Encoding</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679128861"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Encoding</span></span></span><span>
</span><span id="line-135"></span><span id="encodeNullMaybe"><span class="annot"><span class="annottext">encodeNullMaybe :: (a -&gt; Encoding) -&gt; Maybe a -&gt; Encoding
</span><a href="Data.Coders.html#encodeNullMaybe"><span class="hs-identifier hs-var hs-var">encodeNullMaybe</span></a></span></span><span> </span><span class="annot"><span class="annottext">a -&gt; Encoding
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Encoding
</span><span class="hs-identifier hs-var">encodeNull</span></span><span>
</span><span id="line-136"></span><span class="annot"><a href="Data.Coders.html#encodeNullMaybe"><span class="hs-identifier hs-var">encodeNullMaybe</span></a></span><span> </span><span id="local-6989586621679128777"><span class="annot"><span class="annottext">a -&gt; Encoding
</span><a href="#local-6989586621679128777"><span class="hs-identifier hs-var">encoder</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679128776"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679128776"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; Encoding
</span><a href="#local-6989586621679128777"><span class="hs-identifier hs-var">encoder</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679128776"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-137"></span><span>
</span><span id="line-138"></span><span id="local-6989586621679128858"><span id="local-6989586621679128859"><span class="annot"><a href="Data.Coders.html#decodeNullMaybe"><span class="hs-identifier hs-type">decodeNullMaybe</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Decoder</span></span><span> </span><span class="annot"><a href="#local-6989586621679128859"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128858"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Decoder</span></span><span> </span><span class="annot"><a href="#local-6989586621679128859"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679128858"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-139"></span><span id="decodeNullMaybe"><span class="annot"><span class="annottext">decodeNullMaybe :: Decoder s a -&gt; Decoder s (Maybe a)
</span><a href="Data.Coders.html#decodeNullMaybe"><span class="hs-identifier hs-var hs-var">decodeNullMaybe</span></a></span></span><span> </span><span id="local-6989586621679128775"><span class="annot"><span class="annottext">Decoder s a
</span><a href="#local-6989586621679128775"><span class="hs-identifier hs-var">decoder</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-140"></span><span>  </span><span class="annot"><span class="annottext">Decoder s TokenType
forall s. Decoder s TokenType
</span><span class="hs-identifier hs-var">peekTokenType</span></span><span> </span><span class="annot"><span class="annottext">Decoder s TokenType
-&gt; (TokenType -&gt; Decoder s (Maybe a)) -&gt; Decoder s (Maybe a)
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-141"></span><span>    </span><span class="annot"><span class="annottext">TokenType
</span><span class="hs-identifier hs-var">TypeNull</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-142"></span><span>      </span><span class="annot"><span class="annottext">Decoder s ()
forall s. Decoder s ()
</span><span class="hs-identifier hs-var">decodeNull</span></span><span>
</span><span id="line-143"></span><span>      </span><span class="annot"><span class="annottext">Maybe a -&gt; Decoder s (Maybe a)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Maybe a
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-144"></span><span>    </span><span class="annot"><span class="annottext">TokenType
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">a -&gt; Maybe a
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(a -&gt; Maybe a) -&gt; Decoder s a -&gt; Decoder s (Maybe a)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Decoder s a
</span><a href="#local-6989586621679128775"><span class="hs-identifier hs-var">decoder</span></a></span><span>
</span><span id="line-145"></span><span>
</span><span id="line-146"></span><span id="local-6989586621679128960"><span id="local-6989586621679128961"><span class="annot"><a href="Data.Coders.html#invalidKey"><span class="hs-identifier hs-type">invalidKey</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Decoder</span></span><span> </span><span class="annot"><a href="#local-6989586621679128961"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128960"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-147"></span><span id="invalidKey"><span class="annot"><span class="annottext">invalidKey :: Word -&gt; Decoder s a
</span><a href="Data.Coders.html#invalidKey"><span class="hs-identifier hs-var hs-var">invalidKey</span></a></span></span><span> </span><span id="local-6989586621679128773"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679128773"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DecoderError -&gt; Decoder s a
forall e s a. Buildable e =&gt; e -&gt; Decoder s a
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/src"><span class="hs-identifier hs-var">cborError</span></a></span><span> </span><span class="annot"><span class="annottext">(DecoderError -&gt; Decoder s a) -&gt; DecoderError -&gt; Decoder s a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; DecoderError
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">DecoderErrorCustom</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;not a valid key:&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Text
</span><span class="hs-identifier hs-var">Text.pack</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Text) -&gt; String -&gt; Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Word -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679128773"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-148"></span><span>
</span><span id="line-149"></span><span id="local-6989586621679128921"><span id="local-6989586621679128922"><span class="annot"><a href="Data.Coders.html#duplicateKey"><span class="hs-identifier hs-type">duplicateKey</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Decoder</span></span><span> </span><span class="annot"><a href="#local-6989586621679128922"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128921"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-150"></span><span id="duplicateKey"><span class="annot"><span class="annottext">duplicateKey :: String -&gt; Word -&gt; Decoder s a
</span><a href="Data.Coders.html#duplicateKey"><span class="hs-identifier hs-var hs-var">duplicateKey</span></a></span></span><span> </span><span id="local-6989586621679128771"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679128771"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621679128770"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679128770"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DecoderError -&gt; Decoder s a
forall e s a. Buildable e =&gt; e -&gt; Decoder s a
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/src"><span class="hs-identifier hs-var">cborError</span></a></span><span> </span><span class="annot"><span class="annottext">(DecoderError -&gt; Decoder s a) -&gt; DecoderError -&gt; Decoder s a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; DecoderError
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">DecoderErrorCustom</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Duplicate key:&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Text
</span><span class="hs-identifier hs-var">Text.pack</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Text) -&gt; String -&gt; Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Word -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679128770"><span class="hs-identifier hs-var">k</span></a></span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; while decoding type &quot;</span></span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679128771"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-151"></span><span>
</span><span id="line-152"></span><span id="local-6989586621679128927"><span id="local-6989586621679128928"><span class="annot"><a href="Data.Coders.html#unusedRequiredKeys"><span class="hs-identifier hs-type">unusedRequiredKeys</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Word</span></span><span class="hs-special">,</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Decoder</span></span><span> </span><span class="annot"><a href="#local-6989586621679128928"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128927"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-153"></span><span id="unusedRequiredKeys"><span class="annot"><span class="annottext">unusedRequiredKeys :: Set Word -&gt; [(Word, String)] -&gt; String -&gt; Decoder s a
</span><a href="Data.Coders.html#unusedRequiredKeys"><span class="hs-identifier hs-var hs-var">unusedRequiredKeys</span></a></span></span><span> </span><span id="local-6989586621679128768"><span class="annot"><span class="annottext">Set Word
</span><a href="#local-6989586621679128768"><span class="hs-identifier hs-var">used</span></a></span></span><span> </span><span id="local-6989586621679128767"><span class="annot"><span class="annottext">[(Word, String)]
</span><a href="#local-6989586621679128767"><span class="hs-identifier hs-var">required</span></a></span></span><span> </span><span id="local-6989586621679128766"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679128766"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-154"></span><span>      </span><span class="annot"><span class="annottext">DecoderError -&gt; Decoder s a
forall e s a. Buildable e =&gt; e -&gt; Decoder s a
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/src"><span class="hs-identifier hs-var">cborError</span></a></span><span> </span><span class="annot"><span class="annottext">(DecoderError -&gt; Decoder s a) -&gt; DecoderError -&gt; Decoder s a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; DecoderError
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">DecoderErrorCustom</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Text
</span><span class="hs-identifier hs-var">Text.pack</span></span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;value of type &quot;</span></span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679128766"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Text
</span><span class="hs-identifier hs-var">Text.pack</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(Word, String)] -&gt; String
forall a. Show a =&gt; [(a, String)] -&gt; String
</span><a href="#local-6989586621679128765"><span class="hs-identifier hs-var">message</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((Word, String) -&gt; Bool) -&gt; [(Word, String)] -&gt; [(Word, String)]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">filter</span></span><span> </span><span class="annot"><span class="annottext">(Word, String) -&gt; Bool
</span><a href="#local-6989586621679128764"><span class="hs-identifier hs-var">bad</span></a></span><span> </span><span class="annot"><span class="annottext">[(Word, String)]
</span><a href="#local-6989586621679128767"><span class="hs-identifier hs-var">required</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-155"></span><span>   </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679128764"><span class="annot"><span class="annottext">bad :: (Word, String) -&gt; Bool
</span><a href="#local-6989586621679128764"><span class="hs-identifier hs-var hs-var">bad</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679128763"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679128763"><span class="hs-identifier hs-var">k</span></a></span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word -&gt; Set Word -&gt; Bool
forall a. Ord a =&gt; a -&gt; Set a -&gt; Bool
</span><span class="hs-identifier hs-var">member</span></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679128763"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">Set Word
</span><a href="#local-6989586621679128768"><span class="hs-identifier hs-var">used</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-156"></span><span>         </span><span id="local-6989586621679128765"><span class="annot"><span class="annottext">message :: [(a, String)] -&gt; String
</span><a href="#local-6989586621679128765"><span class="hs-identifier hs-var hs-var">message</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;, not decoded.&quot;</span></span><span>
</span><span id="line-157"></span><span>         </span><span class="annot"><a href="#local-6989586621679128765"><span class="hs-identifier hs-var">message</span></a></span><span> </span><span class="hs-special">[</span><span id="local-6989586621679128761"><span class="annot"><span class="annottext">(a, String)
</span><a href="#local-6989586621679128761"><span class="hs-identifier hs-var">pair</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a, String) -&gt; String
forall a. Show a =&gt; (a, String) -&gt; String
</span><a href="#local-6989586621679128760"><span class="hs-identifier hs-var">report</span></a></span><span> </span><span class="annot"><span class="annottext">(a, String)
</span><a href="#local-6989586621679128761"><span class="hs-identifier hs-var">pair</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[(a, String)] -&gt; String
</span><a href="#local-6989586621679128765"><span class="hs-identifier hs-var">message</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-158"></span><span>         </span><span class="annot"><a href="#local-6989586621679128765"><span class="hs-identifier hs-var">message</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679128759"><span class="annot"><span class="annottext">(a, String)
</span><a href="#local-6989586621679128759"><span class="hs-identifier hs-var">pair</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621679128758"><span class="annot"><span class="annottext">[(a, String)]
</span><a href="#local-6989586621679128758"><span class="hs-identifier hs-var">more</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a, String) -&gt; String
forall a. Show a =&gt; (a, String) -&gt; String
</span><a href="#local-6989586621679128760"><span class="hs-identifier hs-var">report</span></a></span><span> </span><span class="annot"><span class="annottext">(a, String)
</span><a href="#local-6989586621679128759"><span class="hs-identifier hs-var">pair</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;, and &quot;</span></span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span class="annot"><span class="annottext">[(a, String)] -&gt; String
</span><a href="#local-6989586621679128765"><span class="hs-identifier hs-var">message</span></a></span><span> </span><span class="annot"><span class="annottext">[(a, String)]
</span><a href="#local-6989586621679128758"><span class="hs-identifier hs-var">more</span></a></span><span>
</span><span id="line-159"></span><span>         </span><span id="local-6989586621679128760"><span class="annot"><span class="annottext">report :: (a, String) -&gt; String
</span><a href="#local-6989586621679128760"><span class="hs-identifier hs-var hs-var">report</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679128757"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679128757"><span class="hs-identifier hs-var">k</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679128756"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679128756"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;field &quot;</span></span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679128756"><span class="hs-identifier hs-var">f</span></a></span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; with key &quot;</span></span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span class="annot"><span class="annottext">a -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679128757"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-160"></span><span>
</span><span id="line-161"></span><span id="local-6989586621679129099"><span id="local-6989586621679129100"><span class="annot"><a href="Data.Coders.html#decodeList"><span class="hs-identifier hs-type">decodeList</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Decoder</span></span><span> </span><span class="annot"><a href="#local-6989586621679129100"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679129099"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Decoder</span></span><span> </span><span class="annot"><a href="#local-6989586621679129100"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679129099"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span></span></span><span>
</span><span id="line-162"></span><span id="decodeList"><span class="annot"><span class="annottext">decodeList :: Decoder s a -&gt; Decoder s [a]
</span><a href="Data.Coders.html#decodeList"><span class="hs-identifier hs-var hs-var">decodeList</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Decoder s (Maybe Int) -&gt; Decoder s a -&gt; Decoder s [a]
forall s a. Decoder s (Maybe Int) -&gt; Decoder s a -&gt; Decoder s [a]
</span><a href="Data.Coders.html#decodeCollection"><span class="hs-identifier hs-var">decodeCollection</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s (Maybe Int)
forall s. Decoder s (Maybe Int)
</span><span class="hs-identifier hs-var">decodeListLenOrIndef</span></span><span>
</span><span id="line-163"></span><span>
</span><span id="line-164"></span><span id="local-6989586621679128868"><span id="local-6989586621679128869"><span class="annot"><a href="Data.Coders.html#decodeSeq"><span class="hs-identifier hs-type">decodeSeq</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Decoder</span></span><span> </span><span class="annot"><a href="#local-6989586621679128869"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128868"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Decoder</span></span><span> </span><span class="annot"><a href="#local-6989586621679128869"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Seq</span></span><span> </span><span class="annot"><a href="#local-6989586621679128868"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-165"></span><span id="decodeSeq"><span class="annot"><span class="annottext">decodeSeq :: Decoder s a -&gt; Decoder s (Seq a)
</span><a href="Data.Coders.html#decodeSeq"><span class="hs-identifier hs-var hs-var">decodeSeq</span></a></span></span><span> </span><span id="local-6989586621679128755"><span class="annot"><span class="annottext">Decoder s a
</span><a href="#local-6989586621679128755"><span class="hs-identifier hs-var">decoder</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[a] -&gt; Seq a
forall a. [a] -&gt; Seq a
</span><span class="hs-identifier hs-var">Seq.fromList</span></span><span> </span><span class="annot"><span class="annottext">([a] -&gt; Seq a) -&gt; Decoder s [a] -&gt; Decoder s (Seq a)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Decoder s a -&gt; Decoder s [a]
forall s a. Decoder s a -&gt; Decoder s [a]
</span><a href="Data.Coders.html#decodeList"><span class="hs-identifier hs-var">decodeList</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s a
</span><a href="#local-6989586621679128755"><span class="hs-identifier hs-var">decoder</span></a></span><span>
</span><span id="line-166"></span><span>
</span><span id="line-167"></span><span id="local-6989586621679128854"><span id="local-6989586621679128855"><span class="annot"><a href="Data.Coders.html#decodeStrictSeq"><span class="hs-identifier hs-type">decodeStrictSeq</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Decoder</span></span><span> </span><span class="annot"><a href="#local-6989586621679128855"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128854"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Decoder</span></span><span> </span><span class="annot"><a href="#local-6989586621679128855"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/src"><span class="hs-identifier hs-type">StrictSeq</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128854"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-168"></span><span id="decodeStrictSeq"><span class="annot"><span class="annottext">decodeStrictSeq :: Decoder s a -&gt; Decoder s (StrictSeq a)
</span><a href="Data.Coders.html#decodeStrictSeq"><span class="hs-identifier hs-var hs-var">decodeStrictSeq</span></a></span></span><span> </span><span id="local-6989586621679128753"><span class="annot"><span class="annottext">Decoder s a
</span><a href="#local-6989586621679128753"><span class="hs-identifier hs-var">decoder</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[a] -&gt; StrictSeq a
forall a. [a] -&gt; StrictSeq a
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/src"><span class="hs-identifier hs-var">StrictSeq.fromList</span></a></span><span> </span><span class="annot"><span class="annottext">([a] -&gt; StrictSeq a) -&gt; Decoder s [a] -&gt; Decoder s (StrictSeq a)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Decoder s a -&gt; Decoder s [a]
forall s a. Decoder s a -&gt; Decoder s [a]
</span><a href="Data.Coders.html#decodeList"><span class="hs-identifier hs-var">decodeList</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s a
</span><a href="#local-6989586621679128753"><span class="hs-identifier hs-var">decoder</span></a></span><span>
</span><span id="line-169"></span><span>
</span><span id="line-170"></span><span id="local-6989586621679128864"><span id="local-6989586621679128865"><span class="annot"><a href="Data.Coders.html#decodeSet"><span class="hs-identifier hs-type">decodeSet</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679128865"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Decoder</span></span><span> </span><span class="annot"><a href="#local-6989586621679128864"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128865"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Decoder</span></span><span> </span><span class="annot"><a href="#local-6989586621679128864"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><a href="#local-6989586621679128865"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-171"></span><span id="decodeSet"><span class="annot"><span class="annottext">decodeSet :: Decoder s a -&gt; Decoder s (Set a)
</span><a href="Data.Coders.html#decodeSet"><span class="hs-identifier hs-var hs-var">decodeSet</span></a></span></span><span> </span><span id="local-6989586621679128751"><span class="annot"><span class="annottext">Decoder s a
</span><a href="#local-6989586621679128751"><span class="hs-identifier hs-var">decoder</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[a] -&gt; Set a
forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">Set.fromList</span></span><span> </span><span class="annot"><span class="annottext">([a] -&gt; Set a) -&gt; Decoder s [a] -&gt; Decoder s (Set a)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Decoder s a -&gt; Decoder s [a]
forall s a. Decoder s a -&gt; Decoder s [a]
</span><a href="Data.Coders.html#decodeList"><span class="hs-identifier hs-var">decodeList</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s a
</span><a href="#local-6989586621679128751"><span class="hs-identifier hs-var">decoder</span></a></span><span>
</span><span id="line-172"></span><span>
</span><span id="line-173"></span><span id="local-6989586621679129105"><span id="local-6989586621679129106"><span class="annot"><a href="Data.Coders.html#decodeCollection"><span class="hs-identifier hs-type">decodeCollection</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Decoder</span></span><span> </span><span class="annot"><a href="#local-6989586621679129106"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Decoder</span></span><span> </span><span class="annot"><a href="#local-6989586621679129106"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679129105"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Decoder</span></span><span> </span><span class="annot"><a href="#local-6989586621679129106"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679129105"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span></span></span><span>
</span><span id="line-174"></span><span id="decodeCollection"><span class="annot"><span class="annottext">decodeCollection :: Decoder s (Maybe Int) -&gt; Decoder s a -&gt; Decoder s [a]
</span><a href="Data.Coders.html#decodeCollection"><span class="hs-identifier hs-var hs-var">decodeCollection</span></a></span></span><span> </span><span id="local-6989586621679128749"><span class="annot"><span class="annottext">Decoder s (Maybe Int)
</span><a href="#local-6989586621679128749"><span class="hs-identifier hs-var">lenOrIndef</span></a></span></span><span> </span><span id="local-6989586621679128748"><span class="annot"><span class="annottext">Decoder s a
</span><a href="#local-6989586621679128748"><span class="hs-identifier hs-var">el</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Int, [a]) -&gt; [a]
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="annot"><span class="annottext">((Int, [a]) -&gt; [a]) -&gt; Decoder s (Int, [a]) -&gt; Decoder s [a]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Decoder s (Maybe Int) -&gt; Decoder s a -&gt; Decoder s (Int, [a])
forall s a.
Decoder s (Maybe Int) -&gt; Decoder s a -&gt; Decoder s (Int, [a])
</span><a href="Data.Coders.html#decodeCollectionWithLen"><span class="hs-identifier hs-var">decodeCollectionWithLen</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s (Maybe Int)
</span><a href="#local-6989586621679128749"><span class="hs-identifier hs-var">lenOrIndef</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s a
</span><a href="#local-6989586621679128748"><span class="hs-identifier hs-var">el</span></a></span><span>
</span><span id="line-175"></span><span>
</span><span id="line-176"></span><span id="local-6989586621679129086"><span id="local-6989586621679129087"><span class="annot"><a href="Data.Coders.html#decodeCollectionWithLen"><span class="hs-identifier hs-type">decodeCollectionWithLen</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-177"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Decoder</span></span><span> </span><span class="annot"><a href="#local-6989586621679129087"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-178"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Decoder</span></span><span> </span><span class="annot"><a href="#local-6989586621679129087"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679129086"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-179"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Decoder</span></span><span> </span><span class="annot"><a href="#local-6989586621679129087"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679129086"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-180"></span><span id="decodeCollectionWithLen"><span class="annot"><span class="annottext">decodeCollectionWithLen :: Decoder s (Maybe Int) -&gt; Decoder s a -&gt; Decoder s (Int, [a])
</span><a href="Data.Coders.html#decodeCollectionWithLen"><span class="hs-identifier hs-var hs-var">decodeCollectionWithLen</span></a></span></span><span> </span><span id="local-6989586621679128747"><span class="annot"><span class="annottext">Decoder s (Maybe Int)
</span><a href="#local-6989586621679128747"><span class="hs-identifier hs-var">lenOrIndef</span></a></span></span><span> </span><span id="local-6989586621679128746"><span class="annot"><span class="annottext">Decoder s a
</span><a href="#local-6989586621679128746"><span class="hs-identifier hs-var">el</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-181"></span><span>  </span><span class="annot"><span class="annottext">Decoder s (Maybe Int)
</span><a href="#local-6989586621679128747"><span class="hs-identifier hs-var">lenOrIndef</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s (Maybe Int)
-&gt; (Maybe Int -&gt; Decoder s (Int, [a])) -&gt; Decoder s (Int, [a])
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-182"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679128745"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679128745"><span class="hs-identifier hs-var">len</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679128745"><span class="hs-identifier hs-var">len</span></a></span><span> </span><span class="annot"><span class="annottext">([a] -&gt; (Int, [a])) -&gt; Decoder s [a] -&gt; Decoder s (Int, [a])
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Decoder s a -&gt; Decoder s [a]
forall (m :: * -&gt; *) a. Applicative m =&gt; Int -&gt; m a -&gt; m [a]
</span><span class="hs-identifier hs-var">replicateM</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679128745"><span class="hs-identifier hs-var">len</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s a
</span><a href="#local-6989586621679128746"><span class="hs-identifier hs-var">el</span></a></span><span>
</span><span id="line-183"></span><span>    </span><span class="annot"><span class="annottext">Maybe Int
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Int, [a]) -&gt; Decoder s Bool -&gt; Decoder s a -&gt; Decoder s (Int, [a])
forall (m :: * -&gt; *) a a.
(Monad m, Num a) =&gt;
(a, [a]) -&gt; m Bool -&gt; m a -&gt; m (a, [a])
</span><a href="#local-6989586621679128744"><span class="hs-identifier hs-var">loop</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool) -&gt; Decoder s Bool -&gt; Decoder s Bool
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Decoder s Bool
forall s. Decoder s Bool
</span><span class="hs-identifier hs-var">decodeBreakOr</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Decoder s a
</span><a href="#local-6989586621679128746"><span class="hs-identifier hs-var">el</span></a></span><span>
</span><span id="line-184"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-185"></span><span>    </span><span id="local-6989586621679128744"><span class="annot"><span class="annottext">loop :: (a, [a]) -&gt; m Bool -&gt; m a -&gt; m (a, [a])
</span><a href="#local-6989586621679128744"><span class="hs-identifier hs-var hs-var">loop</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679128743"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679128743"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679128742"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679128742"><span class="hs-identifier hs-var">acc</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679128741"><span class="annot"><span class="annottext">m Bool
</span><a href="#local-6989586621679128741"><span class="hs-identifier hs-var">condition</span></a></span></span><span> </span><span id="local-6989586621679128740"><span class="annot"><span class="annottext">m a
</span><a href="#local-6989586621679128740"><span class="hs-identifier hs-var">action</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-186"></span><span>      </span><span class="annot"><span class="annottext">m Bool
</span><a href="#local-6989586621679128741"><span class="hs-identifier hs-var">condition</span></a></span><span> </span><span class="annot"><span class="annottext">m Bool -&gt; (Bool -&gt; m (a, [a])) -&gt; m (a, [a])
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-187"></span><span>        </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(a, [a]) -&gt; m (a, [a])
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679128743"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[a] -&gt; [a]
forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">reverse</span></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679128742"><span class="hs-identifier hs-var">acc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-188"></span><span>        </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">m a
</span><a href="#local-6989586621679128740"><span class="hs-identifier hs-var">action</span></a></span><span> </span><span class="annot"><span class="annottext">m a -&gt; (a -&gt; m (a, [a])) -&gt; m (a, [a])
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679128738"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679128738"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(a, [a]) -&gt; m Bool -&gt; m a -&gt; m (a, [a])
</span><a href="#local-6989586621679128744"><span class="hs-identifier hs-var">loop</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679128743"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; a
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-number">1</span></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679128738"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; [a] -&gt; [a]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679128742"><span class="hs-identifier hs-var">acc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">m Bool
</span><a href="#local-6989586621679128741"><span class="hs-identifier hs-var">condition</span></a></span><span> </span><span class="annot"><span class="annottext">m a
</span><a href="#local-6989586621679128740"><span class="hs-identifier hs-var">action</span></a></span><span>
</span><span id="line-189"></span><span>
</span><span id="line-190"></span><span id="local-6989586621679128873"><span id="local-6989586621679128874"><span class="annot"><a href="Data.Coders.html#encodeFoldable"><span class="hs-identifier hs-type">encodeFoldable</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-type">ToCBOR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128874"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Foldable</span></span><span> </span><span class="annot"><a href="#local-6989586621679128873"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679128873"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128874"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Encoding</span></span></span></span><span>
</span><span id="line-191"></span><span id="encodeFoldable"><span class="annot"><span class="annottext">encodeFoldable :: f a -&gt; Encoding
</span><a href="Data.Coders.html#encodeFoldable"><span class="hs-identifier hs-var hs-var">encodeFoldable</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; Encoding) -&gt; f a -&gt; Encoding
forall (f :: * -&gt; *) a.
Foldable f =&gt;
(a -&gt; Encoding) -&gt; f a -&gt; Encoding
</span><a href="Data.Coders.html#encodeFoldableEncoder"><span class="hs-identifier hs-var">encodeFoldableEncoder</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; Encoding
forall a. ToCBOR a =&gt; a -&gt; Encoding
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">toCBOR</span></a></span><span>
</span><span id="line-192"></span><span>
</span><span id="line-193"></span><span id="local-6989586621679129072"><span id="local-6989586621679129073"><span class="annot"><a href="Data.Coders.html#encodeFoldableEncoder"><span class="hs-identifier hs-type">encodeFoldableEncoder</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Foldable</span></span><span> </span><span class="annot"><a href="#local-6989586621679129073"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679129072"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Encoding</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679129073"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679129072"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Encoding</span></span></span></span><span>
</span><span id="line-194"></span><span id="encodeFoldableEncoder"><span class="annot"><span class="annottext">encodeFoldableEncoder :: (a -&gt; Encoding) -&gt; f a -&gt; Encoding
</span><a href="Data.Coders.html#encodeFoldableEncoder"><span class="hs-identifier hs-var hs-var">encodeFoldableEncoder</span></a></span></span><span> </span><span id="local-6989586621679128736"><span class="annot"><span class="annottext">a -&gt; Encoding
</span><a href="#local-6989586621679128736"><span class="hs-identifier hs-var">encoder</span></a></span></span><span> </span><span id="local-6989586621679128735"><span class="annot"><span class="annottext">f a
</span><a href="#local-6989586621679128735"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word -&gt; Encoding -&gt; Encoding
</span><a href="Data.Coders.html#wrapCBORArray"><span class="hs-identifier hs-var">wrapCBORArray</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679128734"><span class="hs-identifier hs-var">len</span></a></span><span> </span><span class="annot"><span class="annottext">Encoding
</span><a href="#local-6989586621679128733"><span class="hs-identifier hs-var">contents</span></a></span><span>
</span><span id="line-195"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-196"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679128734"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679128734"><span class="hs-identifier hs-var">len</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679128733"><span class="annot"><span class="annottext">Encoding
</span><a href="#local-6989586621679128733"><span class="hs-identifier hs-var">contents</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((Word, Encoding) -&gt; a -&gt; (Word, Encoding))
-&gt; (Word, Encoding) -&gt; f a -&gt; (Word, Encoding)
forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldl'</span></span><span> </span><span class="annot"><span class="annottext">(Word, Encoding) -&gt; a -&gt; (Word, Encoding)
</span><a href="#local-6989586621679128732"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">0</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Encoding
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">f a
</span><a href="#local-6989586621679128735"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-197"></span><span>    </span><span id="local-6989586621679128732"><span class="annot"><span class="annottext">go :: (Word, Encoding) -&gt; a -&gt; (Word, Encoding)
</span><a href="#local-6989586621679128732"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">!</span><span id="local-6989586621679128731"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679128731"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">,</span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679128730"><span class="annot"><span class="annottext">Encoding
</span><a href="#local-6989586621679128730"><span class="hs-identifier hs-var">enc</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679128729"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679128729"><span class="hs-identifier hs-var">next</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679128731"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Word -&gt; Word
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">1</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Encoding
</span><a href="#local-6989586621679128730"><span class="hs-identifier hs-var">enc</span></a></span><span> </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; Encoding
</span><a href="#local-6989586621679128736"><span class="hs-identifier hs-var">encoder</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679128729"><span class="hs-identifier hs-var">next</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-198"></span><span>
</span><span id="line-199"></span><span class="annot"><a href="Data.Coders.html#wrapCBORArray"><span class="hs-identifier hs-type">wrapCBORArray</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Encoding</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Encoding</span></span><span>
</span><span id="line-200"></span><span id="wrapCBORArray"><span class="annot"><span class="annottext">wrapCBORArray :: Word -&gt; Encoding -&gt; Encoding
</span><a href="Data.Coders.html#wrapCBORArray"><span class="hs-identifier hs-var hs-var">wrapCBORArray</span></a></span></span><span> </span><span id="local-6989586621679128728"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679128728"><span class="hs-identifier hs-var">len</span></a></span></span><span> </span><span id="local-6989586621679128727"><span class="annot"><span class="annottext">Encoding
</span><a href="#local-6989586621679128727"><span class="hs-identifier hs-var">contents</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-201"></span><span>  </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679128728"><span class="hs-identifier hs-var">len</span></a></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Word -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;=</span></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">23</span></span><span>
</span><span id="line-202"></span><span>    </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Word -&gt; Encoding
</span><span class="hs-identifier hs-var">encodeListLen</span></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679128728"><span class="hs-identifier hs-var">len</span></a></span><span> </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Encoding
</span><a href="#local-6989586621679128727"><span class="hs-identifier hs-var">contents</span></a></span><span>
</span><span id="line-203"></span><span>    </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Encoding
</span><span class="hs-identifier hs-var">encodeListLenIndef</span></span><span> </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Encoding
</span><a href="#local-6989586621679128727"><span class="hs-identifier hs-var">contents</span></a></span><span> </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Encoding
</span><span class="hs-identifier hs-var">encodeBreak</span></span><span>
</span><span id="line-204"></span><span>
</span><span id="line-205"></span><span>
</span><span id="line-206"></span><span class="hs-comment">-- ===============================================================================</span><span>
</span><span id="line-207"></span><span class="hs-comment">-- Encode and Decode are typed data structures which specify encoders and decoders</span><span>
</span><span id="line-208"></span><span class="hs-comment">-- for Algebraic data structures written in Haskell. They exploit types and count</span><span>
</span><span id="line-209"></span><span class="hs-comment">-- the correct number fields in an encoding and decoding, which are automatically computed.</span><span>
</span><span id="line-210"></span><span class="hs-comment">-- They are somewhat dual, and are designed so that visual inspection of a Encode and</span><span>
</span><span id="line-211"></span><span class="hs-comment">-- its dual Decode can help the user conclude that the two are self-consistent.</span><span>
</span><span id="line-212"></span><span class="hs-comment">-- They are also reusable abstractions that can be defined once, and then used many places.</span><span>
</span><span id="line-213"></span><span class="hs-comment">--</span><span>
</span><span id="line-214"></span><span class="hs-comment">-- (Encode t) is a data structure from which 3 things can be recovered</span><span>
</span><span id="line-215"></span><span class="hs-comment">-- Given:    x :: Encode t</span><span>
</span><span id="line-216"></span><span class="hs-comment">-- 1) get a value of type t</span><span>
</span><span id="line-217"></span><span class="hs-comment">-- 2) get an Encoding for that value, which correctly encodes the number of &quot;fields&quot;</span><span>
</span><span id="line-218"></span><span class="hs-comment">--    written to the ByteString. Care must still be taken that the Keys are correct.</span><span>
</span><span id="line-219"></span><span class="hs-comment">-- 3) get a (MemoBytes t)</span><span>
</span><span id="line-220"></span><span class="hs-comment">-- The advantage of using Encode with a MemoBytes, is we don't have to make a ToCBOR</span><span>
</span><span id="line-221"></span><span class="hs-comment">-- instance. Instead the &quot;instance&quot; is spread amongst the pattern constuctors by using</span><span>
</span><span id="line-222"></span><span class="hs-comment">-- (memoBytes encoding) in the where clause of the pattern contructor.</span><span>
</span><span id="line-223"></span><span class="hs-comment">-- See some examples of this see the file Timelocks.hs</span><span>
</span><span id="line-224"></span><span class="hs-comment">--</span><span>
</span><span id="line-225"></span><span class="hs-comment">-- The Encode and Decode mechanism are meant to specify the encoding and decoding of</span><span>
</span><span id="line-226"></span><span class="hs-comment">-- Algebraic datatypes in a uniform way. (Decode t) is dual to (Encode t). In some cases</span><span>
</span><span id="line-227"></span><span class="hs-comment">-- a decoder can be extracted from an encoder by visual inspection. We now give some</span><span>
</span><span id="line-228"></span><span class="hs-comment">-- examples. In the examples Let Int and C have ToCBOR instances, and dualB :: Dual B</span><span>
</span><span id="line-229"></span><span class="hs-comment">{-
-- An example with 1 constructor (a record) uses Rec and RecD

data C = C Text.Text
instance ToCBOR C where toCBOR (C t) = toCBOR t
instance FromCBOR C where fromCBOR = C &lt;$&gt; fromCBOR

data B = B Text.Text
dualB = Dual (\ (B t) -&gt;toCBOR t) (B &lt;$&gt; fromCBOR)

data A = ACon Int B C

encodeA :: A -&gt; Encode ('Closed 'Dense) A
encodeA (ACon i b c) = Rec ACon !&gt; To i !&gt; ED dualB b !&gt; To c

decodeA :: Decode ('Closed 'Dense) A
decodeA = RecD ACon &lt;! From &lt;! DD dualB &lt;! From

instance ToCBOR A   where toCBOR x = encode(encodeA x)
instance FromCBOR A where fromCBOR = decode decodeA

-- An example with multiple constructors uses Sum, SumD, and Summands

data N = N1 Int | N2 B Bool | N3 A

encodeN :: N -&gt; Encode 'Open N
encodeN (N1 i)    = Sum N1 0 !&gt; To i
encodeN (N2 b tf) = Sum N2 1 !&gt; ED dualB b  !&gt; To tf
encodeN (N3 a)    = Sum N3 2 !&gt; To a

decodeN :: Decode ('Closed 'Dense) N    -- Note each clause has an 'Open decoder,
decodeN = Summands &quot;N&quot; decodeNx         -- But Summands returns a ('Closed 'Dense) decoder
  where decodeNx 0 = SumD N1 &lt;! From
        decodeNx 1 = SumD N2 &lt;! DD dualB &lt;! From
        decodeNx 3 = SumD N3 &lt;! From
        decodeNx k = Invalid k

instance ToCBOR N   where toCBOR x = encode(encodeN x)
instance FromCBOR N where fromCBOR = decode decodeN
-}</span><span>
</span><span id="line-269"></span><span class="hs-comment">-- For more examples writing CBOR instances using Encode and Decode, including</span><span>
</span><span id="line-270"></span><span class="hs-comment">-- ones using Sparse encoding, see the test file</span><span>
</span><span id="line-271"></span><span class="hs-comment">-- shelley-spec-ledger-test/test/Test/Shelley/Spec/Ledger/Coders.hs</span><span>
</span><span id="line-272"></span><span>
</span><span id="line-273"></span><span class="hs-comment">-- ========================================================</span><span>
</span><span id="line-274"></span><span class="hs-comment">-- Subsidary classes and datatype used in the Coders scheme</span><span>
</span><span id="line-275"></span><span class="hs-comment">-- =========================================================</span><span>
</span><span id="line-276"></span><span>
</span><span id="line-277"></span><span class="hs-comment">-- | Some CBOR instances wrap encoding sequences with prefixes and suffixes. I.e.</span><span>
</span><span id="line-278"></span><span class="hs-comment">--  prefix , encode, encode, encode , ... , suffix.</span><span>
</span><span id="line-279"></span><span class="hs-comment">--  There are two kinds of wrapping coders: Nary sums, and Sparsely encoded products.</span><span>
</span><span id="line-280"></span><span class="hs-comment">--  Coders in these classes can only be decoded when they are wrapped by their</span><span>
</span><span id="line-281"></span><span class="hs-comment">--  closing forms Summand and SparseKeyed. In another dimension records can be</span><span>
</span><span id="line-282"></span><span class="hs-comment">--  encoded densely (all their fields serialised) or sparsely (only some of their</span><span>
</span><span id="line-283"></span><span class="hs-comment">--  fields). We use indexes to types to try and mark (and enforce) these distinctions.</span><span>
</span><span id="line-284"></span><span>
</span><span id="line-285"></span><span>
</span><span id="line-286"></span><span class="hs-comment">-- | Record density (all the fields) vs (some of the fields)</span><span>
</span><span id="line-287"></span><span class="hs-keyword">data</span><span> </span><span id="Density"><span class="annot"><a href="Data.Coders.html#Density"><span class="hs-identifier hs-var">Density</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Dense"><span class="annot"><a href="Data.Coders.html#Dense"><span class="hs-identifier hs-var">Dense</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="Sparse"><span class="annot"><a href="Data.Coders.html#Sparse"><span class="hs-identifier hs-var">Sparse</span></a></span></span><span>
</span><span id="line-288"></span><span>
</span><span id="line-289"></span><span class="hs-keyword">data</span><span> </span><span id="Wrapped"><span class="annot"><a href="Data.Coders.html#Wrapped"><span class="hs-identifier hs-var">Wrapped</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-290"></span><span>  </span><span id="Open"><span class="annot"><a href="Data.Coders.html#Open"><span class="hs-identifier hs-var">Open</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Coders.html#Wrapped"><span class="hs-identifier hs-type">Wrapped</span></a></span><span>                </span><span class="hs-comment">-- Needs some type-wide wrapping</span><span>
</span><span id="line-291"></span><span>  </span><span id="Closed"><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-var">Closed</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Coders.html#Density"><span class="hs-identifier hs-type">Density</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Wrapped"><span class="hs-identifier hs-type">Wrapped</span></a></span><span>   </span><span class="hs-comment">-- Does not need type-wide wrapping,</span><span>
</span><span id="line-292"></span><span>                                 </span><span class="hs-comment">-- But may need field-wide wrapping, when Density is 'Sparse</span><span>
</span><span id="line-293"></span><span>
</span><span id="line-294"></span><span class="hs-comment">-- | Analogous to paired ToCBOR and FromCBOR instances with out freezing out</span><span>
</span><span id="line-295"></span><span class="hs-comment">--   alternate ways to code. Unlike ToCBOR and FromCBOR where there is only</span><span>
</span><span id="line-296"></span><span class="hs-comment">--   one instance per type. There can be multiple Duals with the same type.</span><span>
</span><span id="line-297"></span><span class="hs-keyword">data</span><span> </span><span id="Dual"><span class="annot"><a href="Data.Coders.html#Dual"><span class="hs-identifier hs-var">Dual</span></a></span></span><span> </span><span id="local-6989586621679128875"><span class="annot"><a href="#local-6989586621679128875"><span class="hs-identifier hs-type">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Dual"><span class="annot"><a href="Data.Coders.html#Dual"><span class="hs-identifier hs-var">Dual</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679128875"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Encoding</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679129029"><span class="annot"><a href="#local-6989586621679129029"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Decoder</span></span><span> </span><span class="annot"><a href="#local-6989586621679129029"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128875"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-298"></span><span>
</span><span id="line-299"></span><span class="hs-comment">-- | A Field pairs an update function and a decoder for one field of a Sparse record.</span><span>
</span><span id="line-300"></span><span class="hs-keyword">data</span><span> </span><span id="Field"><span class="annot"><a href="Data.Coders.html#Field"><span class="hs-identifier hs-var">Field</span></a></span></span><span> </span><span id="local-6989586621679128724"><span class="annot"><a href="#local-6989586621679128724"><span class="hs-identifier hs-type">t</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-301"></span><span>  </span><span id="local-6989586621679128721"><span id="local-6989586621679128722"><span id="local-6989586621679128723"><span id="Field"><span class="annot"><a href="Data.Coders.html#Field"><span class="hs-identifier hs-var">Field</span></a></span></span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679128723"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679128722"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679128722"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128721"><span class="hs-identifier hs-type">d</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679128723"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Field"><span class="hs-identifier hs-type">Field</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128722"><span class="hs-identifier hs-type">t</span></a></span></span></span></span><span>
</span><span id="line-302"></span><span>
</span><span id="line-303"></span><span class="hs-comment">-- ===========================================================</span><span>
</span><span id="line-304"></span><span class="hs-comment">-- The coders and the decoders as GADT datatypes</span><span>
</span><span id="line-305"></span><span class="hs-comment">-- ===========================================================</span><span>
</span><span id="line-306"></span><span>
</span><span id="line-307"></span><span class="hs-keyword">data</span><span> </span><span id="Encode"><span class="annot"><a href="Data.Coders.html#Encode"><span class="hs-identifier hs-var">Encode</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679128719"><span class="annot"><a href="#local-6989586621679128719"><span class="hs-identifier hs-type">w</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Coders.html#Wrapped"><span class="hs-identifier hs-type">Wrapped</span></a></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679128718"><span class="annot"><a href="#local-6989586621679128718"><span class="hs-identifier hs-type">t</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-308"></span><span>  </span><span id="local-6989586621679128717"><span id="Rec"><span class="annot"><a href="Data.Coders.html#Rec"><span class="hs-identifier hs-var">Rec</span></a></span></span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679128717"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Encode"><span class="hs-identifier hs-type">Encode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Dense"><span class="hs-identifier hs-type">Dense</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679128717"><span class="hs-identifier hs-type">t</span></a></span></span><span>    </span><span class="hs-comment">-- Constructor of normal Record (1 constructor)</span><span>
</span><span id="line-309"></span><span>  </span><span id="local-6989586621679128715"><span id="Sum"><span class="annot"><a href="Data.Coders.html#Sum"><span class="hs-identifier hs-var">Sum</span></a></span></span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679128715"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Encode"><span class="hs-identifier hs-type">Encode</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Open"><span class="hs-identifier hs-type">Open</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128715"><span class="hs-identifier hs-type">t</span></a></span></span><span>       </span><span class="hs-comment">-- One Constructor of many</span><span>
</span><span id="line-310"></span><span>  </span><span id="local-6989586621679128713"><span id="Keyed"><span class="annot"><a href="Data.Coders.html#Keyed"><span class="hs-identifier hs-var">Keyed</span></a></span></span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679128713"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Encode"><span class="hs-identifier hs-type">Encode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Sparse"><span class="hs-identifier hs-type">Sparse</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679128713"><span class="hs-identifier hs-type">t</span></a></span></span><span> </span><span class="hs-comment">-- One Constructor with sparse encoding</span><span>
</span><span id="line-311"></span><span>  </span><span id="local-6989586621679128711"><span id="To"><span class="annot"><a href="Data.Coders.html#To"><span class="hs-identifier hs-var">To</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-type">ToCBOR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128711"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679128711"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Encode"><span class="hs-identifier hs-type">Encode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Dense"><span class="hs-identifier hs-type">Dense</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679128711"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-312"></span><span>  </span><span id="local-6989586621679128709"><span id="E"><span class="annot"><a href="Data.Coders.html#E"><span class="hs-identifier hs-var">E</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679128709"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Encoding</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679128709"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Encode"><span class="hs-identifier hs-type">Encode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Dense"><span class="hs-identifier hs-type">Dense</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679128709"><span class="hs-identifier hs-type">t</span></a></span></span><span>
</span><span id="line-313"></span><span>  </span><span id="local-6989586621679128851"><span id="ED"><span class="annot"><a href="Data.Coders.html#ED"><span class="hs-identifier hs-var">ED</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Coders.html#Dual"><span class="hs-identifier hs-type">Dual</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128851"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679128851"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Encode"><span class="hs-identifier hs-type">Encode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Dense"><span class="hs-identifier hs-type">Dense</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679128851"><span class="hs-identifier hs-type">t</span></a></span></span><span>
</span><span id="line-314"></span><span>  </span><span id="local-6989586621679128705"><span id="local-6989586621679128706"><span id="OmitC"><span class="annot"><a href="Data.Coders.html#OmitC"><span class="hs-identifier hs-var">OmitC</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679128706"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Encode"><span class="hs-identifier hs-type">Encode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128705"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128706"><span class="hs-identifier hs-type">t</span></a></span></span></span><span>
</span><span id="line-315"></span><span>  </span><span id="local-6989586621679128703"><span id="Omit"><span class="annot"><a href="Data.Coders.html#Omit"><span class="hs-identifier hs-var">Omit</span></a></span></span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679128703"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Encode"><span class="hs-identifier hs-type">Encode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Sparse"><span class="hs-identifier hs-type">Sparse</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679128703"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Encode"><span class="hs-identifier hs-type">Encode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Sparse"><span class="hs-identifier hs-type">Sparse</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679128703"><span class="hs-identifier hs-type">t</span></a></span></span><span>
</span><span id="line-316"></span><span>  </span><span id="local-6989586621679128701"><span id="Key"><span class="annot"><a href="Data.Coders.html#Key"><span class="hs-identifier hs-var">Key</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Encode"><span class="hs-identifier hs-type">Encode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Dense"><span class="hs-identifier hs-type">Dense</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679128701"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Encode"><span class="hs-identifier hs-type">Encode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Sparse"><span class="hs-identifier hs-type">Sparse</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679128701"><span class="hs-identifier hs-type">t</span></a></span></span><span>
</span><span id="line-317"></span><span>  </span><span id="local-6989586621679128698"><span id="local-6989586621679128699"><span id="local-6989586621679129052"><span id="local-6989586621679129054"><span id="ApplyE"><span class="annot"><a href="Data.Coders.html#ApplyE"><span class="hs-identifier hs-var">ApplyE</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Coders.html#Encode"><span class="hs-identifier hs-type">Encode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679129054"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679128699"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679129052"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Encode"><span class="hs-identifier hs-type">Encode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128698"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679128699"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Encode"><span class="hs-identifier hs-type">Encode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679129054"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679129052"><span class="hs-identifier hs-type">t</span></a></span></span></span></span></span><span>
</span><span id="line-318"></span><span>
</span><span id="line-319"></span><span>    </span><span class="hs-comment">-- The Wrapped index of ApplyE is determined by the index</span><span>
</span><span id="line-320"></span><span>    </span><span class="hs-comment">-- at the bottom of its left spine. The choices are 'Open (Sum c tag),</span><span>
</span><span id="line-321"></span><span>    </span><span class="hs-comment">-- ('Closed 'Dense) (Rec c), and ('Closed 'Sparse) (Keyed c).</span><span>
</span><span id="line-322"></span><span>
</span><span id="line-323"></span><span class="hs-keyword">infixl</span><span> </span><span class="hs-number">4</span><span> </span><span class="annot"><a href="Data.Coders.html#%21%3E"><span class="hs-operator hs-type">!&gt;</span></a></span><span>
</span><span id="line-324"></span><span>
</span><span id="line-325"></span><span id="local-6989586621679128693"><span id="local-6989586621679128694"><span id="local-6989586621679128695"><span id="local-6989586621679128696"><span class="annot"><a href="Data.Coders.html#%21%3E"><span class="hs-operator hs-type">(!&gt;)</span></a></span><span> </span><span class="hs-glyph">::</span><span>  </span><span class="annot"><a href="Data.Coders.html#Encode"><span class="hs-identifier hs-type">Encode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128696"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679128695"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679128694"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Encode"><span class="hs-identifier hs-type">Encode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128693"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679128695"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Encode"><span class="hs-identifier hs-type">Encode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128696"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128694"><span class="hs-identifier hs-type">t</span></a></span></span></span></span></span><span>
</span><span id="line-326"></span><span id="local-6989586621679128692"><span class="annot"><span class="annottext">Encode w (a -&gt; t)
</span><a href="#local-6989586621679128692"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="%21%3E"><span class="annot"><span class="annottext">!&gt; :: Encode w (a -&gt; t) -&gt; Encode ('Closed r) a -&gt; Encode w t
</span><a href="Data.Coders.html#%21%3E"><span class="hs-operator hs-var hs-var">!&gt;</span></a></span></span><span> </span><span id="local-6989586621679128691"><span class="annot"><span class="annottext">Encode ('Closed r) a
</span><a href="#local-6989586621679128691"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Encode w (a -&gt; t) -&gt; Encode ('Closed r) a -&gt; Encode w t
forall (w :: Wrapped) a t (r :: Density).
Encode w (a -&gt; t) -&gt; Encode ('Closed r) a -&gt; Encode w t
</span><a href="Data.Coders.html#ApplyE"><span class="hs-identifier hs-var">ApplyE</span></a></span><span> </span><span class="annot"><span class="annottext">Encode w (a -&gt; t)
</span><a href="#local-6989586621679128692"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Encode ('Closed r) a
</span><a href="#local-6989586621679128691"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-327"></span><span>
</span><span id="line-328"></span><span id="local-6989586621679129045"><span id="local-6989586621679129046"><span class="annot"><a href="Data.Coders.html#runE"><span class="hs-identifier hs-type">runE</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Coders.html#Encode"><span class="hs-identifier hs-type">Encode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679129046"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679129045"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679129045"><span class="hs-identifier hs-type">t</span></a></span></span></span><span>
</span><span id="line-329"></span><span id="runE"><span class="annot"><span class="annottext">runE :: Encode w t -&gt; t
</span><a href="Data.Coders.html#runE"><span class="hs-identifier hs-var hs-var">runE</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Sum"><span class="hs-identifier hs-type">Sum</span></a></span><span> </span><span id="local-6989586621679128690"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679128690"><span class="hs-identifier hs-var">cn</span></a></span></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679128690"><span class="hs-identifier hs-var">cn</span></a></span><span>
</span><span id="line-330"></span><span class="annot"><a href="Data.Coders.html#runE"><span class="hs-identifier hs-var">runE</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Rec"><span class="hs-identifier hs-type">Rec</span></a></span><span> </span><span id="local-6989586621679128689"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679128689"><span class="hs-identifier hs-var">cn</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679128689"><span class="hs-identifier hs-var">cn</span></a></span><span>
</span><span id="line-331"></span><span class="annot"><a href="Data.Coders.html#runE"><span class="hs-identifier hs-var">runE</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#ApplyE"><span class="hs-identifier hs-type">ApplyE</span></a></span><span> </span><span id="local-6989586621679128688"><span class="annot"><span class="annottext">Encode w (a -&gt; t)
</span><a href="#local-6989586621679128688"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679128687"><span class="annot"><span class="annottext">Encode ('Closed r) a
</span><a href="#local-6989586621679128687"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Encode w (a -&gt; t) -&gt; a -&gt; t
forall (w :: Wrapped) t. Encode w t -&gt; t
</span><a href="Data.Coders.html#runE"><span class="hs-identifier hs-var">runE</span></a></span><span> </span><span class="annot"><span class="annottext">Encode w (a -&gt; t)
</span><a href="#local-6989586621679128688"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Encode ('Closed r) a -&gt; a
forall (w :: Wrapped) t. Encode w t -&gt; t
</span><a href="Data.Coders.html#runE"><span class="hs-identifier hs-var">runE</span></a></span><span> </span><span class="annot"><span class="annottext">Encode ('Closed r) a
</span><a href="#local-6989586621679128687"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-332"></span><span class="annot"><a href="Data.Coders.html#runE"><span class="hs-identifier hs-var">runE</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#To"><span class="hs-identifier hs-type">To</span></a></span><span> </span><span id="local-6989586621679128686"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679128686"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679128686"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-333"></span><span class="annot"><a href="Data.Coders.html#runE"><span class="hs-identifier hs-var">runE</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#E"><span class="hs-identifier hs-type">E</span></a></span><span> </span><span class="annot"><span class="annottext">t -&gt; Encoding
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679128685"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679128685"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679128685"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-334"></span><span class="annot"><a href="Data.Coders.html#runE"><span class="hs-identifier hs-var">runE</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#ED"><span class="hs-identifier hs-type">ED</span></a></span><span> </span><span class="annot"><span class="annottext">Dual t
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679128684"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679128684"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679128684"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-335"></span><span class="annot"><a href="Data.Coders.html#runE"><span class="hs-identifier hs-var">runE</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#OmitC"><span class="hs-identifier hs-type">OmitC</span></a></span><span> </span><span id="local-6989586621679128683"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679128683"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679128683"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-336"></span><span class="annot"><a href="Data.Coders.html#runE"><span class="hs-identifier hs-var">runE</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Omit"><span class="hs-identifier hs-type">Omit</span></a></span><span> </span><span class="annot"><span class="annottext">t -&gt; Bool
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679128682"><span class="annot"><span class="annottext">Encode ('Closed 'Sparse) t
</span><a href="#local-6989586621679128682"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Encode ('Closed 'Sparse) t -&gt; t
forall (w :: Wrapped) t. Encode w t -&gt; t
</span><a href="Data.Coders.html#runE"><span class="hs-identifier hs-var">runE</span></a></span><span> </span><span class="annot"><span class="annottext">Encode ('Closed 'Sparse) t
</span><a href="#local-6989586621679128682"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-337"></span><span class="annot"><a href="Data.Coders.html#runE"><span class="hs-identifier hs-var">runE</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Key"><span class="hs-identifier hs-type">Key</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679128681"><span class="annot"><span class="annottext">Encode ('Closed 'Dense) t
</span><a href="#local-6989586621679128681"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Encode ('Closed 'Dense) t -&gt; t
forall (w :: Wrapped) t. Encode w t -&gt; t
</span><a href="Data.Coders.html#runE"><span class="hs-identifier hs-var">runE</span></a></span><span> </span><span class="annot"><span class="annottext">Encode ('Closed 'Dense) t
</span><a href="#local-6989586621679128681"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-338"></span><span class="annot"><a href="Data.Coders.html#runE"><span class="hs-identifier hs-var">runE</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Keyed"><span class="hs-identifier hs-type">Keyed</span></a></span><span> </span><span id="local-6989586621679128680"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679128680"><span class="hs-identifier hs-var">cn</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679128680"><span class="hs-identifier hs-var">cn</span></a></span><span>
</span><span id="line-339"></span><span>
</span><span id="line-340"></span><span id="local-6989586621679129036"><span id="local-6989586621679129037"><span class="annot"><a href="Data.Coders.html#gsize"><span class="hs-identifier hs-type">gsize</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Coders.html#Encode"><span class="hs-identifier hs-type">Encode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679129037"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679129036"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word</span></span></span></span><span>
</span><span id="line-341"></span><span id="gsize"><span class="annot"><span class="annottext">gsize :: Encode w t -&gt; Word
</span><a href="Data.Coders.html#gsize"><span class="hs-identifier hs-var hs-var">gsize</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Sum"><span class="hs-identifier hs-type">Sum</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">0</span></span><span>
</span><span id="line-342"></span><span class="annot"><a href="Data.Coders.html#gsize"><span class="hs-identifier hs-var">gsize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Rec"><span class="hs-identifier hs-type">Rec</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">0</span></span><span>
</span><span id="line-343"></span><span class="annot"><a href="Data.Coders.html#gsize"><span class="hs-identifier hs-var">gsize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#To"><span class="hs-identifier hs-type">To</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">1</span></span><span>
</span><span id="line-344"></span><span class="annot"><a href="Data.Coders.html#gsize"><span class="hs-identifier hs-var">gsize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#E"><span class="hs-identifier hs-type">E</span></a></span><span> </span><span class="annot"><span class="annottext">t -&gt; Encoding
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">t
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">1</span></span><span>
</span><span id="line-345"></span><span class="annot"><a href="Data.Coders.html#gsize"><span class="hs-identifier hs-var">gsize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#ApplyE"><span class="hs-identifier hs-type">ApplyE</span></a></span><span> </span><span id="local-6989586621679128678"><span class="annot"><span class="annottext">Encode w (a -&gt; t)
</span><a href="#local-6989586621679128678"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679128677"><span class="annot"><span class="annottext">Encode ('Closed r) a
</span><a href="#local-6989586621679128677"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Encode w (a -&gt; t) -&gt; Word
forall (w :: Wrapped) t. Encode w t -&gt; Word
</span><a href="Data.Coders.html#gsize"><span class="hs-identifier hs-var">gsize</span></a></span><span> </span><span class="annot"><span class="annottext">Encode w (a -&gt; t)
</span><a href="#local-6989586621679128678"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Word -&gt; Word
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Encode ('Closed r) a -&gt; Word
forall (w :: Wrapped) t. Encode w t -&gt; Word
</span><a href="Data.Coders.html#gsize"><span class="hs-identifier hs-var">gsize</span></a></span><span> </span><span class="annot"><span class="annottext">Encode ('Closed r) a
</span><a href="#local-6989586621679128677"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-346"></span><span class="annot"><a href="Data.Coders.html#gsize"><span class="hs-identifier hs-var">gsize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#ED"><span class="hs-identifier hs-type">ED</span></a></span><span> </span><span class="annot"><span class="annottext">Dual t
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">t
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">1</span></span><span>
</span><span id="line-347"></span><span class="annot"><a href="Data.Coders.html#gsize"><span class="hs-identifier hs-var">gsize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#OmitC"><span class="hs-identifier hs-type">OmitC</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">0</span></span><span>
</span><span id="line-348"></span><span class="annot"><a href="Data.Coders.html#gsize"><span class="hs-identifier hs-var">gsize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Omit"><span class="hs-identifier hs-type">Omit</span></a></span><span> </span><span id="local-6989586621679128676"><span class="annot"><span class="annottext">t -&gt; Bool
</span><a href="#local-6989586621679128676"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621679128675"><span class="annot"><span class="annottext">Encode ('Closed 'Sparse) t
</span><a href="#local-6989586621679128675"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">t -&gt; Bool
</span><a href="#local-6989586621679128676"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Encode ('Closed 'Sparse) t -&gt; t
forall (w :: Wrapped) t. Encode w t -&gt; t
</span><a href="Data.Coders.html#runE"><span class="hs-identifier hs-var">runE</span></a></span><span> </span><span class="annot"><span class="annottext">Encode ('Closed 'Sparse) t
</span><a href="#local-6989586621679128675"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">0</span></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Encode ('Closed 'Sparse) t -&gt; Word
forall (w :: Wrapped) t. Encode w t -&gt; Word
</span><a href="Data.Coders.html#gsize"><span class="hs-identifier hs-var">gsize</span></a></span><span> </span><span class="annot"><span class="annottext">Encode ('Closed 'Sparse) t
</span><a href="#local-6989586621679128675"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-349"></span><span class="annot"><a href="Data.Coders.html#gsize"><span class="hs-identifier hs-var">gsize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Key"><span class="hs-identifier hs-type">Key</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679128674"><span class="annot"><span class="annottext">Encode ('Closed 'Dense) t
</span><a href="#local-6989586621679128674"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Encode ('Closed 'Dense) t -&gt; Word
forall (w :: Wrapped) t. Encode w t -&gt; Word
</span><a href="Data.Coders.html#gsize"><span class="hs-identifier hs-var">gsize</span></a></span><span> </span><span class="annot"><span class="annottext">Encode ('Closed 'Dense) t
</span><a href="#local-6989586621679128674"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-350"></span><span class="annot"><a href="Data.Coders.html#gsize"><span class="hs-identifier hs-var">gsize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Keyed"><span class="hs-identifier hs-type">Keyed</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">0</span></span><span>
</span><span id="line-351"></span><span>
</span><span id="line-352"></span><span id="local-6989586621679128672"><span id="local-6989586621679128673"><span class="annot"><a href="Data.Coders.html#encode"><span class="hs-identifier hs-type">encode</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Coders.html#Encode"><span class="hs-identifier hs-type">Encode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128673"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128672"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Encoding</span></span></span></span><span>
</span><span id="line-353"></span><span id="encode"><span class="annot"><span class="annottext">encode :: Encode w t -&gt; Encoding
</span><a href="Data.Coders.html#encode"><span class="hs-identifier hs-var hs-var">encode</span></a></span></span><span> </span><span id="local-6989586621679128671"><span class="annot"><span class="annottext">Encode w t
</span><a href="#local-6989586621679128671"><span class="hs-identifier hs-var">sym</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word -&gt; Encode w t -&gt; Encoding
forall (w :: Wrapped) t. Word -&gt; Encode w t -&gt; Encoding
</span><a href="#local-6989586621679128670"><span class="hs-identifier hs-var">encodeCountPrefix</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Encode w t
</span><a href="#local-6989586621679128671"><span class="hs-identifier hs-var">sym</span></a></span><span>
</span><span id="line-354"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-355"></span><span>    </span><span id="local-6989586621679129032"><span id="local-6989586621679129033"><span class="annot"><a href="#local-6989586621679128670"><span class="hs-identifier hs-type">encodeCountPrefix</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Encode"><span class="hs-identifier hs-type">Encode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679129033"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679129032"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Encoding</span></span></span></span><span>
</span><span id="line-356"></span><span>                   </span><span class="hs-comment">-- n is the number of fields we must write in the prefix.</span><span>
</span><span id="line-357"></span><span>    </span><span id="local-6989586621679128670"><span class="annot"><span class="annottext">encodeCountPrefix :: Word -&gt; Encode w t -&gt; Encoding
</span><a href="#local-6989586621679128670"><span class="hs-identifier hs-var hs-var">encodeCountPrefix</span></a></span></span><span> </span><span id="local-6989586621679128669"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679128669"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Sum"><span class="hs-identifier hs-type">Sum</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679128668"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679128668"><span class="hs-identifier hs-var">tag</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word -&gt; Encoding
</span><span class="hs-identifier hs-var">encodeListLen</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679128669"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Word -&gt; Word
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Encoding
</span><span class="hs-identifier hs-var">encodeWord</span></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679128668"><span class="hs-identifier hs-var">tag</span></a></span><span>
</span><span id="line-358"></span><span>    </span><span class="annot"><a href="#local-6989586621679128670"><span class="hs-identifier hs-var">encodeCountPrefix</span></a></span><span> </span><span id="local-6989586621679128667"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679128667"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Keyed"><span class="hs-identifier hs-type">Keyed</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word -&gt; Encoding
</span><span class="hs-identifier hs-var">encodeMapLen</span></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679128667"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-359"></span><span>    </span><span class="annot"><a href="#local-6989586621679128670"><span class="hs-identifier hs-var">encodeCountPrefix</span></a></span><span> </span><span id="local-6989586621679128666"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679128666"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Rec"><span class="hs-identifier hs-type">Rec</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word -&gt; Encoding
</span><span class="hs-identifier hs-var">encodeListLen</span></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679128666"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-360"></span><span>    </span><span class="annot"><a href="#local-6989586621679128670"><span class="hs-identifier hs-var">encodeCountPrefix</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#To"><span class="hs-identifier hs-type">To</span></a></span><span> </span><span id="local-6989586621679128665"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679128665"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">t -&gt; Encoding
forall a. ToCBOR a =&gt; a -&gt; Encoding
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">toCBOR</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679128665"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-361"></span><span>    </span><span class="annot"><a href="#local-6989586621679128670"><span class="hs-identifier hs-var">encodeCountPrefix</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#E"><span class="hs-identifier hs-type">E</span></a></span><span> </span><span id="local-6989586621679128664"><span class="annot"><span class="annottext">t -&gt; Encoding
</span><a href="#local-6989586621679128664"><span class="hs-identifier hs-var">enc</span></a></span></span><span> </span><span id="local-6989586621679128663"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679128663"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">t -&gt; Encoding
</span><a href="#local-6989586621679128664"><span class="hs-identifier hs-var">enc</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679128663"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-362"></span><span>    </span><span class="annot"><a href="#local-6989586621679128670"><span class="hs-identifier hs-var">encodeCountPrefix</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#ED"><span class="hs-identifier hs-type">ED</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Dual"><span class="hs-identifier hs-type">Dual</span></a></span><span> </span><span id="local-6989586621679128662"><span class="annot"><span class="annottext">t -&gt; Encoding
</span><a href="#local-6989586621679128662"><span class="hs-identifier hs-var">enc</span></a></span></span><span> </span><span class="annot"><span class="annottext">forall s. Decoder s t
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679128661"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679128661"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">t -&gt; Encoding
</span><a href="#local-6989586621679128662"><span class="hs-identifier hs-var">enc</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679128661"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-363"></span><span>    </span><span class="annot"><a href="#local-6989586621679128670"><span class="hs-identifier hs-var">encodeCountPrefix</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#OmitC"><span class="hs-identifier hs-type">OmitC</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Encoding
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-364"></span><span>    </span><span class="annot"><a href="#local-6989586621679128670"><span class="hs-identifier hs-var">encodeCountPrefix</span></a></span><span> </span><span id="local-6989586621679128660"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679128660"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Key"><span class="hs-identifier hs-type">Key</span></a></span><span> </span><span id="local-6989586621679128659"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679128659"><span class="hs-identifier hs-var">tag</span></a></span></span><span> </span><span id="local-6989586621679128658"><span class="annot"><span class="annottext">Encode ('Closed 'Dense) t
</span><a href="#local-6989586621679128658"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word -&gt; Encoding
</span><span class="hs-identifier hs-var">encodeWord</span></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679128659"><span class="hs-identifier hs-var">tag</span></a></span><span> </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Encode ('Closed 'Dense) t -&gt; Encoding
forall (w :: Wrapped) t. Word -&gt; Encode w t -&gt; Encoding
</span><a href="#local-6989586621679128670"><span class="hs-identifier hs-var">encodeCountPrefix</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679128660"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Encode ('Closed 'Dense) t
</span><a href="#local-6989586621679128658"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-365"></span><span>    </span><span class="annot"><a href="#local-6989586621679128670"><span class="hs-identifier hs-var">encodeCountPrefix</span></a></span><span> </span><span id="local-6989586621679128657"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679128657"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Omit"><span class="hs-identifier hs-type">Omit</span></a></span><span> </span><span id="local-6989586621679128656"><span class="annot"><span class="annottext">t -&gt; Bool
</span><a href="#local-6989586621679128656"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621679128655"><span class="annot"><span class="annottext">Encode ('Closed 'Sparse) t
</span><a href="#local-6989586621679128655"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-366"></span><span>       </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">t -&gt; Bool
</span><a href="#local-6989586621679128656"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Encode ('Closed 'Sparse) t -&gt; t
forall (w :: Wrapped) t. Encode w t -&gt; t
</span><a href="Data.Coders.html#runE"><span class="hs-identifier hs-var">runE</span></a></span><span> </span><span class="annot"><span class="annottext">Encode ('Closed 'Sparse) t
</span><a href="#local-6989586621679128655"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Encoding
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Word -&gt; Encode ('Closed 'Sparse) t -&gt; Encoding
forall (w :: Wrapped) t. Word -&gt; Encode w t -&gt; Encoding
</span><a href="#local-6989586621679128670"><span class="hs-identifier hs-var">encodeCountPrefix</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679128657"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Encode ('Closed 'Sparse) t
</span><a href="#local-6989586621679128655"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-367"></span><span>    </span><span class="annot"><a href="#local-6989586621679128670"><span class="hs-identifier hs-var">encodeCountPrefix</span></a></span><span> </span><span id="local-6989586621679128654"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679128654"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#ApplyE"><span class="hs-identifier hs-type">ApplyE</span></a></span><span> </span><span id="local-6989586621679128653"><span class="annot"><span class="annottext">Encode w (a -&gt; t)
</span><a href="#local-6989586621679128653"><span class="hs-identifier hs-var">ff</span></a></span></span><span> </span><span id="local-6989586621679128652"><span class="annot"><span class="annottext">Encode ('Closed r) a
</span><a href="#local-6989586621679128652"><span class="hs-identifier hs-var">xx</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word -&gt; Encode w (a -&gt; t) -&gt; Encoding
forall (w :: Wrapped) t. Word -&gt; Encode w t -&gt; Encoding
</span><a href="#local-6989586621679128670"><span class="hs-identifier hs-var">encodeCountPrefix</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679128654"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Word -&gt; Word
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Encode ('Closed r) a -&gt; Word
forall (w :: Wrapped) t. Encode w t -&gt; Word
</span><a href="Data.Coders.html#gsize"><span class="hs-identifier hs-var">gsize</span></a></span><span> </span><span class="annot"><span class="annottext">Encode ('Closed r) a
</span><a href="#local-6989586621679128652"><span class="hs-identifier hs-var">xx</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Encode w (a -&gt; t)
</span><a href="#local-6989586621679128653"><span class="hs-identifier hs-var">ff</span></a></span><span> </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Encode ('Closed r) a -&gt; Encoding
forall (d :: Density) t. Encode ('Closed d) t -&gt; Encoding
</span><a href="#local-6989586621679128651"><span class="hs-identifier hs-var">encodeClosed</span></a></span><span> </span><span class="annot"><span class="annottext">Encode ('Closed r) a
</span><a href="#local-6989586621679128652"><span class="hs-identifier hs-var">xx</span></a></span><span>
</span><span id="line-368"></span><span>      </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679129025"><span id="local-6989586621679129026"><span class="annot"><a href="#local-6989586621679128651"><span class="hs-identifier hs-type">encodeClosed</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Coders.html#Encode"><span class="hs-identifier hs-type">Encode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679129026"><span class="hs-identifier hs-type">d</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679129025"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Encoding</span></span></span></span><span>
</span><span id="line-369"></span><span>            </span><span id="local-6989586621679128651"><span class="annot"><span class="annottext">encodeClosed :: Encode ('Closed d) t -&gt; Encoding
</span><a href="#local-6989586621679128651"><span class="hs-identifier hs-var hs-var">encodeClosed</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Rec"><span class="hs-identifier hs-type">Rec</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Encoding
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-370"></span><span>            </span><span class="annot"><a href="#local-6989586621679128651"><span class="hs-identifier hs-var">encodeClosed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#To"><span class="hs-identifier hs-type">To</span></a></span><span> </span><span id="local-6989586621679128650"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679128650"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">t -&gt; Encoding
forall a. ToCBOR a =&gt; a -&gt; Encoding
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">toCBOR</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679128650"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-371"></span><span>            </span><span class="annot"><a href="#local-6989586621679128651"><span class="hs-identifier hs-var">encodeClosed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#E"><span class="hs-identifier hs-type">E</span></a></span><span> </span><span id="local-6989586621679128649"><span class="annot"><span class="annottext">t -&gt; Encoding
</span><a href="#local-6989586621679128649"><span class="hs-identifier hs-var">enc</span></a></span></span><span> </span><span id="local-6989586621679128648"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679128648"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">t -&gt; Encoding
</span><a href="#local-6989586621679128649"><span class="hs-identifier hs-var">enc</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679128648"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-372"></span><span>            </span><span class="annot"><a href="#local-6989586621679128651"><span class="hs-identifier hs-var">encodeClosed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#ApplyE"><span class="hs-identifier hs-type">ApplyE</span></a></span><span> </span><span id="local-6989586621679128647"><span class="annot"><span class="annottext">Encode ('Closed d) (a -&gt; t)
</span><a href="#local-6989586621679128647"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679128646"><span class="annot"><span class="annottext">Encode ('Closed r) a
</span><a href="#local-6989586621679128646"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Encode ('Closed d) (a -&gt; t) -&gt; Encoding
forall (d :: Density) t. Encode ('Closed d) t -&gt; Encoding
</span><a href="#local-6989586621679128651"><span class="hs-identifier hs-var">encodeClosed</span></a></span><span> </span><span class="annot"><span class="annottext">Encode ('Closed d) (a -&gt; t)
</span><a href="#local-6989586621679128647"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Encode ('Closed r) a -&gt; Encoding
forall (d :: Density) t. Encode ('Closed d) t -&gt; Encoding
</span><a href="#local-6989586621679128651"><span class="hs-identifier hs-var">encodeClosed</span></a></span><span> </span><span class="annot"><span class="annottext">Encode ('Closed r) a
</span><a href="#local-6989586621679128646"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-373"></span><span>            </span><span class="annot"><a href="#local-6989586621679128651"><span class="hs-identifier hs-var">encodeClosed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#ED"><span class="hs-identifier hs-type">ED</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Dual"><span class="hs-identifier hs-type">Dual</span></a></span><span> </span><span id="local-6989586621679128645"><span class="annot"><span class="annottext">t -&gt; Encoding
</span><a href="#local-6989586621679128645"><span class="hs-identifier hs-var">enc</span></a></span></span><span> </span><span class="annot"><span class="annottext">forall s. Decoder s t
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679128644"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679128644"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">t -&gt; Encoding
</span><a href="#local-6989586621679128645"><span class="hs-identifier hs-var">enc</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679128644"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-374"></span><span>            </span><span class="annot"><a href="#local-6989586621679128651"><span class="hs-identifier hs-var">encodeClosed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#OmitC"><span class="hs-identifier hs-type">OmitC</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Encoding
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-375"></span><span>            </span><span class="annot"><a href="#local-6989586621679128651"><span class="hs-identifier hs-var">encodeClosed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Omit"><span class="hs-identifier hs-type">Omit</span></a></span><span> </span><span id="local-6989586621679128643"><span class="annot"><span class="annottext">t -&gt; Bool
</span><a href="#local-6989586621679128643"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621679128642"><span class="annot"><span class="annottext">Encode ('Closed 'Sparse) t
</span><a href="#local-6989586621679128642"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-376"></span><span>              </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">t -&gt; Bool
</span><a href="#local-6989586621679128643"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Encode ('Closed 'Sparse) t -&gt; t
forall (w :: Wrapped) t. Encode w t -&gt; t
</span><a href="Data.Coders.html#runE"><span class="hs-identifier hs-var">runE</span></a></span><span> </span><span class="annot"><span class="annottext">Encode ('Closed 'Sparse) t
</span><a href="#local-6989586621679128642"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Encoding
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Encode ('Closed 'Sparse) t -&gt; Encoding
forall (d :: Density) t. Encode ('Closed d) t -&gt; Encoding
</span><a href="#local-6989586621679128651"><span class="hs-identifier hs-var">encodeClosed</span></a></span><span> </span><span class="annot"><span class="annottext">Encode ('Closed 'Sparse) t
</span><a href="#local-6989586621679128642"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-377"></span><span>            </span><span class="annot"><a href="#local-6989586621679128651"><span class="hs-identifier hs-var">encodeClosed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Key"><span class="hs-identifier hs-type">Key</span></a></span><span> </span><span id="local-6989586621679128641"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679128641"><span class="hs-identifier hs-var">tag</span></a></span></span><span> </span><span id="local-6989586621679128640"><span class="annot"><span class="annottext">Encode ('Closed 'Dense) t
</span><a href="#local-6989586621679128640"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word -&gt; Encoding
</span><span class="hs-identifier hs-var">encodeWord</span></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679128641"><span class="hs-identifier hs-var">tag</span></a></span><span> </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Encode ('Closed 'Dense) t -&gt; Encoding
forall (d :: Density) t. Encode ('Closed d) t -&gt; Encoding
</span><a href="#local-6989586621679128651"><span class="hs-identifier hs-var">encodeClosed</span></a></span><span> </span><span class="annot"><span class="annottext">Encode ('Closed 'Dense) t
</span><a href="#local-6989586621679128640"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-378"></span><span>            </span><span class="annot"><a href="#local-6989586621679128651"><span class="hs-identifier hs-var">encodeClosed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Keyed"><span class="hs-identifier hs-type">Keyed</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Encoding
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-379"></span><span>
</span><span id="line-380"></span><span class="hs-comment">-- ==================================================================</span><span>
</span><span id="line-381"></span><span class="hs-comment">-- Decode</span><span>
</span><span id="line-382"></span><span class="hs-comment">-- ===================================================================</span><span>
</span><span id="line-383"></span><span>
</span><span id="line-384"></span><span class="hs-keyword">data</span><span> </span><span id="Decode"><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-var">Decode</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679128639"><span class="annot"><a href="#local-6989586621679128639"><span class="hs-identifier hs-type">w</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Coders.html#Wrapped"><span class="hs-identifier hs-type">Wrapped</span></a></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679128638"><span class="annot"><a href="#local-6989586621679128638"><span class="hs-identifier hs-type">t</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-385"></span><span>  </span><span id="local-6989586621679128637"><span id="Summands"><span class="annot"><a href="Data.Coders.html#Summands"><span class="hs-identifier hs-var">Summands</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Word</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Open"><span class="hs-identifier hs-type">Open</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128637"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Dense"><span class="hs-identifier hs-type">Dense</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679128637"><span class="hs-identifier hs-type">t</span></a></span></span><span>
</span><span id="line-386"></span><span>  </span><span id="local-6989586621679128635"><span id="SparseKeyed"><span class="annot"><a href="Data.Coders.html#SparseKeyed"><span class="hs-identifier hs-var">SparseKeyed</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="annot"><a href="#local-6989586621679128635"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679128635"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Word</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Field"><span class="hs-identifier hs-type">Field</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128635"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Word</span></span><span class="hs-special">,</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Dense"><span class="hs-identifier hs-type">Dense</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679128635"><span class="hs-identifier hs-type">t</span></a></span></span><span>
</span><span id="line-387"></span><span>  </span><span id="local-6989586621679128633"><span id="SumD"><span class="annot"><a href="Data.Coders.html#SumD"><span class="hs-identifier hs-var">SumD</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679128633"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Open"><span class="hs-identifier hs-type">Open</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128633"><span class="hs-identifier hs-type">t</span></a></span></span><span>
</span><span id="line-388"></span><span>  </span><span id="local-6989586621679128631"><span id="RecD"><span class="annot"><a href="Data.Coders.html#RecD"><span class="hs-identifier hs-var">RecD</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679128631"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Dense"><span class="hs-identifier hs-type">Dense</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679128631"><span class="hs-identifier hs-type">t</span></a></span></span><span>
</span><span id="line-389"></span><span>  </span><span id="local-6989586621679128629"><span id="KeyedD"><span class="annot"><a href="Data.Coders.html#KeyedD"><span class="hs-identifier hs-var">KeyedD</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679128629"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Sparse"><span class="hs-identifier hs-type">Sparse</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679128629"><span class="hs-identifier hs-type">t</span></a></span></span><span>
</span><span id="line-390"></span><span>  </span><span id="local-6989586621679128626"><span id="local-6989586621679128627"><span id="From"><span class="annot"><a href="Data.Coders.html#From"><span class="hs-identifier hs-var">From</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-type">FromCBOR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128627"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128626"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128627"><span class="hs-identifier hs-type">t</span></a></span></span></span><span>
</span><span id="line-391"></span><span>  </span><span id="local-6989586621679128624"><span id="D"><span class="annot"><a href="Data.Coders.html#D"><span class="hs-identifier hs-var">D</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679128999"><span class="annot"><a href="#local-6989586621679128999"><span class="hs-identifier hs-type">s</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Decoder</span></span><span> </span><span class="annot"><a href="#local-6989586621679128999"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128624"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Dense"><span class="hs-identifier hs-type">Dense</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679128624"><span class="hs-identifier hs-type">t</span></a></span></span><span>
</span><span id="line-392"></span><span>  </span><span id="local-6989586621679128621"><span id="local-6989586621679128622"><span id="local-6989586621679129013"><span id="local-6989586621679129015"><span id="ApplyD"><span class="annot"><a href="Data.Coders.html#ApplyD"><span class="hs-identifier hs-var">ApplyD</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679129015"><span class="hs-identifier hs-type">w1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679128622"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679129013"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128621"><span class="hs-identifier hs-type">d</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679128622"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679129015"><span class="hs-identifier hs-type">w1</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679129013"><span class="hs-identifier hs-type">t</span></a></span></span></span></span></span><span>
</span><span id="line-393"></span><span>  </span><span id="local-6989586621679128618"><span id="local-6989586621679128619"><span id="Invalid"><span class="annot"><a href="Data.Coders.html#Invalid"><span class="hs-identifier hs-var">Invalid</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128619"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128618"><span class="hs-identifier hs-type">t</span></a></span></span></span><span>
</span><span id="line-394"></span><span>  </span><span id="local-6989586621679128616"><span id="local-6989586621679128900"><span id="local-6989586621679128901"><span id="Map"><span class="annot"><a href="Data.Coders.html#Map"><span class="hs-identifier hs-var">Map</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679128616"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679128901"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128900"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128616"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128900"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128901"><span class="hs-identifier hs-type">b</span></a></span></span></span></span><span>
</span><span id="line-395"></span><span>  </span><span id="local-6989586621679128848"><span id="DD"><span class="annot"><a href="Data.Coders.html#DD"><span class="hs-identifier hs-var">DD</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Coders.html#Dual"><span class="hs-identifier hs-type">Dual</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128848"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Dense"><span class="hs-identifier hs-type">Dense</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679128848"><span class="hs-identifier hs-type">t</span></a></span></span><span>
</span><span id="line-396"></span><span>  </span><span id="local-6989586621679128879"><span id="local-6989586621679128880"><span id="Emit"><span class="annot"><a href="Data.Coders.html#Emit"><span class="hs-identifier hs-var">Emit</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679128880"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128879"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128880"><span class="hs-identifier hs-type">t</span></a></span></span></span><span>
</span><span id="line-397"></span><span>
</span><span id="line-398"></span><span>  </span><span class="hs-comment">-- The next two could be generalized to any (Applicative f) rather than Annotator</span><span>
</span><span id="line-399"></span><span>  </span><span id="local-6989586621679128611"><span id="local-6989586621679128612"><span id="Ann"><span class="annot"><a href="Data.Coders.html#Ann"><span class="hs-identifier hs-var">Ann</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128612"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128611"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128612"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-type">Annotator</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128611"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-400"></span><span>  </span><span id="local-6989586621679128607"><span id="local-6989586621679128608"><span id="local-6989586621679128609"><span id="local-6989586621679129006"><span id="ApplyAnn"><span class="annot"><a href="Data.Coders.html#ApplyAnn"><span class="hs-identifier hs-var">ApplyAnn</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679129006"><span class="hs-identifier hs-type">w1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-type">Annotator</span></a></span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679128609"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679128608"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128607"><span class="hs-identifier hs-type">d</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-type">Annotator</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128609"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679129006"><span class="hs-identifier hs-type">w1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-type">Annotator</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128608"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-401"></span><span>
</span><span id="line-402"></span><span class="hs-keyword">infixl</span><span> </span><span class="hs-number">4</span><span> </span><span class="annot"><a href="Data.Coders.html#%3C%21"><span class="hs-operator hs-type">&lt;!</span></a></span><span>
</span><span id="line-403"></span><span class="hs-keyword">infixl</span><span> </span><span class="hs-number">4</span><span> </span><span class="annot"><a href="Data.Coders.html#%3C%2A%21"><span class="hs-operator hs-type">&lt;*!</span></a></span><span>
</span><span id="line-404"></span><span>
</span><span id="line-405"></span><span id="local-6989586621679128602"><span id="local-6989586621679128603"><span id="local-6989586621679128604"><span id="local-6989586621679128605"><span class="annot"><a href="Data.Coders.html#%3C%21"><span class="hs-operator hs-type">(&lt;!)</span></a></span><span> </span><span class="hs-glyph">::</span><span>  </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128605"><span class="hs-identifier hs-type">w1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679128604"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679128603"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128602"><span class="hs-identifier hs-type">w</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679128604"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128605"><span class="hs-identifier hs-type">w1</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128603"><span class="hs-identifier hs-type">t</span></a></span></span></span></span></span><span>
</span><span id="line-406"></span><span id="local-6989586621679128601"><span class="annot"><span class="annottext">Decode w1 (a -&gt; t)
</span><a href="#local-6989586621679128601"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="%3C%21"><span class="annot"><span class="annottext">&lt;! :: Decode w1 (a -&gt; t) -&gt; Decode ('Closed w) a -&gt; Decode w1 t
</span><a href="Data.Coders.html#%3C%21"><span class="hs-operator hs-var hs-var">&lt;!</span></a></span></span><span> </span><span id="local-6989586621679128600"><span class="annot"><span class="annottext">Decode ('Closed w) a
</span><a href="#local-6989586621679128600"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Decode w1 (a -&gt; t) -&gt; Decode ('Closed w) a -&gt; Decode w1 t
forall (w1 :: Wrapped) a t (d :: Density).
Decode w1 (a -&gt; t) -&gt; Decode ('Closed d) a -&gt; Decode w1 t
</span><a href="Data.Coders.html#ApplyD"><span class="hs-identifier hs-var">ApplyD</span></a></span><span> </span><span class="annot"><span class="annottext">Decode w1 (a -&gt; t)
</span><a href="#local-6989586621679128601"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed w) a
</span><a href="#local-6989586621679128600"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-407"></span><span>
</span><span id="line-408"></span><span id="local-6989586621679128596"><span id="local-6989586621679128597"><span id="local-6989586621679128598"><span id="local-6989586621679128599"><span class="annot"><a href="Data.Coders.html#%3C%2A%21"><span class="hs-operator hs-type">(&lt;*!)</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128599"><span class="hs-identifier hs-type">w1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-type">Annotator</span></a></span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679128598"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679128597"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128596"><span class="hs-identifier hs-type">d</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-type">Annotator</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128598"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128599"><span class="hs-identifier hs-type">w1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-type">Annotator</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128597"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-409"></span><span id="local-6989586621679128595"><span class="annot"><span class="annottext">Decode w1 (Annotator (a -&gt; t))
</span><a href="#local-6989586621679128595"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="%3C%2A%21"><span class="annot"><span class="annottext">&lt;*! :: Decode w1 (Annotator (a -&gt; t))
-&gt; Decode ('Closed d) (Annotator a) -&gt; Decode w1 (Annotator t)
</span><a href="Data.Coders.html#%3C%2A%21"><span class="hs-operator hs-var hs-var">&lt;*!</span></a></span></span><span> </span><span id="local-6989586621679128594"><span class="annot"><span class="annottext">Decode ('Closed d) (Annotator a)
</span><a href="#local-6989586621679128594"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Decode w1 (Annotator (a -&gt; t))
-&gt; Decode ('Closed d) (Annotator a) -&gt; Decode w1 (Annotator t)
forall (w1 :: Wrapped) a t (d :: Density).
Decode w1 (Annotator (a -&gt; t))
-&gt; Decode ('Closed d) (Annotator a) -&gt; Decode w1 (Annotator t)
</span><a href="Data.Coders.html#ApplyAnn"><span class="hs-identifier hs-var">ApplyAnn</span></a></span><span> </span><span class="annot"><span class="annottext">Decode w1 (Annotator (a -&gt; t))
</span><a href="#local-6989586621679128595"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) (Annotator a)
</span><a href="#local-6989586621679128594"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-410"></span><span>
</span><span id="line-411"></span><span id="local-6989586621679128995"><span id="local-6989586621679128996"><span class="annot"><a href="Data.Coders.html#hsize"><span class="hs-identifier hs-type">hsize</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128996"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128995"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span></span></span><span>
</span><span id="line-412"></span><span id="hsize"><span class="annot"><span class="annottext">hsize :: Decode w t -&gt; Int
</span><a href="Data.Coders.html#hsize"><span class="hs-identifier hs-var hs-var">hsize</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Summands"><span class="hs-identifier hs-type">Summands</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Decode 'Open t
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-413"></span><span class="annot"><a href="Data.Coders.html#hsize"><span class="hs-identifier hs-var">hsize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#SumD"><span class="hs-identifier hs-type">SumD</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-414"></span><span class="annot"><a href="Data.Coders.html#hsize"><span class="hs-identifier hs-var">hsize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#RecD"><span class="hs-identifier hs-type">RecD</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-415"></span><span class="annot"><a href="Data.Coders.html#hsize"><span class="hs-identifier hs-var">hsize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#KeyedD"><span class="hs-identifier hs-type">KeyedD</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-416"></span><span class="annot"><a href="Data.Coders.html#hsize"><span class="hs-identifier hs-var">hsize</span></a></span><span> </span><span class="annot"><span class="annottext">Decode w t
</span><a href="Data.Coders.html#From"><span class="hs-identifier hs-var">From</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-417"></span><span class="annot"><a href="Data.Coders.html#hsize"><span class="hs-identifier hs-var">hsize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#D"><span class="hs-identifier hs-type">D</span></a></span><span> </span><span class="annot"><span class="annottext">forall s. Decoder s t
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-418"></span><span class="annot"><a href="Data.Coders.html#hsize"><span class="hs-identifier hs-var">hsize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#DD"><span class="hs-identifier hs-type">DD</span></a></span><span> </span><span class="annot"><span class="annottext">Dual t
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-419"></span><span class="annot"><a href="Data.Coders.html#hsize"><span class="hs-identifier hs-var">hsize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#ApplyD"><span class="hs-identifier hs-type">ApplyD</span></a></span><span> </span><span id="local-6989586621679128592"><span class="annot"><span class="annottext">Decode w (a -&gt; t)
</span><a href="#local-6989586621679128592"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679128591"><span class="annot"><span class="annottext">Decode ('Closed d) a
</span><a href="#local-6989586621679128591"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Decode w (a -&gt; t) -&gt; Int
forall (w :: Wrapped) t. Decode w t -&gt; Int
</span><a href="Data.Coders.html#hsize"><span class="hs-identifier hs-var">hsize</span></a></span><span> </span><span class="annot"><span class="annottext">Decode w (a -&gt; t)
</span><a href="#local-6989586621679128592"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) a -&gt; Int
forall (w :: Wrapped) t. Decode w t -&gt; Int
</span><a href="Data.Coders.html#hsize"><span class="hs-identifier hs-var">hsize</span></a></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) a
</span><a href="#local-6989586621679128591"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-420"></span><span class="annot"><a href="Data.Coders.html#hsize"><span class="hs-identifier hs-var">hsize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Invalid"><span class="hs-identifier hs-type">Invalid</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-421"></span><span class="annot"><a href="Data.Coders.html#hsize"><span class="hs-identifier hs-var">hsize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Map"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; t
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679128590"><span class="annot"><span class="annottext">Decode w a
</span><a href="#local-6989586621679128590"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Decode w a -&gt; Int
forall (w :: Wrapped) t. Decode w t -&gt; Int
</span><a href="Data.Coders.html#hsize"><span class="hs-identifier hs-var">hsize</span></a></span><span> </span><span class="annot"><span class="annottext">Decode w a
</span><a href="#local-6989586621679128590"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-422"></span><span class="annot"><a href="Data.Coders.html#hsize"><span class="hs-identifier hs-var">hsize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Emit"><span class="hs-identifier hs-type">Emit</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-423"></span><span class="annot"><a href="Data.Coders.html#hsize"><span class="hs-identifier hs-var">hsize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#SparseKeyed"><span class="hs-identifier hs-type">SparseKeyed</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">t
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Field t
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[(Word, String)]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-424"></span><span class="annot"><a href="Data.Coders.html#hsize"><span class="hs-identifier hs-var">hsize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Ann"><span class="hs-identifier hs-type">Ann</span></a></span><span> </span><span id="local-6989586621679128589"><span class="annot"><span class="annottext">Decode w t
</span><a href="#local-6989586621679128589"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Decode w t -&gt; Int
forall (w :: Wrapped) t. Decode w t -&gt; Int
</span><a href="Data.Coders.html#hsize"><span class="hs-identifier hs-var">hsize</span></a></span><span> </span><span class="annot"><span class="annottext">Decode w t
</span><a href="#local-6989586621679128589"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-425"></span><span class="annot"><a href="Data.Coders.html#hsize"><span class="hs-identifier hs-var">hsize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#ApplyAnn"><span class="hs-identifier hs-type">ApplyAnn</span></a></span><span> </span><span id="local-6989586621679128588"><span class="annot"><span class="annottext">Decode w (Annotator (a -&gt; t))
</span><a href="#local-6989586621679128588"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679128587"><span class="annot"><span class="annottext">Decode ('Closed d) (Annotator a)
</span><a href="#local-6989586621679128587"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Decode w (Annotator (a -&gt; t)) -&gt; Int
forall (w :: Wrapped) t. Decode w t -&gt; Int
</span><a href="Data.Coders.html#hsize"><span class="hs-identifier hs-var">hsize</span></a></span><span> </span><span class="annot"><span class="annottext">Decode w (Annotator (a -&gt; t))
</span><a href="#local-6989586621679128588"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) (Annotator a) -&gt; Int
forall (w :: Wrapped) t. Decode w t -&gt; Int
</span><a href="Data.Coders.html#hsize"><span class="hs-identifier hs-var">hsize</span></a></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) (Annotator a)
</span><a href="#local-6989586621679128587"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-426"></span><span>
</span><span id="line-427"></span><span id="local-6989586621679128916"><span id="local-6989586621679128917"><span id="local-6989586621679128918"><span class="annot"><a href="Data.Coders.html#decode"><span class="hs-identifier hs-type">decode</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128918"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128917"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Decoder</span></span><span> </span><span class="annot"><a href="#local-6989586621679128916"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128917"><span class="hs-identifier hs-type">t</span></a></span></span></span></span><span>
</span><span id="line-428"></span><span id="decode"><span class="annot"><span class="annottext">decode :: Decode w t -&gt; Decoder s t
</span><a href="Data.Coders.html#decode"><span class="hs-identifier hs-var hs-var">decode</span></a></span></span><span> </span><span id="local-6989586621679128586"><span class="annot"><span class="annottext">Decode w t
</span><a href="#local-6989586621679128586"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((Int, t) -&gt; t) -&gt; Decoder s (Int, t) -&gt; Decoder s t
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">(Int, t) -&gt; t
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Decode w t -&gt; Decoder s (Int, t)
forall (w :: Wrapped) t s. Decode w t -&gt; Decoder s (Int, t)
</span><a href="Data.Coders.html#decodE"><span class="hs-identifier hs-var">decodE</span></a></span><span> </span><span class="annot"><span class="annottext">Decode w t
</span><a href="#local-6989586621679128586"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-429"></span><span>
</span><span id="line-430"></span><span id="local-6989586621679128980"><span id="local-6989586621679128981"><span id="local-6989586621679128982"><span class="annot"><a href="Data.Coders.html#decodE"><span class="hs-identifier hs-type">decodE</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128982"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128981"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Decoder</span></span><span> </span><span class="annot"><a href="#local-6989586621679128980"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679128981"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-431"></span><span id="decodE"><span class="annot"><span class="annottext">decodE :: Decode w t -&gt; Decoder s (Int, t)
</span><a href="Data.Coders.html#decodE"><span class="hs-identifier hs-var hs-var">decodE</span></a></span></span><span> </span><span id="local-6989586621679128584"><span class="annot"><span class="annottext">Decode w t
</span><a href="#local-6989586621679128584"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Decode w t -&gt; Int -&gt; Decoder s (Int, t)
forall (w :: Wrapped) s t. Decode w t -&gt; Int -&gt; Decoder s (Int, t)
</span><a href="Data.Coders.html#decodeCount"><span class="hs-identifier hs-var">decodeCount</span></a></span><span> </span><span class="annot"><span class="annottext">Decode w t
</span><a href="#local-6989586621679128584"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-432"></span><span>
</span><span id="line-433"></span><span class="annot"><a href="Data.Coders.html#decodeCount"><span class="hs-identifier hs-type">decodeCount</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679128976"><span class="annot"><a href="#local-6989586621679128976"><span class="hs-identifier hs-type">w</span></a></span></span><span class="hs-glyph">::</span><span class="annot"><a href="Data.Coders.html#Wrapped"><span class="hs-identifier hs-type">Wrapped</span></a></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679128974"><span class="annot"><a href="#local-6989586621679128974"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span id="local-6989586621679128975"><span class="annot"><a href="#local-6989586621679128975"><span class="hs-identifier hs-type">t</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128976"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128975"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Decoder</span></span><span> </span><span class="annot"><a href="#local-6989586621679128974"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679128975"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-434"></span><span id="decodeCount"><span class="annot"><span class="annottext">decodeCount :: Decode w t -&gt; Int -&gt; Decoder s (Int, t)
</span><a href="Data.Coders.html#decodeCount"><span class="hs-identifier hs-var hs-var">decodeCount</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Summands"><span class="hs-identifier hs-type">Summands</span></a></span><span> </span><span id="local-6989586621679128582"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679128582"><span class="hs-identifier hs-var">nm</span></a></span></span><span> </span><span id="local-6989586621679128581"><span class="annot"><span class="annottext">Word -&gt; Decode 'Open t
</span><a href="#local-6989586621679128581"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679128580"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679128580"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679128580"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(t -&gt; (Int, t)) -&gt; Decoder s t -&gt; Decoder s (Int, t)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; (Word -&gt; Decoder s (Int, t)) -&gt; Decoder s t
forall s a. String -&gt; (Word -&gt; Decoder s (Int, a)) -&gt; Decoder s a
</span><a href="Data.Coders.html#decodeRecordSum"><span class="hs-identifier hs-var">decodeRecordSum</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679128582"><span class="hs-identifier hs-var">nm</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679128579"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679128579"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Decode 'Open t -&gt; Decoder s (Int, t)
forall (w :: Wrapped) t s. Decode w t -&gt; Decoder s (Int, t)
</span><a href="Data.Coders.html#decodE"><span class="hs-identifier hs-var">decodE</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word -&gt; Decode 'Open t
</span><a href="#local-6989586621679128581"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679128579"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-435"></span><span class="annot"><a href="Data.Coders.html#decodeCount"><span class="hs-identifier hs-var">decodeCount</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#SumD"><span class="hs-identifier hs-type">SumD</span></a></span><span> </span><span id="local-6989586621679128578"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679128578"><span class="hs-identifier hs-var">cn</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679128577"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679128577"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Int, t) -&gt; Decoder s (Int, t)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679128577"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679128578"><span class="hs-identifier hs-var">cn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-436"></span><span class="annot"><a href="Data.Coders.html#decodeCount"><span class="hs-identifier hs-var">decodeCount</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#KeyedD"><span class="hs-identifier hs-type">KeyedD</span></a></span><span> </span><span id="local-6989586621679128576"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679128576"><span class="hs-identifier hs-var">cn</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679128575"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679128575"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Int, t) -&gt; Decoder s (Int, t)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679128575"><span class="hs-identifier hs-var">n</span></a></span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679128576"><span class="hs-identifier hs-var">cn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-437"></span><span class="annot"><a href="Data.Coders.html#decodeCount"><span class="hs-identifier hs-var">decodeCount</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#RecD"><span class="hs-identifier hs-type">RecD</span></a></span><span> </span><span id="local-6989586621679128574"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679128574"><span class="hs-identifier hs-var">cn</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679128573"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679128573"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text
-&gt; ((Int, t) -&gt; Int) -&gt; Decoder s (Int, t) -&gt; Decoder s (Int, t)
forall a s. Text -&gt; (a -&gt; Int) -&gt; Decoder s a -&gt; Decoder s a
</span><a href="Data.Coders.html#decodeRecordNamed"><span class="hs-identifier hs-var">decodeRecordNamed</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;RecD&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; (Int, t) -&gt; Int
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679128573"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Int, t) -&gt; Decoder s (Int, t)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679128573"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679128574"><span class="hs-identifier hs-var">cn</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-438"></span><span class="annot"><a href="Data.Coders.html#decodeCount"><span class="hs-identifier hs-var">decodeCount</span></a></span><span> </span><span class="annot"><span class="annottext">Decode w t
</span><a href="Data.Coders.html#From"><span class="hs-identifier hs-var">From</span></a></span><span> </span><span id="local-6989586621679128571"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679128571"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679128571"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(t -&gt; (Int, t)) -&gt; Decoder s t -&gt; Decoder s (Int, t)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Decoder s t
forall a s. FromCBOR a =&gt; Decoder s a
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">fromCBOR</span></a></span><span>
</span><span id="line-439"></span><span class="annot"><a href="Data.Coders.html#decodeCount"><span class="hs-identifier hs-var">decodeCount</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#D"><span class="hs-identifier hs-type">D</span></a></span><span> </span><span id="local-6989586621679128570"><span class="annot"><span class="annottext">forall s. Decoder s t
</span><a href="#local-6989586621679128570"><span class="hs-identifier hs-var">dec</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679128569"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679128569"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679128569"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(t -&gt; (Int, t)) -&gt; Decoder s t -&gt; Decoder s (Int, t)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Decoder s t
forall s. Decoder s t
</span><a href="#local-6989586621679128570"><span class="hs-identifier hs-var">dec</span></a></span><span>
</span><span id="line-440"></span><span class="annot"><a href="Data.Coders.html#decodeCount"><span class="hs-identifier hs-var">decodeCount</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Invalid"><span class="hs-identifier hs-type">Invalid</span></a></span><span> </span><span id="local-6989586621679128568"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679128568"><span class="hs-identifier hs-var">k</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word -&gt; Decoder s (Int, t)
forall s a. Word -&gt; Decoder s a
</span><a href="Data.Coders.html#invalidKey"><span class="hs-identifier hs-var">invalidKey</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679128568"><span class="hs-identifier hs-var">k</span></a></span><span>
</span><span id="line-441"></span><span class="annot"><a href="Data.Coders.html#decodeCount"><span class="hs-identifier hs-var">decodeCount</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Map"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span id="local-6989586621679128567"><span class="annot"><span class="annottext">a -&gt; t
</span><a href="#local-6989586621679128567"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679128566"><span class="annot"><span class="annottext">Decode w a
</span><a href="#local-6989586621679128566"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679128565"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679128565"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679128564"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679128564"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679128563"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679128563"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decode w a -&gt; Int -&gt; Decoder s (Int, a)
forall (w :: Wrapped) s t. Decode w t -&gt; Int -&gt; Decoder s (Int, t)
</span><a href="Data.Coders.html#decodeCount"><span class="hs-identifier hs-var">decodeCount</span></a></span><span> </span><span class="annot"><span class="annottext">Decode w a
</span><a href="#local-6989586621679128566"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679128565"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(Int, t) -&gt; Decoder s (Int, t)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679128564"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">a -&gt; t
</span><a href="#local-6989586621679128567"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679128563"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-442"></span><span class="annot"><a href="Data.Coders.html#decodeCount"><span class="hs-identifier hs-var">decodeCount</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#DD"><span class="hs-identifier hs-type">DD</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Dual"><span class="hs-identifier hs-type">Dual</span></a></span><span> </span><span id="local-6989586621679128562"><span class="annot"><span class="annottext">t -&gt; Encoding
</span><a href="#local-6989586621679128562"><span class="hs-identifier hs-var">_enc</span></a></span></span><span> </span><span id="local-6989586621679128561"><span class="annot"><span class="annottext">forall s. Decoder s t
</span><a href="#local-6989586621679128561"><span class="hs-identifier hs-var">dec</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621679128560"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679128560"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679128560"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(t -&gt; (Int, t)) -&gt; Decoder s t -&gt; Decoder s (Int, t)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Decoder s t
forall s. Decoder s t
</span><a href="#local-6989586621679128561"><span class="hs-identifier hs-var">dec</span></a></span><span>
</span><span id="line-443"></span><span class="annot"><a href="Data.Coders.html#decodeCount"><span class="hs-identifier hs-var">decodeCount</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Emit"><span class="hs-identifier hs-type">Emit</span></a></span><span> </span><span id="local-6989586621679128559"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679128559"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679128558"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679128558"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Int, t) -&gt; Decoder s (Int, t)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679128558"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679128559"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-444"></span><span class="annot"><a href="Data.Coders.html#decodeCount"><span class="hs-identifier hs-var">decodeCount</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#SparseKeyed"><span class="hs-identifier hs-type">SparseKeyed</span></a></span><span> </span><span id="local-6989586621679128557"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679128557"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621679128556"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679128556"><span class="hs-identifier hs-var">initial</span></a></span></span><span> </span><span id="local-6989586621679128555"><span class="annot"><span class="annottext">Word -&gt; Field t
</span><a href="#local-6989586621679128555"><span class="hs-identifier hs-var">pick</span></a></span></span><span> </span><span id="local-6989586621679128554"><span class="annot"><span class="annottext">[(Word, String)]
</span><a href="#local-6989586621679128554"><span class="hs-identifier hs-var">required</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679128553"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679128553"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-445"></span><span>   </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679128553"><span class="hs-identifier hs-var">n</span></a></span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(t -&gt; (Int, t)) -&gt; Decoder s t -&gt; Decoder s (Int, t)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; t -&gt; (Word -&gt; Field t) -&gt; [(Word, String)] -&gt; Decoder s t
forall a s.
Typeable a =&gt;
String -&gt; a -&gt; (Word -&gt; Field a) -&gt; [(Word, String)] -&gt; Decoder s a
</span><a href="Data.Coders.html#decodeSparse"><span class="hs-identifier hs-var">decodeSparse</span></a></span><span>  </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679128557"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679128556"><span class="hs-identifier hs-var">initial</span></a></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Field t
</span><a href="#local-6989586621679128555"><span class="hs-identifier hs-var">pick</span></a></span><span> </span><span class="annot"><span class="annottext">[(Word, String)]
</span><a href="#local-6989586621679128554"><span class="hs-identifier hs-var">required</span></a></span><span>
</span><span id="line-446"></span><span class="annot"><a href="Data.Coders.html#decodeCount"><span class="hs-identifier hs-var">decodeCount</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Ann"><span class="hs-identifier hs-type">Ann</span></a></span><span> </span><span id="local-6989586621679128551"><span class="annot"><span class="annottext">Decode w t
</span><a href="#local-6989586621679128551"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679128550"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679128550"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679128549"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679128549"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679128548"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679128548"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decode w t -&gt; Int -&gt; Decoder s (Int, t)
forall (w :: Wrapped) s t. Decode w t -&gt; Int -&gt; Decoder s (Int, t)
</span><a href="Data.Coders.html#decodeCount"><span class="hs-identifier hs-var">decodeCount</span></a></span><span> </span><span class="annot"><span class="annottext">Decode w t
</span><a href="#local-6989586621679128551"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679128550"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(Int, Annotator t) -&gt; Decoder s (Int, Annotator t)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679128549"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">t -&gt; Annotator t
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679128548"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-447"></span><span class="annot"><a href="Data.Coders.html#decodeCount"><span class="hs-identifier hs-var">decodeCount</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#ApplyAnn"><span class="hs-identifier hs-type">ApplyAnn</span></a></span><span> </span><span id="local-6989586621679128547"><span class="annot"><span class="annottext">Decode w (Annotator (a -&gt; t))
</span><a href="#local-6989586621679128547"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span id="local-6989586621679128546"><span class="annot"><span class="annottext">Decode ('Closed d) (Annotator a)
</span><a href="#local-6989586621679128546"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679128545"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679128545"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-448"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621679128544"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679128544"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679128543"><span class="annot"><span class="annottext">Annotator (a -&gt; t)
</span><a href="#local-6989586621679128543"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decode w (Annotator (a -&gt; t))
-&gt; Int -&gt; Decoder s (Int, Annotator (a -&gt; t))
forall (w :: Wrapped) s t. Decode w t -&gt; Int -&gt; Decoder s (Int, t)
</span><a href="Data.Coders.html#decodeCount"><span class="hs-identifier hs-var">decodeCount</span></a></span><span> </span><span class="annot"><span class="annottext">Decode w (Annotator (a -&gt; t))
</span><a href="#local-6989586621679128547"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679128545"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) (Annotator a) -&gt; Int
forall (w :: Wrapped) t. Decode w t -&gt; Int
</span><a href="Data.Coders.html#hsize"><span class="hs-identifier hs-var">hsize</span></a></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) (Annotator a)
</span><a href="#local-6989586621679128546"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-449"></span><span>  </span><span id="local-6989586621679128542"><span class="annot"><span class="annottext">Annotator a
</span><a href="#local-6989586621679128542"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) (Annotator a) -&gt; Decoder s (Annotator a)
forall (d :: Density) t s. Decode ('Closed d) t -&gt; Decoder s t
</span><a href="Data.Coders.html#decodeClosed"><span class="hs-identifier hs-var">decodeClosed</span></a></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) (Annotator a)
</span><a href="#local-6989586621679128546"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-450"></span><span>  </span><span class="annot"><span class="annottext">(Int, Annotator t) -&gt; Decoder s (Int, Annotator t)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679128544"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Annotator (a -&gt; t)
</span><a href="#local-6989586621679128543"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Annotator (a -&gt; t) -&gt; Annotator a -&gt; Annotator t
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Annotator a
</span><a href="#local-6989586621679128542"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-451"></span><span class="annot"><a href="Data.Coders.html#decodeCount"><span class="hs-identifier hs-var">decodeCount</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#ApplyD"><span class="hs-identifier hs-type">ApplyD</span></a></span><span> </span><span id="local-6989586621679128540"><span class="annot"><span class="annottext">Decode w (a -&gt; t)
</span><a href="#local-6989586621679128540"><span class="hs-identifier hs-var">cn</span></a></span></span><span> </span><span id="local-6989586621679128539"><span class="annot"><span class="annottext">Decode ('Closed d) a
</span><a href="#local-6989586621679128539"><span class="hs-identifier hs-var">g</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679128538"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679128538"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-452"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679128537"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679128537"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679128536"><span class="annot"><span class="annottext">a -&gt; t
</span><a href="#local-6989586621679128536"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decode w (a -&gt; t) -&gt; Int -&gt; Decoder s (Int, a -&gt; t)
forall (w :: Wrapped) s t. Decode w t -&gt; Int -&gt; Decoder s (Int, t)
</span><a href="Data.Coders.html#decodeCount"><span class="hs-identifier hs-var">decodeCount</span></a></span><span> </span><span class="annot"><span class="annottext">Decode w (a -&gt; t)
</span><a href="#local-6989586621679128540"><span class="hs-identifier hs-var">cn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679128538"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) a -&gt; Int
forall (w :: Wrapped) t. Decode w t -&gt; Int
</span><a href="Data.Coders.html#hsize"><span class="hs-identifier hs-var">hsize</span></a></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) a
</span><a href="#local-6989586621679128539"><span class="hs-identifier hs-var">g</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-453"></span><span>    </span><span id="local-6989586621679128535"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679128535"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) a -&gt; Decoder s a
forall (d :: Density) t s. Decode ('Closed d) t -&gt; Decoder s t
</span><a href="Data.Coders.html#decodeClosed"><span class="hs-identifier hs-var">decodeClosed</span></a></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) a
</span><a href="#local-6989586621679128539"><span class="hs-identifier hs-var">g</span></a></span><span>
</span><span id="line-454"></span><span>    </span><span class="annot"><span class="annottext">(Int, t) -&gt; Decoder s (Int, t)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679128537"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">a -&gt; t
</span><a href="#local-6989586621679128536"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679128535"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-455"></span><span>
</span><span id="line-456"></span><span class="hs-comment">-- The type of DecodeClosed precludes pattern match against (SumD c) as the types are different.</span><span>
</span><span id="line-457"></span><span>
</span><span id="line-458"></span><span id="local-6989586621679128950"><span id="local-6989586621679128951"><span id="local-6989586621679128952"><span class="annot"><a href="Data.Coders.html#decodeClosed"><span class="hs-identifier hs-type">decodeClosed</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128952"><span class="hs-identifier hs-type">d</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679128951"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Decoder</span></span><span> </span><span class="annot"><a href="#local-6989586621679128950"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128951"><span class="hs-identifier hs-type">t</span></a></span></span></span></span><span>
</span><span id="line-459"></span><span id="decodeClosed"><span class="annot"><span class="annottext">decodeClosed :: Decode ('Closed d) t -&gt; Decoder s t
</span><a href="Data.Coders.html#decodeClosed"><span class="hs-identifier hs-var hs-var">decodeClosed</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Summands"><span class="hs-identifier hs-type">Summands</span></a></span><span> </span><span id="local-6989586621679128534"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679128534"><span class="hs-identifier hs-var">nm</span></a></span></span><span> </span><span id="local-6989586621679128533"><span class="annot"><span class="annottext">Word -&gt; Decode 'Open t
</span><a href="#local-6989586621679128533"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; (Word -&gt; Decoder s (Int, t)) -&gt; Decoder s t
forall s a. String -&gt; (Word -&gt; Decoder s (Int, a)) -&gt; Decoder s a
</span><a href="Data.Coders.html#decodeRecordSum"><span class="hs-identifier hs-var">decodeRecordSum</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679128534"><span class="hs-identifier hs-var">nm</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679128532"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679128532"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Decode 'Open t -&gt; Decoder s (Int, t)
forall (w :: Wrapped) t s. Decode w t -&gt; Decoder s (Int, t)
</span><a href="Data.Coders.html#decodE"><span class="hs-identifier hs-var">decodE</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word -&gt; Decode 'Open t
</span><a href="#local-6989586621679128533"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679128532"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-460"></span><span class="annot"><a href="Data.Coders.html#decodeClosed"><span class="hs-identifier hs-var">decodeClosed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#KeyedD"><span class="hs-identifier hs-type">KeyedD</span></a></span><span> </span><span id="local-6989586621679128531"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679128531"><span class="hs-identifier hs-var">cn</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">t -&gt; Decoder s t
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679128531"><span class="hs-identifier hs-var">cn</span></a></span><span>
</span><span id="line-461"></span><span class="annot"><a href="Data.Coders.html#decodeClosed"><span class="hs-identifier hs-var">decodeClosed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#RecD"><span class="hs-identifier hs-type">RecD</span></a></span><span> </span><span id="local-6989586621679128530"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679128530"><span class="hs-identifier hs-var">cn</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">t -&gt; Decoder s t
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679128530"><span class="hs-identifier hs-var">cn</span></a></span><span>
</span><span id="line-462"></span><span class="annot"><a href="Data.Coders.html#decodeClosed"><span class="hs-identifier hs-var">decodeClosed</span></a></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) t
</span><a href="Data.Coders.html#From"><span class="hs-identifier hs-var">From</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621679128529"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679128529"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decoder s t
forall a s. FromCBOR a =&gt; Decoder s a
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">fromCBOR</span></a></span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">t -&gt; Decoder s t
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679128529"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-463"></span><span class="annot"><a href="Data.Coders.html#decodeClosed"><span class="hs-identifier hs-var">decodeClosed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#D"><span class="hs-identifier hs-type">D</span></a></span><span> </span><span id="local-6989586621679128528"><span class="annot"><span class="annottext">forall s. Decoder s t
</span><a href="#local-6989586621679128528"><span class="hs-identifier hs-var">dec</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Decoder s t
forall s. Decoder s t
</span><a href="#local-6989586621679128528"><span class="hs-identifier hs-var">dec</span></a></span><span>
</span><span id="line-464"></span><span class="annot"><a href="Data.Coders.html#decodeClosed"><span class="hs-identifier hs-var">decodeClosed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#ApplyD"><span class="hs-identifier hs-type">ApplyD</span></a></span><span> </span><span id="local-6989586621679128527"><span class="annot"><span class="annottext">Decode ('Closed d) (a -&gt; t)
</span><a href="#local-6989586621679128527"><span class="hs-identifier hs-var">cn</span></a></span></span><span> </span><span id="local-6989586621679128526"><span class="annot"><span class="annottext">Decode ('Closed d) a
</span><a href="#local-6989586621679128526"><span class="hs-identifier hs-var">g</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-465"></span><span>  </span><span id="local-6989586621679128525"><span class="annot"><span class="annottext">a -&gt; t
</span><a href="#local-6989586621679128525"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) (a -&gt; t) -&gt; Decoder s (a -&gt; t)
forall (d :: Density) t s. Decode ('Closed d) t -&gt; Decoder s t
</span><a href="Data.Coders.html#decodeClosed"><span class="hs-identifier hs-var">decodeClosed</span></a></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) (a -&gt; t)
</span><a href="#local-6989586621679128527"><span class="hs-identifier hs-var">cn</span></a></span><span>
</span><span id="line-466"></span><span>  </span><span id="local-6989586621679128524"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679128524"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) a -&gt; Decoder s a
forall (d :: Density) t s. Decode ('Closed d) t -&gt; Decoder s t
</span><a href="Data.Coders.html#decodeClosed"><span class="hs-identifier hs-var">decodeClosed</span></a></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) a
</span><a href="#local-6989586621679128526"><span class="hs-identifier hs-var">g</span></a></span><span>
</span><span id="line-467"></span><span>  </span><span class="annot"><span class="annottext">t -&gt; Decoder s t
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; t
</span><a href="#local-6989586621679128525"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679128524"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-468"></span><span class="annot"><a href="Data.Coders.html#decodeClosed"><span class="hs-identifier hs-var">decodeClosed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Invalid"><span class="hs-identifier hs-type">Invalid</span></a></span><span> </span><span id="local-6989586621679128523"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679128523"><span class="hs-identifier hs-var">k</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word -&gt; Decoder s t
forall s a. Word -&gt; Decoder s a
</span><a href="Data.Coders.html#invalidKey"><span class="hs-identifier hs-var">invalidKey</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679128523"><span class="hs-identifier hs-var">k</span></a></span><span>
</span><span id="line-469"></span><span class="annot"><a href="Data.Coders.html#decodeClosed"><span class="hs-identifier hs-var">decodeClosed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Map"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span id="local-6989586621679128522"><span class="annot"><span class="annottext">a -&gt; t
</span><a href="#local-6989586621679128522"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679128521"><span class="annot"><span class="annottext">Decode ('Closed d) a
</span><a href="#local-6989586621679128521"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; t
</span><a href="#local-6989586621679128522"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">(a -&gt; t) -&gt; Decoder s a -&gt; Decoder s t
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) a -&gt; Decoder s a
forall (d :: Density) t s. Decode ('Closed d) t -&gt; Decoder s t
</span><a href="Data.Coders.html#decodeClosed"><span class="hs-identifier hs-var">decodeClosed</span></a></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) a
</span><a href="#local-6989586621679128521"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-470"></span><span class="annot"><a href="Data.Coders.html#decodeClosed"><span class="hs-identifier hs-var">decodeClosed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#DD"><span class="hs-identifier hs-type">DD</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Dual"><span class="hs-identifier hs-type">Dual</span></a></span><span> </span><span id="local-6989586621679128520"><span class="annot"><span class="annottext">t -&gt; Encoding
</span><a href="#local-6989586621679128520"><span class="hs-identifier hs-var">_enc</span></a></span></span><span> </span><span id="local-6989586621679128519"><span class="annot"><span class="annottext">forall s. Decoder s t
</span><a href="#local-6989586621679128519"><span class="hs-identifier hs-var">dec</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Decoder s t
forall s. Decoder s t
</span><a href="#local-6989586621679128519"><span class="hs-identifier hs-var">dec</span></a></span><span>
</span><span id="line-471"></span><span class="annot"><a href="Data.Coders.html#decodeClosed"><span class="hs-identifier hs-var">decodeClosed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Emit"><span class="hs-identifier hs-type">Emit</span></a></span><span> </span><span id="local-6989586621679128518"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679128518"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">t -&gt; Decoder s t
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679128518"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-472"></span><span class="annot"><a href="Data.Coders.html#decodeClosed"><span class="hs-identifier hs-var">decodeClosed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#SparseKeyed"><span class="hs-identifier hs-type">SparseKeyed</span></a></span><span> </span><span id="local-6989586621679128517"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679128517"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621679128516"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679128516"><span class="hs-identifier hs-var">initial</span></a></span></span><span> </span><span id="local-6989586621679128515"><span class="annot"><span class="annottext">Word -&gt; Field t
</span><a href="#local-6989586621679128515"><span class="hs-identifier hs-var">pick</span></a></span></span><span> </span><span id="local-6989586621679128514"><span class="annot"><span class="annottext">[(Word, String)]
</span><a href="#local-6989586621679128514"><span class="hs-identifier hs-var">required</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-473"></span><span>   </span><span class="annot"><span class="annottext">String -&gt; t -&gt; (Word -&gt; Field t) -&gt; [(Word, String)] -&gt; Decoder s t
forall a s.
Typeable a =&gt;
String -&gt; a -&gt; (Word -&gt; Field a) -&gt; [(Word, String)] -&gt; Decoder s a
</span><a href="Data.Coders.html#decodeSparse"><span class="hs-identifier hs-var">decodeSparse</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679128517"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679128516"><span class="hs-identifier hs-var">initial</span></a></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Field t
</span><a href="#local-6989586621679128515"><span class="hs-identifier hs-var">pick</span></a></span><span> </span><span class="annot"><span class="annottext">[(Word, String)]
</span><a href="#local-6989586621679128514"><span class="hs-identifier hs-var">required</span></a></span><span>
</span><span id="line-474"></span><span class="annot"><a href="Data.Coders.html#decodeClosed"><span class="hs-identifier hs-var">decodeClosed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Ann"><span class="hs-identifier hs-type">Ann</span></a></span><span> </span><span id="local-6989586621679128513"><span class="annot"><span class="annottext">Decode ('Closed d) t
</span><a href="#local-6989586621679128513"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(t -&gt; Annotator t) -&gt; Decoder s t -&gt; Decoder s (Annotator t)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">t -&gt; Annotator t
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Decode ('Closed d) t -&gt; Decoder s t
forall (d :: Density) t s. Decode ('Closed d) t -&gt; Decoder s t
</span><a href="Data.Coders.html#decodeClosed"><span class="hs-identifier hs-var">decodeClosed</span></a></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) t
</span><a href="#local-6989586621679128513"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-475"></span><span class="annot"><a href="Data.Coders.html#decodeClosed"><span class="hs-identifier hs-var">decodeClosed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#ApplyAnn"><span class="hs-identifier hs-type">ApplyAnn</span></a></span><span> </span><span id="local-6989586621679128512"><span class="annot"><span class="annottext">Decode ('Closed d) (Annotator (a -&gt; t))
</span><a href="#local-6989586621679128512"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span id="local-6989586621679128511"><span class="annot"><span class="annottext">Decode ('Closed d) (Annotator a)
</span><a href="#local-6989586621679128511"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-476"></span><span>  </span><span id="local-6989586621679128510"><span class="annot"><span class="annottext">Annotator (a -&gt; t)
</span><a href="#local-6989586621679128510"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) (Annotator (a -&gt; t))
-&gt; Decoder s (Annotator (a -&gt; t))
forall (d :: Density) t s. Decode ('Closed d) t -&gt; Decoder s t
</span><a href="Data.Coders.html#decodeClosed"><span class="hs-identifier hs-var">decodeClosed</span></a></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) (Annotator (a -&gt; t))
</span><a href="#local-6989586621679128512"><span class="hs-identifier hs-var">g</span></a></span><span>
</span><span id="line-477"></span><span>  </span><span id="local-6989586621679128509"><span class="annot"><span class="annottext">Annotator a
</span><a href="#local-6989586621679128509"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) (Annotator a) -&gt; Decoder s (Annotator a)
forall (d :: Density) t s. Decode ('Closed d) t -&gt; Decoder s t
</span><a href="Data.Coders.html#decodeClosed"><span class="hs-identifier hs-var">decodeClosed</span></a></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) (Annotator a)
</span><a href="#local-6989586621679128511"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-478"></span><span>  </span><span class="annot"><span class="annottext">Annotator t -&gt; Decoder s (Annotator t)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Annotator (a -&gt; t)
</span><a href="#local-6989586621679128510"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Annotator (a -&gt; t) -&gt; Annotator a -&gt; Annotator t
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Annotator a
</span><a href="#local-6989586621679128509"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-479"></span><span>
</span><span id="line-480"></span><span id="local-6989586621679128957"><span id="local-6989586621679128958"><span class="annot"><a href="Data.Coders.html#decodeSparse"><span class="hs-identifier hs-type">decodeSparse</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-481"></span><span>   </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="annot"><a href="#local-6989586621679128958"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-482"></span><span>   </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679128958"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Word</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Field"><span class="hs-identifier hs-type">Field</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128958"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Word</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Decoder</span></span><span> </span><span class="annot"><a href="#local-6989586621679128957"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128958"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-483"></span><span id="decodeSparse"><span class="annot"><span class="annottext">decodeSparse :: String -&gt; a -&gt; (Word -&gt; Field a) -&gt; [(Word, String)] -&gt; Decoder s a
</span><a href="Data.Coders.html#decodeSparse"><span class="hs-identifier hs-var hs-var">decodeSparse</span></a></span></span><span> </span><span id="local-6989586621679128508"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679128508"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621679128507"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679128507"><span class="hs-identifier hs-var">initial</span></a></span></span><span> </span><span id="local-6989586621679128506"><span class="annot"><span class="annottext">Word -&gt; Field a
</span><a href="#local-6989586621679128506"><span class="hs-identifier hs-var">pick</span></a></span></span><span> </span><span id="local-6989586621679128505"><span class="annot"><span class="annottext">[(Word, String)]
</span><a href="#local-6989586621679128505"><span class="hs-identifier hs-var">required</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-484"></span><span>  </span><span id="local-6989586621679128504"><span class="annot"><span class="annottext">Maybe Int
</span><a href="#local-6989586621679128504"><span class="hs-identifier hs-var">lenOrIndef</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decoder s (Maybe Int)
forall s. Decoder s (Maybe Int)
</span><span class="hs-identifier hs-var">decodeMapLenOrIndef</span></span><span>
</span><span id="line-485"></span><span>  </span><span class="hs-special">(</span><span class="hs-glyph">!</span><span id="local-6989586621679128503"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679128503"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679128502"><span class="annot"><span class="annottext">Set Word
</span><a href="#local-6989586621679128502"><span class="hs-identifier hs-var">used</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe Int
-&gt; a
-&gt; (Word -&gt; Field a)
-&gt; Set Word
-&gt; String
-&gt; Decoder s (a, Set Word)
forall t s.
Maybe Int
-&gt; t
-&gt; (Word -&gt; Field t)
-&gt; Set Word
-&gt; String
-&gt; Decoder s (t, Set Word)
</span><a href="Data.Coders.html#getSparseBlock"><span class="hs-identifier hs-var">getSparseBlock</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Int
</span><a href="#local-6989586621679128504"><span class="hs-identifier hs-var">lenOrIndef</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679128507"><span class="hs-identifier hs-var">initial</span></a></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Field a
</span><a href="#local-6989586621679128506"><span class="hs-identifier hs-var">pick</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Set Word
forall a. Set a
</span><span class="hs-identifier hs-var">Set.empty</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679128508"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-486"></span><span>  </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">((Word, String) -&gt; Bool) -&gt; [(Word, String)] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">all</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679128498"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679128498"><span class="hs-identifier hs-var">key</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679128497"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679128497"><span class="hs-identifier hs-var">_name</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Word -&gt; Set Word -&gt; Bool
forall a. Ord a =&gt; a -&gt; Set a -&gt; Bool
</span><span class="hs-identifier hs-var">member</span></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679128498"><span class="hs-identifier hs-var">key</span></a></span><span> </span><span class="annot"><span class="annottext">Set Word
</span><a href="#local-6989586621679128502"><span class="hs-identifier hs-var">used</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Word, String)]
</span><a href="#local-6989586621679128505"><span class="hs-identifier hs-var">required</span></a></span><span>
</span><span id="line-487"></span><span>     </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">a -&gt; Decoder s a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679128503"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-488"></span><span>     </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Set Word -&gt; [(Word, String)] -&gt; String -&gt; Decoder s a
forall s a. Set Word -&gt; [(Word, String)] -&gt; String -&gt; Decoder s a
</span><a href="Data.Coders.html#unusedRequiredKeys"><span class="hs-identifier hs-var">unusedRequiredKeys</span></a></span><span> </span><span class="annot"><span class="annottext">Set Word
</span><a href="#local-6989586621679128502"><span class="hs-identifier hs-var">used</span></a></span><span> </span><span class="annot"><span class="annottext">[(Word, String)]
</span><a href="#local-6989586621679128505"><span class="hs-identifier hs-var">required</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TypeRep -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; TypeRep
forall a. Typeable a =&gt; a -&gt; TypeRep
</span><span class="hs-identifier hs-var">typeOf</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679128507"><span class="hs-identifier hs-var">initial</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-489"></span><span>
</span><span id="line-490"></span><span class="hs-comment">-- | Given a function that picks a Field from a key, decodes that field</span><span>
</span><span id="line-491"></span><span class="hs-comment">--   and returns a (t -&gt; t) transformer, which when applied, will</span><span>
</span><span id="line-492"></span><span class="hs-comment">--   update the record with the value decoded.</span><span>
</span><span id="line-493"></span><span>
</span><span id="line-494"></span><span id="local-6989586621679128911"><span id="local-6989586621679128912"><span class="annot"><a href="Data.Coders.html#applyField"><span class="hs-identifier hs-type">applyField</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Word</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Field"><span class="hs-identifier hs-type">Field</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128912"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Decoder</span></span><span> </span><span class="annot"><a href="#local-6989586621679128911"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679128912"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679128912"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">,</span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word</span></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-495"></span><span id="applyField"><span class="annot"><span class="annottext">applyField :: (Word -&gt; Field t)
-&gt; Set Word -&gt; String -&gt; Decoder s (t -&gt; t, Set Word)
</span><a href="Data.Coders.html#applyField"><span class="hs-identifier hs-var hs-var">applyField</span></a></span></span><span> </span><span id="local-6989586621679128494"><span class="annot"><span class="annottext">Word -&gt; Field t
</span><a href="#local-6989586621679128494"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679128493"><span class="annot"><span class="annottext">Set Word
</span><a href="#local-6989586621679128493"><span class="hs-identifier hs-var">seen</span></a></span></span><span> </span><span id="local-6989586621679128492"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679128492"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-496"></span><span>  </span><span id="local-6989586621679128491"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679128491"><span class="hs-identifier hs-var">tag</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decoder s Word
forall s. Decoder s Word
</span><span class="hs-identifier hs-var">decodeWord</span></span><span>
</span><span id="line-497"></span><span>  </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Word -&gt; Set Word -&gt; Bool
forall a. Ord a =&gt; a -&gt; Set a -&gt; Bool
</span><span class="hs-identifier hs-var">Set.member</span></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679128491"><span class="hs-identifier hs-var">tag</span></a></span><span> </span><span class="annot"><span class="annottext">Set Word
</span><a href="#local-6989586621679128493"><span class="hs-identifier hs-var">seen</span></a></span><span>
</span><span id="line-498"></span><span>     </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">String -&gt; Word -&gt; Decoder s (t -&gt; t, Set Word)
forall s a. String -&gt; Word -&gt; Decoder s a
</span><a href="Data.Coders.html#duplicateKey"><span class="hs-identifier hs-var">duplicateKey</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679128492"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679128491"><span class="hs-identifier hs-var">tag</span></a></span><span>
</span><span id="line-499"></span><span>     </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Word -&gt; Field t
</span><a href="#local-6989586621679128494"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679128491"><span class="hs-identifier hs-var">tag</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-500"></span><span>            </span><span class="annot"><a href="Data.Coders.html#Field"><span class="hs-identifier hs-type">Field</span></a></span><span> </span><span id="local-6989586621679128490"><span class="annot"><span class="annottext">x -&gt; t -&gt; t
</span><a href="#local-6989586621679128490"><span class="hs-identifier hs-var">update</span></a></span></span><span> </span><span id="local-6989586621679128489"><span class="annot"><span class="annottext">Decode ('Closed d) x
</span><a href="#local-6989586621679128489"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621679128488"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679128488"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) x -&gt; Decoder s x
forall (w :: Wrapped) t s. Decode w t -&gt; Decoder s t
</span><a href="Data.Coders.html#decode"><span class="hs-identifier hs-var">decode</span></a></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) x
</span><a href="#local-6989586621679128489"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(t -&gt; t, Set Word) -&gt; Decoder s (t -&gt; t, Set Word)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">x -&gt; t -&gt; t
</span><a href="#local-6989586621679128490"><span class="hs-identifier hs-var">update</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679128488"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Word -&gt; Set Word -&gt; Set Word
forall a. Ord a =&gt; a -&gt; Set a -&gt; Set a
</span><span class="hs-identifier hs-var">insert</span></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679128491"><span class="hs-identifier hs-var">tag</span></a></span><span> </span><span class="annot"><span class="annottext">Set Word
</span><a href="#local-6989586621679128493"><span class="hs-identifier hs-var">seen</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-501"></span><span>
</span><span id="line-502"></span><span class="hs-comment">-- | Decode a Map Block of key encoded data for type t</span><span>
</span><span id="line-503"></span><span class="hs-comment">--   given a function that picks the right box for a given key, and an</span><span>
</span><span id="line-504"></span><span class="hs-comment">--   initial value for the record (usually starts filled with default values).</span><span>
</span><span id="line-505"></span><span class="hs-comment">--   The Block can be either len-encoded or block-encoded.</span><span>
</span><span id="line-506"></span><span>
</span><span id="line-507"></span><span id="local-6989586621679128932"><span id="local-6989586621679128933"><span class="annot"><a href="Data.Coders.html#getSparseBlock"><span class="hs-identifier hs-type">getSparseBlock</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679128933"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Word</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Field"><span class="hs-identifier hs-type">Field</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128933"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Decoder</span></span><span> </span><span class="annot"><a href="#local-6989586621679128932"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679128933"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">,</span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word</span></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-508"></span><span id="getSparseBlock"><span class="annot"><span class="annottext">getSparseBlock :: Maybe Int
-&gt; t
-&gt; (Word -&gt; Field t)
-&gt; Set Word
-&gt; String
-&gt; Decoder s (t, Set Word)
</span><a href="Data.Coders.html#getSparseBlock"><span class="hs-identifier hs-var hs-var">getSparseBlock</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679128487"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679128487"><span class="hs-identifier hs-var">initial</span></a></span></span><span> </span><span id="local-6989586621679128486"><span class="annot"><span class="annottext">Word -&gt; Field t
</span><a href="#local-6989586621679128486"><span class="hs-identifier hs-var">_pick</span></a></span></span><span> </span><span id="local-6989586621679128485"><span class="annot"><span class="annottext">Set Word
</span><a href="#local-6989586621679128485"><span class="hs-identifier hs-var">seen</span></a></span></span><span> </span><span id="local-6989586621679128484"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679128484"><span class="hs-identifier hs-var">_name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(t, Set Word) -&gt; Decoder s (t, Set Word)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span class="hs-special">(</span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679128487"><span class="hs-identifier hs-var">initial</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Set Word
</span><a href="#local-6989586621679128485"><span class="hs-identifier hs-var">seen</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-509"></span><span class="annot"><a href="Data.Coders.html#getSparseBlock"><span class="hs-identifier hs-var">getSparseBlock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679128483"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679128483"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679128482"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679128482"><span class="hs-identifier hs-var">initial</span></a></span></span><span> </span><span id="local-6989586621679128481"><span class="annot"><span class="annottext">Word -&gt; Field t
</span><a href="#local-6989586621679128481"><span class="hs-identifier hs-var">pick</span></a></span></span><span> </span><span id="local-6989586621679128480"><span class="annot"><span class="annottext">Set Word
</span><a href="#local-6989586621679128480"><span class="hs-identifier hs-var">seen</span></a></span></span><span> </span><span id="local-6989586621679128479"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679128479"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-510"></span><span>   </span><span class="hs-special">(</span><span id="local-6989586621679128478"><span class="annot"><span class="annottext">t -&gt; t
</span><a href="#local-6989586621679128478"><span class="hs-identifier hs-var">transform</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679128477"><span class="annot"><span class="annottext">Set Word
</span><a href="#local-6989586621679128477"><span class="hs-identifier hs-var">seen2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Word -&gt; Field t)
-&gt; Set Word -&gt; String -&gt; Decoder s (t -&gt; t, Set Word)
forall t s.
(Word -&gt; Field t)
-&gt; Set Word -&gt; String -&gt; Decoder s (t -&gt; t, Set Word)
</span><a href="Data.Coders.html#applyField"><span class="hs-identifier hs-var">applyField</span></a></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Field t
</span><a href="#local-6989586621679128481"><span class="hs-identifier hs-var">pick</span></a></span><span> </span><span class="annot"><span class="annottext">Set Word
</span><a href="#local-6989586621679128480"><span class="hs-identifier hs-var">seen</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679128479"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-511"></span><span>   </span><span class="annot"><span class="annottext">Maybe Int
-&gt; t
-&gt; (Word -&gt; Field t)
-&gt; Set Word
-&gt; String
-&gt; Decoder s (t, Set Word)
forall t s.
Maybe Int
-&gt; t
-&gt; (Word -&gt; Field t)
-&gt; Set Word
-&gt; String
-&gt; Decoder s (t, Set Word)
</span><a href="Data.Coders.html#getSparseBlock"><span class="hs-identifier hs-var">getSparseBlock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Maybe Int
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679128483"><span class="hs-identifier hs-var">n</span></a></span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">t -&gt; t
</span><a href="#local-6989586621679128478"><span class="hs-identifier hs-var">transform</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679128482"><span class="hs-identifier hs-var">initial</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Word -&gt; Field t
</span><a href="#local-6989586621679128481"><span class="hs-identifier hs-var">pick</span></a></span><span> </span><span class="annot"><span class="annottext">Set Word
</span><a href="#local-6989586621679128477"><span class="hs-identifier hs-var">seen2</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679128479"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-512"></span><span class="annot"><a href="Data.Coders.html#getSparseBlock"><span class="hs-identifier hs-var">getSparseBlock</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Int
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span id="local-6989586621679128476"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679128476"><span class="hs-identifier hs-var">initial</span></a></span></span><span> </span><span id="local-6989586621679128475"><span class="annot"><span class="annottext">Word -&gt; Field t
</span><a href="#local-6989586621679128475"><span class="hs-identifier hs-var">pick</span></a></span></span><span> </span><span id="local-6989586621679128474"><span class="annot"><span class="annottext">Set Word
</span><a href="#local-6989586621679128474"><span class="hs-identifier hs-var">seen</span></a></span></span><span> </span><span id="local-6989586621679128473"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679128473"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-513"></span><span>   </span><span class="annot"><span class="annottext">Decoder s Bool
forall s. Decoder s Bool
</span><span class="hs-identifier hs-var">decodeBreakOr</span></span><span> </span><span class="annot"><span class="annottext">Decoder s Bool
-&gt; (Bool -&gt; Decoder s (t, Set Word)) -&gt; Decoder s (t, Set Word)
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-514"></span><span>             </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(t, Set Word) -&gt; Decoder s (t, Set Word)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span class="hs-special">(</span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679128476"><span class="hs-identifier hs-var">initial</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Set Word
</span><a href="#local-6989586621679128474"><span class="hs-identifier hs-var">seen</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-515"></span><span>             </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679128472"><span class="annot"><span class="annottext">t -&gt; t
</span><a href="#local-6989586621679128472"><span class="hs-identifier hs-var">transform</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679128471"><span class="annot"><span class="annottext">Set Word
</span><a href="#local-6989586621679128471"><span class="hs-identifier hs-var">seen2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Word -&gt; Field t)
-&gt; Set Word -&gt; String -&gt; Decoder s (t -&gt; t, Set Word)
forall t s.
(Word -&gt; Field t)
-&gt; Set Word -&gt; String -&gt; Decoder s (t -&gt; t, Set Word)
</span><a href="Data.Coders.html#applyField"><span class="hs-identifier hs-var">applyField</span></a></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Field t
</span><a href="#local-6989586621679128475"><span class="hs-identifier hs-var">pick</span></a></span><span> </span><span class="annot"><span class="annottext">Set Word
</span><a href="#local-6989586621679128474"><span class="hs-identifier hs-var">seen</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679128473"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-516"></span><span>                         </span><span class="annot"><span class="annottext">Maybe Int
-&gt; t
-&gt; (Word -&gt; Field t)
-&gt; Set Word
-&gt; String
-&gt; Decoder s (t, Set Word)
forall t s.
Maybe Int
-&gt; t
-&gt; (Word -&gt; Field t)
-&gt; Set Word
-&gt; String
-&gt; Decoder s (t, Set Word)
</span><a href="Data.Coders.html#getSparseBlock"><span class="hs-identifier hs-var">getSparseBlock</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Int
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">t -&gt; t
</span><a href="#local-6989586621679128472"><span class="hs-identifier hs-var">transform</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679128476"><span class="hs-identifier hs-var">initial</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Word -&gt; Field t
</span><a href="#local-6989586621679128475"><span class="hs-identifier hs-var">pick</span></a></span><span> </span><span class="annot"><span class="annottext">Set Word
</span><a href="#local-6989586621679128471"><span class="hs-identifier hs-var">seen2</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679128473"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-517"></span><span>
</span><span id="line-518"></span><span class="hs-comment">-- ======================================================</span><span>
</span><span id="line-519"></span><span class="hs-comment">-- (Decode ('Closed 'Dense)) and (Decode ('Closed 'Sparse)) are applicative</span><span>
</span><span id="line-520"></span><span class="hs-comment">-- (Decode 'Open) is not applicative since there is no</span><span>
</span><span id="line-521"></span><span class="hs-comment">-- (Applys 'Open 'Open) instance. And there should never be one.</span><span>
</span><span id="line-522"></span><span>
</span><span id="line-523"></span><span id="local-6989586621679128470"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679128467"><span class="annot"><span class="hs-identifier hs-type">Functor</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128470"><span class="hs-identifier hs-type">w</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-524"></span><span>  </span><span id="local-6989586621679128465"><span class="annot"><span class="annottext">fmap :: (a -&gt; b) -&gt; Decode w a -&gt; Decode w b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">fmap</span></span></span><span> </span><span id="local-6989586621679128464"><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621679128464"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Map"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span id="local-6989586621679128463"><span class="annot"><span class="annottext">a -&gt; a
</span><a href="#local-6989586621679128463"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span id="local-6989586621679128462"><span class="annot"><span class="annottext">Decode w a
</span><a href="#local-6989586621679128462"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; b) -&gt; Decode w a -&gt; Decode w b
forall a b (w :: Wrapped). (a -&gt; b) -&gt; Decode w a -&gt; Decode w b
</span><a href="Data.Coders.html#Map"><span class="hs-identifier hs-var">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621679128464"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">(a -&gt; b) -&gt; (a -&gt; a) -&gt; a -&gt; b
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; a
</span><a href="#local-6989586621679128463"><span class="hs-identifier hs-var">g</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Decode w a
</span><a href="#local-6989586621679128462"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-525"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">fmap</span></span><span> </span><span id="local-6989586621679128460"><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621679128460"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679128459"><span class="annot"><span class="annottext">Decode w a
</span><a href="#local-6989586621679128459"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; b) -&gt; Decode w a -&gt; Decode w b
forall a b (w :: Wrapped). (a -&gt; b) -&gt; Decode w a -&gt; Decode w b
</span><a href="Data.Coders.html#Map"><span class="hs-identifier hs-var">Map</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621679128460"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Decode w a
</span><a href="#local-6989586621679128459"><span class="hs-identifier hs-var">x</span></a></span></span><span>
</span><span id="line-526"></span><span>
</span><span id="line-527"></span><span id="local-6989586621679128458"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679128449"><span id="local-6989586621679128451"><span id="local-6989586621679128453"><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128458"><span class="hs-identifier hs-type">d</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-528"></span><span>  </span><span id="local-6989586621679128447"><span class="annot"><span class="annottext">pure :: a -&gt; Decode ('Closed d) a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">pure</span></span></span><span> </span><span id="local-6989586621679128446"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679128446"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; Decode ('Closed d) a
forall t (w :: Wrapped). t -&gt; Decode w t
</span><a href="Data.Coders.html#Emit"><span class="hs-identifier hs-var">Emit</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679128446"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-529"></span><span>  </span><span id="local-6989586621679128445"><span class="annot"><span class="annottext">Decode ('Closed d) (a -&gt; b)
</span><a href="#local-6989586621679128445"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679128444"><span class="annot"><span class="annottext">&lt;*&gt; :: Decode ('Closed d) (a -&gt; b)
-&gt; Decode ('Closed d) a -&gt; Decode ('Closed d) b
</span><span class="hs-operator hs-var hs-var hs-var hs-var">&lt;*&gt;</span></span></span><span> </span><span id="local-6989586621679128443"><span class="annot"><span class="annottext">Decode ('Closed d) a
</span><a href="#local-6989586621679128443"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) (a -&gt; b)
-&gt; Decode ('Closed d) a -&gt; Decode ('Closed d) b
forall (w1 :: Wrapped) a t (d :: Density).
Decode w1 (a -&gt; t) -&gt; Decode ('Closed d) a -&gt; Decode w1 t
</span><a href="Data.Coders.html#ApplyD"><span class="hs-identifier hs-var">ApplyD</span></a></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) (a -&gt; b)
</span><a href="#local-6989586621679128445"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) a
</span><a href="#local-6989586621679128443"><span class="hs-identifier hs-var">x</span></a></span></span><span>
</span><span id="line-530"></span><span>
</span><span id="line-531"></span><span class="hs-comment">-- ===========================================================================================</span><span>
</span><span id="line-532"></span><span class="hs-comment">-- A Dual pairs an Encoding and a Decoder with a roundtrip property.</span><span>
</span><span id="line-533"></span><span class="hs-comment">-- They are used with the (E and D) constructors of Encode and Decode</span><span>
</span><span id="line-534"></span><span class="hs-comment">-- If you are trying to code something not in the CBOR classes</span><span>
</span><span id="line-535"></span><span class="hs-comment">-- or you want something not traditional, make you own Dual and use E or D</span><span>
</span><span id="line-536"></span><span>
</span><span id="line-537"></span><span class="hs-comment">-- data Dual t = Dual (t -&gt; Encoding) (forall s . Decoder s t)</span><span>
</span><span id="line-538"></span><span>
</span><span id="line-539"></span><span id="local-6989586621679128442"><span class="annot"><a href="Data.Coders.html#dualList"><span class="hs-identifier hs-type">dualList</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-type">ToCBOR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128442"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-type">FromCBOR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128442"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Dual"><span class="hs-identifier hs-type">Dual</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679128442"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span></span><span>
</span><span id="line-540"></span><span id="dualList"><span class="annot"><span class="annottext">dualList :: Dual [a]
</span><a href="Data.Coders.html#dualList"><span class="hs-identifier hs-var hs-var">dualList</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([a] -&gt; Encoding) -&gt; (forall s. Decoder s [a]) -&gt; Dual [a]
forall t. (t -&gt; Encoding) -&gt; (forall s. Decoder s t) -&gt; Dual t
</span><a href="Data.Coders.html#Dual"><span class="hs-identifier hs-var">Dual</span></a></span><span> </span><span class="annot"><span class="annottext">[a] -&gt; Encoding
forall a (f :: * -&gt; *). (ToCBOR a, Foldable f) =&gt; f a -&gt; Encoding
</span><a href="Data.Coders.html#encodeFoldable"><span class="hs-identifier hs-var">encodeFoldable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Decoder s a -&gt; Decoder s [a]
forall s a. Decoder s a -&gt; Decoder s [a]
</span><a href="Data.Coders.html#decodeList"><span class="hs-identifier hs-var">decodeList</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s a
forall a s. FromCBOR a =&gt; Decoder s a
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">fromCBOR</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-541"></span><span>
</span><span id="line-542"></span><span id="local-6989586621679128441"><span class="annot"><a href="Data.Coders.html#dualSeq"><span class="hs-identifier hs-type">dualSeq</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-type">ToCBOR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128441"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-type">FromCBOR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128441"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Dual"><span class="hs-identifier hs-type">Dual</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Seq</span></span><span> </span><span class="annot"><a href="#local-6989586621679128441"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-543"></span><span id="dualSeq"><span class="annot"><span class="annottext">dualSeq :: Dual (Seq a)
</span><a href="Data.Coders.html#dualSeq"><span class="hs-identifier hs-var hs-var">dualSeq</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Seq a -&gt; Encoding)
-&gt; (forall s. Decoder s (Seq a)) -&gt; Dual (Seq a)
forall t. (t -&gt; Encoding) -&gt; (forall s. Decoder s t) -&gt; Dual t
</span><a href="Data.Coders.html#Dual"><span class="hs-identifier hs-var">Dual</span></a></span><span> </span><span class="annot"><span class="annottext">Seq a -&gt; Encoding
forall a (f :: * -&gt; *). (ToCBOR a, Foldable f) =&gt; f a -&gt; Encoding
</span><a href="Data.Coders.html#encodeFoldable"><span class="hs-identifier hs-var">encodeFoldable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Decoder s a -&gt; Decoder s (Seq a)
forall s a. Decoder s a -&gt; Decoder s (Seq a)
</span><a href="Data.Coders.html#decodeSeq"><span class="hs-identifier hs-var">decodeSeq</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s a
forall a s. FromCBOR a =&gt; Decoder s a
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">fromCBOR</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-544"></span><span>
</span><span id="line-545"></span><span id="local-6989586621679128440"><span class="annot"><a href="Data.Coders.html#dualSet"><span class="hs-identifier hs-type">dualSet</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679128440"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-type">ToCBOR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128440"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-type">FromCBOR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128440"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Dual"><span class="hs-identifier hs-type">Dual</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><a href="#local-6989586621679128440"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-546"></span><span id="dualSet"><span class="annot"><span class="annottext">dualSet :: Dual (Set a)
</span><a href="Data.Coders.html#dualSet"><span class="hs-identifier hs-var hs-var">dualSet</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Set a -&gt; Encoding)
-&gt; (forall s. Decoder s (Set a)) -&gt; Dual (Set a)
forall t. (t -&gt; Encoding) -&gt; (forall s. Decoder s t) -&gt; Dual t
</span><a href="Data.Coders.html#Dual"><span class="hs-identifier hs-var">Dual</span></a></span><span> </span><span class="annot"><span class="annottext">Set a -&gt; Encoding
forall a (f :: * -&gt; *). (ToCBOR a, Foldable f) =&gt; f a -&gt; Encoding
</span><a href="Data.Coders.html#encodeFoldable"><span class="hs-identifier hs-var">encodeFoldable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Decoder s a -&gt; Decoder s (Set a)
forall a s. Ord a =&gt; Decoder s a -&gt; Decoder s (Set a)
</span><a href="Data.Coders.html#decodeSet"><span class="hs-identifier hs-var">decodeSet</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s a
forall a s. FromCBOR a =&gt; Decoder s a
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">fromCBOR</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-547"></span><span>
</span><span id="line-548"></span><span class="hs-comment">-- | Good for encoding (Maybe t) if is another Maybe. Uses more space than dualMaybeAsNull</span><span>
</span><span id="line-549"></span><span id="local-6989586621679128439"><span class="annot"><a href="Data.Coders.html#dualMaybeAsList"><span class="hs-identifier hs-type">dualMaybeAsList</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-type">ToCBOR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128439"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-type">FromCBOR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128439"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Dual"><span class="hs-identifier hs-type">Dual</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679128439"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-550"></span><span id="dualMaybeAsList"><span class="annot"><span class="annottext">dualMaybeAsList :: Dual (Maybe a)
</span><a href="Data.Coders.html#dualMaybeAsList"><span class="hs-identifier hs-var hs-var">dualMaybeAsList</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Maybe a -&gt; Encoding)
-&gt; (forall s. Decoder s (Maybe a)) -&gt; Dual (Maybe a)
forall t. (t -&gt; Encoding) -&gt; (forall s. Decoder s t) -&gt; Dual t
</span><a href="Data.Coders.html#Dual"><span class="hs-identifier hs-var">Dual</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe a -&gt; Encoding
forall a. ToCBOR a =&gt; a -&gt; Encoding
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">toCBOR</span></a></span><span> </span><span class="annot"><span class="annottext">forall s. Decoder s (Maybe a)
forall a s. FromCBOR a =&gt; Decoder s a
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">fromCBOR</span></a></span><span>
</span><span id="line-551"></span><span>
</span><span id="line-552"></span><span class="hs-comment">-- | Good for encoding (Maybe T) as long as T isn't another Maybe</span><span>
</span><span id="line-553"></span><span id="local-6989586621679128438"><span class="annot"><a href="Data.Coders.html#dualMaybeAsNull"><span class="hs-identifier hs-type">dualMaybeAsNull</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-type">ToCBOR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128438"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-type">FromCBOR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128438"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Dual"><span class="hs-identifier hs-type">Dual</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679128438"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-554"></span><span id="dualMaybeAsNull"><span class="annot"><span class="annottext">dualMaybeAsNull :: Dual (Maybe a)
</span><a href="Data.Coders.html#dualMaybeAsNull"><span class="hs-identifier hs-var hs-var">dualMaybeAsNull</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Maybe a -&gt; Encoding)
-&gt; (forall s. Decoder s (Maybe a)) -&gt; Dual (Maybe a)
forall t. (t -&gt; Encoding) -&gt; (forall s. Decoder s t) -&gt; Dual t
</span><a href="Data.Coders.html#Dual"><span class="hs-identifier hs-var">Dual</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(a -&gt; Encoding) -&gt; Maybe a -&gt; Encoding
forall a. (a -&gt; Encoding) -&gt; Maybe a -&gt; Encoding
</span><a href="Data.Coders.html#encodeNullMaybe"><span class="hs-identifier hs-var">encodeNullMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; Encoding
forall a. ToCBOR a =&gt; a -&gt; Encoding
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">toCBOR</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Decoder s a -&gt; Decoder s (Maybe a)
forall s a. Decoder s a -&gt; Decoder s (Maybe a)
</span><a href="Data.Coders.html#decodeNullMaybe"><span class="hs-identifier hs-var">decodeNullMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s a
forall a s. FromCBOR a =&gt; Decoder s a
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">fromCBOR</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-555"></span><span>
</span><span id="line-556"></span><span id="local-6989586621679128437"><span class="annot"><a href="Data.Coders.html#dualStrictSeq"><span class="hs-identifier hs-type">dualStrictSeq</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-type">ToCBOR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128437"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-type">FromCBOR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128437"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Dual"><span class="hs-identifier hs-type">Dual</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/src"><span class="hs-identifier hs-type">StrictSeq</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128437"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-557"></span><span id="dualStrictSeq"><span class="annot"><span class="annottext">dualStrictSeq :: Dual (StrictSeq a)
</span><a href="Data.Coders.html#dualStrictSeq"><span class="hs-identifier hs-var hs-var">dualStrictSeq</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(StrictSeq a -&gt; Encoding)
-&gt; (forall s. Decoder s (StrictSeq a)) -&gt; Dual (StrictSeq a)
forall t. (t -&gt; Encoding) -&gt; (forall s. Decoder s t) -&gt; Dual t
</span><a href="Data.Coders.html#Dual"><span class="hs-identifier hs-var">Dual</span></a></span><span> </span><span class="annot"><span class="annottext">StrictSeq a -&gt; Encoding
forall a (f :: * -&gt; *). (ToCBOR a, Foldable f) =&gt; f a -&gt; Encoding
</span><a href="Data.Coders.html#encodeFoldable"><span class="hs-identifier hs-var">encodeFoldable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Decoder s a -&gt; Decoder s (StrictSeq a)
forall s a. Decoder s a -&gt; Decoder s (StrictSeq a)
</span><a href="Data.Coders.html#decodeStrictSeq"><span class="hs-identifier hs-var">decodeStrictSeq</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s a
forall a s. FromCBOR a =&gt; Decoder s a
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">fromCBOR</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-558"></span><span>
</span><span id="line-559"></span><span class="annot"><a href="Data.Coders.html#dualText"><span class="hs-identifier hs-type">dualText</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Coders.html#Dual"><span class="hs-identifier hs-type">Dual</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text.Text</span></span><span>
</span><span id="line-560"></span><span id="dualText"><span class="annot"><span class="annottext">dualText :: Dual Text
</span><a href="Data.Coders.html#dualText"><span class="hs-identifier hs-var hs-var">dualText</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Encoding) -&gt; (forall s. Decoder s Text) -&gt; Dual Text
forall t. (t -&gt; Encoding) -&gt; (forall s. Decoder s t) -&gt; Dual t
</span><a href="Data.Coders.html#Dual"><span class="hs-identifier hs-var">Dual</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Encoding
forall a. ToCBOR a =&gt; a -&gt; Encoding
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">toCBOR</span></a></span><span> </span><span class="annot"><span class="annottext">forall s. Decoder s Text
forall a s. FromCBOR a =&gt; Decoder s a
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">fromCBOR</span></a></span><span>
</span><span id="line-561"></span><span>
</span><span id="line-562"></span><span id="local-6989586621679128850"><span class="annot"><a href="Data.Coders.html#dualCBOR"><span class="hs-identifier hs-type">dualCBOR</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-type">ToCBOR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128850"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-type">FromCBOR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128850"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Dual"><span class="hs-identifier hs-type">Dual</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128850"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-563"></span><span id="dualCBOR"><span class="annot"><span class="annottext">dualCBOR :: Dual a
</span><a href="Data.Coders.html#dualCBOR"><span class="hs-identifier hs-var hs-var">dualCBOR</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; Encoding) -&gt; (forall s. Decoder s a) -&gt; Dual a
forall t. (t -&gt; Encoding) -&gt; (forall s. Decoder s t) -&gt; Dual t
</span><a href="Data.Coders.html#Dual"><span class="hs-identifier hs-var">Dual</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; Encoding
forall a. ToCBOR a =&gt; a -&gt; Encoding
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">toCBOR</span></a></span><span> </span><span class="annot"><span class="annottext">forall s. Decoder s a
forall a s. FromCBOR a =&gt; Decoder s a
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-var">fromCBOR</span></a></span><span>
</span><span id="line-564"></span><span>
</span><span id="line-565"></span><span class="hs-comment">-- Use to and from, when you want to guarantee that a type has both</span><span>
</span><span id="line-566"></span><span class="hs-comment">-- ToCBOR and FromCBR instances.</span><span>
</span><span id="line-567"></span><span>
</span><span id="line-568"></span><span id="local-6989586621679128436"><span class="annot"><a href="Data.Coders.html#to"><span class="hs-identifier hs-type">to</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-type">ToCBOR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128436"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-type">FromCBOR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128436"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679128436"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Encode"><span class="hs-identifier hs-type">Encode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Dense"><span class="hs-identifier hs-type">Dense</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679128436"><span class="hs-identifier hs-type">t</span></a></span></span><span>
</span><span id="line-569"></span><span id="to"><span class="annot"><span class="annottext">to :: t -&gt; Encode ('Closed 'Dense) t
</span><a href="Data.Coders.html#to"><span class="hs-identifier hs-var hs-var">to</span></a></span></span><span> </span><span id="local-6989586621679128435"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679128435"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Dual t -&gt; t -&gt; Encode ('Closed 'Dense) t
forall t. Dual t -&gt; t -&gt; Encode ('Closed 'Dense) t
</span><a href="Data.Coders.html#ED"><span class="hs-identifier hs-var">ED</span></a></span><span> </span><span class="annot"><span class="annottext">Dual t
forall a. (ToCBOR a, FromCBOR a) =&gt; Dual a
</span><a href="Data.Coders.html#dualCBOR"><span class="hs-identifier hs-var">dualCBOR</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679128435"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-570"></span><span>
</span><span id="line-571"></span><span id="local-6989586621679128434"><span class="annot"><a href="Data.Coders.html#from"><span class="hs-identifier hs-type">from</span></a></span><span> </span><span class="hs-glyph">::</span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-type">ToCBOR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128434"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/cardano-binary-1.5.0/noopt/doc/html/cardano-binary/src"><span class="hs-identifier hs-type">FromCBOR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679128434"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Dense"><span class="hs-identifier hs-type">Dense</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679128434"><span class="hs-identifier hs-type">t</span></a></span></span><span>
</span><span id="line-572"></span><span id="from"><span class="annot"><span class="annottext">from :: Decode ('Closed 'Dense) t
</span><a href="Data.Coders.html#from"><span class="hs-identifier hs-var hs-var">from</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Dual t -&gt; Decode ('Closed 'Dense) t
forall t. Dual t -&gt; Decode ('Closed 'Dense) t
</span><a href="Data.Coders.html#DD"><span class="hs-identifier hs-var">DD</span></a></span><span> </span><span class="annot"><span class="annottext">Dual t
forall a. (ToCBOR a, FromCBOR a) =&gt; Dual a
</span><a href="Data.Coders.html#dualCBOR"><span class="hs-identifier hs-var">dualCBOR</span></a></span><span>
</span><span id="line-573"></span><span>
</span><span id="line-574"></span><span class="hs-comment">-- ==================================================================</span><span>
</span><span id="line-575"></span><span class="hs-comment">-- A Guide to Visual inspection of Duality in Encode and Decode</span><span>
</span><span id="line-576"></span><span class="hs-comment">--</span><span>
</span><span id="line-577"></span><span class="hs-comment">-- 1) (Sum c)     and (SumD c)    are duals</span><span>
</span><span id="line-578"></span><span class="hs-comment">-- 2) (Rec c)     and (RecD c)    are duals</span><span>
</span><span id="line-579"></span><span class="hs-comment">-- 3) (Keyed c)   and (KeyedD c)  are duals</span><span>
</span><span id="line-580"></span><span class="hs-comment">-- 4) (OmitC x)   and (Emit x)    are duals</span><span>
</span><span id="line-581"></span><span class="hs-comment">-- 5) (Omit p ..) and (Emit x)    are duals if (p x) is True</span><span>
</span><span id="line-582"></span><span class="hs-comment">-- 6) (To x)      and (From)      are duals if (x::T) and (forall (y::T). isRight (roundTrip y))</span><span>
</span><span id="line-583"></span><span class="hs-comment">-- 7) (E enc x)   and (D dec)     are duals if (forall x . isRight (roundTrip' enc dec x))</span><span>
</span><span id="line-584"></span><span class="hs-comment">-- 6) (ED d x)    and (DD f)      are duals as long as d=(Dual enc dec) and (forall x . isRight (roundTrip' enc dec x))</span><span>
</span><span id="line-585"></span><span class="hs-comment">-- 7) f !&gt; x      and g &lt;! y      are duals if (f and g are duals) and (x and y are duals)</span><span>
</span><span id="line-586"></span><span class="hs-comment">--</span><span>
</span><span id="line-587"></span><span class="hs-comment">-- The duality of (Summands name decodeT) depends on the duality of the range of decodeT with the endoder of T</span><span>
</span><span id="line-588"></span><span class="hs-comment">-- A some property also holds for (SparseKeyed name (init::T) pick required) depending on the keys of pick and the Sparse encoder of T</span><span>
</span><span id="line-589"></span></pre></body></html>