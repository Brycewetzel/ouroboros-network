<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE BangPatterns          #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE CPP                   #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE DuplicateRecordFields #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts      #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE NamedFieldPuns        #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilies          #-}</span><span>
</span><span id="line-7"></span><span>
</span><span id="line-8"></span><span class="hs-comment">-- to preserve 'HasCallstack' constraint on 'checkInvariant'</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# OPTIONS_GHC -Wno-redundant-constraints #-}</span><span>
</span><span id="line-10"></span><span>
</span><span id="line-11"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Control.Monad.Class.MonadSTM.Strict</span><span>
</span><span id="line-12"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="hs-keyword">module</span><span> </span><span class="annot"><span class="hs-identifier">X</span></span><span>
</span><span id="line-13"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#LazyTVar"><span class="hs-identifier">LazyTVar</span></a></span><span>
</span><span id="line-14"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#LazyTMVar"><span class="hs-identifier">LazyTMVar</span></a></span><span>
</span><span id="line-15"></span><span>    </span><span class="annot"><span class="hs-comment">-- * 'StrictTVar'</span></span><span>
</span><span id="line-16"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTVar"><span class="hs-identifier">StrictTVar</span></a></span><span>
</span><span id="line-17"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#labelTVar"><span class="hs-identifier">labelTVar</span></a></span><span>
</span><span id="line-18"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#labelTVarIO"><span class="hs-identifier">labelTVarIO</span></a></span><span>
</span><span id="line-19"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#castStrictTVar"><span class="hs-identifier">castStrictTVar</span></a></span><span>
</span><span id="line-20"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#toLazyTVar"><span class="hs-identifier">toLazyTVar</span></a></span><span>
</span><span id="line-21"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#newTVar"><span class="hs-identifier">newTVar</span></a></span><span>
</span><span id="line-22"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#newTVarIO"><span class="hs-identifier">newTVarIO</span></a></span><span>
</span><span id="line-23"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#newTVarWithInvariantIO"><span class="hs-identifier">newTVarWithInvariantIO</span></a></span><span>
</span><span id="line-24"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#readTVar"><span class="hs-identifier">readTVar</span></a></span><span>
</span><span id="line-25"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#readTVarIO"><span class="hs-identifier">readTVarIO</span></a></span><span>
</span><span id="line-26"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#writeTVar"><span class="hs-identifier">writeTVar</span></a></span><span>
</span><span id="line-27"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#modifyTVar"><span class="hs-identifier">modifyTVar</span></a></span><span>
</span><span id="line-28"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#stateTVar"><span class="hs-identifier">stateTVar</span></a></span><span>
</span><span id="line-29"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#swapTVar"><span class="hs-identifier">swapTVar</span></a></span><span>
</span><span id="line-30"></span><span>    </span><span class="annot"><span class="hs-comment">-- * 'StrictTMVar'</span></span><span>
</span><span id="line-31"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier">StrictTMVar</span></a></span><span>
</span><span id="line-32"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#labelTMVar"><span class="hs-identifier">labelTMVar</span></a></span><span>
</span><span id="line-33"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#labelTMVarIO"><span class="hs-identifier">labelTMVarIO</span></a></span><span>
</span><span id="line-34"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#castStrictTMVar"><span class="hs-identifier">castStrictTMVar</span></a></span><span>
</span><span id="line-35"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#newTMVar"><span class="hs-identifier">newTMVar</span></a></span><span>
</span><span id="line-36"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#newTMVarIO"><span class="hs-identifier">newTMVarIO</span></a></span><span>
</span><span id="line-37"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#newEmptyTMVar"><span class="hs-identifier">newEmptyTMVar</span></a></span><span>
</span><span id="line-38"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#newEmptyTMVarIO"><span class="hs-identifier">newEmptyTMVarIO</span></a></span><span>
</span><span id="line-39"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#takeTMVar"><span class="hs-identifier">takeTMVar</span></a></span><span>
</span><span id="line-40"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#tryTakeTMVar"><span class="hs-identifier">tryTakeTMVar</span></a></span><span>
</span><span id="line-41"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#putTMVar"><span class="hs-identifier">putTMVar</span></a></span><span>
</span><span id="line-42"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#tryPutTMVar"><span class="hs-identifier">tryPutTMVar</span></a></span><span>
</span><span id="line-43"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#readTMVar"><span class="hs-identifier">readTMVar</span></a></span><span>
</span><span id="line-44"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#tryReadTMVar"><span class="hs-identifier">tryReadTMVar</span></a></span><span>
</span><span id="line-45"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#swapTMVar"><span class="hs-identifier">swapTMVar</span></a></span><span>
</span><span id="line-46"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#isEmptyTMVar"><span class="hs-identifier">isEmptyTMVar</span></a></span><span>
</span><span id="line-47"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Low-level API</span></span><span>
</span><span id="line-48"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#checkInvariant"><span class="hs-identifier">checkInvariant</span></a></span><span>
</span><span id="line-49"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Deprecated API</span></span><span>
</span><span id="line-50"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#updateTVar"><span class="hs-identifier">updateTVar</span></a></span><span>
</span><span id="line-51"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#newTVarM"><span class="hs-identifier">newTVarM</span></a></span><span>
</span><span id="line-52"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#newTVarWithInvariantM"><span class="hs-identifier">newTVarWithInvariantM</span></a></span><span>
</span><span id="line-53"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#newTMVarM"><span class="hs-identifier">newTMVarM</span></a></span><span>
</span><span id="line-54"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#newEmptyTMVarM"><span class="hs-identifier">newEmptyTMVarM</span></a></span><span>
</span><span id="line-55"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-56"></span><span>
</span><span id="line-57"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html"><span class="hs-identifier">Control.Monad.Class.MonadSTM</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">X</span></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#LazyTMVar"><span class="hs-identifier">LazyTMVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#LazyTVar"><span class="hs-identifier">LazyTVar</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-58"></span><span>                     </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#TMVar"><span class="hs-identifier">TMVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#TVar"><span class="hs-identifier">TVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#isEmptyTMVar"><span class="hs-identifier">isEmptyTMVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#labelTVar"><span class="hs-identifier">labelTVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#labelTVarIO"><span class="hs-identifier">labelTVarIO</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-59"></span><span>                     </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#labelTMVar"><span class="hs-identifier">labelTMVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#labelTMVarIO"><span class="hs-identifier">labelTMVarIO</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#modifyTVar"><span class="hs-identifier">modifyTVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#newEmptyTMVar"><span class="hs-identifier">newEmptyTMVar</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-60"></span><span>                     </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#newEmptyTMVarIO"><span class="hs-identifier">newEmptyTMVarIO</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#newEmptyTMVarM"><span class="hs-identifier">newEmptyTMVarM</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#newTMVar"><span class="hs-identifier">newTMVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#newTMVarIO"><span class="hs-identifier">newTMVarIO</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-61"></span><span>                     </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#newTMVarM"><span class="hs-identifier">newTMVarM</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#newTVar"><span class="hs-identifier">newTVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#newTVarIO"><span class="hs-identifier">newTVarIO</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#newTVarM"><span class="hs-identifier">newTVarM</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#putTMVar"><span class="hs-identifier">putTMVar</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-62"></span><span>                     </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#readTMVar"><span class="hs-identifier">readTMVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#readTVarIO"><span class="hs-identifier">readTVarIO</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#readTVar"><span class="hs-identifier">readTVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#stateTVar"><span class="hs-identifier">stateTVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#swapTVar"><span class="hs-identifier">swapTVar</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-63"></span><span>                     </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#swapTMVar"><span class="hs-identifier">swapTMVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#takeTMVar"><span class="hs-identifier">takeTMVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#tryPutTMVar"><span class="hs-identifier">tryPutTMVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#tryReadTMVar"><span class="hs-identifier">tryReadTMVar</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-64"></span><span>                     </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#tryTakeTMVar"><span class="hs-identifier">tryTakeTMVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#writeTVar"><span class="hs-identifier">writeTVar</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-65"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html"><span class="hs-identifier">Control.Monad.Class.MonadSTM</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Lazy</span></span><span>
</span><span id="line-66"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">GHC.Stack</span></span><span>
</span><span id="line-67"></span><span>
</span><span id="line-68"></span><span class="hs-comment">{-------------------------------------------------------------------------------
  Lazy TVar
-------------------------------------------------------------------------------}</span><span>
</span><span id="line-71"></span><span>
</span><span id="line-72"></span><span class="hs-keyword">type</span><span> </span><span id="LazyTVar"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#LazyTVar"><span class="hs-identifier hs-var">LazyTVar</span></a></span></span><span>  </span><span id="local-6989586621679086951"><span class="annot"><a href="#local-6989586621679086951"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#TVar"><span class="hs-identifier hs-type">Lazy.TVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086951"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-73"></span><span class="hs-keyword">type</span><span> </span><span id="LazyTMVar"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#LazyTMVar"><span class="hs-identifier hs-var">LazyTMVar</span></a></span></span><span> </span><span id="local-6989586621679086950"><span class="annot"><a href="#local-6989586621679086950"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#TMVar"><span class="hs-identifier hs-type">Lazy.TMVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086950"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-74"></span><span>
</span><span id="line-75"></span><span class="hs-comment">{-------------------------------------------------------------------------------
  Strict TVar
-------------------------------------------------------------------------------}</span><span>
</span><span id="line-78"></span><span>
</span><span id="line-79"></span><span class="hs-keyword">data</span><span> </span><span id="StrictTVar"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTVar"><span class="hs-identifier hs-var">StrictTVar</span></a></span></span><span> </span><span id="local-6989586621679087156"><span class="annot"><a href="#local-6989586621679087156"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621679087155"><span class="annot"><a href="#local-6989586621679087155"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="StrictTVar"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTVar"><span class="hs-identifier hs-var">StrictTVar</span></a></span></span><span>
</span><span id="line-80"></span><span>   </span><span class="hs-special">{</span><span> </span><span id="%24sel%3Ainvariant%3AStrictTVar"><span class="annot"><span class="annottext">StrictTVar m a -&gt; a -&gt; Maybe String
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#%24sel%3Ainvariant%3AStrictTVar"><span class="hs-identifier hs-var hs-var">invariant</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679087155"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">)</span><span>
</span><span id="line-81"></span><span>     </span><span class="hs-comment">-- ^ Invariant checked whenever updating the 'StrictTVar'.</span><span>
</span><span id="line-82"></span><span>   </span><span class="hs-special">,</span><span> </span><span id="%24sel%3Atvar%3AStrictTVar"><span class="annot"><span class="annottext">StrictTVar m a -&gt; LazyTVar m a
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#%24sel%3Atvar%3AStrictTVar"><span class="hs-identifier hs-var hs-var">tvar</span></a></span></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#LazyTVar"><span class="hs-identifier hs-type">LazyTVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679087156"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679087155"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-83"></span><span>   </span><span class="hs-special">}</span><span>
</span><span id="line-84"></span><span>
</span><span id="line-85"></span><span id="local-6989586621679087139"><span id="local-6989586621679087141"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#labelTVar"><span class="hs-identifier hs-type">labelTVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#MonadLabelledSTM"><span class="hs-identifier hs-type">MonadLabelledSTM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679087141"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTVar"><span class="hs-identifier hs-type">StrictTVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679087141"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679087139"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#STM"><span class="hs-identifier hs-type">STM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679087141"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-86"></span><span id="labelTVar"><span class="annot"><span class="annottext">labelTVar :: StrictTVar m a -&gt; String -&gt; STM m ()
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#labelTVar"><span class="hs-identifier hs-var hs-var">labelTVar</span></a></span></span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTVar"><span class="hs-identifier hs-type">StrictTVar</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621679086946"><span class="annot"><span class="annottext">LazyTVar m a
tvar :: LazyTVar m a
$sel:tvar:StrictTVar :: forall (m :: * -&gt; *) a. StrictTVar m a -&gt; LazyTVar m a
</span><a href="#local-6989586621679086946"><span class="hs-identifier hs-var hs-var">tvar</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LazyTVar m a -&gt; String -&gt; STM m ()
forall (stm :: * -&gt; *) a.
MonadLabelledSTMTx stm =&gt;
TVar_ stm a -&gt; String -&gt; stm ()
</span><a href="Control.Monad.Class.MonadSTM.html#labelTVar"><span class="hs-identifier hs-var">Lazy.labelTVar</span></a></span><span> </span><span class="annot"><span class="annottext">LazyTVar m a
</span><a href="#local-6989586621679086946"><span class="hs-identifier hs-var">tvar</span></a></span><span>
</span><span id="line-87"></span><span>
</span><span id="line-88"></span><span id="local-6989586621679086944"><span id="local-6989586621679086945"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#labelTVarIO"><span class="hs-identifier hs-type">labelTVarIO</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#MonadLabelledSTM"><span class="hs-identifier hs-type">MonadLabelledSTM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086945"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTVar"><span class="hs-identifier hs-type">StrictTVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086945"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086944"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679086945"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-89"></span><span id="labelTVarIO"><span class="annot"><span class="annottext">labelTVarIO :: StrictTVar m a -&gt; String -&gt; m ()
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#labelTVarIO"><span class="hs-identifier hs-var hs-var">labelTVarIO</span></a></span></span><span> </span><span id="local-6989586621679086943"><span class="annot"><span class="annottext">StrictTVar m a
</span><a href="#local-6989586621679086943"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">STM m () -&gt; m ()
forall (m :: * -&gt; *) a.
(MonadSTM m, HasCallStack) =&gt;
STM m a -&gt; m a
</span><a href="Control.Monad.Class.MonadSTM.html#atomically"><span class="hs-identifier hs-var">atomically</span></a></span><span> </span><span class="annot"><span class="annottext">(STM m () -&gt; m ()) -&gt; (String -&gt; STM m ()) -&gt; String -&gt; m ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">StrictTVar m a -&gt; String -&gt; STM m ()
forall (m :: * -&gt; *) a.
MonadLabelledSTM m =&gt;
StrictTVar m a -&gt; String -&gt; STM m ()
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#labelTVar"><span class="hs-identifier hs-var">labelTVar</span></a></span><span> </span><span class="annot"><span class="annottext">StrictTVar m a
</span><a href="#local-6989586621679086943"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-90"></span><span>
</span><span id="line-91"></span><span id="local-6989586621679086938"><span id="local-6989586621679086939"><span id="local-6989586621679086940"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#castStrictTVar"><span class="hs-identifier hs-type">castStrictTVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#LazyTVar"><span class="hs-identifier hs-type">LazyTVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086940"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><span class="hs-glyph hs-type">~</span></span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#LazyTVar"><span class="hs-identifier hs-type">LazyTVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086939"><span class="hs-identifier hs-type">n</span></a></span><span>
</span><span id="line-92"></span><span>               </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTVar"><span class="hs-identifier hs-type">StrictTVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086940"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086938"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTVar"><span class="hs-identifier hs-type">StrictTVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086939"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086938"><span class="hs-identifier hs-type">a</span></a></span></span></span></span><span>
</span><span id="line-93"></span><span id="castStrictTVar"><span class="annot"><span class="annottext">castStrictTVar :: StrictTVar m a -&gt; StrictTVar n a
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#castStrictTVar"><span class="hs-identifier hs-var hs-var">castStrictTVar</span></a></span></span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTVar"><span class="hs-identifier hs-type">StrictTVar</span></a></span><span class="hs-special">{</span><span id="local-6989586621679086937"><span class="annot"><span class="annottext">a -&gt; Maybe String
invariant :: a -&gt; Maybe String
$sel:invariant:StrictTVar :: forall (m :: * -&gt; *) a. StrictTVar m a -&gt; a -&gt; Maybe String
</span><a href="#local-6989586621679086937"><span class="hs-identifier hs-var hs-var">invariant</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679086936"><span class="annot"><span class="annottext">LazyTVar m a
tvar :: LazyTVar m a
$sel:tvar:StrictTVar :: forall (m :: * -&gt; *) a. StrictTVar m a -&gt; LazyTVar m a
</span><a href="#local-6989586621679086936"><span class="hs-identifier hs-var hs-var">tvar</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StrictTVar :: forall (m :: * -&gt; *) a.
(a -&gt; Maybe String) -&gt; LazyTVar m a -&gt; StrictTVar m a
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTVar"><span class="hs-identifier hs-type">StrictTVar</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">a -&gt; Maybe String
invariant :: a -&gt; Maybe String
$sel:invariant:StrictTVar :: a -&gt; Maybe String
</span><a href="#local-6989586621679086937"><span class="hs-identifier hs-var hs-var">invariant</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LazyTVar m a
TVar_ (STM n) a
tvar :: LazyTVar m a
$sel:tvar:StrictTVar :: TVar_ (STM n) a
</span><a href="#local-6989586621679086936"><span class="hs-identifier hs-var hs-var">tvar</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-94"></span><span>
</span><span id="line-95"></span><span class="hs-comment">-- | Get the underlying @TVar@</span><span>
</span><span id="line-96"></span><span class="hs-comment">--</span><span>
</span><span id="line-97"></span><span class="hs-comment">-- Since we obviously cannot guarantee that updates to this 'LazyTVar' will be</span><span>
</span><span id="line-98"></span><span class="hs-comment">-- strict, this should be used with caution.</span><span>
</span><span id="line-99"></span><span id="local-6989586621679086934"><span id="local-6989586621679086935"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#toLazyTVar"><span class="hs-identifier hs-type">toLazyTVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTVar"><span class="hs-identifier hs-type">StrictTVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086935"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086934"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#LazyTVar"><span class="hs-identifier hs-type">LazyTVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086935"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086934"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-100"></span><span id="toLazyTVar"><span class="annot"><span class="annottext">toLazyTVar :: StrictTVar m a -&gt; LazyTVar m a
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#toLazyTVar"><span class="hs-identifier hs-var hs-var">toLazyTVar</span></a></span></span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTVar"><span class="hs-identifier hs-type">StrictTVar</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621679086933"><span class="annot"><span class="annottext">LazyTVar m a
tvar :: LazyTVar m a
$sel:tvar:StrictTVar :: forall (m :: * -&gt; *) a. StrictTVar m a -&gt; LazyTVar m a
</span><a href="#local-6989586621679086933"><span class="hs-identifier hs-var hs-var">tvar</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LazyTVar m a
</span><a href="#local-6989586621679086933"><span class="hs-identifier hs-var">tvar</span></a></span><span>
</span><span id="line-101"></span><span>
</span><span id="line-102"></span><span id="local-6989586621679086931"><span id="local-6989586621679086932"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#newTVar"><span class="hs-identifier hs-type">newTVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#MonadSTM"><span class="hs-identifier hs-type">MonadSTM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086932"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679086931"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#STM"><span class="hs-identifier hs-type">STM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086932"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTVar"><span class="hs-identifier hs-type">StrictTVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086932"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086931"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-103"></span><span id="newTVar"><span class="annot"><span class="annottext">newTVar :: a -&gt; STM m (StrictTVar m a)
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#newTVar"><span class="hs-identifier hs-var hs-var">newTVar</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679086930"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679086930"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; Maybe String) -&gt; TVar_ (STM m) a -&gt; StrictTVar m a
forall (m :: * -&gt; *) a.
(a -&gt; Maybe String) -&gt; LazyTVar m a -&gt; StrictTVar m a
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTVar"><span class="hs-identifier hs-var">StrictTVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe String -&gt; a -&gt; Maybe String
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">Maybe String
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(TVar_ (STM m) a -&gt; StrictTVar m a)
-&gt; STM m (TVar_ (STM m) a) -&gt; STM m (StrictTVar m a)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; STM m (TVar_ (STM m) a)
forall (stm :: * -&gt; *) a. MonadSTMTx stm =&gt; a -&gt; stm (TVar_ stm a)
</span><a href="Control.Monad.Class.MonadSTM.html#newTVar"><span class="hs-identifier hs-var">Lazy.newTVar</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679086930"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-104"></span><span>
</span><span id="line-105"></span><span id="local-6989586621679087115"><span id="local-6989586621679087116"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#newTVarIO"><span class="hs-identifier hs-type">newTVarIO</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#MonadSTM"><span class="hs-identifier hs-type">MonadSTM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679087116"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679087115"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679087116"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTVar"><span class="hs-identifier hs-type">StrictTVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679087116"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679087115"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-106"></span><span id="newTVarIO"><span class="annot"><span class="annottext">newTVarIO :: a -&gt; m (StrictTVar m a)
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#newTVarIO"><span class="hs-identifier hs-var hs-var">newTVarIO</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; Maybe String) -&gt; a -&gt; m (StrictTVar m a)
forall (m :: * -&gt; *) a.
(MonadSTM m, HasCallStack) =&gt;
(a -&gt; Maybe String) -&gt; a -&gt; m (StrictTVar m a)
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#newTVarWithInvariantIO"><span class="hs-identifier hs-var">newTVarWithInvariantIO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe String -&gt; a -&gt; Maybe String
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">Maybe String
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span>
</span><span id="line-107"></span><span>
</span><span id="line-108"></span><span id="local-6989586621679086926"><span id="local-6989586621679086927"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#newTVarM"><span class="hs-identifier hs-type">newTVarM</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#MonadSTM"><span class="hs-identifier hs-type">MonadSTM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086927"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679086926"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679086927"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTVar"><span class="hs-identifier hs-type">StrictTVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086927"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086926"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-109"></span><span id="newTVarM"><span class="annot"><span class="annottext">newTVarM :: a -&gt; m (StrictTVar m a)
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#newTVarM"><span class="hs-identifier hs-var hs-var">newTVarM</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; m (StrictTVar m a)
forall (m :: * -&gt; *) a. MonadSTM m =&gt; a -&gt; m (StrictTVar m a)
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#newTVarIO"><span class="hs-identifier hs-var">newTVarIO</span></a></span><span>
</span><span id="line-110"></span><span class="hs-pragma">{-# DEPRECATED</span><span> </span><span class="hs-pragma">newTVarM</span><span> </span><span class="hs-pragma">&quot;Use newTVarIO&quot;</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-111"></span><span>
</span><span id="line-112"></span><span id="local-6989586621679087119"><span id="local-6989586621679087120"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#newTVarWithInvariantIO"><span class="hs-identifier hs-type">newTVarWithInvariantIO</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#MonadSTM"><span class="hs-identifier hs-type">MonadSTM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679087120"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">)</span><span>
</span><span id="line-113"></span><span>                       </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679087119"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- ^ Invariant (expect 'Nothing')</span><span>
</span><span id="line-114"></span><span>                       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679087119"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-115"></span><span>                       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679087120"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTVar"><span class="hs-identifier hs-type">StrictTVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679087120"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679087119"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-116"></span><span id="newTVarWithInvariantIO"><span class="annot"><span class="annottext">newTVarWithInvariantIO :: (a -&gt; Maybe String) -&gt; a -&gt; m (StrictTVar m a)
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#newTVarWithInvariantIO"><span class="hs-identifier hs-var hs-var">newTVarWithInvariantIO</span></a></span></span><span> </span><span id="local-6989586621679086925"><span class="annot"><span class="annottext">a -&gt; Maybe String
</span><a href="#local-6989586621679086925"><span class="hs-identifier hs-var">invariant</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679086924"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679086924"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-117"></span><span>    </span><span class="annot"><span class="annottext">Maybe String -&gt; m (StrictTVar m a) -&gt; m (StrictTVar m a)
forall a. HasCallStack =&gt; Maybe String -&gt; a -&gt; a
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#checkInvariant"><span class="hs-identifier hs-var">checkInvariant</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; Maybe String
</span><a href="#local-6989586621679086925"><span class="hs-identifier hs-var">invariant</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679086924"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(m (StrictTVar m a) -&gt; m (StrictTVar m a))
-&gt; m (StrictTVar m a) -&gt; m (StrictTVar m a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-118"></span><span>    </span><span class="annot"><span class="annottext">(a -&gt; Maybe String) -&gt; TVar_ (STM m) a -&gt; StrictTVar m a
forall (m :: * -&gt; *) a.
(a -&gt; Maybe String) -&gt; LazyTVar m a -&gt; StrictTVar m a
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTVar"><span class="hs-identifier hs-var">StrictTVar</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; Maybe String
</span><a href="#local-6989586621679086925"><span class="hs-identifier hs-var">invariant</span></a></span><span> </span><span class="annot"><span class="annottext">(TVar_ (STM m) a -&gt; StrictTVar m a)
-&gt; m (TVar_ (STM m) a) -&gt; m (StrictTVar m a)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; m (TVar_ (STM m) a)
forall (m :: * -&gt; *) a. MonadSTM m =&gt; a -&gt; m (TVar m a)
</span><a href="Control.Monad.Class.MonadSTM.html#newTVarIO"><span class="hs-identifier hs-var">Lazy.newTVarIO</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679086924"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-119"></span><span>
</span><span id="line-120"></span><span id="local-6989586621679086922"><span id="local-6989586621679086923"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#newTVarWithInvariantM"><span class="hs-identifier hs-type">newTVarWithInvariantM</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#MonadSTM"><span class="hs-identifier hs-type">MonadSTM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086923"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">)</span><span>
</span><span id="line-121"></span><span>                      </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679086922"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- ^ Invariant (expect 'Nothing')</span><span>
</span><span id="line-122"></span><span>                      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679086922"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-123"></span><span>                      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679086923"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTVar"><span class="hs-identifier hs-type">StrictTVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086923"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086922"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-124"></span><span id="newTVarWithInvariantM"><span class="annot"><span class="annottext">newTVarWithInvariantM :: (a -&gt; Maybe String) -&gt; a -&gt; m (StrictTVar m a)
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#newTVarWithInvariantM"><span class="hs-identifier hs-var hs-var">newTVarWithInvariantM</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; Maybe String) -&gt; a -&gt; m (StrictTVar m a)
forall (m :: * -&gt; *) a.
(MonadSTM m, HasCallStack) =&gt;
(a -&gt; Maybe String) -&gt; a -&gt; m (StrictTVar m a)
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#newTVarWithInvariantIO"><span class="hs-identifier hs-var">newTVarWithInvariantIO</span></a></span><span>
</span><span id="line-125"></span><span class="hs-pragma">{-# DEPRECATED</span><span> </span><span class="hs-pragma">newTVarWithInvariantM</span><span> </span><span class="hs-pragma">&quot;Use newTVarWithInvariantIO&quot;</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-126"></span><span>
</span><span id="line-127"></span><span id="local-6989586621679087092"><span id="local-6989586621679087093"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#readTVar"><span class="hs-identifier hs-type">readTVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#MonadSTM"><span class="hs-identifier hs-type">MonadSTM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679087093"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTVar"><span class="hs-identifier hs-type">StrictTVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679087093"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679087092"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#STM"><span class="hs-identifier hs-type">STM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679087093"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679087092"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-128"></span><span id="readTVar"><span class="annot"><span class="annottext">readTVar :: StrictTVar m a -&gt; STM m a
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#readTVar"><span class="hs-identifier hs-var hs-var">readTVar</span></a></span></span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTVar"><span class="hs-identifier hs-type">StrictTVar</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621679086921"><span class="annot"><span class="annottext">LazyTVar m a
tvar :: LazyTVar m a
$sel:tvar:StrictTVar :: forall (m :: * -&gt; *) a. StrictTVar m a -&gt; LazyTVar m a
</span><a href="#local-6989586621679086921"><span class="hs-identifier hs-var hs-var">tvar</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LazyTVar m a -&gt; STM m a
forall (stm :: * -&gt; *) a. MonadSTMTx stm =&gt; TVar_ stm a -&gt; stm a
</span><a href="Control.Monad.Class.MonadSTM.html#readTVar"><span class="hs-identifier hs-var">Lazy.readTVar</span></a></span><span> </span><span class="annot"><span class="annottext">LazyTVar m a
</span><a href="#local-6989586621679086921"><span class="hs-identifier hs-var">tvar</span></a></span><span>
</span><span id="line-129"></span><span>
</span><span id="line-130"></span><span id="local-6989586621679086919"><span id="local-6989586621679086920"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#readTVarIO"><span class="hs-identifier hs-type">readTVarIO</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#MonadSTM"><span class="hs-identifier hs-type">MonadSTM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086920"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTVar"><span class="hs-identifier hs-type">StrictTVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086920"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086919"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679086920"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086919"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-131"></span><span id="readTVarIO"><span class="annot"><span class="annottext">readTVarIO :: StrictTVar m a -&gt; m a
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#readTVarIO"><span class="hs-identifier hs-var hs-var">readTVarIO</span></a></span></span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTVar"><span class="hs-identifier hs-type">StrictTVar</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621679086918"><span class="annot"><span class="annottext">LazyTVar m a
tvar :: LazyTVar m a
$sel:tvar:StrictTVar :: forall (m :: * -&gt; *) a. StrictTVar m a -&gt; LazyTVar m a
</span><a href="#local-6989586621679086918"><span class="hs-identifier hs-var hs-var">tvar</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LazyTVar m a -&gt; m a
forall (m :: * -&gt; *) a. MonadSTM m =&gt; TVar m a -&gt; m a
</span><a href="Control.Monad.Class.MonadSTM.html#readTVarIO"><span class="hs-identifier hs-var">Lazy.readTVarIO</span></a></span><span> </span><span class="annot"><span class="annottext">LazyTVar m a
</span><a href="#local-6989586621679086918"><span class="hs-identifier hs-var">tvar</span></a></span><span>
</span><span id="line-132"></span><span>
</span><span id="line-133"></span><span id="local-6989586621679087087"><span id="local-6989586621679087088"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#writeTVar"><span class="hs-identifier hs-type">writeTVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#MonadSTM"><span class="hs-identifier hs-type">MonadSTM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679087088"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTVar"><span class="hs-identifier hs-type">StrictTVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679087088"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679087087"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679087087"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#STM"><span class="hs-identifier hs-type">STM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679087088"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-134"></span><span id="writeTVar"><span class="annot"><span class="annottext">writeTVar :: StrictTVar m a -&gt; a -&gt; STM m ()
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#writeTVar"><span class="hs-identifier hs-var hs-var">writeTVar</span></a></span></span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTVar"><span class="hs-identifier hs-type">StrictTVar</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621679086917"><span class="annot"><span class="annottext">LazyTVar m a
tvar :: LazyTVar m a
$sel:tvar:StrictTVar :: forall (m :: * -&gt; *) a. StrictTVar m a -&gt; LazyTVar m a
</span><a href="#local-6989586621679086917"><span class="hs-identifier hs-var hs-var">tvar</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679086916"><span class="annot"><span class="annottext">a -&gt; Maybe String
invariant :: a -&gt; Maybe String
$sel:invariant:StrictTVar :: forall (m :: * -&gt; *) a. StrictTVar m a -&gt; a -&gt; Maybe String
</span><a href="#local-6989586621679086916"><span class="hs-identifier hs-var hs-var">invariant</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679086915"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679086915"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-135"></span><span>    </span><span class="annot"><span class="annottext">Maybe String -&gt; STM m () -&gt; STM m ()
forall a. HasCallStack =&gt; Maybe String -&gt; a -&gt; a
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#checkInvariant"><span class="hs-identifier hs-var">checkInvariant</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; Maybe String
</span><a href="#local-6989586621679086916"><span class="hs-identifier hs-var">invariant</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679086915"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(STM m () -&gt; STM m ()) -&gt; STM m () -&gt; STM m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-136"></span><span>    </span><span class="annot"><span class="annottext">LazyTVar m a -&gt; a -&gt; STM m ()
forall (stm :: * -&gt; *) a.
MonadSTMTx stm =&gt;
TVar_ stm a -&gt; a -&gt; stm ()
</span><a href="Control.Monad.Class.MonadSTM.html#writeTVar"><span class="hs-identifier hs-var">Lazy.writeTVar</span></a></span><span> </span><span class="annot"><span class="annottext">LazyTVar m a
</span><a href="#local-6989586621679086917"><span class="hs-identifier hs-var">tvar</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679086915"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-137"></span><span>
</span><span id="line-138"></span><span id="local-6989586621679086913"><span id="local-6989586621679086914"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#modifyTVar"><span class="hs-identifier hs-type">modifyTVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#MonadSTM"><span class="hs-identifier hs-type">MonadSTM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086914"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTVar"><span class="hs-identifier hs-type">StrictTVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086914"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086913"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679086913"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679086913"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#STM"><span class="hs-identifier hs-type">STM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086914"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-139"></span><span id="modifyTVar"><span class="annot"><span class="annottext">modifyTVar :: StrictTVar m a -&gt; (a -&gt; a) -&gt; STM m ()
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#modifyTVar"><span class="hs-identifier hs-var hs-var">modifyTVar</span></a></span></span><span> </span><span id="local-6989586621679086912"><span class="annot"><span class="annottext">StrictTVar m a
</span><a href="#local-6989586621679086912"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621679086911"><span class="annot"><span class="annottext">a -&gt; a
</span><a href="#local-6989586621679086911"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StrictTVar m a -&gt; STM m a
forall (m :: * -&gt; *) a. MonadSTM m =&gt; StrictTVar m a -&gt; STM m a
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#readTVar"><span class="hs-identifier hs-var">readTVar</span></a></span><span> </span><span class="annot"><span class="annottext">StrictTVar m a
</span><a href="#local-6989586621679086912"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">STM m a -&gt; (a -&gt; STM m ()) -&gt; STM m ()
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">StrictTVar m a -&gt; a -&gt; STM m ()
forall (m :: * -&gt; *) a.
(MonadSTM m, HasCallStack) =&gt;
StrictTVar m a -&gt; a -&gt; STM m ()
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#writeTVar"><span class="hs-identifier hs-var">writeTVar</span></a></span><span> </span><span class="annot"><span class="annottext">StrictTVar m a
</span><a href="#local-6989586621679086912"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">(a -&gt; STM m ()) -&gt; (a -&gt; a) -&gt; a -&gt; STM m ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; a
</span><a href="#local-6989586621679086911"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-140"></span><span>
</span><span id="line-141"></span><span id="local-6989586621679087075"><span id="local-6989586621679087076"><span id="local-6989586621679087077"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#stateTVar"><span class="hs-identifier hs-type">stateTVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#MonadSTM"><span class="hs-identifier hs-type">MonadSTM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679087077"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTVar"><span class="hs-identifier hs-type">StrictTVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679087077"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679087076"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679087076"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679087076"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679087075"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#STM"><span class="hs-identifier hs-type">STM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679087077"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679087075"><span class="hs-identifier hs-type">b</span></a></span></span></span></span><span>
</span><span id="line-142"></span><span id="stateTVar"><span class="annot"><span class="annottext">stateTVar :: StrictTVar m a -&gt; (a -&gt; (a, b)) -&gt; STM m b
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#stateTVar"><span class="hs-identifier hs-var hs-var">stateTVar</span></a></span></span><span> </span><span id="local-6989586621679086910"><span class="annot"><span class="annottext">StrictTVar m a
</span><a href="#local-6989586621679086910"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621679086909"><span class="annot"><span class="annottext">a -&gt; (a, b)
</span><a href="#local-6989586621679086909"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-143"></span><span>    </span><span id="local-6989586621679086908"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679086908"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">StrictTVar m a -&gt; STM m a
forall (m :: * -&gt; *) a. MonadSTM m =&gt; StrictTVar m a -&gt; STM m a
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#readTVar"><span class="hs-identifier hs-var">readTVar</span></a></span><span> </span><span class="annot"><span class="annottext">StrictTVar m a
</span><a href="#local-6989586621679086910"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-144"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679086907"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679086907"><span class="hs-identifier hs-var">a'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679086906"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679086906"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; (a, b)
</span><a href="#local-6989586621679086909"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679086908"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-145"></span><span>    </span><span class="annot"><span class="annottext">StrictTVar m a -&gt; a -&gt; STM m ()
forall (m :: * -&gt; *) a.
(MonadSTM m, HasCallStack) =&gt;
StrictTVar m a -&gt; a -&gt; STM m ()
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#writeTVar"><span class="hs-identifier hs-var">writeTVar</span></a></span><span> </span><span class="annot"><span class="annottext">StrictTVar m a
</span><a href="#local-6989586621679086910"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679086907"><span class="hs-identifier hs-var">a'</span></a></span><span>
</span><span id="line-146"></span><span>    </span><span class="annot"><span class="annottext">b -&gt; STM m b
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679086906"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-147"></span><span>
</span><span id="line-148"></span><span id="local-6989586621679086904"><span id="local-6989586621679086905"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#swapTVar"><span class="hs-identifier hs-type">swapTVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#MonadSTM"><span class="hs-identifier hs-type">MonadSTM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086905"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTVar"><span class="hs-identifier hs-type">StrictTVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086905"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086904"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679086904"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#STM"><span class="hs-identifier hs-type">STM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086905"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086904"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-149"></span><span id="swapTVar"><span class="annot"><span class="annottext">swapTVar :: StrictTVar m a -&gt; a -&gt; STM m a
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#swapTVar"><span class="hs-identifier hs-var hs-var">swapTVar</span></a></span></span><span> </span><span id="local-6989586621679086903"><span class="annot"><span class="annottext">StrictTVar m a
</span><a href="#local-6989586621679086903"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621679086902"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679086902"><span class="hs-identifier hs-var">a'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-150"></span><span>    </span><span id="local-6989586621679086901"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679086901"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">StrictTVar m a -&gt; STM m a
forall (m :: * -&gt; *) a. MonadSTM m =&gt; StrictTVar m a -&gt; STM m a
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#readTVar"><span class="hs-identifier hs-var">readTVar</span></a></span><span> </span><span class="annot"><span class="annottext">StrictTVar m a
</span><a href="#local-6989586621679086903"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-151"></span><span>    </span><span class="annot"><span class="annottext">StrictTVar m a -&gt; a -&gt; STM m ()
forall (m :: * -&gt; *) a.
(MonadSTM m, HasCallStack) =&gt;
StrictTVar m a -&gt; a -&gt; STM m ()
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#writeTVar"><span class="hs-identifier hs-var">writeTVar</span></a></span><span> </span><span class="annot"><span class="annottext">StrictTVar m a
</span><a href="#local-6989586621679086903"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679086902"><span class="hs-identifier hs-var">a'</span></a></span><span>
</span><span id="line-152"></span><span>    </span><span class="annot"><span class="annottext">a -&gt; STM m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679086901"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-153"></span><span>
</span><span id="line-154"></span><span>
</span><span id="line-155"></span><span id="local-6989586621679086898"><span id="local-6989586621679086899"><span id="local-6989586621679086900"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#updateTVar"><span class="hs-identifier hs-type">updateTVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#MonadSTM"><span class="hs-identifier hs-type">MonadSTM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086900"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTVar"><span class="hs-identifier hs-type">StrictTVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086900"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086899"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679086899"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679086899"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679086898"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#STM"><span class="hs-identifier hs-type">STM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086900"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086898"><span class="hs-identifier hs-type">b</span></a></span></span></span></span><span>
</span><span id="line-156"></span><span id="updateTVar"><span class="annot"><span class="annottext">updateTVar :: StrictTVar m a -&gt; (a -&gt; (a, b)) -&gt; STM m b
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#updateTVar"><span class="hs-identifier hs-var hs-var">updateTVar</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StrictTVar m a -&gt; (a -&gt; (a, b)) -&gt; STM m b
forall (m :: * -&gt; *) a b.
MonadSTM m =&gt;
StrictTVar m a -&gt; (a -&gt; (a, b)) -&gt; STM m b
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#stateTVar"><span class="hs-identifier hs-var">stateTVar</span></a></span><span>
</span><span id="line-157"></span><span class="hs-pragma">{-# DEPRECATED</span><span> </span><span class="hs-pragma">updateTVar</span><span> </span><span class="hs-pragma">&quot;Use stateTVar&quot;</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-158"></span><span>
</span><span id="line-159"></span><span class="hs-comment">{-------------------------------------------------------------------------------
  Strict TMVar
-------------------------------------------------------------------------------}</span><span>
</span><span id="line-162"></span><span>
</span><span id="line-163"></span><span class="hs-comment">-- 'TMVar' that keeps its value in WHNF at all times</span><span>
</span><span id="line-164"></span><span class="hs-comment">--</span><span>
</span><span id="line-165"></span><span class="hs-comment">-- Does not support an invariant: if the invariant would not be satisfied,</span><span>
</span><span id="line-166"></span><span class="hs-comment">-- we would not be able to put a value into an empty TMVar, which would lead</span><span>
</span><span id="line-167"></span><span class="hs-comment">-- to very hard to debug bugs where code is blocked indefinitely.</span><span>
</span><span id="line-168"></span><span class="hs-keyword">newtype</span><span> </span><span id="StrictTMVar"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-var">StrictTMVar</span></a></span></span><span> </span><span id="local-6989586621679087061"><span class="annot"><a href="#local-6989586621679087061"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621679087060"><span class="annot"><a href="#local-6989586621679087060"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="StrictTMVar"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-var">StrictTMVar</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#LazyTMVar"><span class="hs-identifier hs-type">LazyTMVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679087061"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679087060"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-169"></span><span>
</span><span id="line-170"></span><span id="local-6989586621679087065"><span id="local-6989586621679087066"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#labelTMVar"><span class="hs-identifier hs-type">labelTMVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#MonadLabelledSTM"><span class="hs-identifier hs-type">MonadLabelledSTM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679087066"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-type">StrictTMVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679087066"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679087065"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#STM"><span class="hs-identifier hs-type">STM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679087066"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-171"></span><span id="labelTMVar"><span class="annot"><span class="annottext">labelTMVar :: StrictTMVar m a -&gt; String -&gt; STM m ()
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#labelTMVar"><span class="hs-identifier hs-var hs-var">labelTMVar</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-type">StrictTMVar</span></a></span><span> </span><span id="local-6989586621679086896"><span class="annot"><span class="annottext">LazyTMVar m a
</span><a href="#local-6989586621679086896"><span class="hs-identifier hs-var">tvar</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LazyTMVar m a -&gt; String -&gt; STM m ()
forall (stm :: * -&gt; *) a.
MonadLabelledSTMTx stm =&gt;
TMVar_ stm a -&gt; String -&gt; stm ()
</span><a href="Control.Monad.Class.MonadSTM.html#labelTMVar"><span class="hs-identifier hs-var">Lazy.labelTMVar</span></a></span><span> </span><span class="annot"><span class="annottext">LazyTMVar m a
</span><a href="#local-6989586621679086896"><span class="hs-identifier hs-var">tvar</span></a></span><span>
</span><span id="line-172"></span><span>
</span><span id="line-173"></span><span id="local-6989586621679086894"><span id="local-6989586621679086895"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#labelTMVarIO"><span class="hs-identifier hs-type">labelTMVarIO</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#MonadLabelledSTM"><span class="hs-identifier hs-type">MonadLabelledSTM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086895"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-type">StrictTMVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086895"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086894"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679086895"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-174"></span><span id="labelTMVarIO"><span class="annot"><span class="annottext">labelTMVarIO :: StrictTMVar m a -&gt; String -&gt; m ()
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#labelTMVarIO"><span class="hs-identifier hs-var hs-var">labelTMVarIO</span></a></span></span><span> </span><span id="local-6989586621679086893"><span class="annot"><span class="annottext">StrictTMVar m a
</span><a href="#local-6989586621679086893"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">STM m () -&gt; m ()
forall (m :: * -&gt; *) a.
(MonadSTM m, HasCallStack) =&gt;
STM m a -&gt; m a
</span><a href="Control.Monad.Class.MonadSTM.html#atomically"><span class="hs-identifier hs-var">atomically</span></a></span><span> </span><span class="annot"><span class="annottext">(STM m () -&gt; m ()) -&gt; (String -&gt; STM m ()) -&gt; String -&gt; m ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">StrictTMVar m a -&gt; String -&gt; STM m ()
forall (m :: * -&gt; *) a.
MonadLabelledSTM m =&gt;
StrictTMVar m a -&gt; String -&gt; STM m ()
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#labelTMVar"><span class="hs-identifier hs-var">labelTMVar</span></a></span><span> </span><span class="annot"><span class="annottext">StrictTMVar m a
</span><a href="#local-6989586621679086893"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-175"></span><span>
</span><span id="line-176"></span><span id="local-6989586621679086890"><span id="local-6989586621679086891"><span id="local-6989586621679086892"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#castStrictTMVar"><span class="hs-identifier hs-type">castStrictTMVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#LazyTMVar"><span class="hs-identifier hs-type">LazyTMVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086892"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><span class="hs-glyph hs-type">~</span></span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#LazyTMVar"><span class="hs-identifier hs-type">LazyTMVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086891"><span class="hs-identifier hs-type">n</span></a></span><span>
</span><span id="line-177"></span><span>                </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-type">StrictTMVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086892"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086890"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-type">StrictTMVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086891"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086890"><span class="hs-identifier hs-type">a</span></a></span></span></span></span><span>
</span><span id="line-178"></span><span id="castStrictTMVar"><span class="annot"><span class="annottext">castStrictTMVar :: StrictTMVar m a -&gt; StrictTMVar n a
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#castStrictTMVar"><span class="hs-identifier hs-var hs-var">castStrictTMVar</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-type">StrictTMVar</span></a></span><span> </span><span id="local-6989586621679086889"><span class="annot"><span class="annottext">LazyTMVar m a
</span><a href="#local-6989586621679086889"><span class="hs-identifier hs-var">var</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LazyTMVar n a -&gt; StrictTMVar n a
forall (m :: * -&gt; *) a. LazyTMVar m a -&gt; StrictTMVar m a
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-var">StrictTMVar</span></a></span><span> </span><span class="annot"><span class="annottext">LazyTMVar m a
LazyTMVar n a
</span><a href="#local-6989586621679086889"><span class="hs-identifier hs-var">var</span></a></span><span>
</span><span id="line-179"></span><span>
</span><span id="line-180"></span><span id="local-6989586621679086887"><span id="local-6989586621679086888"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#newTMVar"><span class="hs-identifier hs-type">newTMVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#MonadSTM"><span class="hs-identifier hs-type">MonadSTM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086888"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679086887"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#STM"><span class="hs-identifier hs-type">STM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086888"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-type">StrictTMVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086888"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086887"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-181"></span><span id="newTMVar"><span class="annot"><span class="annottext">newTMVar :: a -&gt; STM m (StrictTMVar m a)
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#newTMVar"><span class="hs-identifier hs-var hs-var">newTMVar</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679086886"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679086886"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TMVar_ (STM m) a -&gt; StrictTMVar m a
forall (m :: * -&gt; *) a. LazyTMVar m a -&gt; StrictTMVar m a
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-var">StrictTMVar</span></a></span><span> </span><span class="annot"><span class="annottext">(TMVar_ (STM m) a -&gt; StrictTMVar m a)
-&gt; STM m (TMVar_ (STM m) a) -&gt; STM m (StrictTMVar m a)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; STM m (TMVar_ (STM m) a)
forall (stm :: * -&gt; *) a. MonadSTMTx stm =&gt; a -&gt; stm (TMVar_ stm a)
</span><a href="Control.Monad.Class.MonadSTM.html#newTMVar"><span class="hs-identifier hs-var">Lazy.newTMVar</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679086886"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-182"></span><span>
</span><span id="line-183"></span><span id="local-6989586621679087049"><span id="local-6989586621679087050"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#newTMVarIO"><span class="hs-identifier hs-type">newTMVarIO</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#MonadSTM"><span class="hs-identifier hs-type">MonadSTM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679087050"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679087049"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679087050"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-type">StrictTMVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679087050"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679087049"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-184"></span><span id="newTMVarIO"><span class="annot"><span class="annottext">newTMVarIO :: a -&gt; m (StrictTMVar m a)
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#newTMVarIO"><span class="hs-identifier hs-var hs-var">newTMVarIO</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679086885"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679086885"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TMVar_ (STM m) a -&gt; StrictTMVar m a
forall (m :: * -&gt; *) a. LazyTMVar m a -&gt; StrictTMVar m a
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-var">StrictTMVar</span></a></span><span> </span><span class="annot"><span class="annottext">(TMVar_ (STM m) a -&gt; StrictTMVar m a)
-&gt; m (TMVar_ (STM m) a) -&gt; m (StrictTMVar m a)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; m (TMVar_ (STM m) a)
forall (m :: * -&gt; *) a. MonadSTM m =&gt; a -&gt; m (TMVar m a)
</span><a href="Control.Monad.Class.MonadSTM.html#newTMVarIO"><span class="hs-identifier hs-var">Lazy.newTMVarIO</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679086885"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-185"></span><span>
</span><span id="line-186"></span><span id="local-6989586621679086883"><span id="local-6989586621679086884"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#newTMVarM"><span class="hs-identifier hs-type">newTMVarM</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#MonadSTM"><span class="hs-identifier hs-type">MonadSTM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086884"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679086883"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679086884"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-type">StrictTMVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086884"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086883"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-187"></span><span id="newTMVarM"><span class="annot"><span class="annottext">newTMVarM :: a -&gt; m (StrictTMVar m a)
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#newTMVarM"><span class="hs-identifier hs-var hs-var">newTMVarM</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; m (StrictTMVar m a)
forall (m :: * -&gt; *) a. MonadSTM m =&gt; a -&gt; m (StrictTMVar m a)
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#newTMVarIO"><span class="hs-identifier hs-var">newTMVarIO</span></a></span><span>
</span><span id="line-188"></span><span class="hs-pragma">{-# DEPRECATED</span><span> </span><span class="hs-pragma">newTMVarM</span><span> </span><span class="hs-pragma">&quot;Use newTVarIO&quot;</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-189"></span><span>
</span><span id="line-190"></span><span id="local-6989586621679086881"><span id="local-6989586621679086882"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#newEmptyTMVar"><span class="hs-identifier hs-type">newEmptyTMVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#MonadSTM"><span class="hs-identifier hs-type">MonadSTM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086882"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#STM"><span class="hs-identifier hs-type">STM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086882"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-type">StrictTMVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086882"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086881"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-191"></span><span id="newEmptyTMVar"><span class="annot"><span class="annottext">newEmptyTMVar :: STM m (StrictTMVar m a)
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#newEmptyTMVar"><span class="hs-identifier hs-var hs-var">newEmptyTMVar</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TMVar_ (STM m) a -&gt; StrictTMVar m a
forall (m :: * -&gt; *) a. LazyTMVar m a -&gt; StrictTMVar m a
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-var">StrictTMVar</span></a></span><span> </span><span class="annot"><span class="annottext">(TMVar_ (STM m) a -&gt; StrictTMVar m a)
-&gt; STM m (TMVar_ (STM m) a) -&gt; STM m (StrictTMVar m a)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">STM m (TMVar_ (STM m) a)
forall (stm :: * -&gt; *) a. MonadSTMTx stm =&gt; stm (TMVar_ stm a)
</span><a href="Control.Monad.Class.MonadSTM.html#newEmptyTMVar"><span class="hs-identifier hs-var">Lazy.newEmptyTMVar</span></a></span><span>
</span><span id="line-192"></span><span>
</span><span id="line-193"></span><span id="local-6989586621679087039"><span id="local-6989586621679087040"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#newEmptyTMVarIO"><span class="hs-identifier hs-type">newEmptyTMVarIO</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#MonadSTM"><span class="hs-identifier hs-type">MonadSTM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679087040"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679087040"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-type">StrictTMVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679087040"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679087039"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-194"></span><span id="newEmptyTMVarIO"><span class="annot"><span class="annottext">newEmptyTMVarIO :: m (StrictTMVar m a)
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#newEmptyTMVarIO"><span class="hs-identifier hs-var hs-var">newEmptyTMVarIO</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TMVar_ (STM m) a -&gt; StrictTMVar m a
forall (m :: * -&gt; *) a. LazyTMVar m a -&gt; StrictTMVar m a
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-var">StrictTMVar</span></a></span><span> </span><span class="annot"><span class="annottext">(TMVar_ (STM m) a -&gt; StrictTMVar m a)
-&gt; m (TMVar_ (STM m) a) -&gt; m (StrictTMVar m a)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">m (TMVar_ (STM m) a)
forall (m :: * -&gt; *) a. MonadSTM m =&gt; m (TMVar m a)
</span><a href="Control.Monad.Class.MonadSTM.html#newEmptyTMVarIO"><span class="hs-identifier hs-var">Lazy.newEmptyTMVarIO</span></a></span><span>
</span><span id="line-195"></span><span>
</span><span id="line-196"></span><span id="local-6989586621679086879"><span id="local-6989586621679086880"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#newEmptyTMVarM"><span class="hs-identifier hs-type">newEmptyTMVarM</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#MonadSTM"><span class="hs-identifier hs-type">MonadSTM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086880"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679086880"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-type">StrictTMVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086880"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086879"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-197"></span><span id="newEmptyTMVarM"><span class="annot"><span class="annottext">newEmptyTMVarM :: m (StrictTMVar m a)
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#newEmptyTMVarM"><span class="hs-identifier hs-var hs-var">newEmptyTMVarM</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">m (StrictTMVar m a)
forall (m :: * -&gt; *) a. MonadSTM m =&gt; m (StrictTMVar m a)
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#newEmptyTMVarIO"><span class="hs-identifier hs-var">newEmptyTMVarIO</span></a></span><span>
</span><span id="line-198"></span><span class="hs-pragma">{-# DEPRECATED</span><span> </span><span class="hs-pragma">newEmptyTMVarM</span><span> </span><span class="hs-pragma">&quot;Use newEmptyTMVarIO&quot;</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-199"></span><span>
</span><span id="line-200"></span><span id="local-6989586621679086877"><span id="local-6989586621679086878"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#takeTMVar"><span class="hs-identifier hs-type">takeTMVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#MonadSTM"><span class="hs-identifier hs-type">MonadSTM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086878"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-type">StrictTMVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086878"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086877"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#STM"><span class="hs-identifier hs-type">STM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086878"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086877"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-201"></span><span id="takeTMVar"><span class="annot"><span class="annottext">takeTMVar :: StrictTMVar m a -&gt; STM m a
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#takeTMVar"><span class="hs-identifier hs-var hs-var">takeTMVar</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-type">StrictTMVar</span></a></span><span> </span><span id="local-6989586621679086876"><span class="annot"><span class="annottext">LazyTMVar m a
</span><a href="#local-6989586621679086876"><span class="hs-identifier hs-var">tmvar</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LazyTMVar m a -&gt; STM m a
forall (stm :: * -&gt; *) a. MonadSTMTx stm =&gt; TMVar_ stm a -&gt; stm a
</span><a href="Control.Monad.Class.MonadSTM.html#takeTMVar"><span class="hs-identifier hs-var">Lazy.takeTMVar</span></a></span><span> </span><span class="annot"><span class="annottext">LazyTMVar m a
</span><a href="#local-6989586621679086876"><span class="hs-identifier hs-var">tmvar</span></a></span><span>
</span><span id="line-202"></span><span>
</span><span id="line-203"></span><span id="local-6989586621679086874"><span id="local-6989586621679086875"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#tryTakeTMVar"><span class="hs-identifier hs-type">tryTakeTMVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#MonadSTM"><span class="hs-identifier hs-type">MonadSTM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086875"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-type">StrictTMVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086875"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086874"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#STM"><span class="hs-identifier hs-type">STM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086875"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679086874"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-204"></span><span id="tryTakeTMVar"><span class="annot"><span class="annottext">tryTakeTMVar :: StrictTMVar m a -&gt; STM m (Maybe a)
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#tryTakeTMVar"><span class="hs-identifier hs-var hs-var">tryTakeTMVar</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-type">StrictTMVar</span></a></span><span> </span><span id="local-6989586621679086873"><span class="annot"><span class="annottext">LazyTMVar m a
</span><a href="#local-6989586621679086873"><span class="hs-identifier hs-var">tmvar</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LazyTMVar m a -&gt; STM m (Maybe a)
forall (stm :: * -&gt; *) a.
MonadSTMTx stm =&gt;
TMVar_ stm a -&gt; stm (Maybe a)
</span><a href="Control.Monad.Class.MonadSTM.html#tryTakeTMVar"><span class="hs-identifier hs-var">Lazy.tryTakeTMVar</span></a></span><span> </span><span class="annot"><span class="annottext">LazyTMVar m a
</span><a href="#local-6989586621679086873"><span class="hs-identifier hs-var">tmvar</span></a></span><span>
</span><span id="line-205"></span><span>
</span><span id="line-206"></span><span id="local-6989586621679086871"><span id="local-6989586621679086872"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#putTMVar"><span class="hs-identifier hs-type">putTMVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#MonadSTM"><span class="hs-identifier hs-type">MonadSTM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086872"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-type">StrictTMVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086872"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086871"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679086871"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#STM"><span class="hs-identifier hs-type">STM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086872"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-207"></span><span id="putTMVar"><span class="annot"><span class="annottext">putTMVar :: StrictTMVar m a -&gt; a -&gt; STM m ()
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#putTMVar"><span class="hs-identifier hs-var hs-var">putTMVar</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-type">StrictTMVar</span></a></span><span> </span><span id="local-6989586621679086870"><span class="annot"><span class="annottext">LazyTMVar m a
</span><a href="#local-6989586621679086870"><span class="hs-identifier hs-var">tmvar</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679086869"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679086869"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LazyTMVar m a -&gt; a -&gt; STM m ()
forall (stm :: * -&gt; *) a.
MonadSTMTx stm =&gt;
TMVar_ stm a -&gt; a -&gt; stm ()
</span><a href="Control.Monad.Class.MonadSTM.html#putTMVar"><span class="hs-identifier hs-var">Lazy.putTMVar</span></a></span><span> </span><span class="annot"><span class="annottext">LazyTMVar m a
</span><a href="#local-6989586621679086870"><span class="hs-identifier hs-var">tmvar</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679086869"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-208"></span><span>
</span><span id="line-209"></span><span id="local-6989586621679086867"><span id="local-6989586621679086868"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#tryPutTMVar"><span class="hs-identifier hs-type">tryPutTMVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#MonadSTM"><span class="hs-identifier hs-type">MonadSTM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086868"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-type">StrictTMVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086868"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086867"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679086867"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#STM"><span class="hs-identifier hs-type">STM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086868"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span></span><span>
</span><span id="line-210"></span><span id="tryPutTMVar"><span class="annot"><span class="annottext">tryPutTMVar :: StrictTMVar m a -&gt; a -&gt; STM m Bool
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#tryPutTMVar"><span class="hs-identifier hs-var hs-var">tryPutTMVar</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-type">StrictTMVar</span></a></span><span> </span><span id="local-6989586621679086866"><span class="annot"><span class="annottext">LazyTMVar m a
</span><a href="#local-6989586621679086866"><span class="hs-identifier hs-var">tmvar</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679086865"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679086865"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LazyTMVar m a -&gt; a -&gt; STM m Bool
forall (stm :: * -&gt; *) a.
MonadSTMTx stm =&gt;
TMVar_ stm a -&gt; a -&gt; stm Bool
</span><a href="Control.Monad.Class.MonadSTM.html#tryPutTMVar"><span class="hs-identifier hs-var">Lazy.tryPutTMVar</span></a></span><span> </span><span class="annot"><span class="annottext">LazyTMVar m a
</span><a href="#local-6989586621679086866"><span class="hs-identifier hs-var">tmvar</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679086865"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-211"></span><span>
</span><span id="line-212"></span><span id="local-6989586621679086863"><span id="local-6989586621679086864"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#readTMVar"><span class="hs-identifier hs-type">readTMVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#MonadSTM"><span class="hs-identifier hs-type">MonadSTM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086864"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-type">StrictTMVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086864"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086863"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#STM"><span class="hs-identifier hs-type">STM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086864"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086863"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-213"></span><span id="readTMVar"><span class="annot"><span class="annottext">readTMVar :: StrictTMVar m a -&gt; STM m a
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#readTMVar"><span class="hs-identifier hs-var hs-var">readTMVar</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-type">StrictTMVar</span></a></span><span> </span><span id="local-6989586621679086862"><span class="annot"><span class="annottext">LazyTMVar m a
</span><a href="#local-6989586621679086862"><span class="hs-identifier hs-var">tmvar</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LazyTMVar m a -&gt; STM m a
forall (stm :: * -&gt; *) a. MonadSTMTx stm =&gt; TMVar_ stm a -&gt; stm a
</span><a href="Control.Monad.Class.MonadSTM.html#readTMVar"><span class="hs-identifier hs-var">Lazy.readTMVar</span></a></span><span> </span><span class="annot"><span class="annottext">LazyTMVar m a
</span><a href="#local-6989586621679086862"><span class="hs-identifier hs-var">tmvar</span></a></span><span>
</span><span id="line-214"></span><span>
</span><span id="line-215"></span><span id="local-6989586621679086860"><span id="local-6989586621679086861"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#tryReadTMVar"><span class="hs-identifier hs-type">tryReadTMVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#MonadSTM"><span class="hs-identifier hs-type">MonadSTM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086861"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-type">StrictTMVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086861"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086860"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#STM"><span class="hs-identifier hs-type">STM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086861"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679086860"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-216"></span><span id="tryReadTMVar"><span class="annot"><span class="annottext">tryReadTMVar :: StrictTMVar m a -&gt; STM m (Maybe a)
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#tryReadTMVar"><span class="hs-identifier hs-var hs-var">tryReadTMVar</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-type">StrictTMVar</span></a></span><span> </span><span id="local-6989586621679086859"><span class="annot"><span class="annottext">LazyTMVar m a
</span><a href="#local-6989586621679086859"><span class="hs-identifier hs-var">tmvar</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LazyTMVar m a -&gt; STM m (Maybe a)
forall (stm :: * -&gt; *) a.
MonadSTMTx stm =&gt;
TMVar_ stm a -&gt; stm (Maybe a)
</span><a href="Control.Monad.Class.MonadSTM.html#tryReadTMVar"><span class="hs-identifier hs-var">Lazy.tryReadTMVar</span></a></span><span> </span><span class="annot"><span class="annottext">LazyTMVar m a
</span><a href="#local-6989586621679086859"><span class="hs-identifier hs-var">tmvar</span></a></span><span>
</span><span id="line-217"></span><span>
</span><span id="line-218"></span><span id="local-6989586621679086857"><span id="local-6989586621679086858"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#swapTMVar"><span class="hs-identifier hs-type">swapTMVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#MonadSTM"><span class="hs-identifier hs-type">MonadSTM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086858"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-type">StrictTMVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086858"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086857"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679086857"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#STM"><span class="hs-identifier hs-type">STM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086858"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086857"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-219"></span><span id="swapTMVar"><span class="annot"><span class="annottext">swapTMVar :: StrictTMVar m a -&gt; a -&gt; STM m a
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#swapTMVar"><span class="hs-identifier hs-var hs-var">swapTMVar</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-type">StrictTMVar</span></a></span><span> </span><span id="local-6989586621679086856"><span class="annot"><span class="annottext">LazyTMVar m a
</span><a href="#local-6989586621679086856"><span class="hs-identifier hs-var">tmvar</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679086855"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679086855"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LazyTMVar m a -&gt; a -&gt; STM m a
forall (stm :: * -&gt; *) a.
MonadSTMTx stm =&gt;
TMVar_ stm a -&gt; a -&gt; stm a
</span><a href="Control.Monad.Class.MonadSTM.html#swapTMVar"><span class="hs-identifier hs-var">Lazy.swapTMVar</span></a></span><span> </span><span class="annot"><span class="annottext">LazyTMVar m a
</span><a href="#local-6989586621679086856"><span class="hs-identifier hs-var">tmvar</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679086855"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-220"></span><span>
</span><span id="line-221"></span><span id="local-6989586621679086853"><span id="local-6989586621679086854"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#isEmptyTMVar"><span class="hs-identifier hs-type">isEmptyTMVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#MonadSTM"><span class="hs-identifier hs-type">MonadSTM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086854"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-type">StrictTMVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086854"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086853"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.html#STM"><span class="hs-identifier hs-type">STM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679086854"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span></span><span>
</span><span id="line-222"></span><span id="isEmptyTMVar"><span class="annot"><span class="annottext">isEmptyTMVar :: StrictTMVar m a -&gt; STM m Bool
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#isEmptyTMVar"><span class="hs-identifier hs-var hs-var">isEmptyTMVar</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-type">StrictTMVar</span></a></span><span> </span><span id="local-6989586621679086852"><span class="annot"><span class="annottext">LazyTMVar m a
</span><a href="#local-6989586621679086852"><span class="hs-identifier hs-var">tmvar</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LazyTMVar m a -&gt; STM m Bool
forall (stm :: * -&gt; *) a.
MonadSTMTx stm =&gt;
TMVar_ stm a -&gt; stm Bool
</span><a href="Control.Monad.Class.MonadSTM.html#isEmptyTMVar"><span class="hs-identifier hs-var">Lazy.isEmptyTMVar</span></a></span><span> </span><span class="annot"><span class="annottext">LazyTMVar m a
</span><a href="#local-6989586621679086852"><span class="hs-identifier hs-var">tmvar</span></a></span><span>
</span><span id="line-223"></span><span>
</span><span id="line-224"></span><span class="hs-comment">{-------------------------------------------------------------------------------
  Dealing with invariants
-------------------------------------------------------------------------------}</span><span>
</span><span id="line-227"></span><span>
</span><span id="line-228"></span><span class="hs-comment">-- | Check invariant (if enabled) before continuing</span><span>
</span><span id="line-229"></span><span class="hs-comment">--</span><span>
</span><span id="line-230"></span><span class="hs-comment">-- @checkInvariant mErr x@ is equal to @x@ if @mErr == Nothing@, and throws</span><span>
</span><span id="line-231"></span><span class="hs-comment">-- an error @err@ if @mErr == Just err@.</span><span>
</span><span id="line-232"></span><span class="hs-comment">--</span><span>
</span><span id="line-233"></span><span class="hs-comment">-- This is exported so that other code that wants to conditionally check</span><span>
</span><span id="line-234"></span><span class="hs-comment">-- invariants can reuse the same logic, rather than having to introduce new</span><span>
</span><span id="line-235"></span><span class="hs-comment">-- per-package flags.</span><span>
</span><span id="line-236"></span><span id="local-6989586621679087112"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#checkInvariant"><span class="hs-identifier hs-type">checkInvariant</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679087112"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679087112"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-cpp">
#if CHECK_TVAR_INVARIANT
</span><span class="hs-identifier">checkInvariant</span><span> </span><span class="hs-identifier">Nothing</span><span>    </span><span class="hs-identifier">k</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">k</span><span>
</span><span id="line-239"></span><span class="hs-identifier">checkInvariant</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">Just</span><span> </span><span class="hs-identifier">err</span><span class="hs-special">)</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">error</span><span> </span><span class="hs-operator">$</span><span> </span><span class="hs-string">&quot;Invariant violation: &quot;</span><span> </span><span class="hs-operator">++</span><span> </span><span class="hs-identifier">err</span><span class="hs-cpp">
#else
</span><span id="checkInvariant"><span class="annot"><span class="annottext">checkInvariant :: Maybe String -&gt; a -&gt; a
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#checkInvariant"><span class="hs-identifier hs-var hs-var">checkInvariant</span></a></span></span><span> </span><span id="local-6989586621679086851"><span class="annot"><span class="annottext">Maybe String
</span><a href="#local-6989586621679086851"><span class="hs-identifier hs-var">_err</span></a></span></span><span> </span><span id="local-6989586621679086850"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679086850"><span class="hs-identifier hs-var">k</span></a></span></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679086850"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-cpp">
#endif
</span></pre></body></html>