<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span id="%24con2tag_GT5hxZWhzDcL605ZxxG4Ab"></span><span class="hs-pragma">{-# LANGUAGE DeriveAnyClass #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE DeriveDataTypeable #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE DeriveGeneric #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE DerivingStrategies #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE EmptyDataDeriving #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE GeneralizedNewtypeDeriving #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE MonadComprehensions #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE MultiParamTypeClasses #-}</span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# LANGUAGE NamedFieldPuns #-}</span><span>
</span><span id="line-11"></span><span class="hs-pragma">{-# LANGUAGE StandaloneDeriving #-}</span><span>
</span><span id="line-12"></span><span class="hs-pragma">{-# LANGUAGE StrictData #-}</span><span>
</span><span id="line-13"></span><span class="hs-pragma">{-# LANGUAGE TemplateHaskell #-}</span><span>
</span><span id="line-14"></span><span class="hs-pragma">{-# LANGUAGE TupleSections #-}</span><span>
</span><span id="line-15"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications #-}</span><span>
</span><span id="line-16"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilies #-}</span><span>
</span><span id="line-17"></span><span>
</span><span id="line-18"></span><span class="hs-comment">-- This is for the Hashable Set instance</span><span>
</span><span id="line-19"></span><span class="hs-pragma">{-# OPTIONS_GHC -Wno-orphans #-}</span><span>
</span><span id="line-20"></span><span>
</span><span id="line-21"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Byron.Spec.Ledger.Update</span><span>
</span><span id="line-22"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html"><span class="hs-identifier">Byron.Spec.Ledger.Update</span></a></span><span>
</span><span id="line-23"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier">PredicateFailure</span></a></span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-24"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-25"></span><span class="hs-keyword">where</span><span>
</span><span id="line-26"></span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">NoThunks.Class</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">NoThunks</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Control.Arrow</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">second</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-operator">(&amp;&amp;&amp;)</span></span><span class="hs-special">)</span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Control.Monad</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">mzero</span></span><span class="hs-special">)</span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Bimap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Bimap</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">empty</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">lookupR</span></span><span class="hs-special">)</span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Bimap</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Bimap</span></span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Char</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">isAscii</span></span><span class="hs-special">)</span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Coerce</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">coerce</span></span><span class="hs-special">)</span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Data</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Data</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Typeable</span></span><span class="hs-special">)</span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Foldable</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">foldl'</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">toList</span></span><span class="hs-special">)</span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Hashable</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Hashable</span></span><span class="hs-special">)</span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Hashable</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">H</span></span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Ix</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">inRange</span></span><span class="hs-special">)</span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.List</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">sortOn</span></span><span class="hs-special">)</span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Map.Strict</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Map</span></span><span class="hs-special">)</span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map.Strict</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">catMaybes</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">fromMaybe</span></span><span class="hs-special">)</span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Ord</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Down</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Down</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Set</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Set</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">union</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-operator">(\\)</span></span><span class="hs-special">)</span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Set</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Set</span></span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Tuple</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">swap</span></span><span class="hs-special">)</span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Word</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Word8</span></span><span class="hs-special">)</span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">GHC.Generics</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Hedgehog</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Gen</span></span><span class="hs-special">)</span><span>
</span><span id="line-50"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Hedgehog.Gen</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Gen</span></span><span>
</span><span id="line-51"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Hedgehog.Range</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Range</span></span><span>
</span><span id="line-52"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Lens.Micro</span></span><span>
</span><span id="line-53"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Lens.Micro.Internal</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Field1</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Field2</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Field3</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-54"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Lens.Micro.Extras</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">view</span></span><span class="hs-special">)</span><span>
</span><span id="line-55"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Lens.Micro.TH</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">makeLenses</span></span><span class="hs-special">)</span><span>
</span><span id="line-56"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Numeric.Natural</span></span><span>
</span><span id="line-57"></span><span>
</span><span id="line-58"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier">Control.State.Transition</span></a></span><span>
</span><span id="line-59"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-test-0.1.0.0/noopt/doc/html/small-steps-test/src"><span class="hs-identifier">Control.State.Transition.Generator</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-test-0.1.0.0/noopt/doc/html/small-steps-test/src"><span class="hs-identifier">HasTrace</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-test-0.1.0.0/noopt/doc/html/small-steps-test/src"><span class="hs-identifier">SignalGenerator</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-test-0.1.0.0/noopt/doc/html/small-steps-test/src"><span class="hs-identifier">envGen</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-test-0.1.0.0/noopt/doc/html/small-steps-test/src"><span class="hs-identifier">sigGen</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-60"></span><span>                     </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-test-0.1.0.0/noopt/doc/html/small-steps-test/src"><span class="hs-identifier">tinkerWithSigGen</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-61"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier">Data.AbstractSize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier">HasTypeReps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-62"></span><span>
</span><span id="line-63"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html"><span class="hs-identifier">Byron.Spec.Ledger.Core</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#BlockCount"><span class="hs-identifier">BlockCount</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#HasHash"><span class="hs-identifier">HasHash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Owner"><span class="hs-identifier">Owner</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Owner"><span class="hs-identifier">Owner</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Relation"><span class="hs-identifier">Relation</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Slot"><span class="hs-identifier">Slot</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-64"></span><span>                     </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#SlotCount"><span class="hs-identifier">SlotCount</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier">VKey</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier">VKey</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier">VKeyGenesis</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier">VKeyGenesis</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#dom"><span class="hs-identifier">dom</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#hash"><span class="hs-identifier">hash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#%2A."><span class="hs-operator">(*.)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#-."><span class="hs-operator">(-.)</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-65"></span><span>                     </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#%2208"><span class="hs-operator">(&#8712;)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#%2209"><span class="hs-operator">(&#8713;)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#%22EA"><span class="hs-operator">(&#8938;)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#%25B7"><span class="hs-operator">(&#9655;)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#%25B7%3C%3D"><span class="hs-operator">(&#9655;&lt;=)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#%25B7%3E%3D"><span class="hs-operator">(&#9655;&gt;=)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#%25C1"><span class="hs-operator">(&#9665;)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#%2A03"><span class="hs-operator">(&#10755;)</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-66"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html"><span class="hs-identifier">Byron.Spec.Ledger.Core</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Core</span></span><span>
</span><span id="line-67"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.Generators.html"><span class="hs-identifier">Byron.Spec.Ledger.Core.Generators</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">CoreGen</span></span><span>
</span><span id="line-68"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Byron.Spec.Ledger.Core.Omniscient.html"><span class="hs-identifier">Byron.Spec.Ledger.Core.Omniscient</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.Omniscient.html#skey"><span class="hs-identifier">skey</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-69"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.GlobalParams.html"><span class="hs-identifier">Byron.Spec.Ledger.GlobalParams</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">GP</span></span><span>
</span><span id="line-70"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Byron.Spec.Ledger.Util.html"><span class="hs-identifier">Byron.Spec.Ledger.Util</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Util.html#mkGoblinGens"><span class="hs-identifier">mkGoblinGens</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-71"></span><span>
</span><span id="line-72"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/goblins-0.2.0.0/noopt/doc/html/goblins/src"><span class="hs-identifier">Test.Goblin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/goblins-0.2.0.0/noopt/doc/html/goblins/src"><span class="hs-identifier">AddShrinks</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/goblins-0.2.0.0/noopt/doc/html/goblins/src"><span class="hs-identifier">GeneOps</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/goblins-0.2.0.0/noopt/doc/html/goblins/src"><span class="hs-identifier">Goblin</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/goblins-0.2.0.0/noopt/doc/html/goblins/src"><span class="hs-identifier">GoblinData</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/goblins-0.2.0.0/noopt/doc/html/goblins/src"><span class="hs-identifier">SeedGoblin</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-73"></span><span>                     </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/goblins-0.2.0.0/noopt/doc/html/goblins/src"><span class="hs-identifier">mkEmptyGoblin</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/goblins-0.2.0.0/noopt/doc/html/goblins/src"><span class="hs-identifier">saveInBagOfTricks</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/goblins-0.2.0.0/noopt/doc/html/goblins/src"><span class="hs-identifier">tinkerRummagedOrConjureOrSave</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-74"></span><span>                     </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/goblins-0.2.0.0/noopt/doc/html/goblins/src"><span class="hs-identifier">transcribeGenesAsInt</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/goblins-0.2.0.0/noopt/doc/html/goblins/src"><span class="hs-operator">(&lt;$$&gt;)</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-75"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/goblins-0.2.0.0/noopt/doc/html/goblins/src"><span class="hs-identifier">Test.Goblin.TH</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/goblins-0.2.0.0/noopt/doc/html/goblins/src"><span class="hs-identifier">deriveAddShrinks</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/goblins-0.2.0.0/noopt/doc/html/goblins/src"><span class="hs-identifier">deriveGoblin</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/goblins-0.2.0.0/noopt/doc/html/goblins/src"><span class="hs-identifier">deriveSeedGoblin</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-76"></span><span>
</span><span id="line-77"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Prelude</span></span><span>
</span><span id="line-78"></span><span>
</span><span id="line-79"></span><span>
</span><span id="line-80"></span><span id="local-6989586621679557905"><span id="local-6989586621679557906"></span></span><span class="hs-keyword">newtype</span><span> </span><span id="FactorA"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#FactorA"><span class="hs-identifier hs-var">FactorA</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="FactorA"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#FactorA"><span class="hs-identifier hs-var">FactorA</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-81"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(forall x. FactorA -&gt; Rep FactorA x)
-&gt; (forall x. Rep FactorA x -&gt; FactorA) -&gt; Generic FactorA
forall x. Rep FactorA x -&gt; FactorA
forall x. FactorA -&gt; Rep FactorA x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep FactorA x -&gt; FactorA
$cfrom :: forall x. FactorA -&gt; Rep FactorA x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679557895"><span id="local-6989586621679557897"><span id="local-6989586621679557899"><span class="annot"><span class="annottext">Int -&gt; FactorA -&gt; ShowS
[FactorA] -&gt; ShowS
FactorA -&gt; String
(Int -&gt; FactorA -&gt; ShowS)
-&gt; (FactorA -&gt; String) -&gt; ([FactorA] -&gt; ShowS) -&gt; Show FactorA
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [FactorA] -&gt; ShowS
$cshowList :: [FactorA] -&gt; ShowS
show :: FactorA -&gt; String
$cshow :: FactorA -&gt; String
showsPrec :: Int -&gt; FactorA -&gt; ShowS
$cshowsPrec :: Int -&gt; FactorA -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="%24cFactorA"><span id="%24tFactorA"><span id="local-6989586621679557865"><span id="local-6989586621679557867"><span id="local-6989586621679557869"><span id="local-6989586621679557871"><span id="local-6989586621679557873"><span id="local-6989586621679557875"><span id="local-6989586621679557877"><span id="local-6989586621679557879"><span id="local-6989586621679557881"><span id="local-6989586621679557883"><span id="local-6989586621679557885"><span id="local-6989586621679557887"><span id="local-6989586621679557889"><span id="local-6989586621679557891"><span class="annot"><span class="annottext">Typeable FactorA
DataType
Constr
Typeable FactorA
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; FactorA -&gt; c FactorA)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c FactorA)
-&gt; (FactorA -&gt; Constr)
-&gt; (FactorA -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c FactorA))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c FactorA))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; FactorA -&gt; FactorA)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; FactorA -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; FactorA -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; FactorA -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; FactorA -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; FactorA -&gt; m FactorA)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; FactorA -&gt; m FactorA)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; FactorA -&gt; m FactorA)
-&gt; Data FactorA
FactorA -&gt; DataType
FactorA -&gt; Constr
(forall b. Data b =&gt; b -&gt; b) -&gt; FactorA -&gt; FactorA
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; FactorA -&gt; c FactorA
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c FactorA
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; FactorA -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; FactorA -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; FactorA -&gt; r
forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; FactorA -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; FactorA -&gt; m FactorA
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; FactorA -&gt; m FactorA
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c FactorA
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; FactorA -&gt; c FactorA
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c FactorA)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c FactorA)
$cFactorA :: Constr
$tFactorA :: DataType
gmapMo :: (forall d. Data d =&gt; d -&gt; m d) -&gt; FactorA -&gt; m FactorA
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; FactorA -&gt; m FactorA
gmapMp :: (forall d. Data d =&gt; d -&gt; m d) -&gt; FactorA -&gt; m FactorA
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; FactorA -&gt; m FactorA
gmapM :: (forall d. Data d =&gt; d -&gt; m d) -&gt; FactorA -&gt; m FactorA
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; FactorA -&gt; m FactorA
gmapQi :: Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; FactorA -&gt; u
$cgmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; FactorA -&gt; u
gmapQ :: (forall d. Data d =&gt; d -&gt; u) -&gt; FactorA -&gt; [u]
$cgmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; FactorA -&gt; [u]
gmapQr :: (r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; FactorA -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; FactorA -&gt; r
gmapQl :: (r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; FactorA -&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; FactorA -&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; FactorA -&gt; FactorA
$cgmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; FactorA -&gt; FactorA
dataCast2 :: (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c FactorA)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c FactorA)
dataCast1 :: (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c FactorA)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c FactorA)
dataTypeOf :: FactorA -&gt; DataType
$cdataTypeOf :: FactorA -&gt; DataType
toConstr :: FactorA -&gt; Constr
$ctoConstr :: FactorA -&gt; Constr
gunfold :: (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c FactorA
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c FactorA
gfoldl :: (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; FactorA -&gt; c FactorA
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; FactorA -&gt; c FactorA
$cp1Data :: Typeable FactorA
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">)</span><span>
</span><span id="line-82"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">newtype</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679557858"><span id="local-6989586621679557860"><span class="annot"><span class="annottext">FactorA -&gt; FactorA -&gt; Bool
(FactorA -&gt; FactorA -&gt; Bool)
-&gt; (FactorA -&gt; FactorA -&gt; Bool) -&gt; Eq FactorA
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: FactorA -&gt; FactorA -&gt; Bool
$c/= :: FactorA -&gt; FactorA -&gt; Bool
== :: FactorA -&gt; FactorA -&gt; Bool
$c== :: FactorA -&gt; FactorA -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679557842"><span id="local-6989586621679557844"><span id="local-6989586621679557846"><span id="local-6989586621679557848"><span id="local-6989586621679557850"><span id="local-6989586621679557852"><span id="local-6989586621679557854"><span class="annot"><span class="annottext">Eq FactorA
Eq FactorA
-&gt; (FactorA -&gt; FactorA -&gt; Ordering)
-&gt; (FactorA -&gt; FactorA -&gt; Bool)
-&gt; (FactorA -&gt; FactorA -&gt; Bool)
-&gt; (FactorA -&gt; FactorA -&gt; Bool)
-&gt; (FactorA -&gt; FactorA -&gt; Bool)
-&gt; (FactorA -&gt; FactorA -&gt; FactorA)
-&gt; (FactorA -&gt; FactorA -&gt; FactorA)
-&gt; Ord FactorA
FactorA -&gt; FactorA -&gt; Bool
FactorA -&gt; FactorA -&gt; Ordering
FactorA -&gt; FactorA -&gt; FactorA
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: FactorA -&gt; FactorA -&gt; FactorA
$cmin :: FactorA -&gt; FactorA -&gt; FactorA
max :: FactorA -&gt; FactorA -&gt; FactorA
$cmax :: FactorA -&gt; FactorA -&gt; FactorA
&gt;= :: FactorA -&gt; FactorA -&gt; Bool
$c&gt;= :: FactorA -&gt; FactorA -&gt; Bool
&gt; :: FactorA -&gt; FactorA -&gt; Bool
$c&gt; :: FactorA -&gt; FactorA -&gt; Bool
&lt;= :: FactorA -&gt; FactorA -&gt; Bool
$c&lt;= :: FactorA -&gt; FactorA -&gt; Bool
&lt; :: FactorA -&gt; FactorA -&gt; Bool
$c&lt; :: FactorA -&gt; FactorA -&gt; Bool
compare :: FactorA -&gt; FactorA -&gt; Ordering
$ccompare :: FactorA -&gt; FactorA -&gt; Ordering
$cp1Ord :: Eq FactorA
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679557837"><span id="local-6989586621679557839"><span class="annot"><span class="annottext">Int -&gt; FactorA -&gt; Int
FactorA -&gt; Int
(Int -&gt; FactorA -&gt; Int) -&gt; (FactorA -&gt; Int) -&gt; Hashable FactorA
forall a. (Int -&gt; a -&gt; Int) -&gt; (a -&gt; Int) -&gt; Hashable a
hash :: FactorA -&gt; Int
$chash :: FactorA -&gt; Int
hashWithSalt :: Int -&gt; FactorA -&gt; Int
$chashWithSalt :: Int -&gt; FactorA -&gt; Int
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Hashable</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679557830"><span id="local-6989586621679557832"><span id="local-6989586621679557834"><span class="annot"><span class="annottext">Context -&gt; FactorA -&gt; IO (Maybe ThunkInfo)
Proxy FactorA -&gt; String
(Context -&gt; FactorA -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; FactorA -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy FactorA -&gt; String)
-&gt; NoThunks FactorA
forall a.
(Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy a -&gt; String)
-&gt; NoThunks a
showTypeOf :: Proxy FactorA -&gt; String
$cshowTypeOf :: Proxy FactorA -&gt; String
wNoThunks :: Context -&gt; FactorA -&gt; IO (Maybe ThunkInfo)
$cwNoThunks :: Context -&gt; FactorA -&gt; IO (Maybe ThunkInfo)
noThunks :: Context -&gt; FactorA -&gt; IO (Maybe ThunkInfo)
$cnoThunks :: Context -&gt; FactorA -&gt; IO (Maybe ThunkInfo)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">NoThunks</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-83"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">anyclass</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679557827"><span class="annot"><span class="annottext">FactorA -&gt; Seq TypeRep
(FactorA -&gt; Seq TypeRep) -&gt; HasTypeReps FactorA
forall a. (a -&gt; Seq TypeRep) -&gt; HasTypeReps a
typeReps :: FactorA -&gt; Seq TypeRep
$ctypeReps :: FactorA -&gt; Seq TypeRep
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">HasTypeReps</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-84"></span><span>
</span><span id="line-85"></span><span id="local-6989586621679557824"><span id="local-6989586621679557825"></span></span><span class="hs-keyword">newtype</span><span> </span><span id="FactorB"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#FactorB"><span class="hs-identifier hs-var">FactorB</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="FactorB"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#FactorB"><span class="hs-identifier hs-var">FactorB</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-86"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(forall x. FactorB -&gt; Rep FactorB x)
-&gt; (forall x. Rep FactorB x -&gt; FactorB) -&gt; Generic FactorB
forall x. Rep FactorB x -&gt; FactorB
forall x. FactorB -&gt; Rep FactorB x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep FactorB x -&gt; FactorB
$cfrom :: forall x. FactorB -&gt; Rep FactorB x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679557815"><span id="local-6989586621679557817"><span id="local-6989586621679557819"><span class="annot"><span class="annottext">Int -&gt; FactorB -&gt; ShowS
[FactorB] -&gt; ShowS
FactorB -&gt; String
(Int -&gt; FactorB -&gt; ShowS)
-&gt; (FactorB -&gt; String) -&gt; ([FactorB] -&gt; ShowS) -&gt; Show FactorB
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [FactorB] -&gt; ShowS
$cshowList :: [FactorB] -&gt; ShowS
show :: FactorB -&gt; String
$cshow :: FactorB -&gt; String
showsPrec :: Int -&gt; FactorB -&gt; ShowS
$cshowsPrec :: Int -&gt; FactorB -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="%24cFactorB"><span id="%24tFactorB"><span id="local-6989586621679557786"><span id="local-6989586621679557788"><span id="local-6989586621679557790"><span id="local-6989586621679557792"><span id="local-6989586621679557794"><span id="local-6989586621679557796"><span id="local-6989586621679557798"><span id="local-6989586621679557800"><span id="local-6989586621679557802"><span id="local-6989586621679557804"><span id="local-6989586621679557806"><span id="local-6989586621679557808"><span id="local-6989586621679557810"><span id="local-6989586621679557812"><span class="annot"><span class="annottext">Typeable FactorB
DataType
Constr
Typeable FactorB
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; FactorB -&gt; c FactorB)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c FactorB)
-&gt; (FactorB -&gt; Constr)
-&gt; (FactorB -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c FactorB))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c FactorB))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; FactorB -&gt; FactorB)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; FactorB -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; FactorB -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; FactorB -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; FactorB -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; FactorB -&gt; m FactorB)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; FactorB -&gt; m FactorB)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; FactorB -&gt; m FactorB)
-&gt; Data FactorB
FactorB -&gt; DataType
FactorB -&gt; Constr
(forall b. Data b =&gt; b -&gt; b) -&gt; FactorB -&gt; FactorB
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; FactorB -&gt; c FactorB
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c FactorB
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; FactorB -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; FactorB -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; FactorB -&gt; r
forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; FactorB -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; FactorB -&gt; m FactorB
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; FactorB -&gt; m FactorB
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c FactorB
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; FactorB -&gt; c FactorB
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c FactorB)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c FactorB)
$cFactorB :: Constr
$tFactorB :: DataType
gmapMo :: (forall d. Data d =&gt; d -&gt; m d) -&gt; FactorB -&gt; m FactorB
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; FactorB -&gt; m FactorB
gmapMp :: (forall d. Data d =&gt; d -&gt; m d) -&gt; FactorB -&gt; m FactorB
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; FactorB -&gt; m FactorB
gmapM :: (forall d. Data d =&gt; d -&gt; m d) -&gt; FactorB -&gt; m FactorB
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; FactorB -&gt; m FactorB
gmapQi :: Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; FactorB -&gt; u
$cgmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; FactorB -&gt; u
gmapQ :: (forall d. Data d =&gt; d -&gt; u) -&gt; FactorB -&gt; [u]
$cgmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; FactorB -&gt; [u]
gmapQr :: (r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; FactorB -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; FactorB -&gt; r
gmapQl :: (r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; FactorB -&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; FactorB -&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; FactorB -&gt; FactorB
$cgmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; FactorB -&gt; FactorB
dataCast2 :: (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c FactorB)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c FactorB)
dataCast1 :: (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c FactorB)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c FactorB)
dataTypeOf :: FactorB -&gt; DataType
$cdataTypeOf :: FactorB -&gt; DataType
toConstr :: FactorB -&gt; Constr
$ctoConstr :: FactorB -&gt; Constr
gunfold :: (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c FactorB
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c FactorB
gfoldl :: (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; FactorB -&gt; c FactorB
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; FactorB -&gt; c FactorB
$cp1Data :: Typeable FactorB
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">)</span><span>
</span><span id="line-87"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">newtype</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679557780"><span id="local-6989586621679557782"><span class="annot"><span class="annottext">FactorB -&gt; FactorB -&gt; Bool
(FactorB -&gt; FactorB -&gt; Bool)
-&gt; (FactorB -&gt; FactorB -&gt; Bool) -&gt; Eq FactorB
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: FactorB -&gt; FactorB -&gt; Bool
$c/= :: FactorB -&gt; FactorB -&gt; Bool
== :: FactorB -&gt; FactorB -&gt; Bool
$c== :: FactorB -&gt; FactorB -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679557765"><span id="local-6989586621679557767"><span id="local-6989586621679557769"><span id="local-6989586621679557771"><span id="local-6989586621679557773"><span id="local-6989586621679557775"><span id="local-6989586621679557777"><span class="annot"><span class="annottext">Eq FactorB
Eq FactorB
-&gt; (FactorB -&gt; FactorB -&gt; Ordering)
-&gt; (FactorB -&gt; FactorB -&gt; Bool)
-&gt; (FactorB -&gt; FactorB -&gt; Bool)
-&gt; (FactorB -&gt; FactorB -&gt; Bool)
-&gt; (FactorB -&gt; FactorB -&gt; Bool)
-&gt; (FactorB -&gt; FactorB -&gt; FactorB)
-&gt; (FactorB -&gt; FactorB -&gt; FactorB)
-&gt; Ord FactorB
FactorB -&gt; FactorB -&gt; Bool
FactorB -&gt; FactorB -&gt; Ordering
FactorB -&gt; FactorB -&gt; FactorB
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: FactorB -&gt; FactorB -&gt; FactorB
$cmin :: FactorB -&gt; FactorB -&gt; FactorB
max :: FactorB -&gt; FactorB -&gt; FactorB
$cmax :: FactorB -&gt; FactorB -&gt; FactorB
&gt;= :: FactorB -&gt; FactorB -&gt; Bool
$c&gt;= :: FactorB -&gt; FactorB -&gt; Bool
&gt; :: FactorB -&gt; FactorB -&gt; Bool
$c&gt; :: FactorB -&gt; FactorB -&gt; Bool
&lt;= :: FactorB -&gt; FactorB -&gt; Bool
$c&lt;= :: FactorB -&gt; FactorB -&gt; Bool
&lt; :: FactorB -&gt; FactorB -&gt; Bool
$c&lt; :: FactorB -&gt; FactorB -&gt; Bool
compare :: FactorB -&gt; FactorB -&gt; Ordering
$ccompare :: FactorB -&gt; FactorB -&gt; Ordering
$cp1Ord :: Eq FactorB
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679557761"><span id="local-6989586621679557763"><span class="annot"><span class="annottext">Int -&gt; FactorB -&gt; Int
FactorB -&gt; Int
(Int -&gt; FactorB -&gt; Int) -&gt; (FactorB -&gt; Int) -&gt; Hashable FactorB
forall a. (Int -&gt; a -&gt; Int) -&gt; (a -&gt; Int) -&gt; Hashable a
hash :: FactorB -&gt; Int
$chash :: FactorB -&gt; Int
hashWithSalt :: Int -&gt; FactorB -&gt; Int
$chashWithSalt :: Int -&gt; FactorB -&gt; Int
</span><a href="#local-6989586621679557761"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Hashable</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679557755"><span id="local-6989586621679557757"><span id="local-6989586621679557759"><span class="annot"><span class="annottext">Context -&gt; FactorB -&gt; IO (Maybe ThunkInfo)
Proxy FactorB -&gt; String
(Context -&gt; FactorB -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; FactorB -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy FactorB -&gt; String)
-&gt; NoThunks FactorB
forall a.
(Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy a -&gt; String)
-&gt; NoThunks a
showTypeOf :: Proxy FactorB -&gt; String
$cshowTypeOf :: Proxy FactorB -&gt; String
wNoThunks :: Context -&gt; FactorB -&gt; IO (Maybe ThunkInfo)
$cwNoThunks :: Context -&gt; FactorB -&gt; IO (Maybe ThunkInfo)
noThunks :: Context -&gt; FactorB -&gt; IO (Maybe ThunkInfo)
$cnoThunks :: Context -&gt; FactorB -&gt; IO (Maybe ThunkInfo)
</span><a href="#local-6989586621679557755"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">NoThunks</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-88"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">anyclass</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679557753"><span class="annot"><span class="annottext">FactorB -&gt; Seq TypeRep
(FactorB -&gt; Seq TypeRep) -&gt; HasTypeReps FactorB
forall a. (a -&gt; Seq TypeRep) -&gt; HasTypeReps a
typeReps :: FactorB -&gt; Seq TypeRep
$ctypeReps :: FactorB -&gt; Seq TypeRep
</span><a href="#local-6989586621679557753"><span class="hs-identifier hs-var hs-var hs-var hs-var">HasTypeReps</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-89"></span><span>
</span><span id="line-90"></span><span id="local-6989586621679557751"><span id="local-6989586621679557752"></span></span><span class="hs-keyword">newtype</span><span> </span><span id="UpAdptThd"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpAdptThd"><span class="hs-identifier hs-var">UpAdptThd</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="UpAdptThd"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpAdptThd"><span class="hs-identifier hs-var">UpAdptThd</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Double</span></span><span>
</span><span id="line-91"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(forall x. UpAdptThd -&gt; Rep UpAdptThd x)
-&gt; (forall x. Rep UpAdptThd x -&gt; UpAdptThd) -&gt; Generic UpAdptThd
forall x. Rep UpAdptThd x -&gt; UpAdptThd
forall x. UpAdptThd -&gt; Rep UpAdptThd x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep UpAdptThd x -&gt; UpAdptThd
$cfrom :: forall x. UpAdptThd -&gt; Rep UpAdptThd x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679557742"><span id="local-6989586621679557744"><span id="local-6989586621679557746"><span class="annot"><span class="annottext">Int -&gt; UpAdptThd -&gt; ShowS
[UpAdptThd] -&gt; ShowS
UpAdptThd -&gt; String
(Int -&gt; UpAdptThd -&gt; ShowS)
-&gt; (UpAdptThd -&gt; String)
-&gt; ([UpAdptThd] -&gt; ShowS)
-&gt; Show UpAdptThd
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [UpAdptThd] -&gt; ShowS
$cshowList :: [UpAdptThd] -&gt; ShowS
show :: UpAdptThd -&gt; String
$cshow :: UpAdptThd -&gt; String
showsPrec :: Int -&gt; UpAdptThd -&gt; ShowS
$cshowsPrec :: Int -&gt; UpAdptThd -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="%24cUpAdptThd"><span id="%24tUpAdptThd"><span id="local-6989586621679557713"><span id="local-6989586621679557715"><span id="local-6989586621679557717"><span id="local-6989586621679557719"><span id="local-6989586621679557721"><span id="local-6989586621679557723"><span id="local-6989586621679557725"><span id="local-6989586621679557727"><span id="local-6989586621679557729"><span id="local-6989586621679557731"><span id="local-6989586621679557733"><span id="local-6989586621679557735"><span id="local-6989586621679557737"><span id="local-6989586621679557739"><span class="annot"><span class="annottext">Typeable UpAdptThd
DataType
Constr
Typeable UpAdptThd
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; UpAdptThd -&gt; c UpAdptThd)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UpAdptThd)
-&gt; (UpAdptThd -&gt; Constr)
-&gt; (UpAdptThd -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UpAdptThd))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c UpAdptThd))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; UpAdptThd -&gt; UpAdptThd)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UpAdptThd -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UpAdptThd -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; UpAdptThd -&gt; [u])
-&gt; (forall u.
    Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UpAdptThd -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; UpAdptThd -&gt; m UpAdptThd)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; UpAdptThd -&gt; m UpAdptThd)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; UpAdptThd -&gt; m UpAdptThd)
-&gt; Data UpAdptThd
UpAdptThd -&gt; DataType
UpAdptThd -&gt; Constr
(forall b. Data b =&gt; b -&gt; b) -&gt; UpAdptThd -&gt; UpAdptThd
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; UpAdptThd -&gt; c UpAdptThd
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UpAdptThd
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UpAdptThd -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; UpAdptThd -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UpAdptThd -&gt; r
forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UpAdptThd -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UpAdptThd -&gt; m UpAdptThd
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UpAdptThd -&gt; m UpAdptThd
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UpAdptThd
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; UpAdptThd -&gt; c UpAdptThd
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UpAdptThd)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c UpAdptThd)
$cUpAdptThd :: Constr
$tUpAdptThd :: DataType
gmapMo :: (forall d. Data d =&gt; d -&gt; m d) -&gt; UpAdptThd -&gt; m UpAdptThd
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UpAdptThd -&gt; m UpAdptThd
gmapMp :: (forall d. Data d =&gt; d -&gt; m d) -&gt; UpAdptThd -&gt; m UpAdptThd
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UpAdptThd -&gt; m UpAdptThd
gmapM :: (forall d. Data d =&gt; d -&gt; m d) -&gt; UpAdptThd -&gt; m UpAdptThd
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UpAdptThd -&gt; m UpAdptThd
gmapQi :: Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UpAdptThd -&gt; u
$cgmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UpAdptThd -&gt; u
gmapQ :: (forall d. Data d =&gt; d -&gt; u) -&gt; UpAdptThd -&gt; [u]
$cgmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; UpAdptThd -&gt; [u]
gmapQr :: (r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UpAdptThd -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UpAdptThd -&gt; r
gmapQl :: (r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UpAdptThd -&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UpAdptThd -&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; UpAdptThd -&gt; UpAdptThd
$cgmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; UpAdptThd -&gt; UpAdptThd
dataCast2 :: (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c UpAdptThd)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c UpAdptThd)
dataCast1 :: (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UpAdptThd)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UpAdptThd)
dataTypeOf :: UpAdptThd -&gt; DataType
$cdataTypeOf :: UpAdptThd -&gt; DataType
toConstr :: UpAdptThd -&gt; Constr
$ctoConstr :: UpAdptThd -&gt; Constr
gunfold :: (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UpAdptThd
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UpAdptThd
gfoldl :: (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; UpAdptThd -&gt; c UpAdptThd
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; UpAdptThd -&gt; c UpAdptThd
$cp1Data :: Typeable UpAdptThd
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">)</span><span>
</span><span id="line-92"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">newtype</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679557707"><span id="local-6989586621679557709"><span class="annot"><span class="annottext">UpAdptThd -&gt; UpAdptThd -&gt; Bool
(UpAdptThd -&gt; UpAdptThd -&gt; Bool)
-&gt; (UpAdptThd -&gt; UpAdptThd -&gt; Bool) -&gt; Eq UpAdptThd
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: UpAdptThd -&gt; UpAdptThd -&gt; Bool
$c/= :: UpAdptThd -&gt; UpAdptThd -&gt; Bool
== :: UpAdptThd -&gt; UpAdptThd -&gt; Bool
$c== :: UpAdptThd -&gt; UpAdptThd -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679557692"><span id="local-6989586621679557694"><span id="local-6989586621679557696"><span id="local-6989586621679557698"><span id="local-6989586621679557700"><span id="local-6989586621679557702"><span id="local-6989586621679557704"><span class="annot"><span class="annottext">Eq UpAdptThd
Eq UpAdptThd
-&gt; (UpAdptThd -&gt; UpAdptThd -&gt; Ordering)
-&gt; (UpAdptThd -&gt; UpAdptThd -&gt; Bool)
-&gt; (UpAdptThd -&gt; UpAdptThd -&gt; Bool)
-&gt; (UpAdptThd -&gt; UpAdptThd -&gt; Bool)
-&gt; (UpAdptThd -&gt; UpAdptThd -&gt; Bool)
-&gt; (UpAdptThd -&gt; UpAdptThd -&gt; UpAdptThd)
-&gt; (UpAdptThd -&gt; UpAdptThd -&gt; UpAdptThd)
-&gt; Ord UpAdptThd
UpAdptThd -&gt; UpAdptThd -&gt; Bool
UpAdptThd -&gt; UpAdptThd -&gt; Ordering
UpAdptThd -&gt; UpAdptThd -&gt; UpAdptThd
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: UpAdptThd -&gt; UpAdptThd -&gt; UpAdptThd
$cmin :: UpAdptThd -&gt; UpAdptThd -&gt; UpAdptThd
max :: UpAdptThd -&gt; UpAdptThd -&gt; UpAdptThd
$cmax :: UpAdptThd -&gt; UpAdptThd -&gt; UpAdptThd
&gt;= :: UpAdptThd -&gt; UpAdptThd -&gt; Bool
$c&gt;= :: UpAdptThd -&gt; UpAdptThd -&gt; Bool
&gt; :: UpAdptThd -&gt; UpAdptThd -&gt; Bool
$c&gt; :: UpAdptThd -&gt; UpAdptThd -&gt; Bool
&lt;= :: UpAdptThd -&gt; UpAdptThd -&gt; Bool
$c&lt;= :: UpAdptThd -&gt; UpAdptThd -&gt; Bool
&lt; :: UpAdptThd -&gt; UpAdptThd -&gt; Bool
$c&lt; :: UpAdptThd -&gt; UpAdptThd -&gt; Bool
compare :: UpAdptThd -&gt; UpAdptThd -&gt; Ordering
$ccompare :: UpAdptThd -&gt; UpAdptThd -&gt; Ordering
$cp1Ord :: Eq UpAdptThd
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679557688"><span id="local-6989586621679557690"><span class="annot"><span class="annottext">Int -&gt; UpAdptThd -&gt; Int
UpAdptThd -&gt; Int
(Int -&gt; UpAdptThd -&gt; Int)
-&gt; (UpAdptThd -&gt; Int) -&gt; Hashable UpAdptThd
forall a. (Int -&gt; a -&gt; Int) -&gt; (a -&gt; Int) -&gt; Hashable a
hash :: UpAdptThd -&gt; Int
$chash :: UpAdptThd -&gt; Int
hashWithSalt :: Int -&gt; UpAdptThd -&gt; Int
$chashWithSalt :: Int -&gt; UpAdptThd -&gt; Int
</span><a href="#local-6989586621679557688"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Hashable</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679557674"><span id="local-6989586621679557676"><span id="local-6989586621679557678"><span id="local-6989586621679557680"><span id="local-6989586621679557682"><span id="local-6989586621679557684"><span id="local-6989586621679557686"><span class="annot"><span class="annottext">Integer -&gt; UpAdptThd
UpAdptThd -&gt; UpAdptThd
UpAdptThd -&gt; UpAdptThd -&gt; UpAdptThd
(UpAdptThd -&gt; UpAdptThd -&gt; UpAdptThd)
-&gt; (UpAdptThd -&gt; UpAdptThd -&gt; UpAdptThd)
-&gt; (UpAdptThd -&gt; UpAdptThd -&gt; UpAdptThd)
-&gt; (UpAdptThd -&gt; UpAdptThd)
-&gt; (UpAdptThd -&gt; UpAdptThd)
-&gt; (UpAdptThd -&gt; UpAdptThd)
-&gt; (Integer -&gt; UpAdptThd)
-&gt; Num UpAdptThd
forall a.
(a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a)
-&gt; (a -&gt; a)
-&gt; (a -&gt; a)
-&gt; (Integer -&gt; a)
-&gt; Num a
fromInteger :: Integer -&gt; UpAdptThd
$cfromInteger :: Integer -&gt; UpAdptThd
signum :: UpAdptThd -&gt; UpAdptThd
$csignum :: UpAdptThd -&gt; UpAdptThd
abs :: UpAdptThd -&gt; UpAdptThd
$cabs :: UpAdptThd -&gt; UpAdptThd
negate :: UpAdptThd -&gt; UpAdptThd
$cnegate :: UpAdptThd -&gt; UpAdptThd
* :: UpAdptThd -&gt; UpAdptThd -&gt; UpAdptThd
$c* :: UpAdptThd -&gt; UpAdptThd -&gt; UpAdptThd
- :: UpAdptThd -&gt; UpAdptThd -&gt; UpAdptThd
$c- :: UpAdptThd -&gt; UpAdptThd -&gt; UpAdptThd
+ :: UpAdptThd -&gt; UpAdptThd -&gt; UpAdptThd
$c+ :: UpAdptThd -&gt; UpAdptThd -&gt; UpAdptThd
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Num</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679557669"><span class="annot"><span class="annottext">Num UpAdptThd
Ord UpAdptThd
Num UpAdptThd
-&gt; Ord UpAdptThd -&gt; (UpAdptThd -&gt; Rational) -&gt; Real UpAdptThd
UpAdptThd -&gt; Rational
forall a. Num a -&gt; Ord a -&gt; (a -&gt; Rational) -&gt; Real a
toRational :: UpAdptThd -&gt; Rational
$ctoRational :: UpAdptThd -&gt; Rational
$cp2Real :: Ord UpAdptThd
$cp1Real :: Num UpAdptThd
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Real</span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679557661"><span id="local-6989586621679557663"><span id="local-6989586621679557665"><span class="annot"><span class="annottext">Num UpAdptThd
Num UpAdptThd
-&gt; (UpAdptThd -&gt; UpAdptThd -&gt; UpAdptThd)
-&gt; (UpAdptThd -&gt; UpAdptThd)
-&gt; (Rational -&gt; UpAdptThd)
-&gt; Fractional UpAdptThd
Rational -&gt; UpAdptThd
UpAdptThd -&gt; UpAdptThd
UpAdptThd -&gt; UpAdptThd -&gt; UpAdptThd
forall a.
Num a
-&gt; (a -&gt; a -&gt; a) -&gt; (a -&gt; a) -&gt; (Rational -&gt; a) -&gt; Fractional a
fromRational :: Rational -&gt; UpAdptThd
$cfromRational :: Rational -&gt; UpAdptThd
recip :: UpAdptThd -&gt; UpAdptThd
$crecip :: UpAdptThd -&gt; UpAdptThd
/ :: UpAdptThd -&gt; UpAdptThd -&gt; UpAdptThd
$c/ :: UpAdptThd -&gt; UpAdptThd -&gt; UpAdptThd
$cp1Fractional :: Num UpAdptThd
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Fractional</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679557648"><span id="local-6989586621679557650"><span id="local-6989586621679557652"><span id="local-6989586621679557654"><span id="local-6989586621679557656"><span class="annot"><span class="annottext">Fractional UpAdptThd
Real UpAdptThd
Real UpAdptThd
-&gt; Fractional UpAdptThd
-&gt; (forall b. Integral b =&gt; UpAdptThd -&gt; (b, UpAdptThd))
-&gt; (forall b. Integral b =&gt; UpAdptThd -&gt; b)
-&gt; (forall b. Integral b =&gt; UpAdptThd -&gt; b)
-&gt; (forall b. Integral b =&gt; UpAdptThd -&gt; b)
-&gt; (forall b. Integral b =&gt; UpAdptThd -&gt; b)
-&gt; RealFrac UpAdptThd
UpAdptThd -&gt; b
UpAdptThd -&gt; b
UpAdptThd -&gt; b
UpAdptThd -&gt; b
UpAdptThd -&gt; (b, UpAdptThd)
forall b. Integral b =&gt; UpAdptThd -&gt; b
forall b. Integral b =&gt; UpAdptThd -&gt; (b, UpAdptThd)
forall a.
Real a
-&gt; Fractional a
-&gt; (forall b. Integral b =&gt; a -&gt; (b, a))
-&gt; (forall b. Integral b =&gt; a -&gt; b)
-&gt; (forall b. Integral b =&gt; a -&gt; b)
-&gt; (forall b. Integral b =&gt; a -&gt; b)
-&gt; (forall b. Integral b =&gt; a -&gt; b)
-&gt; RealFrac a
floor :: UpAdptThd -&gt; b
$cfloor :: forall b. Integral b =&gt; UpAdptThd -&gt; b
ceiling :: UpAdptThd -&gt; b
$cceiling :: forall b. Integral b =&gt; UpAdptThd -&gt; b
round :: UpAdptThd -&gt; b
$cround :: forall b. Integral b =&gt; UpAdptThd -&gt; b
truncate :: UpAdptThd -&gt; b
$ctruncate :: forall b. Integral b =&gt; UpAdptThd -&gt; b
properFraction :: UpAdptThd -&gt; (b, UpAdptThd)
$cproperFraction :: forall b. Integral b =&gt; UpAdptThd -&gt; (b, UpAdptThd)
$cp2RealFrac :: Fractional UpAdptThd
$cp1RealFrac :: Real UpAdptThd
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">RealFrac</span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679557641"><span id="local-6989586621679557643"><span id="local-6989586621679557645"><span class="annot"><span class="annottext">Context -&gt; UpAdptThd -&gt; IO (Maybe ThunkInfo)
Proxy UpAdptThd -&gt; String
(Context -&gt; UpAdptThd -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; UpAdptThd -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy UpAdptThd -&gt; String)
-&gt; NoThunks UpAdptThd
forall a.
(Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy a -&gt; String)
-&gt; NoThunks a
showTypeOf :: Proxy UpAdptThd -&gt; String
$cshowTypeOf :: Proxy UpAdptThd -&gt; String
wNoThunks :: Context -&gt; UpAdptThd -&gt; IO (Maybe ThunkInfo)
$cwNoThunks :: Context -&gt; UpAdptThd -&gt; IO (Maybe ThunkInfo)
noThunks :: Context -&gt; UpAdptThd -&gt; IO (Maybe ThunkInfo)
$cnoThunks :: Context -&gt; UpAdptThd -&gt; IO (Maybe ThunkInfo)
</span><a href="#local-6989586621679557641"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">NoThunks</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-93"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">anyclass</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679557639"><span class="annot"><span class="annottext">UpAdptThd -&gt; Seq TypeRep
(UpAdptThd -&gt; Seq TypeRep) -&gt; HasTypeReps UpAdptThd
forall a. (a -&gt; Seq TypeRep) -&gt; HasTypeReps a
typeReps :: UpAdptThd -&gt; Seq TypeRep
$ctypeReps :: UpAdptThd -&gt; Seq TypeRep
</span><a href="#local-6989586621679557639"><span class="hs-identifier hs-var hs-var hs-var hs-var">HasTypeReps</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-94"></span><span>
</span><span id="line-95"></span><span id="local-6989586621679557637"><span id="local-6989586621679557638"></span></span><span class="hs-keyword">newtype</span><span> </span><span id="BkSgnCntT"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#BkSgnCntT"><span class="hs-identifier hs-var">BkSgnCntT</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="BkSgnCntT"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#BkSgnCntT"><span class="hs-identifier hs-var">BkSgnCntT</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Double</span></span><span>
</span><span id="line-96"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(forall x. BkSgnCntT -&gt; Rep BkSgnCntT x)
-&gt; (forall x. Rep BkSgnCntT x -&gt; BkSgnCntT) -&gt; Generic BkSgnCntT
forall x. Rep BkSgnCntT x -&gt; BkSgnCntT
forall x. BkSgnCntT -&gt; Rep BkSgnCntT x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep BkSgnCntT x -&gt; BkSgnCntT
$cfrom :: forall x. BkSgnCntT -&gt; Rep BkSgnCntT x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679557628"><span id="local-6989586621679557630"><span id="local-6989586621679557632"><span class="annot"><span class="annottext">Int -&gt; BkSgnCntT -&gt; ShowS
[BkSgnCntT] -&gt; ShowS
BkSgnCntT -&gt; String
(Int -&gt; BkSgnCntT -&gt; ShowS)
-&gt; (BkSgnCntT -&gt; String)
-&gt; ([BkSgnCntT] -&gt; ShowS)
-&gt; Show BkSgnCntT
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [BkSgnCntT] -&gt; ShowS
$cshowList :: [BkSgnCntT] -&gt; ShowS
show :: BkSgnCntT -&gt; String
$cshow :: BkSgnCntT -&gt; String
showsPrec :: Int -&gt; BkSgnCntT -&gt; ShowS
$cshowsPrec :: Int -&gt; BkSgnCntT -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="%24cBkSgnCntT"><span id="%24tBkSgnCntT"><span id="local-6989586621679557599"><span id="local-6989586621679557601"><span id="local-6989586621679557603"><span id="local-6989586621679557605"><span id="local-6989586621679557607"><span id="local-6989586621679557609"><span id="local-6989586621679557611"><span id="local-6989586621679557613"><span id="local-6989586621679557615"><span id="local-6989586621679557617"><span id="local-6989586621679557619"><span id="local-6989586621679557621"><span id="local-6989586621679557623"><span id="local-6989586621679557625"><span class="annot"><span class="annottext">Typeable BkSgnCntT
DataType
Constr
Typeable BkSgnCntT
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; BkSgnCntT -&gt; c BkSgnCntT)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c BkSgnCntT)
-&gt; (BkSgnCntT -&gt; Constr)
-&gt; (BkSgnCntT -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c BkSgnCntT))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c BkSgnCntT))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; BkSgnCntT -&gt; BkSgnCntT)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; BkSgnCntT -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; BkSgnCntT -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; BkSgnCntT -&gt; [u])
-&gt; (forall u.
    Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; BkSgnCntT -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; BkSgnCntT -&gt; m BkSgnCntT)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; BkSgnCntT -&gt; m BkSgnCntT)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; BkSgnCntT -&gt; m BkSgnCntT)
-&gt; Data BkSgnCntT
BkSgnCntT -&gt; DataType
BkSgnCntT -&gt; Constr
(forall b. Data b =&gt; b -&gt; b) -&gt; BkSgnCntT -&gt; BkSgnCntT
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; BkSgnCntT -&gt; c BkSgnCntT
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c BkSgnCntT
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; BkSgnCntT -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; BkSgnCntT -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; BkSgnCntT -&gt; r
forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; BkSgnCntT -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; BkSgnCntT -&gt; m BkSgnCntT
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; BkSgnCntT -&gt; m BkSgnCntT
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c BkSgnCntT
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; BkSgnCntT -&gt; c BkSgnCntT
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c BkSgnCntT)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c BkSgnCntT)
$cBkSgnCntT :: Constr
$tBkSgnCntT :: DataType
gmapMo :: (forall d. Data d =&gt; d -&gt; m d) -&gt; BkSgnCntT -&gt; m BkSgnCntT
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; BkSgnCntT -&gt; m BkSgnCntT
gmapMp :: (forall d. Data d =&gt; d -&gt; m d) -&gt; BkSgnCntT -&gt; m BkSgnCntT
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; BkSgnCntT -&gt; m BkSgnCntT
gmapM :: (forall d. Data d =&gt; d -&gt; m d) -&gt; BkSgnCntT -&gt; m BkSgnCntT
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; BkSgnCntT -&gt; m BkSgnCntT
gmapQi :: Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; BkSgnCntT -&gt; u
$cgmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; BkSgnCntT -&gt; u
gmapQ :: (forall d. Data d =&gt; d -&gt; u) -&gt; BkSgnCntT -&gt; [u]
$cgmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; BkSgnCntT -&gt; [u]
gmapQr :: (r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; BkSgnCntT -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; BkSgnCntT -&gt; r
gmapQl :: (r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; BkSgnCntT -&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; BkSgnCntT -&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; BkSgnCntT -&gt; BkSgnCntT
$cgmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; BkSgnCntT -&gt; BkSgnCntT
dataCast2 :: (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c BkSgnCntT)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c BkSgnCntT)
dataCast1 :: (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c BkSgnCntT)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c BkSgnCntT)
dataTypeOf :: BkSgnCntT -&gt; DataType
$cdataTypeOf :: BkSgnCntT -&gt; DataType
toConstr :: BkSgnCntT -&gt; Constr
$ctoConstr :: BkSgnCntT -&gt; Constr
gunfold :: (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c BkSgnCntT
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c BkSgnCntT
gfoldl :: (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; BkSgnCntT -&gt; c BkSgnCntT
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; BkSgnCntT -&gt; c BkSgnCntT
$cp1Data :: Typeable BkSgnCntT
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">)</span><span>
</span><span id="line-97"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">newtype</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679557593"><span id="local-6989586621679557595"><span class="annot"><span class="annottext">BkSgnCntT -&gt; BkSgnCntT -&gt; Bool
(BkSgnCntT -&gt; BkSgnCntT -&gt; Bool)
-&gt; (BkSgnCntT -&gt; BkSgnCntT -&gt; Bool) -&gt; Eq BkSgnCntT
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: BkSgnCntT -&gt; BkSgnCntT -&gt; Bool
$c/= :: BkSgnCntT -&gt; BkSgnCntT -&gt; Bool
== :: BkSgnCntT -&gt; BkSgnCntT -&gt; Bool
$c== :: BkSgnCntT -&gt; BkSgnCntT -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679557578"><span id="local-6989586621679557580"><span id="local-6989586621679557582"><span id="local-6989586621679557584"><span id="local-6989586621679557586"><span id="local-6989586621679557588"><span id="local-6989586621679557590"><span class="annot"><span class="annottext">Eq BkSgnCntT
Eq BkSgnCntT
-&gt; (BkSgnCntT -&gt; BkSgnCntT -&gt; Ordering)
-&gt; (BkSgnCntT -&gt; BkSgnCntT -&gt; Bool)
-&gt; (BkSgnCntT -&gt; BkSgnCntT -&gt; Bool)
-&gt; (BkSgnCntT -&gt; BkSgnCntT -&gt; Bool)
-&gt; (BkSgnCntT -&gt; BkSgnCntT -&gt; Bool)
-&gt; (BkSgnCntT -&gt; BkSgnCntT -&gt; BkSgnCntT)
-&gt; (BkSgnCntT -&gt; BkSgnCntT -&gt; BkSgnCntT)
-&gt; Ord BkSgnCntT
BkSgnCntT -&gt; BkSgnCntT -&gt; Bool
BkSgnCntT -&gt; BkSgnCntT -&gt; Ordering
BkSgnCntT -&gt; BkSgnCntT -&gt; BkSgnCntT
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: BkSgnCntT -&gt; BkSgnCntT -&gt; BkSgnCntT
$cmin :: BkSgnCntT -&gt; BkSgnCntT -&gt; BkSgnCntT
max :: BkSgnCntT -&gt; BkSgnCntT -&gt; BkSgnCntT
$cmax :: BkSgnCntT -&gt; BkSgnCntT -&gt; BkSgnCntT
&gt;= :: BkSgnCntT -&gt; BkSgnCntT -&gt; Bool
$c&gt;= :: BkSgnCntT -&gt; BkSgnCntT -&gt; Bool
&gt; :: BkSgnCntT -&gt; BkSgnCntT -&gt; Bool
$c&gt; :: BkSgnCntT -&gt; BkSgnCntT -&gt; Bool
&lt;= :: BkSgnCntT -&gt; BkSgnCntT -&gt; Bool
$c&lt;= :: BkSgnCntT -&gt; BkSgnCntT -&gt; Bool
&lt; :: BkSgnCntT -&gt; BkSgnCntT -&gt; Bool
$c&lt; :: BkSgnCntT -&gt; BkSgnCntT -&gt; Bool
compare :: BkSgnCntT -&gt; BkSgnCntT -&gt; Ordering
$ccompare :: BkSgnCntT -&gt; BkSgnCntT -&gt; Ordering
$cp1Ord :: Eq BkSgnCntT
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679557574"><span id="local-6989586621679557576"><span class="annot"><span class="annottext">Int -&gt; BkSgnCntT -&gt; Int
BkSgnCntT -&gt; Int
(Int -&gt; BkSgnCntT -&gt; Int)
-&gt; (BkSgnCntT -&gt; Int) -&gt; Hashable BkSgnCntT
forall a. (Int -&gt; a -&gt; Int) -&gt; (a -&gt; Int) -&gt; Hashable a
hash :: BkSgnCntT -&gt; Int
$chash :: BkSgnCntT -&gt; Int
hashWithSalt :: Int -&gt; BkSgnCntT -&gt; Int
$chashWithSalt :: Int -&gt; BkSgnCntT -&gt; Int
</span><a href="#local-6989586621679557574"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Hashable</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679557560"><span id="local-6989586621679557562"><span id="local-6989586621679557564"><span id="local-6989586621679557566"><span id="local-6989586621679557568"><span id="local-6989586621679557570"><span id="local-6989586621679557572"><span class="annot"><span class="annottext">Integer -&gt; BkSgnCntT
BkSgnCntT -&gt; BkSgnCntT
BkSgnCntT -&gt; BkSgnCntT -&gt; BkSgnCntT
(BkSgnCntT -&gt; BkSgnCntT -&gt; BkSgnCntT)
-&gt; (BkSgnCntT -&gt; BkSgnCntT -&gt; BkSgnCntT)
-&gt; (BkSgnCntT -&gt; BkSgnCntT -&gt; BkSgnCntT)
-&gt; (BkSgnCntT -&gt; BkSgnCntT)
-&gt; (BkSgnCntT -&gt; BkSgnCntT)
-&gt; (BkSgnCntT -&gt; BkSgnCntT)
-&gt; (Integer -&gt; BkSgnCntT)
-&gt; Num BkSgnCntT
forall a.
(a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a)
-&gt; (a -&gt; a)
-&gt; (a -&gt; a)
-&gt; (Integer -&gt; a)
-&gt; Num a
fromInteger :: Integer -&gt; BkSgnCntT
$cfromInteger :: Integer -&gt; BkSgnCntT
signum :: BkSgnCntT -&gt; BkSgnCntT
$csignum :: BkSgnCntT -&gt; BkSgnCntT
abs :: BkSgnCntT -&gt; BkSgnCntT
$cabs :: BkSgnCntT -&gt; BkSgnCntT
negate :: BkSgnCntT -&gt; BkSgnCntT
$cnegate :: BkSgnCntT -&gt; BkSgnCntT
* :: BkSgnCntT -&gt; BkSgnCntT -&gt; BkSgnCntT
$c* :: BkSgnCntT -&gt; BkSgnCntT -&gt; BkSgnCntT
- :: BkSgnCntT -&gt; BkSgnCntT -&gt; BkSgnCntT
$c- :: BkSgnCntT -&gt; BkSgnCntT -&gt; BkSgnCntT
+ :: BkSgnCntT -&gt; BkSgnCntT -&gt; BkSgnCntT
$c+ :: BkSgnCntT -&gt; BkSgnCntT -&gt; BkSgnCntT
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Num</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679557553"><span id="local-6989586621679557555"><span id="local-6989586621679557557"><span class="annot"><span class="annottext">Num BkSgnCntT
Num BkSgnCntT
-&gt; (BkSgnCntT -&gt; BkSgnCntT -&gt; BkSgnCntT)
-&gt; (BkSgnCntT -&gt; BkSgnCntT)
-&gt; (Rational -&gt; BkSgnCntT)
-&gt; Fractional BkSgnCntT
Rational -&gt; BkSgnCntT
BkSgnCntT -&gt; BkSgnCntT
BkSgnCntT -&gt; BkSgnCntT -&gt; BkSgnCntT
forall a.
Num a
-&gt; (a -&gt; a -&gt; a) -&gt; (a -&gt; a) -&gt; (Rational -&gt; a) -&gt; Fractional a
fromRational :: Rational -&gt; BkSgnCntT
$cfromRational :: Rational -&gt; BkSgnCntT
recip :: BkSgnCntT -&gt; BkSgnCntT
$crecip :: BkSgnCntT -&gt; BkSgnCntT
/ :: BkSgnCntT -&gt; BkSgnCntT -&gt; BkSgnCntT
$c/ :: BkSgnCntT -&gt; BkSgnCntT -&gt; BkSgnCntT
$cp1Fractional :: Num BkSgnCntT
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Fractional</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679557547"><span id="local-6989586621679557549"><span id="local-6989586621679557551"><span class="annot"><span class="annottext">Context -&gt; BkSgnCntT -&gt; IO (Maybe ThunkInfo)
Proxy BkSgnCntT -&gt; String
(Context -&gt; BkSgnCntT -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; BkSgnCntT -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy BkSgnCntT -&gt; String)
-&gt; NoThunks BkSgnCntT
forall a.
(Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy a -&gt; String)
-&gt; NoThunks a
showTypeOf :: Proxy BkSgnCntT -&gt; String
$cshowTypeOf :: Proxy BkSgnCntT -&gt; String
wNoThunks :: Context -&gt; BkSgnCntT -&gt; IO (Maybe ThunkInfo)
$cwNoThunks :: Context -&gt; BkSgnCntT -&gt; IO (Maybe ThunkInfo)
noThunks :: Context -&gt; BkSgnCntT -&gt; IO (Maybe ThunkInfo)
$cnoThunks :: Context -&gt; BkSgnCntT -&gt; IO (Maybe ThunkInfo)
</span><a href="#local-6989586621679557547"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">NoThunks</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-98"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">anyclass</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679557545"><span class="annot"><span class="annottext">BkSgnCntT -&gt; Seq TypeRep
(BkSgnCntT -&gt; Seq TypeRep) -&gt; HasTypeReps BkSgnCntT
forall a. (a -&gt; Seq TypeRep) -&gt; HasTypeReps a
typeReps :: BkSgnCntT -&gt; Seq TypeRep
$ctypeReps :: BkSgnCntT -&gt; Seq TypeRep
</span><a href="#local-6989586621679557545"><span class="hs-identifier hs-var hs-var hs-var hs-var">HasTypeReps</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-99"></span><span>
</span><span id="line-100"></span><span class="hs-comment">-- | Protocol parameters.</span><span>
</span><span id="line-101"></span><span class="hs-comment">--</span><span>
</span><span id="line-102"></span><span id="local-6989586621679557543"><span id="local-6989586621679557544"></span></span><span class="hs-keyword">data</span><span> </span><span id="PParams"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#PParams"><span class="hs-identifier hs-var">PParams</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="PParams"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#PParams"><span class="hs-identifier hs-var">PParams</span></a></span></span><span> </span><span class="hs-comment">-- TODO: this should be a module of @byron-spec-ledger@.</span><span>
</span><span id="line-103"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="_maxBkSz"><span class="annot"><span class="annottext">PParams -&gt; Natural
</span><a href="Byron.Spec.Ledger.Update.html#_maxBkSz"><span class="hs-identifier hs-var hs-var">_maxBkSz</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Natural</span></span><span>
</span><span id="line-104"></span><span>  </span><span class="hs-comment">-- ^ Maximum (abstract) block size in words</span><span>
</span><span id="line-105"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="_maxHdrSz"><span class="annot"><span class="annottext">PParams -&gt; Natural
</span><a href="Byron.Spec.Ledger.Update.html#_maxHdrSz"><span class="hs-identifier hs-var hs-var">_maxHdrSz</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Natural</span></span><span>
</span><span id="line-106"></span><span>  </span><span class="hs-comment">-- ^ Maximum (abstract) block header size in words</span><span>
</span><span id="line-107"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="_maxTxSz"><span class="annot"><span class="annottext">PParams -&gt; Natural
</span><a href="Byron.Spec.Ledger.Update.html#_maxTxSz"><span class="hs-identifier hs-var hs-var">_maxTxSz</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Natural</span></span><span>
</span><span id="line-108"></span><span>  </span><span class="hs-comment">-- ^ Maximum (abstract) transaction size in words</span><span>
</span><span id="line-109"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="_maxPropSz"><span class="annot"><span class="annottext">PParams -&gt; Natural
</span><a href="Byron.Spec.Ledger.Update.html#_maxPropSz"><span class="hs-identifier hs-var hs-var">_maxPropSz</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Natural</span></span><span>
</span><span id="line-110"></span><span>  </span><span class="hs-comment">-- ^ Maximum (abstract) update proposal size in words</span><span>
</span><span id="line-111"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="_bkSgnCntT"><span class="annot"><span class="annottext">PParams -&gt; BkSgnCntT
</span><a href="Byron.Spec.Ledger.Update.html#_bkSgnCntT"><span class="hs-identifier hs-var hs-var">_bkSgnCntT</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#BkSgnCntT"><span class="hs-identifier hs-type">BkSgnCntT</span></a></span><span>
</span><span id="line-112"></span><span>  </span><span class="hs-comment">-- ^ Fraction [0, 1] of the blocks that can be signed by any given key in a</span><span>
</span><span id="line-113"></span><span>  </span><span class="hs-comment">-- window of lenght '_bkSgnCntW'. This value will be typically between 1/5</span><span>
</span><span id="line-114"></span><span>  </span><span class="hs-comment">-- and 1/4</span><span>
</span><span id="line-115"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="_bkSlotsPerEpoch"><span class="annot"><span class="annottext">PParams -&gt; SlotCount
</span><a href="Byron.Spec.Ledger.Update.html#_bkSlotsPerEpoch"><span class="hs-identifier hs-var hs-var">_bkSlotsPerEpoch</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#SlotCount"><span class="hs-identifier hs-type">Core.SlotCount</span></a></span><span>
</span><span id="line-116"></span><span>  </span><span class="hs-comment">-- ^ Number of slots in an epoch.</span><span>
</span><span id="line-117"></span><span>  </span><span class="hs-comment">-- TODO: this should be removed since the number of slots per epoch should remain constant.</span><span>
</span><span id="line-118"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="_upTtl"><span class="annot"><span class="annottext">PParams -&gt; SlotCount
</span><a href="Byron.Spec.Ledger.Update.html#_upTtl"><span class="hs-identifier hs-var hs-var">_upTtl</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#SlotCount"><span class="hs-identifier hs-type">Core.SlotCount</span></a></span><span>
</span><span id="line-119"></span><span>  </span><span class="hs-comment">-- ^ Update proposal TTL in slots</span><span>
</span><span id="line-120"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="_scriptVersion"><span class="annot"><span class="annottext">PParams -&gt; Natural
</span><a href="Byron.Spec.Ledger.Update.html#_scriptVersion"><span class="hs-identifier hs-var hs-var">_scriptVersion</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Natural</span></span><span>
</span><span id="line-121"></span><span>  </span><span class="hs-comment">-- ^ Script version</span><span>
</span><span id="line-122"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="_upAdptThd"><span class="annot"><span class="annottext">PParams -&gt; UpAdptThd
</span><a href="Byron.Spec.Ledger.Update.html#_upAdptThd"><span class="hs-identifier hs-var hs-var">_upAdptThd</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpAdptThd"><span class="hs-identifier hs-type">UpAdptThd</span></a></span><span>
</span><span id="line-123"></span><span>  </span><span class="hs-comment">-- ^ Update adoption threshold: a proportion of block issuers that have to</span><span>
</span><span id="line-124"></span><span>  </span><span class="hs-comment">-- endorse a given version to become candidate for adoption</span><span>
</span><span id="line-125"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="_factorA"><span class="annot"><span class="annottext">PParams -&gt; FactorA
</span><a href="Byron.Spec.Ledger.Update.html#_factorA"><span class="hs-identifier hs-var hs-var">_factorA</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#FactorA"><span class="hs-identifier hs-type">FactorA</span></a></span><span> </span><span class="hs-comment">-- TODO: these should have type 'Word64', like in `cardano-ledger`.</span><span>
</span><span id="line-126"></span><span>  </span><span class="hs-comment">-- ^ Minimum fees per transaction</span><span>
</span><span id="line-127"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="_factorB"><span class="annot"><span class="annottext">PParams -&gt; FactorB
</span><a href="Byron.Spec.Ledger.Update.html#_factorB"><span class="hs-identifier hs-var hs-var">_factorB</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#FactorB"><span class="hs-identifier hs-type">FactorB</span></a></span><span>
</span><span id="line-128"></span><span>  </span><span class="hs-comment">-- ^ Additional fees per transaction size</span><span>
</span><span id="line-129"></span><span>  </span><span class="hs-special">}</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679557527"><span id="local-6989586621679557529"><span class="annot"><span class="annottext">PParams -&gt; PParams -&gt; Bool
(PParams -&gt; PParams -&gt; Bool)
-&gt; (PParams -&gt; PParams -&gt; Bool) -&gt; Eq PParams
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: PParams -&gt; PParams -&gt; Bool
$c/= :: PParams -&gt; PParams -&gt; Bool
== :: PParams -&gt; PParams -&gt; Bool
$c== :: PParams -&gt; PParams -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. PParams -&gt; Rep PParams x)
-&gt; (forall x. Rep PParams x -&gt; PParams) -&gt; Generic PParams
forall x. Rep PParams x -&gt; PParams
forall x. PParams -&gt; Rep PParams x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep PParams x -&gt; PParams
$cfrom :: forall x. PParams -&gt; Rep PParams x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679557510"><span id="local-6989586621679557512"><span id="local-6989586621679557514"><span id="local-6989586621679557516"><span id="local-6989586621679557518"><span id="local-6989586621679557520"><span id="local-6989586621679557522"><span class="annot"><span class="annottext">Eq PParams
Eq PParams
-&gt; (PParams -&gt; PParams -&gt; Ordering)
-&gt; (PParams -&gt; PParams -&gt; Bool)
-&gt; (PParams -&gt; PParams -&gt; Bool)
-&gt; (PParams -&gt; PParams -&gt; Bool)
-&gt; (PParams -&gt; PParams -&gt; Bool)
-&gt; (PParams -&gt; PParams -&gt; PParams)
-&gt; (PParams -&gt; PParams -&gt; PParams)
-&gt; Ord PParams
PParams -&gt; PParams -&gt; Bool
PParams -&gt; PParams -&gt; Ordering
PParams -&gt; PParams -&gt; PParams
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: PParams -&gt; PParams -&gt; PParams
$cmin :: PParams -&gt; PParams -&gt; PParams
max :: PParams -&gt; PParams -&gt; PParams
$cmax :: PParams -&gt; PParams -&gt; PParams
&gt;= :: PParams -&gt; PParams -&gt; Bool
$c&gt;= :: PParams -&gt; PParams -&gt; Bool
&gt; :: PParams -&gt; PParams -&gt; Bool
$c&gt; :: PParams -&gt; PParams -&gt; Bool
&lt;= :: PParams -&gt; PParams -&gt; Bool
$c&lt;= :: PParams -&gt; PParams -&gt; Bool
&lt; :: PParams -&gt; PParams -&gt; Bool
$c&lt; :: PParams -&gt; PParams -&gt; Bool
compare :: PParams -&gt; PParams -&gt; Ordering
$ccompare :: PParams -&gt; PParams -&gt; Ordering
$cp1Ord :: Eq PParams
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679557504"><span id="local-6989586621679557506"><span id="local-6989586621679557508"><span class="annot"><span class="annottext">Int -&gt; PParams -&gt; ShowS
[PParams] -&gt; ShowS
PParams -&gt; String
(Int -&gt; PParams -&gt; ShowS)
-&gt; (PParams -&gt; String) -&gt; ([PParams] -&gt; ShowS) -&gt; Show PParams
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [PParams] -&gt; ShowS
$cshowList :: [PParams] -&gt; ShowS
show :: PParams -&gt; String
$cshow :: PParams -&gt; String
showsPrec :: Int -&gt; PParams -&gt; ShowS
$cshowsPrec :: Int -&gt; PParams -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679557500"><span id="local-6989586621679557502"><span class="annot"><span class="annottext">Int -&gt; PParams -&gt; Int
PParams -&gt; Int
(Int -&gt; PParams -&gt; Int) -&gt; (PParams -&gt; Int) -&gt; Hashable PParams
forall a. (Int -&gt; a -&gt; Int) -&gt; (a -&gt; Int) -&gt; Hashable a
hash :: PParams -&gt; Int
$chash :: PParams -&gt; Int
hashWithSalt :: Int -&gt; PParams -&gt; Int
$chashWithSalt :: Int -&gt; PParams -&gt; Int
</span><a href="#local-6989586621679557500"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Hashable</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="%24cPParams"><span id="%24tPParams"><span id="local-6989586621679557471"><span id="local-6989586621679557473"><span id="local-6989586621679557475"><span id="local-6989586621679557477"><span id="local-6989586621679557479"><span id="local-6989586621679557481"><span id="local-6989586621679557483"><span id="local-6989586621679557485"><span id="local-6989586621679557487"><span id="local-6989586621679557489"><span id="local-6989586621679557491"><span id="local-6989586621679557493"><span id="local-6989586621679557495"><span id="local-6989586621679557497"><span class="annot"><span class="annottext">Typeable PParams
DataType
Constr
Typeable PParams
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; PParams -&gt; c PParams)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c PParams)
-&gt; (PParams -&gt; Constr)
-&gt; (PParams -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c PParams))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c PParams))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; PParams -&gt; PParams)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; PParams -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; PParams -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; PParams -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; PParams -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; PParams -&gt; m PParams)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; PParams -&gt; m PParams)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; PParams -&gt; m PParams)
-&gt; Data PParams
PParams -&gt; DataType
PParams -&gt; Constr
(forall b. Data b =&gt; b -&gt; b) -&gt; PParams -&gt; PParams
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; PParams -&gt; c PParams
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c PParams
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; PParams -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; PParams -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; PParams -&gt; r
forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; PParams -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; PParams -&gt; m PParams
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; PParams -&gt; m PParams
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c PParams
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; PParams -&gt; c PParams
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c PParams)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c PParams)
$cPParams :: Constr
$tPParams :: DataType
gmapMo :: (forall d. Data d =&gt; d -&gt; m d) -&gt; PParams -&gt; m PParams
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; PParams -&gt; m PParams
gmapMp :: (forall d. Data d =&gt; d -&gt; m d) -&gt; PParams -&gt; m PParams
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; PParams -&gt; m PParams
gmapM :: (forall d. Data d =&gt; d -&gt; m d) -&gt; PParams -&gt; m PParams
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; PParams -&gt; m PParams
gmapQi :: Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; PParams -&gt; u
$cgmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; PParams -&gt; u
gmapQ :: (forall d. Data d =&gt; d -&gt; u) -&gt; PParams -&gt; [u]
$cgmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; PParams -&gt; [u]
gmapQr :: (r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; PParams -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; PParams -&gt; r
gmapQl :: (r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; PParams -&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; PParams -&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; PParams -&gt; PParams
$cgmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; PParams -&gt; PParams
dataCast2 :: (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c PParams)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c PParams)
dataCast1 :: (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c PParams)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c PParams)
dataTypeOf :: PParams -&gt; DataType
$cdataTypeOf :: PParams -&gt; DataType
toConstr :: PParams -&gt; Constr
$ctoConstr :: PParams -&gt; Constr
gunfold :: (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c PParams
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c PParams
gfoldl :: (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; PParams -&gt; c PParams
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; PParams -&gt; c PParams
$cp1Data :: Typeable PParams
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679557463"><span id="local-6989586621679557465"><span id="local-6989586621679557467"><span class="annot"><span class="annottext">Context -&gt; PParams -&gt; IO (Maybe ThunkInfo)
Proxy PParams -&gt; String
(Context -&gt; PParams -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; PParams -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy PParams -&gt; String)
-&gt; NoThunks PParams
forall a.
(Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy a -&gt; String)
-&gt; NoThunks a
showTypeOf :: Proxy PParams -&gt; String
$cshowTypeOf :: Proxy PParams -&gt; String
wNoThunks :: Context -&gt; PParams -&gt; IO (Maybe ThunkInfo)
$cwNoThunks :: Context -&gt; PParams -&gt; IO (Maybe ThunkInfo)
noThunks :: Context -&gt; PParams -&gt; IO (Maybe ThunkInfo)
$cnoThunks :: Context -&gt; PParams -&gt; IO (Maybe ThunkInfo)
</span><a href="#local-6989586621679557463"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">NoThunks</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-130"></span><span>
</span><span id="line-131"></span><span id="upTtl"><span id="upAdptThd"><span id="scriptVersion"><span id="maxTxSz"><span id="maxPropSz"><span id="maxHdrSz"><span id="maxBkSz"><span id="factorB"><span id="factorA"><span id="bkSlotsPerEpoch"><span id="bkSgnCntT"><span class="hs-identifier">makeLenses</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">PParams</span></span></span></span></span></span></span></span></span></span></span></span><span>
</span><span id="line-132"></span><span>
</span><span id="line-133"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679557450"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">HasTypeReps</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#PParams"><span class="hs-identifier hs-type">PParams</span></a></span></span><span>
</span><span id="line-134"></span><span>
</span><span id="line-135"></span><span id="local-6989586621679557448"><span id="local-6989586621679557449"></span></span><span class="hs-keyword">newtype</span><span> </span><span id="UpId"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpId"><span class="hs-identifier hs-var">UpId</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="UpId"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpId"><span class="hs-identifier hs-var">UpId</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-136"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(forall x. UpId -&gt; Rep UpId x)
-&gt; (forall x. Rep UpId x -&gt; UpId) -&gt; Generic UpId
forall x. Rep UpId x -&gt; UpId
forall x. UpId -&gt; Rep UpId x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep UpId x -&gt; UpId
$cfrom :: forall x. UpId -&gt; Rep UpId x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679557439"><span id="local-6989586621679557441"><span id="local-6989586621679557443"><span class="annot"><span class="annottext">Int -&gt; UpId -&gt; ShowS
[UpId] -&gt; ShowS
UpId -&gt; String
(Int -&gt; UpId -&gt; ShowS)
-&gt; (UpId -&gt; String) -&gt; ([UpId] -&gt; ShowS) -&gt; Show UpId
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [UpId] -&gt; ShowS
$cshowList :: [UpId] -&gt; ShowS
show :: UpId -&gt; String
$cshow :: UpId -&gt; String
showsPrec :: Int -&gt; UpId -&gt; ShowS
$cshowsPrec :: Int -&gt; UpId -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="%24cUpId"><span id="%24tUpId"><span id="local-6989586621679557410"><span id="local-6989586621679557412"><span id="local-6989586621679557414"><span id="local-6989586621679557416"><span id="local-6989586621679557418"><span id="local-6989586621679557420"><span id="local-6989586621679557422"><span id="local-6989586621679557424"><span id="local-6989586621679557426"><span id="local-6989586621679557428"><span id="local-6989586621679557430"><span id="local-6989586621679557432"><span id="local-6989586621679557434"><span id="local-6989586621679557436"><span class="annot"><span class="annottext">Typeable UpId
DataType
Constr
Typeable UpId
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; UpId -&gt; c UpId)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UpId)
-&gt; (UpId -&gt; Constr)
-&gt; (UpId -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UpId))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c UpId))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; UpId -&gt; UpId)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UpId -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UpId -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; UpId -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UpId -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; UpId -&gt; m UpId)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; UpId -&gt; m UpId)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; UpId -&gt; m UpId)
-&gt; Data UpId
UpId -&gt; DataType
UpId -&gt; Constr
(forall b. Data b =&gt; b -&gt; b) -&gt; UpId -&gt; UpId
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; UpId -&gt; c UpId
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UpId
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UpId -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; UpId -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UpId -&gt; r
forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UpId -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UpId -&gt; m UpId
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UpId -&gt; m UpId
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UpId
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; UpId -&gt; c UpId
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UpId)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c UpId)
$cUpId :: Constr
$tUpId :: DataType
gmapMo :: (forall d. Data d =&gt; d -&gt; m d) -&gt; UpId -&gt; m UpId
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UpId -&gt; m UpId
gmapMp :: (forall d. Data d =&gt; d -&gt; m d) -&gt; UpId -&gt; m UpId
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UpId -&gt; m UpId
gmapM :: (forall d. Data d =&gt; d -&gt; m d) -&gt; UpId -&gt; m UpId
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UpId -&gt; m UpId
gmapQi :: Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UpId -&gt; u
$cgmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UpId -&gt; u
gmapQ :: (forall d. Data d =&gt; d -&gt; u) -&gt; UpId -&gt; [u]
$cgmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; UpId -&gt; [u]
gmapQr :: (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UpId -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UpId -&gt; r
gmapQl :: (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UpId -&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UpId -&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; UpId -&gt; UpId
$cgmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; UpId -&gt; UpId
dataCast2 :: (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c UpId)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c UpId)
dataCast1 :: (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UpId)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UpId)
dataTypeOf :: UpId -&gt; DataType
$cdataTypeOf :: UpId -&gt; DataType
toConstr :: UpId -&gt; Constr
$ctoConstr :: UpId -&gt; Constr
gunfold :: (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UpId
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UpId
gfoldl :: (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; UpId -&gt; c UpId
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; UpId -&gt; c UpId
$cp1Data :: Typeable UpId
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">)</span><span>
</span><span id="line-137"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">newtype</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679557404"><span id="local-6989586621679557406"><span class="annot"><span class="annottext">UpId -&gt; UpId -&gt; Bool
(UpId -&gt; UpId -&gt; Bool) -&gt; (UpId -&gt; UpId -&gt; Bool) -&gt; Eq UpId
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: UpId -&gt; UpId -&gt; Bool
$c/= :: UpId -&gt; UpId -&gt; Bool
== :: UpId -&gt; UpId -&gt; Bool
$c== :: UpId -&gt; UpId -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679557389"><span id="local-6989586621679557391"><span id="local-6989586621679557393"><span id="local-6989586621679557395"><span id="local-6989586621679557397"><span id="local-6989586621679557399"><span id="local-6989586621679557401"><span class="annot"><span class="annottext">Eq UpId
Eq UpId
-&gt; (UpId -&gt; UpId -&gt; Ordering)
-&gt; (UpId -&gt; UpId -&gt; Bool)
-&gt; (UpId -&gt; UpId -&gt; Bool)
-&gt; (UpId -&gt; UpId -&gt; Bool)
-&gt; (UpId -&gt; UpId -&gt; Bool)
-&gt; (UpId -&gt; UpId -&gt; UpId)
-&gt; (UpId -&gt; UpId -&gt; UpId)
-&gt; Ord UpId
UpId -&gt; UpId -&gt; Bool
UpId -&gt; UpId -&gt; Ordering
UpId -&gt; UpId -&gt; UpId
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: UpId -&gt; UpId -&gt; UpId
$cmin :: UpId -&gt; UpId -&gt; UpId
max :: UpId -&gt; UpId -&gt; UpId
$cmax :: UpId -&gt; UpId -&gt; UpId
&gt;= :: UpId -&gt; UpId -&gt; Bool
$c&gt;= :: UpId -&gt; UpId -&gt; Bool
&gt; :: UpId -&gt; UpId -&gt; Bool
$c&gt; :: UpId -&gt; UpId -&gt; Bool
&lt;= :: UpId -&gt; UpId -&gt; Bool
$c&lt;= :: UpId -&gt; UpId -&gt; Bool
&lt; :: UpId -&gt; UpId -&gt; Bool
$c&lt; :: UpId -&gt; UpId -&gt; Bool
compare :: UpId -&gt; UpId -&gt; Ordering
$ccompare :: UpId -&gt; UpId -&gt; Ordering
$cp1Ord :: Eq UpId
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679557385"><span id="local-6989586621679557387"><span class="annot"><span class="annottext">Int -&gt; UpId -&gt; Int
UpId -&gt; Int
(Int -&gt; UpId -&gt; Int) -&gt; (UpId -&gt; Int) -&gt; Hashable UpId
forall a. (Int -&gt; a -&gt; Int) -&gt; (a -&gt; Int) -&gt; Hashable a
hash :: UpId -&gt; Int
$chash :: UpId -&gt; Int
hashWithSalt :: Int -&gt; UpId -&gt; Int
$chashWithSalt :: Int -&gt; UpId -&gt; Int
</span><a href="#local-6989586621679557385"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Hashable</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679557379"><span id="local-6989586621679557381"><span id="local-6989586621679557383"><span class="annot"><span class="annottext">Context -&gt; UpId -&gt; IO (Maybe ThunkInfo)
Proxy UpId -&gt; String
(Context -&gt; UpId -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; UpId -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy UpId -&gt; String)
-&gt; NoThunks UpId
forall a.
(Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy a -&gt; String)
-&gt; NoThunks a
showTypeOf :: Proxy UpId -&gt; String
$cshowTypeOf :: Proxy UpId -&gt; String
wNoThunks :: Context -&gt; UpId -&gt; IO (Maybe ThunkInfo)
$cwNoThunks :: Context -&gt; UpId -&gt; IO (Maybe ThunkInfo)
noThunks :: Context -&gt; UpId -&gt; IO (Maybe ThunkInfo)
$cnoThunks :: Context -&gt; UpId -&gt; IO (Maybe ThunkInfo)
</span><a href="#local-6989586621679557379"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">NoThunks</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-138"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">anyclass</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679557377"><span class="annot"><span class="annottext">UpId -&gt; Seq TypeRep
(UpId -&gt; Seq TypeRep) -&gt; HasTypeReps UpId
forall a. (a -&gt; Seq TypeRep) -&gt; HasTypeReps a
typeReps :: UpId -&gt; Seq TypeRep
$ctypeReps :: UpId -&gt; Seq TypeRep
</span><a href="#local-6989586621679557377"><span class="hs-identifier hs-var hs-var hs-var hs-var">HasTypeReps</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-139"></span><span>
</span><span id="line-140"></span><span class="hs-comment">-- | Protocol version</span><span>
</span><span id="line-141"></span><span id="local-6989586621679557375"><span id="local-6989586621679557376"></span></span><span class="hs-keyword">data</span><span> </span><span id="ProtVer"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ProtVer"><span class="hs-identifier hs-var">ProtVer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ProtVer"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ProtVer"><span class="hs-identifier hs-var">ProtVer</span></a></span></span><span>
</span><span id="line-142"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="_pvMaj"><span class="annot"><span class="annottext">ProtVer -&gt; Natural
</span><a href="Byron.Spec.Ledger.Update.html#_pvMaj"><span class="hs-identifier hs-var hs-var">_pvMaj</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Natural</span></span><span>
</span><span id="line-143"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="_pvMin"><span class="annot"><span class="annottext">ProtVer -&gt; Natural
</span><a href="Byron.Spec.Ledger.Update.html#_pvMin"><span class="hs-identifier hs-var hs-var">_pvMin</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Natural</span></span><span>
</span><span id="line-144"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="_pvAlt"><span class="annot"><span class="annottext">ProtVer -&gt; Natural
</span><a href="Byron.Spec.Ledger.Update.html#_pvAlt"><span class="hs-identifier hs-var hs-var">_pvAlt</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Natural</span></span><span>
</span><span id="line-145"></span><span>  </span><span class="hs-special">}</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679557367"><span id="local-6989586621679557369"><span class="annot"><span class="annottext">ProtVer -&gt; ProtVer -&gt; Bool
(ProtVer -&gt; ProtVer -&gt; Bool)
-&gt; (ProtVer -&gt; ProtVer -&gt; Bool) -&gt; Eq ProtVer
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: ProtVer -&gt; ProtVer -&gt; Bool
$c/= :: ProtVer -&gt; ProtVer -&gt; Bool
== :: ProtVer -&gt; ProtVer -&gt; Bool
$c== :: ProtVer -&gt; ProtVer -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. ProtVer -&gt; Rep ProtVer x)
-&gt; (forall x. Rep ProtVer x -&gt; ProtVer) -&gt; Generic ProtVer
forall x. Rep ProtVer x -&gt; ProtVer
forall x. ProtVer -&gt; Rep ProtVer x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep ProtVer x -&gt; ProtVer
$cfrom :: forall x. ProtVer -&gt; Rep ProtVer x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679557350"><span id="local-6989586621679557352"><span id="local-6989586621679557354"><span id="local-6989586621679557356"><span id="local-6989586621679557358"><span id="local-6989586621679557360"><span id="local-6989586621679557362"><span class="annot"><span class="annottext">Eq ProtVer
Eq ProtVer
-&gt; (ProtVer -&gt; ProtVer -&gt; Ordering)
-&gt; (ProtVer -&gt; ProtVer -&gt; Bool)
-&gt; (ProtVer -&gt; ProtVer -&gt; Bool)
-&gt; (ProtVer -&gt; ProtVer -&gt; Bool)
-&gt; (ProtVer -&gt; ProtVer -&gt; Bool)
-&gt; (ProtVer -&gt; ProtVer -&gt; ProtVer)
-&gt; (ProtVer -&gt; ProtVer -&gt; ProtVer)
-&gt; Ord ProtVer
ProtVer -&gt; ProtVer -&gt; Bool
ProtVer -&gt; ProtVer -&gt; Ordering
ProtVer -&gt; ProtVer -&gt; ProtVer
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: ProtVer -&gt; ProtVer -&gt; ProtVer
$cmin :: ProtVer -&gt; ProtVer -&gt; ProtVer
max :: ProtVer -&gt; ProtVer -&gt; ProtVer
$cmax :: ProtVer -&gt; ProtVer -&gt; ProtVer
&gt;= :: ProtVer -&gt; ProtVer -&gt; Bool
$c&gt;= :: ProtVer -&gt; ProtVer -&gt; Bool
&gt; :: ProtVer -&gt; ProtVer -&gt; Bool
$c&gt; :: ProtVer -&gt; ProtVer -&gt; Bool
&lt;= :: ProtVer -&gt; ProtVer -&gt; Bool
$c&lt;= :: ProtVer -&gt; ProtVer -&gt; Bool
&lt; :: ProtVer -&gt; ProtVer -&gt; Bool
$c&lt; :: ProtVer -&gt; ProtVer -&gt; Bool
compare :: ProtVer -&gt; ProtVer -&gt; Ordering
$ccompare :: ProtVer -&gt; ProtVer -&gt; Ordering
$cp1Ord :: Eq ProtVer
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679557344"><span id="local-6989586621679557346"><span id="local-6989586621679557348"><span class="annot"><span class="annottext">Int -&gt; ProtVer -&gt; ShowS
[ProtVer] -&gt; ShowS
ProtVer -&gt; String
(Int -&gt; ProtVer -&gt; ShowS)
-&gt; (ProtVer -&gt; String) -&gt; ([ProtVer] -&gt; ShowS) -&gt; Show ProtVer
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [ProtVer] -&gt; ShowS
$cshowList :: [ProtVer] -&gt; ShowS
show :: ProtVer -&gt; String
$cshow :: ProtVer -&gt; String
showsPrec :: Int -&gt; ProtVer -&gt; ShowS
$cshowsPrec :: Int -&gt; ProtVer -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679557340"><span id="local-6989586621679557342"><span class="annot"><span class="annottext">Int -&gt; ProtVer -&gt; Int
ProtVer -&gt; Int
(Int -&gt; ProtVer -&gt; Int) -&gt; (ProtVer -&gt; Int) -&gt; Hashable ProtVer
forall a. (Int -&gt; a -&gt; Int) -&gt; (a -&gt; Int) -&gt; Hashable a
hash :: ProtVer -&gt; Int
$chash :: ProtVer -&gt; Int
hashWithSalt :: Int -&gt; ProtVer -&gt; Int
$chashWithSalt :: Int -&gt; ProtVer -&gt; Int
</span><a href="#local-6989586621679557340"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Hashable</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="%24cProtVer"><span id="%24tProtVer"><span id="local-6989586621679557311"><span id="local-6989586621679557313"><span id="local-6989586621679557315"><span id="local-6989586621679557317"><span id="local-6989586621679557319"><span id="local-6989586621679557321"><span id="local-6989586621679557323"><span id="local-6989586621679557325"><span id="local-6989586621679557327"><span id="local-6989586621679557329"><span id="local-6989586621679557331"><span id="local-6989586621679557333"><span id="local-6989586621679557335"><span id="local-6989586621679557337"><span class="annot"><span class="annottext">Typeable ProtVer
DataType
Constr
Typeable ProtVer
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; ProtVer -&gt; c ProtVer)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c ProtVer)
-&gt; (ProtVer -&gt; Constr)
-&gt; (ProtVer -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c ProtVer))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c ProtVer))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; ProtVer -&gt; ProtVer)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ProtVer -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ProtVer -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; ProtVer -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; ProtVer -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; ProtVer -&gt; m ProtVer)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; ProtVer -&gt; m ProtVer)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; ProtVer -&gt; m ProtVer)
-&gt; Data ProtVer
ProtVer -&gt; DataType
ProtVer -&gt; Constr
(forall b. Data b =&gt; b -&gt; b) -&gt; ProtVer -&gt; ProtVer
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; ProtVer -&gt; c ProtVer
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c ProtVer
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; ProtVer -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; ProtVer -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ProtVer -&gt; r
forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ProtVer -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ProtVer -&gt; m ProtVer
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ProtVer -&gt; m ProtVer
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c ProtVer
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; ProtVer -&gt; c ProtVer
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c ProtVer)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c ProtVer)
$cProtVer :: Constr
$tProtVer :: DataType
gmapMo :: (forall d. Data d =&gt; d -&gt; m d) -&gt; ProtVer -&gt; m ProtVer
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ProtVer -&gt; m ProtVer
gmapMp :: (forall d. Data d =&gt; d -&gt; m d) -&gt; ProtVer -&gt; m ProtVer
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ProtVer -&gt; m ProtVer
gmapM :: (forall d. Data d =&gt; d -&gt; m d) -&gt; ProtVer -&gt; m ProtVer
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ProtVer -&gt; m ProtVer
gmapQi :: Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; ProtVer -&gt; u
$cgmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; ProtVer -&gt; u
gmapQ :: (forall d. Data d =&gt; d -&gt; u) -&gt; ProtVer -&gt; [u]
$cgmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; ProtVer -&gt; [u]
gmapQr :: (r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ProtVer -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ProtVer -&gt; r
gmapQl :: (r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ProtVer -&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ProtVer -&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; ProtVer -&gt; ProtVer
$cgmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; ProtVer -&gt; ProtVer
dataCast2 :: (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c ProtVer)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c ProtVer)
dataCast1 :: (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c ProtVer)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c ProtVer)
dataTypeOf :: ProtVer -&gt; DataType
$cdataTypeOf :: ProtVer -&gt; DataType
toConstr :: ProtVer -&gt; Constr
$ctoConstr :: ProtVer -&gt; Constr
gunfold :: (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c ProtVer
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c ProtVer
gfoldl :: (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; ProtVer -&gt; c ProtVer
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; ProtVer -&gt; c ProtVer
$cp1Data :: Typeable ProtVer
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679557303"><span id="local-6989586621679557305"><span id="local-6989586621679557307"><span class="annot"><span class="annottext">Context -&gt; ProtVer -&gt; IO (Maybe ThunkInfo)
Proxy ProtVer -&gt; String
(Context -&gt; ProtVer -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; ProtVer -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy ProtVer -&gt; String)
-&gt; NoThunks ProtVer
forall a.
(Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy a -&gt; String)
-&gt; NoThunks a
showTypeOf :: Proxy ProtVer -&gt; String
$cshowTypeOf :: Proxy ProtVer -&gt; String
wNoThunks :: Context -&gt; ProtVer -&gt; IO (Maybe ThunkInfo)
$cwNoThunks :: Context -&gt; ProtVer -&gt; IO (Maybe ThunkInfo)
noThunks :: Context -&gt; ProtVer -&gt; IO (Maybe ThunkInfo)
$cnoThunks :: Context -&gt; ProtVer -&gt; IO (Maybe ThunkInfo)
</span><a href="#local-6989586621679557303"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">NoThunks</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-146"></span><span>
</span><span id="line-147"></span><span id="pvMin"><span id="pvMaj"><span id="pvAlt"><span class="hs-identifier">makeLenses</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">ProtVer</span></span></span></span><span>
</span><span id="line-148"></span><span>
</span><span id="line-149"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679557298"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">HasTypeReps</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ProtVer"><span class="hs-identifier hs-type">ProtVer</span></a></span></span><span>
</span><span id="line-150"></span><span>
</span><span id="line-151"></span><span id="local-6989586621679557296"><span id="local-6989586621679557297"></span></span><span class="hs-keyword">newtype</span><span> </span><span id="ApName"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ApName"><span class="hs-identifier hs-var">ApName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ApName"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ApName"><span class="hs-identifier hs-var">ApName</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-152"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(forall x. ApName -&gt; Rep ApName x)
-&gt; (forall x. Rep ApName x -&gt; ApName) -&gt; Generic ApName
forall x. Rep ApName x -&gt; ApName
forall x. ApName -&gt; Rep ApName x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep ApName x -&gt; ApName
$cfrom :: forall x. ApName -&gt; Rep ApName x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679557287"><span id="local-6989586621679557289"><span id="local-6989586621679557291"><span class="annot"><span class="annottext">Int -&gt; ApName -&gt; ShowS
[ApName] -&gt; ShowS
ApName -&gt; String
(Int -&gt; ApName -&gt; ShowS)
-&gt; (ApName -&gt; String) -&gt; ([ApName] -&gt; ShowS) -&gt; Show ApName
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [ApName] -&gt; ShowS
$cshowList :: [ApName] -&gt; ShowS
show :: ApName -&gt; String
$cshow :: ApName -&gt; String
showsPrec :: Int -&gt; ApName -&gt; ShowS
$cshowsPrec :: Int -&gt; ApName -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="%24cApName"><span id="%24tApName"><span id="local-6989586621679557258"><span id="local-6989586621679557260"><span id="local-6989586621679557262"><span id="local-6989586621679557264"><span id="local-6989586621679557266"><span id="local-6989586621679557268"><span id="local-6989586621679557270"><span id="local-6989586621679557272"><span id="local-6989586621679557274"><span id="local-6989586621679557276"><span id="local-6989586621679557278"><span id="local-6989586621679557280"><span id="local-6989586621679557282"><span id="local-6989586621679557284"><span class="annot"><span class="annottext">Typeable ApName
DataType
Constr
Typeable ApName
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; ApName -&gt; c ApName)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c ApName)
-&gt; (ApName -&gt; Constr)
-&gt; (ApName -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c ApName))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c ApName))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; ApName -&gt; ApName)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ApName -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ApName -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; ApName -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; ApName -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; ApName -&gt; m ApName)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; ApName -&gt; m ApName)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; ApName -&gt; m ApName)
-&gt; Data ApName
ApName -&gt; DataType
ApName -&gt; Constr
(forall b. Data b =&gt; b -&gt; b) -&gt; ApName -&gt; ApName
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; ApName -&gt; c ApName
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c ApName
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; ApName -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; ApName -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ApName -&gt; r
forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ApName -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ApName -&gt; m ApName
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ApName -&gt; m ApName
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c ApName
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; ApName -&gt; c ApName
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c ApName)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c ApName)
$cApName :: Constr
$tApName :: DataType
gmapMo :: (forall d. Data d =&gt; d -&gt; m d) -&gt; ApName -&gt; m ApName
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ApName -&gt; m ApName
gmapMp :: (forall d. Data d =&gt; d -&gt; m d) -&gt; ApName -&gt; m ApName
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ApName -&gt; m ApName
gmapM :: (forall d. Data d =&gt; d -&gt; m d) -&gt; ApName -&gt; m ApName
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ApName -&gt; m ApName
gmapQi :: Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; ApName -&gt; u
$cgmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; ApName -&gt; u
gmapQ :: (forall d. Data d =&gt; d -&gt; u) -&gt; ApName -&gt; [u]
$cgmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; ApName -&gt; [u]
gmapQr :: (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ApName -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ApName -&gt; r
gmapQl :: (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ApName -&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ApName -&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; ApName -&gt; ApName
$cgmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; ApName -&gt; ApName
dataCast2 :: (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c ApName)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c ApName)
dataCast1 :: (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c ApName)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c ApName)
dataTypeOf :: ApName -&gt; DataType
$cdataTypeOf :: ApName -&gt; DataType
toConstr :: ApName -&gt; Constr
$ctoConstr :: ApName -&gt; Constr
gunfold :: (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c ApName
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c ApName
gfoldl :: (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; ApName -&gt; c ApName
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; ApName -&gt; c ApName
$cp1Data :: Typeable ApName
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">)</span><span>
</span><span id="line-153"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">newtype</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679557252"><span id="local-6989586621679557254"><span class="annot"><span class="annottext">ApName -&gt; ApName -&gt; Bool
(ApName -&gt; ApName -&gt; Bool)
-&gt; (ApName -&gt; ApName -&gt; Bool) -&gt; Eq ApName
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: ApName -&gt; ApName -&gt; Bool
$c/= :: ApName -&gt; ApName -&gt; Bool
== :: ApName -&gt; ApName -&gt; Bool
$c== :: ApName -&gt; ApName -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679557237"><span id="local-6989586621679557239"><span id="local-6989586621679557241"><span id="local-6989586621679557243"><span id="local-6989586621679557245"><span id="local-6989586621679557247"><span id="local-6989586621679557249"><span class="annot"><span class="annottext">Eq ApName
Eq ApName
-&gt; (ApName -&gt; ApName -&gt; Ordering)
-&gt; (ApName -&gt; ApName -&gt; Bool)
-&gt; (ApName -&gt; ApName -&gt; Bool)
-&gt; (ApName -&gt; ApName -&gt; Bool)
-&gt; (ApName -&gt; ApName -&gt; Bool)
-&gt; (ApName -&gt; ApName -&gt; ApName)
-&gt; (ApName -&gt; ApName -&gt; ApName)
-&gt; Ord ApName
ApName -&gt; ApName -&gt; Bool
ApName -&gt; ApName -&gt; Ordering
ApName -&gt; ApName -&gt; ApName
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: ApName -&gt; ApName -&gt; ApName
$cmin :: ApName -&gt; ApName -&gt; ApName
max :: ApName -&gt; ApName -&gt; ApName
$cmax :: ApName -&gt; ApName -&gt; ApName
&gt;= :: ApName -&gt; ApName -&gt; Bool
$c&gt;= :: ApName -&gt; ApName -&gt; Bool
&gt; :: ApName -&gt; ApName -&gt; Bool
$c&gt; :: ApName -&gt; ApName -&gt; Bool
&lt;= :: ApName -&gt; ApName -&gt; Bool
$c&lt;= :: ApName -&gt; ApName -&gt; Bool
&lt; :: ApName -&gt; ApName -&gt; Bool
$c&lt; :: ApName -&gt; ApName -&gt; Bool
compare :: ApName -&gt; ApName -&gt; Ordering
$ccompare :: ApName -&gt; ApName -&gt; Ordering
$cp1Ord :: Eq ApName
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679557233"><span id="local-6989586621679557235"><span class="annot"><span class="annottext">Int -&gt; ApName -&gt; Int
ApName -&gt; Int
(Int -&gt; ApName -&gt; Int) -&gt; (ApName -&gt; Int) -&gt; Hashable ApName
forall a. (Int -&gt; a -&gt; Int) -&gt; (a -&gt; Int) -&gt; Hashable a
hash :: ApName -&gt; Int
$chash :: ApName -&gt; Int
hashWithSalt :: Int -&gt; ApName -&gt; Int
$chashWithSalt :: Int -&gt; ApName -&gt; Int
</span><a href="#local-6989586621679557233"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Hashable</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679557227"><span id="local-6989586621679557229"><span id="local-6989586621679557231"><span class="annot"><span class="annottext">Context -&gt; ApName -&gt; IO (Maybe ThunkInfo)
Proxy ApName -&gt; String
(Context -&gt; ApName -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; ApName -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy ApName -&gt; String)
-&gt; NoThunks ApName
forall a.
(Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy a -&gt; String)
-&gt; NoThunks a
showTypeOf :: Proxy ApName -&gt; String
$cshowTypeOf :: Proxy ApName -&gt; String
wNoThunks :: Context -&gt; ApName -&gt; IO (Maybe ThunkInfo)
$cwNoThunks :: Context -&gt; ApName -&gt; IO (Maybe ThunkInfo)
noThunks :: Context -&gt; ApName -&gt; IO (Maybe ThunkInfo)
$cnoThunks :: Context -&gt; ApName -&gt; IO (Maybe ThunkInfo)
</span><a href="#local-6989586621679557227"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">NoThunks</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-154"></span><span>
</span><span id="line-155"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679557225"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">HasTypeReps</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ApName"><span class="hs-identifier hs-type">ApName</span></a></span></span><span>
</span><span id="line-156"></span><span>
</span><span id="line-157"></span><span class="hs-comment">-- | Application version</span><span>
</span><span id="line-158"></span><span id="local-6989586621679557223"><span id="local-6989586621679557224"></span></span><span class="hs-keyword">newtype</span><span> </span><span id="ApVer"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ApVer"><span class="hs-identifier hs-var">ApVer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ApVer"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ApVer"><span class="hs-identifier hs-var">ApVer</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Natural</span></span><span>
</span><span id="line-159"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(forall x. ApVer -&gt; Rep ApVer x)
-&gt; (forall x. Rep ApVer x -&gt; ApVer) -&gt; Generic ApVer
forall x. Rep ApVer x -&gt; ApVer
forall x. ApVer -&gt; Rep ApVer x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep ApVer x -&gt; ApVer
$cfrom :: forall x. ApVer -&gt; Rep ApVer x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679557214"><span id="local-6989586621679557216"><span id="local-6989586621679557218"><span class="annot"><span class="annottext">Int -&gt; ApVer -&gt; ShowS
[ApVer] -&gt; ShowS
ApVer -&gt; String
(Int -&gt; ApVer -&gt; ShowS)
-&gt; (ApVer -&gt; String) -&gt; ([ApVer] -&gt; ShowS) -&gt; Show ApVer
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [ApVer] -&gt; ShowS
$cshowList :: [ApVer] -&gt; ShowS
show :: ApVer -&gt; String
$cshow :: ApVer -&gt; String
showsPrec :: Int -&gt; ApVer -&gt; ShowS
$cshowsPrec :: Int -&gt; ApVer -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="%24cApVer"><span id="%24tApVer"><span id="local-6989586621679557185"><span id="local-6989586621679557187"><span id="local-6989586621679557189"><span id="local-6989586621679557191"><span id="local-6989586621679557193"><span id="local-6989586621679557195"><span id="local-6989586621679557197"><span id="local-6989586621679557199"><span id="local-6989586621679557201"><span id="local-6989586621679557203"><span id="local-6989586621679557205"><span id="local-6989586621679557207"><span id="local-6989586621679557209"><span id="local-6989586621679557211"><span class="annot"><span class="annottext">Typeable ApVer
DataType
Constr
Typeable ApVer
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; ApVer -&gt; c ApVer)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c ApVer)
-&gt; (ApVer -&gt; Constr)
-&gt; (ApVer -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c ApVer))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c ApVer))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; ApVer -&gt; ApVer)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ApVer -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ApVer -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; ApVer -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; ApVer -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; ApVer -&gt; m ApVer)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; ApVer -&gt; m ApVer)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; ApVer -&gt; m ApVer)
-&gt; Data ApVer
ApVer -&gt; DataType
ApVer -&gt; Constr
(forall b. Data b =&gt; b -&gt; b) -&gt; ApVer -&gt; ApVer
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; ApVer -&gt; c ApVer
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c ApVer
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; ApVer -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; ApVer -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ApVer -&gt; r
forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ApVer -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ApVer -&gt; m ApVer
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ApVer -&gt; m ApVer
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c ApVer
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; ApVer -&gt; c ApVer
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c ApVer)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c ApVer)
$cApVer :: Constr
$tApVer :: DataType
gmapMo :: (forall d. Data d =&gt; d -&gt; m d) -&gt; ApVer -&gt; m ApVer
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ApVer -&gt; m ApVer
gmapMp :: (forall d. Data d =&gt; d -&gt; m d) -&gt; ApVer -&gt; m ApVer
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ApVer -&gt; m ApVer
gmapM :: (forall d. Data d =&gt; d -&gt; m d) -&gt; ApVer -&gt; m ApVer
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ApVer -&gt; m ApVer
gmapQi :: Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; ApVer -&gt; u
$cgmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; ApVer -&gt; u
gmapQ :: (forall d. Data d =&gt; d -&gt; u) -&gt; ApVer -&gt; [u]
$cgmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; ApVer -&gt; [u]
gmapQr :: (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ApVer -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ApVer -&gt; r
gmapQl :: (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ApVer -&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ApVer -&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; ApVer -&gt; ApVer
$cgmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; ApVer -&gt; ApVer
dataCast2 :: (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c ApVer)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c ApVer)
dataCast1 :: (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c ApVer)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c ApVer)
dataTypeOf :: ApVer -&gt; DataType
$cdataTypeOf :: ApVer -&gt; DataType
toConstr :: ApVer -&gt; Constr
$ctoConstr :: ApVer -&gt; Constr
gunfold :: (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c ApVer
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c ApVer
gfoldl :: (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; ApVer -&gt; c ApVer
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; ApVer -&gt; c ApVer
$cp1Data :: Typeable ApVer
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">)</span><span>
</span><span id="line-160"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">newtype</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679557179"><span id="local-6989586621679557181"><span class="annot"><span class="annottext">ApVer -&gt; ApVer -&gt; Bool
(ApVer -&gt; ApVer -&gt; Bool) -&gt; (ApVer -&gt; ApVer -&gt; Bool) -&gt; Eq ApVer
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: ApVer -&gt; ApVer -&gt; Bool
$c/= :: ApVer -&gt; ApVer -&gt; Bool
== :: ApVer -&gt; ApVer -&gt; Bool
$c== :: ApVer -&gt; ApVer -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679557164"><span id="local-6989586621679557166"><span id="local-6989586621679557168"><span id="local-6989586621679557170"><span id="local-6989586621679557172"><span id="local-6989586621679557174"><span id="local-6989586621679557176"><span class="annot"><span class="annottext">Eq ApVer
Eq ApVer
-&gt; (ApVer -&gt; ApVer -&gt; Ordering)
-&gt; (ApVer -&gt; ApVer -&gt; Bool)
-&gt; (ApVer -&gt; ApVer -&gt; Bool)
-&gt; (ApVer -&gt; ApVer -&gt; Bool)
-&gt; (ApVer -&gt; ApVer -&gt; Bool)
-&gt; (ApVer -&gt; ApVer -&gt; ApVer)
-&gt; (ApVer -&gt; ApVer -&gt; ApVer)
-&gt; Ord ApVer
ApVer -&gt; ApVer -&gt; Bool
ApVer -&gt; ApVer -&gt; Ordering
ApVer -&gt; ApVer -&gt; ApVer
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: ApVer -&gt; ApVer -&gt; ApVer
$cmin :: ApVer -&gt; ApVer -&gt; ApVer
max :: ApVer -&gt; ApVer -&gt; ApVer
$cmax :: ApVer -&gt; ApVer -&gt; ApVer
&gt;= :: ApVer -&gt; ApVer -&gt; Bool
$c&gt;= :: ApVer -&gt; ApVer -&gt; Bool
&gt; :: ApVer -&gt; ApVer -&gt; Bool
$c&gt; :: ApVer -&gt; ApVer -&gt; Bool
&lt;= :: ApVer -&gt; ApVer -&gt; Bool
$c&lt;= :: ApVer -&gt; ApVer -&gt; Bool
&lt; :: ApVer -&gt; ApVer -&gt; Bool
$c&lt; :: ApVer -&gt; ApVer -&gt; Bool
compare :: ApVer -&gt; ApVer -&gt; Ordering
$ccompare :: ApVer -&gt; ApVer -&gt; Ordering
$cp1Ord :: Eq ApVer
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679557150"><span id="local-6989586621679557152"><span id="local-6989586621679557154"><span id="local-6989586621679557156"><span id="local-6989586621679557158"><span id="local-6989586621679557160"><span id="local-6989586621679557162"><span class="annot"><span class="annottext">Integer -&gt; ApVer
ApVer -&gt; ApVer
ApVer -&gt; ApVer -&gt; ApVer
(ApVer -&gt; ApVer -&gt; ApVer)
-&gt; (ApVer -&gt; ApVer -&gt; ApVer)
-&gt; (ApVer -&gt; ApVer -&gt; ApVer)
-&gt; (ApVer -&gt; ApVer)
-&gt; (ApVer -&gt; ApVer)
-&gt; (ApVer -&gt; ApVer)
-&gt; (Integer -&gt; ApVer)
-&gt; Num ApVer
forall a.
(a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a)
-&gt; (a -&gt; a)
-&gt; (a -&gt; a)
-&gt; (Integer -&gt; a)
-&gt; Num a
fromInteger :: Integer -&gt; ApVer
$cfromInteger :: Integer -&gt; ApVer
signum :: ApVer -&gt; ApVer
$csignum :: ApVer -&gt; ApVer
abs :: ApVer -&gt; ApVer
$cabs :: ApVer -&gt; ApVer
negate :: ApVer -&gt; ApVer
$cnegate :: ApVer -&gt; ApVer
* :: ApVer -&gt; ApVer -&gt; ApVer
$c* :: ApVer -&gt; ApVer -&gt; ApVer
- :: ApVer -&gt; ApVer -&gt; ApVer
$c- :: ApVer -&gt; ApVer -&gt; ApVer
+ :: ApVer -&gt; ApVer -&gt; ApVer
$c+ :: ApVer -&gt; ApVer -&gt; ApVer
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Num</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679557146"><span id="local-6989586621679557148"><span class="annot"><span class="annottext">Int -&gt; ApVer -&gt; Int
ApVer -&gt; Int
(Int -&gt; ApVer -&gt; Int) -&gt; (ApVer -&gt; Int) -&gt; Hashable ApVer
forall a. (Int -&gt; a -&gt; Int) -&gt; (a -&gt; Int) -&gt; Hashable a
hash :: ApVer -&gt; Int
$chash :: ApVer -&gt; Int
hashWithSalt :: Int -&gt; ApVer -&gt; Int
$chashWithSalt :: Int -&gt; ApVer -&gt; Int
</span><a href="#local-6989586621679557146"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Hashable</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679557140"><span id="local-6989586621679557142"><span id="local-6989586621679557144"><span class="annot"><span class="annottext">Context -&gt; ApVer -&gt; IO (Maybe ThunkInfo)
Proxy ApVer -&gt; String
(Context -&gt; ApVer -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; ApVer -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy ApVer -&gt; String)
-&gt; NoThunks ApVer
forall a.
(Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy a -&gt; String)
-&gt; NoThunks a
showTypeOf :: Proxy ApVer -&gt; String
$cshowTypeOf :: Proxy ApVer -&gt; String
wNoThunks :: Context -&gt; ApVer -&gt; IO (Maybe ThunkInfo)
$cwNoThunks :: Context -&gt; ApVer -&gt; IO (Maybe ThunkInfo)
noThunks :: Context -&gt; ApVer -&gt; IO (Maybe ThunkInfo)
$cnoThunks :: Context -&gt; ApVer -&gt; IO (Maybe ThunkInfo)
</span><a href="#local-6989586621679557140"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">NoThunks</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-161"></span><span>
</span><span id="line-162"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679557138"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">HasTypeReps</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ApVer"><span class="hs-identifier hs-type">ApVer</span></a></span></span><span>
</span><span id="line-163"></span><span>
</span><span id="line-164"></span><span id="local-6989586621679557136"><span id="local-6989586621679557137"></span></span><span class="hs-keyword">data</span><span> </span><span id="SwVer"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#SwVer"><span class="hs-identifier hs-var">SwVer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="SwVer"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#SwVer"><span class="hs-identifier hs-var">SwVer</span></a></span></span><span>
</span><span id="line-165"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="_svName"><span class="annot"><span class="annottext">SwVer -&gt; ApName
</span><a href="Byron.Spec.Ledger.Update.html#_svName"><span class="hs-identifier hs-var hs-var">_svName</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ApName"><span class="hs-identifier hs-type">ApName</span></a></span><span>
</span><span id="line-166"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="_svVer"><span class="annot"><span class="annottext">SwVer -&gt; ApVer
</span><a href="Byron.Spec.Ledger.Update.html#_svVer"><span class="hs-identifier hs-var hs-var">_svVer</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ApVer"><span class="hs-identifier hs-type">ApVer</span></a></span><span>
</span><span id="line-167"></span><span>  </span><span class="hs-special">}</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679557129"><span id="local-6989586621679557131"><span class="annot"><span class="annottext">SwVer -&gt; SwVer -&gt; Bool
(SwVer -&gt; SwVer -&gt; Bool) -&gt; (SwVer -&gt; SwVer -&gt; Bool) -&gt; Eq SwVer
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: SwVer -&gt; SwVer -&gt; Bool
$c/= :: SwVer -&gt; SwVer -&gt; Bool
== :: SwVer -&gt; SwVer -&gt; Bool
$c== :: SwVer -&gt; SwVer -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. SwVer -&gt; Rep SwVer x)
-&gt; (forall x. Rep SwVer x -&gt; SwVer) -&gt; Generic SwVer
forall x. Rep SwVer x -&gt; SwVer
forall x. SwVer -&gt; Rep SwVer x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep SwVer x -&gt; SwVer
$cfrom :: forall x. SwVer -&gt; Rep SwVer x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679557121"><span id="local-6989586621679557123"><span id="local-6989586621679557125"><span class="annot"><span class="annottext">Int -&gt; SwVer -&gt; ShowS
[SwVer] -&gt; ShowS
SwVer -&gt; String
(Int -&gt; SwVer -&gt; ShowS)
-&gt; (SwVer -&gt; String) -&gt; ([SwVer] -&gt; ShowS) -&gt; Show SwVer
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [SwVer] -&gt; ShowS
$cshowList :: [SwVer] -&gt; ShowS
show :: SwVer -&gt; String
$cshow :: SwVer -&gt; String
showsPrec :: Int -&gt; SwVer -&gt; ShowS
$cshowsPrec :: Int -&gt; SwVer -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679557117"><span id="local-6989586621679557119"><span class="annot"><span class="annottext">Int -&gt; SwVer -&gt; Int
SwVer -&gt; Int
(Int -&gt; SwVer -&gt; Int) -&gt; (SwVer -&gt; Int) -&gt; Hashable SwVer
forall a. (Int -&gt; a -&gt; Int) -&gt; (a -&gt; Int) -&gt; Hashable a
hash :: SwVer -&gt; Int
$chash :: SwVer -&gt; Int
hashWithSalt :: Int -&gt; SwVer -&gt; Int
$chashWithSalt :: Int -&gt; SwVer -&gt; Int
</span><a href="#local-6989586621679557117"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Hashable</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="%24cSwVer"><span id="%24tSwVer"><span id="local-6989586621679557088"><span id="local-6989586621679557090"><span id="local-6989586621679557092"><span id="local-6989586621679557094"><span id="local-6989586621679557096"><span id="local-6989586621679557098"><span id="local-6989586621679557100"><span id="local-6989586621679557102"><span id="local-6989586621679557104"><span id="local-6989586621679557106"><span id="local-6989586621679557108"><span id="local-6989586621679557110"><span id="local-6989586621679557112"><span id="local-6989586621679557114"><span class="annot"><span class="annottext">Typeable SwVer
DataType
Constr
Typeable SwVer
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; SwVer -&gt; c SwVer)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c SwVer)
-&gt; (SwVer -&gt; Constr)
-&gt; (SwVer -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c SwVer))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c SwVer))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; SwVer -&gt; SwVer)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; SwVer -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; SwVer -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; SwVer -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; SwVer -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; SwVer -&gt; m SwVer)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; SwVer -&gt; m SwVer)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; SwVer -&gt; m SwVer)
-&gt; Data SwVer
SwVer -&gt; DataType
SwVer -&gt; Constr
(forall b. Data b =&gt; b -&gt; b) -&gt; SwVer -&gt; SwVer
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; SwVer -&gt; c SwVer
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c SwVer
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; SwVer -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; SwVer -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; SwVer -&gt; r
forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; SwVer -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; SwVer -&gt; m SwVer
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; SwVer -&gt; m SwVer
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c SwVer
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; SwVer -&gt; c SwVer
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c SwVer)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c SwVer)
$cSwVer :: Constr
$tSwVer :: DataType
gmapMo :: (forall d. Data d =&gt; d -&gt; m d) -&gt; SwVer -&gt; m SwVer
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; SwVer -&gt; m SwVer
gmapMp :: (forall d. Data d =&gt; d -&gt; m d) -&gt; SwVer -&gt; m SwVer
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; SwVer -&gt; m SwVer
gmapM :: (forall d. Data d =&gt; d -&gt; m d) -&gt; SwVer -&gt; m SwVer
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; SwVer -&gt; m SwVer
gmapQi :: Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; SwVer -&gt; u
$cgmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; SwVer -&gt; u
gmapQ :: (forall d. Data d =&gt; d -&gt; u) -&gt; SwVer -&gt; [u]
$cgmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; SwVer -&gt; [u]
gmapQr :: (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; SwVer -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; SwVer -&gt; r
gmapQl :: (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; SwVer -&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; SwVer -&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; SwVer -&gt; SwVer
$cgmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; SwVer -&gt; SwVer
dataCast2 :: (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c SwVer)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c SwVer)
dataCast1 :: (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c SwVer)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c SwVer)
dataTypeOf :: SwVer -&gt; DataType
$cdataTypeOf :: SwVer -&gt; DataType
toConstr :: SwVer -&gt; Constr
$ctoConstr :: SwVer -&gt; Constr
gunfold :: (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c SwVer
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c SwVer
gfoldl :: (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; SwVer -&gt; c SwVer
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; SwVer -&gt; c SwVer
$cp1Data :: Typeable SwVer
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679557080"><span id="local-6989586621679557082"><span id="local-6989586621679557084"><span class="annot"><span class="annottext">Context -&gt; SwVer -&gt; IO (Maybe ThunkInfo)
Proxy SwVer -&gt; String
(Context -&gt; SwVer -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; SwVer -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy SwVer -&gt; String)
-&gt; NoThunks SwVer
forall a.
(Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy a -&gt; String)
-&gt; NoThunks a
showTypeOf :: Proxy SwVer -&gt; String
$cshowTypeOf :: Proxy SwVer -&gt; String
wNoThunks :: Context -&gt; SwVer -&gt; IO (Maybe ThunkInfo)
$cwNoThunks :: Context -&gt; SwVer -&gt; IO (Maybe ThunkInfo)
noThunks :: Context -&gt; SwVer -&gt; IO (Maybe ThunkInfo)
$cnoThunks :: Context -&gt; SwVer -&gt; IO (Maybe ThunkInfo)
</span><a href="#local-6989586621679557080"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">NoThunks</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-168"></span><span>
</span><span id="line-169"></span><span id="svVer"><span id="svName"><span class="hs-identifier">makeLenses</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">SwVer</span></span></span><span>
</span><span id="line-170"></span><span>
</span><span id="line-171"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679557076"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">HasTypeReps</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#SwVer"><span class="hs-identifier hs-type">SwVer</span></a></span></span><span>
</span><span id="line-172"></span><span>
</span><span id="line-173"></span><span class="hs-comment">-- | Part of the update proposal which must be signed</span><span>
</span><span id="line-174"></span><span class="hs-comment">--</span><span>
</span><span id="line-175"></span><span class="hs-keyword">type</span><span> </span><span id="UpSD"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpSD"><span class="hs-identifier hs-var">UpSD</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-176"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ProtVer"><span class="hs-identifier hs-type">ProtVer</span></a></span><span>
</span><span id="line-177"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#PParams"><span class="hs-identifier hs-type">PParams</span></a></span><span>
</span><span id="line-178"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#SwVer"><span class="hs-identifier hs-type">SwVer</span></a></span><span>
</span><span id="line-179"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#STag"><span class="hs-identifier hs-type">STag</span></a></span><span>
</span><span id="line-180"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#Metadata"><span class="hs-identifier hs-type">Metadata</span></a></span><span>
</span><span id="line-181"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-182"></span><span>
</span><span id="line-183"></span><span class="hs-comment">-- | System tag, this represents a target operating system for the update (e.g.</span><span>
</span><span id="line-184"></span><span class="hs-comment">-- @linux@, @win64@, or @mac32@).</span><span>
</span><span id="line-185"></span><span class="hs-keyword">type</span><span> </span><span id="STag"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#STag"><span class="hs-identifier hs-var">STag</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-186"></span><span>
</span><span id="line-187"></span><span class="hs-comment">-- | For now we do not have any requirements on metadata.</span><span>
</span><span id="line-188"></span><span id="local-6989586621679557073"><span id="local-6989586621679557074"></span></span><span class="hs-keyword">data</span><span> </span><span id="Metadata"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#Metadata"><span class="hs-identifier hs-var">Metadata</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Metadata"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#Metadata"><span class="hs-identifier hs-var">Metadata</span></a></span></span><span>
</span><span id="line-189"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679557068"><span id="local-6989586621679557070"><span class="annot"><span class="annottext">Metadata -&gt; Metadata -&gt; Bool
(Metadata -&gt; Metadata -&gt; Bool)
-&gt; (Metadata -&gt; Metadata -&gt; Bool) -&gt; Eq Metadata
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: Metadata -&gt; Metadata -&gt; Bool
$c/= :: Metadata -&gt; Metadata -&gt; Bool
== :: Metadata -&gt; Metadata -&gt; Bool
$c== :: Metadata -&gt; Metadata -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679557053"><span id="local-6989586621679557055"><span id="local-6989586621679557057"><span id="local-6989586621679557059"><span id="local-6989586621679557061"><span id="local-6989586621679557063"><span id="local-6989586621679557065"><span class="annot"><span class="annottext">Eq Metadata
Eq Metadata
-&gt; (Metadata -&gt; Metadata -&gt; Ordering)
-&gt; (Metadata -&gt; Metadata -&gt; Bool)
-&gt; (Metadata -&gt; Metadata -&gt; Bool)
-&gt; (Metadata -&gt; Metadata -&gt; Bool)
-&gt; (Metadata -&gt; Metadata -&gt; Bool)
-&gt; (Metadata -&gt; Metadata -&gt; Metadata)
-&gt; (Metadata -&gt; Metadata -&gt; Metadata)
-&gt; Ord Metadata
Metadata -&gt; Metadata -&gt; Bool
Metadata -&gt; Metadata -&gt; Ordering
Metadata -&gt; Metadata -&gt; Metadata
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: Metadata -&gt; Metadata -&gt; Metadata
$cmin :: Metadata -&gt; Metadata -&gt; Metadata
max :: Metadata -&gt; Metadata -&gt; Metadata
$cmax :: Metadata -&gt; Metadata -&gt; Metadata
&gt;= :: Metadata -&gt; Metadata -&gt; Bool
$c&gt;= :: Metadata -&gt; Metadata -&gt; Bool
&gt; :: Metadata -&gt; Metadata -&gt; Bool
$c&gt; :: Metadata -&gt; Metadata -&gt; Bool
&lt;= :: Metadata -&gt; Metadata -&gt; Bool
$c&lt;= :: Metadata -&gt; Metadata -&gt; Bool
&lt; :: Metadata -&gt; Metadata -&gt; Bool
$c&lt; :: Metadata -&gt; Metadata -&gt; Bool
compare :: Metadata -&gt; Metadata -&gt; Ordering
$ccompare :: Metadata -&gt; Metadata -&gt; Ordering
$cp1Ord :: Eq Metadata
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679557047"><span id="local-6989586621679557049"><span id="local-6989586621679557051"><span class="annot"><span class="annottext">Int -&gt; Metadata -&gt; ShowS
[Metadata] -&gt; ShowS
Metadata -&gt; String
(Int -&gt; Metadata -&gt; ShowS)
-&gt; (Metadata -&gt; String) -&gt; ([Metadata] -&gt; ShowS) -&gt; Show Metadata
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [Metadata] -&gt; ShowS
$cshowList :: [Metadata] -&gt; ShowS
show :: Metadata -&gt; String
$cshow :: Metadata -&gt; String
showsPrec :: Int -&gt; Metadata -&gt; ShowS
$cshowsPrec :: Int -&gt; Metadata -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. Metadata -&gt; Rep Metadata x)
-&gt; (forall x. Rep Metadata x -&gt; Metadata) -&gt; Generic Metadata
forall x. Rep Metadata x -&gt; Metadata
forall x. Metadata -&gt; Rep Metadata x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep Metadata x -&gt; Metadata
$cfrom :: forall x. Metadata -&gt; Rep Metadata x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679557041"><span id="local-6989586621679557043"><span class="annot"><span class="annottext">Int -&gt; Metadata -&gt; Int
Metadata -&gt; Int
(Int -&gt; Metadata -&gt; Int) -&gt; (Metadata -&gt; Int) -&gt; Hashable Metadata
forall a. (Int -&gt; a -&gt; Int) -&gt; (a -&gt; Int) -&gt; Hashable a
hash :: Metadata -&gt; Int
$chash :: Metadata -&gt; Int
hashWithSalt :: Int -&gt; Metadata -&gt; Int
$chashWithSalt :: Int -&gt; Metadata -&gt; Int
</span><a href="#local-6989586621679557041"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Hashable</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="%24cMetadata"><span id="%24tMetadata"><span id="local-6989586621679557012"><span id="local-6989586621679557014"><span id="local-6989586621679557016"><span id="local-6989586621679557018"><span id="local-6989586621679557020"><span id="local-6989586621679557022"><span id="local-6989586621679557024"><span id="local-6989586621679557026"><span id="local-6989586621679557028"><span id="local-6989586621679557030"><span id="local-6989586621679557032"><span id="local-6989586621679557034"><span id="local-6989586621679557036"><span id="local-6989586621679557038"><span class="annot"><span class="annottext">Typeable Metadata
DataType
Constr
Typeable Metadata
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; Metadata -&gt; c Metadata)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c Metadata)
-&gt; (Metadata -&gt; Constr)
-&gt; (Metadata -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c Metadata))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c Metadata))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; Metadata -&gt; Metadata)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Metadata -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Metadata -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; Metadata -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; Metadata -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; Metadata -&gt; m Metadata)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; Metadata -&gt; m Metadata)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; Metadata -&gt; m Metadata)
-&gt; Data Metadata
Metadata -&gt; DataType
Metadata -&gt; Constr
(forall b. Data b =&gt; b -&gt; b) -&gt; Metadata -&gt; Metadata
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; Metadata -&gt; c Metadata
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c Metadata
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; Metadata -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; Metadata -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Metadata -&gt; r
forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Metadata -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; Metadata -&gt; m Metadata
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; Metadata -&gt; m Metadata
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c Metadata
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; Metadata -&gt; c Metadata
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c Metadata)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c Metadata)
$cMetadata :: Constr
$tMetadata :: DataType
gmapMo :: (forall d. Data d =&gt; d -&gt; m d) -&gt; Metadata -&gt; m Metadata
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; Metadata -&gt; m Metadata
gmapMp :: (forall d. Data d =&gt; d -&gt; m d) -&gt; Metadata -&gt; m Metadata
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; Metadata -&gt; m Metadata
gmapM :: (forall d. Data d =&gt; d -&gt; m d) -&gt; Metadata -&gt; m Metadata
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; Metadata -&gt; m Metadata
gmapQi :: Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; Metadata -&gt; u
$cgmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; Metadata -&gt; u
gmapQ :: (forall d. Data d =&gt; d -&gt; u) -&gt; Metadata -&gt; [u]
$cgmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; Metadata -&gt; [u]
gmapQr :: (r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Metadata -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Metadata -&gt; r
gmapQl :: (r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Metadata -&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Metadata -&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; Metadata -&gt; Metadata
$cgmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; Metadata -&gt; Metadata
dataCast2 :: (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c Metadata)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c Metadata)
dataCast1 :: (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c Metadata)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c Metadata)
dataTypeOf :: Metadata -&gt; DataType
$cdataTypeOf :: Metadata -&gt; DataType
toConstr :: Metadata -&gt; Constr
$ctoConstr :: Metadata -&gt; Constr
gunfold :: (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c Metadata
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c Metadata
gfoldl :: (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; Metadata -&gt; c Metadata
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; Metadata -&gt; c Metadata
$cp1Data :: Typeable Metadata
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679557004"><span id="local-6989586621679557006"><span id="local-6989586621679557008"><span class="annot"><span class="annottext">Context -&gt; Metadata -&gt; IO (Maybe ThunkInfo)
Proxy Metadata -&gt; String
(Context -&gt; Metadata -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; Metadata -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy Metadata -&gt; String)
-&gt; NoThunks Metadata
forall a.
(Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy a -&gt; String)
-&gt; NoThunks a
showTypeOf :: Proxy Metadata -&gt; String
$cshowTypeOf :: Proxy Metadata -&gt; String
wNoThunks :: Context -&gt; Metadata -&gt; IO (Maybe ThunkInfo)
$cwNoThunks :: Context -&gt; Metadata -&gt; IO (Maybe ThunkInfo)
noThunks :: Context -&gt; Metadata -&gt; IO (Maybe ThunkInfo)
$cnoThunks :: Context -&gt; Metadata -&gt; IO (Maybe ThunkInfo)
</span><a href="#local-6989586621679557004"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">NoThunks</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-190"></span><span>
</span><span id="line-191"></span><span class="hs-comment">-- | Update proposal</span><span>
</span><span id="line-192"></span><span id="local-6989586621679557002"><span id="local-6989586621679557003"></span></span><span class="hs-keyword">data</span><span> </span><span id="UProp"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UProp"><span class="hs-identifier hs-var">UProp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="UProp"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UProp"><span class="hs-identifier hs-var">UProp</span></a></span></span><span>
</span><span id="line-193"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="_upId"><span class="annot"><span class="annottext">UProp -&gt; UpId
</span><a href="Byron.Spec.Ledger.Update.html#_upId"><span class="hs-identifier hs-var hs-var">_upId</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpId"><span class="hs-identifier hs-type">UpId</span></a></span><span>
</span><span id="line-194"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="_upIssuer"><span class="annot"><span class="annottext">UProp -&gt; VKey
</span><a href="Byron.Spec.Ledger.Update.html#_upIssuer"><span class="hs-identifier hs-var hs-var">_upIssuer</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier hs-type">Core.VKey</span></a></span><span>
</span><span id="line-195"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="_upParams"><span class="annot"><span class="annottext">UProp -&gt; PParams
</span><a href="Byron.Spec.Ledger.Update.html#_upParams"><span class="hs-identifier hs-var hs-var">_upParams</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#PParams"><span class="hs-identifier hs-type">PParams</span></a></span><span>
</span><span id="line-196"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="_upPV"><span class="annot"><span class="annottext">UProp -&gt; ProtVer
</span><a href="Byron.Spec.Ledger.Update.html#_upPV"><span class="hs-identifier hs-var hs-var">_upPV</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ProtVer"><span class="hs-identifier hs-type">ProtVer</span></a></span><span>
</span><span id="line-197"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="_upSwVer"><span class="annot"><span class="annottext">UProp -&gt; SwVer
</span><a href="Byron.Spec.Ledger.Update.html#_upSwVer"><span class="hs-identifier hs-var hs-var">_upSwVer</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#SwVer"><span class="hs-identifier hs-type">SwVer</span></a></span><span>
</span><span id="line-198"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="_upSig"><span class="annot"><span class="annottext">UProp -&gt; Sig UpSD
</span><a href="Byron.Spec.Ledger.Update.html#_upSig"><span class="hs-identifier hs-var hs-var">_upSig</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Sig"><span class="hs-identifier hs-type">Core.Sig</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpSD"><span class="hs-identifier hs-type">UpSD</span></a></span><span>
</span><span id="line-199"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="_upSTags"><span class="annot"><span class="annottext">UProp -&gt; Set String
</span><a href="Byron.Spec.Ledger.Update.html#_upSTags"><span class="hs-identifier hs-var hs-var">_upSTags</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#STag"><span class="hs-identifier hs-type">STag</span></a></span><span>
</span><span id="line-200"></span><span>  </span><span class="hs-comment">-- ^ System tags involved in the update proposal.</span><span>
</span><span id="line-201"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="_upMdt"><span class="annot"><span class="annottext">UProp -&gt; Metadata
</span><a href="Byron.Spec.Ledger.Update.html#_upMdt"><span class="hs-identifier hs-var hs-var">_upMdt</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#Metadata"><span class="hs-identifier hs-type">Metadata</span></a></span><span>
</span><span id="line-202"></span><span>  </span><span class="hs-comment">-- ^ Metadata required for performing software updates.</span><span>
</span><span id="line-203"></span><span>  </span><span class="hs-special">}</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556989"><span id="local-6989586621679556991"><span class="annot"><span class="annottext">UProp -&gt; UProp -&gt; Bool
(UProp -&gt; UProp -&gt; Bool) -&gt; (UProp -&gt; UProp -&gt; Bool) -&gt; Eq UProp
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: UProp -&gt; UProp -&gt; Bool
$c/= :: UProp -&gt; UProp -&gt; Bool
== :: UProp -&gt; UProp -&gt; Bool
$c== :: UProp -&gt; UProp -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. UProp -&gt; Rep UProp x)
-&gt; (forall x. Rep UProp x -&gt; UProp) -&gt; Generic UProp
forall x. Rep UProp x -&gt; UProp
forall x. UProp -&gt; Rep UProp x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep UProp x -&gt; UProp
$cfrom :: forall x. UProp -&gt; Rep UProp x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679556981"><span id="local-6989586621679556983"><span id="local-6989586621679556985"><span class="annot"><span class="annottext">Int -&gt; UProp -&gt; ShowS
[UProp] -&gt; ShowS
UProp -&gt; String
(Int -&gt; UProp -&gt; ShowS)
-&gt; (UProp -&gt; String) -&gt; ([UProp] -&gt; ShowS) -&gt; Show UProp
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [UProp] -&gt; ShowS
$cshowList :: [UProp] -&gt; ShowS
show :: UProp -&gt; String
$cshow :: UProp -&gt; String
showsPrec :: Int -&gt; UProp -&gt; ShowS
$cshowsPrec :: Int -&gt; UProp -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679556977"><span id="local-6989586621679556979"><span class="annot"><span class="annottext">Int -&gt; UProp -&gt; Int
UProp -&gt; Int
(Int -&gt; UProp -&gt; Int) -&gt; (UProp -&gt; Int) -&gt; Hashable UProp
forall a. (Int -&gt; a -&gt; Int) -&gt; (a -&gt; Int) -&gt; Hashable a
hash :: UProp -&gt; Int
$chash :: UProp -&gt; Int
hashWithSalt :: Int -&gt; UProp -&gt; Int
$chashWithSalt :: Int -&gt; UProp -&gt; Int
</span><a href="#local-6989586621679556977"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Hashable</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="%24cUProp"><span id="%24tUProp"><span id="local-6989586621679556948"><span id="local-6989586621679556950"><span id="local-6989586621679556952"><span id="local-6989586621679556954"><span id="local-6989586621679556956"><span id="local-6989586621679556958"><span id="local-6989586621679556960"><span id="local-6989586621679556962"><span id="local-6989586621679556964"><span id="local-6989586621679556966"><span id="local-6989586621679556968"><span id="local-6989586621679556970"><span id="local-6989586621679556972"><span id="local-6989586621679556974"><span class="annot"><span class="annottext">Typeable UProp
DataType
Constr
Typeable UProp
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; UProp -&gt; c UProp)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UProp)
-&gt; (UProp -&gt; Constr)
-&gt; (UProp -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UProp))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c UProp))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; UProp -&gt; UProp)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UProp -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UProp -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; UProp -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UProp -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; UProp -&gt; m UProp)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; UProp -&gt; m UProp)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; UProp -&gt; m UProp)
-&gt; Data UProp
UProp -&gt; DataType
UProp -&gt; Constr
(forall b. Data b =&gt; b -&gt; b) -&gt; UProp -&gt; UProp
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; UProp -&gt; c UProp
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UProp
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UProp -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; UProp -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UProp -&gt; r
forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UProp -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UProp -&gt; m UProp
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UProp -&gt; m UProp
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UProp
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; UProp -&gt; c UProp
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UProp)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c UProp)
$cUProp :: Constr
$tUProp :: DataType
gmapMo :: (forall d. Data d =&gt; d -&gt; m d) -&gt; UProp -&gt; m UProp
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UProp -&gt; m UProp
gmapMp :: (forall d. Data d =&gt; d -&gt; m d) -&gt; UProp -&gt; m UProp
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UProp -&gt; m UProp
gmapM :: (forall d. Data d =&gt; d -&gt; m d) -&gt; UProp -&gt; m UProp
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UProp -&gt; m UProp
gmapQi :: Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UProp -&gt; u
$cgmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UProp -&gt; u
gmapQ :: (forall d. Data d =&gt; d -&gt; u) -&gt; UProp -&gt; [u]
$cgmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; UProp -&gt; [u]
gmapQr :: (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UProp -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UProp -&gt; r
gmapQl :: (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UProp -&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UProp -&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; UProp -&gt; UProp
$cgmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; UProp -&gt; UProp
dataCast2 :: (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c UProp)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c UProp)
dataCast1 :: (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UProp)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UProp)
dataTypeOf :: UProp -&gt; DataType
$cdataTypeOf :: UProp -&gt; DataType
toConstr :: UProp -&gt; Constr
$ctoConstr :: UProp -&gt; Constr
gunfold :: (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UProp
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UProp
gfoldl :: (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; UProp -&gt; c UProp
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; UProp -&gt; c UProp
$cp1Data :: Typeable UProp
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679556940"><span id="local-6989586621679556942"><span id="local-6989586621679556944"><span class="annot"><span class="annottext">Context -&gt; UProp -&gt; IO (Maybe ThunkInfo)
Proxy UProp -&gt; String
(Context -&gt; UProp -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; UProp -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy UProp -&gt; String)
-&gt; NoThunks UProp
forall a.
(Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy a -&gt; String)
-&gt; NoThunks a
showTypeOf :: Proxy UProp -&gt; String
$cshowTypeOf :: Proxy UProp -&gt; String
wNoThunks :: Context -&gt; UProp -&gt; IO (Maybe ThunkInfo)
$cwNoThunks :: Context -&gt; UProp -&gt; IO (Maybe ThunkInfo)
noThunks :: Context -&gt; UProp -&gt; IO (Maybe ThunkInfo)
$cnoThunks :: Context -&gt; UProp -&gt; IO (Maybe ThunkInfo)
</span><a href="#local-6989586621679556940"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">NoThunks</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-204"></span><span>
</span><span id="line-205"></span><span>
</span><span id="line-206"></span><span class="hs-comment">-- We need the Hashable instance before making lenses.</span><span>
</span><span id="line-207"></span><span id="local-6989586621679556939"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679556936"><span class="annot"><span class="hs-identifier hs-type">Hashable</span></span><span> </span><span class="annot"><a href="#local-6989586621679556939"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hashable</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><a href="#local-6989586621679556939"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-208"></span><span>  </span><span id="local-6989586621679556935"><span class="annot"><span class="annottext">hashWithSalt :: Int -&gt; Set a -&gt; Int
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">hashWithSalt</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Set a -&gt; [a]) -&gt; Int -&gt; Set a -&gt; Int
forall b a. Hashable b =&gt; (a -&gt; b) -&gt; Int -&gt; a -&gt; Int
</span><span class="hs-identifier hs-var">H.hashUsing</span></span><span> </span><span class="annot"><span class="annottext">Set a -&gt; [a]
forall a. Set a -&gt; [a]
</span><span class="hs-identifier hs-var">Set.toList</span></span></span><span>
</span><span id="line-209"></span><span>
</span><span id="line-210"></span><span>
</span><span id="line-211"></span><span id="upSwVer"><span id="upSig"><span id="upSTags"><span id="upParams"><span id="upPV"><span id="upMdt"><span id="upIssuer"><span id="upId"><span class="hs-identifier">makeLenses</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">UProp</span></span></span></span></span></span></span></span></span><span>
</span><span id="line-212"></span><span>
</span><span id="line-213"></span><span>
</span><span id="line-214"></span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#upSigData"><span class="hs-identifier hs-type">upSigData</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UProp"><span class="hs-identifier hs-type">UProp</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpSD"><span class="hs-identifier hs-type">UpSD</span></a></span><span>
</span><span id="line-215"></span><span id="upSigData"><span class="annot"><span class="annottext">upSigData :: (UpSD -&gt; f UpSD) -&gt; UProp -&gt; f UProp
</span><a href="Byron.Spec.Ledger.Update.html#upSigData"><span class="hs-identifier hs-var hs-var">upSigData</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(UProp -&gt; UpSD)
-&gt; (UProp -&gt; UpSD -&gt; UProp) -&gt; Lens UProp UProp UpSD UpSD
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><span class="hs-identifier hs-var">lens</span></span><span>
</span><span id="line-216"></span><span>  </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679556921"><span class="annot"><span class="annottext">UProp
</span><a href="#local-6989586621679556921"><span class="hs-identifier hs-var">up</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UProp
</span><a href="#local-6989586621679556921"><span class="hs-identifier hs-var">up</span></a></span><span> </span><span class="annot"><span class="annottext">UProp -&gt; Getting ProtVer UProp ProtVer -&gt; ProtVer
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting ProtVer UProp ProtVer
Lens' UProp ProtVer
</span><a href="Byron.Spec.Ledger.Update.html#upPV"><span class="hs-identifier hs-var">upPV</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">UProp
</span><a href="#local-6989586621679556921"><span class="hs-identifier hs-var">up</span></a></span><span> </span><span class="annot"><span class="annottext">UProp -&gt; Getting PParams UProp PParams -&gt; PParams
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting PParams UProp PParams
Lens' UProp PParams
</span><a href="Byron.Spec.Ledger.Update.html#upParams"><span class="hs-identifier hs-var">upParams</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">UProp
</span><a href="#local-6989586621679556921"><span class="hs-identifier hs-var">up</span></a></span><span> </span><span class="annot"><span class="annottext">UProp -&gt; Getting SwVer UProp SwVer -&gt; SwVer
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting SwVer UProp SwVer
Lens' UProp SwVer
</span><a href="Byron.Spec.Ledger.Update.html#upSwVer"><span class="hs-identifier hs-var">upSwVer</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">UProp
</span><a href="#local-6989586621679556921"><span class="hs-identifier hs-var">up</span></a></span><span> </span><span class="annot"><span class="annottext">UProp -&gt; Getting (Set String) UProp (Set String) -&gt; Set String
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting (Set String) UProp (Set String)
Lens' UProp (Set String)
</span><a href="Byron.Spec.Ledger.Update.html#upSTags"><span class="hs-identifier hs-var">upSTags</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">UProp
</span><a href="#local-6989586621679556921"><span class="hs-identifier hs-var">up</span></a></span><span> </span><span class="annot"><span class="annottext">UProp -&gt; Getting Metadata UProp Metadata -&gt; Metadata
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting Metadata UProp Metadata
Lens' UProp Metadata
</span><a href="Byron.Spec.Ledger.Update.html#upMdt"><span class="hs-identifier hs-var">upMdt</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-217"></span><span>  </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679556919"><span class="annot"><span class="annottext">UProp
</span><a href="#local-6989586621679556919"><span class="hs-identifier hs-var">up</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556918"><span class="annot"><span class="annottext">ProtVer
</span><a href="#local-6989586621679556918"><span class="hs-identifier hs-var">pv</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679556917"><span class="annot"><span class="annottext">PParams
</span><a href="#local-6989586621679556917"><span class="hs-identifier hs-var">pps</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679556916"><span class="annot"><span class="annottext">SwVer
</span><a href="#local-6989586621679556916"><span class="hs-identifier hs-var">sv</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679556915"><span class="annot"><span class="annottext">Set String
</span><a href="#local-6989586621679556915"><span class="hs-identifier hs-var">stags</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679556914"><span class="annot"><span class="annottext">Metadata
</span><a href="#local-6989586621679556914"><span class="hs-identifier hs-var">mdt</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UProp
</span><a href="#local-6989586621679556919"><span class="hs-identifier hs-var">up</span></a></span><span>
</span><span id="line-218"></span><span>    </span><span class="annot"><span class="annottext">UProp -&gt; (UProp -&gt; UProp) -&gt; UProp
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(PParams -&gt; Identity PParams) -&gt; UProp -&gt; Identity UProp
Lens' UProp PParams
</span><a href="Byron.Spec.Ledger.Update.html#upParams"><span class="hs-identifier hs-var">upParams</span></a></span><span> </span><span class="annot"><span class="annottext">((PParams -&gt; Identity PParams) -&gt; UProp -&gt; Identity UProp)
-&gt; PParams -&gt; UProp -&gt; UProp
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">PParams
</span><a href="#local-6989586621679556917"><span class="hs-identifier hs-var">pps</span></a></span><span>
</span><span id="line-219"></span><span>    </span><span class="annot"><span class="annottext">UProp -&gt; (UProp -&gt; UProp) -&gt; UProp
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(ProtVer -&gt; Identity ProtVer) -&gt; UProp -&gt; Identity UProp
Lens' UProp ProtVer
</span><a href="Byron.Spec.Ledger.Update.html#upPV"><span class="hs-identifier hs-var">upPV</span></a></span><span> </span><span class="annot"><span class="annottext">((ProtVer -&gt; Identity ProtVer) -&gt; UProp -&gt; Identity UProp)
-&gt; ProtVer -&gt; UProp -&gt; UProp
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">ProtVer
</span><a href="#local-6989586621679556918"><span class="hs-identifier hs-var">pv</span></a></span><span>
</span><span id="line-220"></span><span>    </span><span class="annot"><span class="annottext">UProp -&gt; (UProp -&gt; UProp) -&gt; UProp
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(SwVer -&gt; Identity SwVer) -&gt; UProp -&gt; Identity UProp
Lens' UProp SwVer
</span><a href="Byron.Spec.Ledger.Update.html#upSwVer"><span class="hs-identifier hs-var">upSwVer</span></a></span><span> </span><span class="annot"><span class="annottext">((SwVer -&gt; Identity SwVer) -&gt; UProp -&gt; Identity UProp)
-&gt; SwVer -&gt; UProp -&gt; UProp
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">SwVer
</span><a href="#local-6989586621679556916"><span class="hs-identifier hs-var">sv</span></a></span><span>
</span><span id="line-221"></span><span>    </span><span class="annot"><span class="annottext">UProp -&gt; (UProp -&gt; UProp) -&gt; UProp
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(Set String -&gt; Identity (Set String)) -&gt; UProp -&gt; Identity UProp
Lens' UProp (Set String)
</span><a href="Byron.Spec.Ledger.Update.html#upSTags"><span class="hs-identifier hs-var">upSTags</span></a></span><span> </span><span class="annot"><span class="annottext">((Set String -&gt; Identity (Set String)) -&gt; UProp -&gt; Identity UProp)
-&gt; Set String -&gt; UProp -&gt; UProp
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">Set String
</span><a href="#local-6989586621679556915"><span class="hs-identifier hs-var">stags</span></a></span><span>
</span><span id="line-222"></span><span>    </span><span class="annot"><span class="annottext">UProp -&gt; (UProp -&gt; UProp) -&gt; UProp
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(Metadata -&gt; Identity Metadata) -&gt; UProp -&gt; Identity UProp
Lens' UProp Metadata
</span><a href="Byron.Spec.Ledger.Update.html#upMdt"><span class="hs-identifier hs-var">upMdt</span></a></span><span> </span><span class="annot"><span class="annottext">((Metadata -&gt; Identity Metadata) -&gt; UProp -&gt; Identity UProp)
-&gt; Metadata -&gt; UProp -&gt; UProp
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">Metadata
</span><a href="#local-6989586621679556914"><span class="hs-identifier hs-var">mdt</span></a></span><span>
</span><span id="line-223"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-224"></span><span>
</span><span id="line-225"></span><span>
</span><span id="line-226"></span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#getUpSigData"><span class="hs-identifier hs-type">getUpSigData</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UProp"><span class="hs-identifier hs-type">UProp</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpSD"><span class="hs-identifier hs-type">UpSD</span></a></span><span>
</span><span id="line-227"></span><span id="getUpSigData"><span class="annot"><span class="annottext">getUpSigData :: UProp -&gt; UpSD
</span><a href="Byron.Spec.Ledger.Update.html#getUpSigData"><span class="hs-identifier hs-var hs-var">getUpSigData</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Getting UpSD UProp UpSD -&gt; UProp -&gt; UpSD
forall a s. Getting a s a -&gt; s -&gt; a
</span><span class="hs-identifier hs-var">view</span></span><span> </span><span class="annot"><span class="annottext">Getting UpSD UProp UpSD
Lens UProp UProp UpSD UpSD
</span><a href="Byron.Spec.Ledger.Update.html#upSigData"><span class="hs-identifier hs-var">upSigData</span></a></span><span>
</span><span id="line-228"></span><span>
</span><span id="line-229"></span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#mkUProp"><span class="hs-identifier hs-type">mkUProp</span></a></span><span>
</span><span id="line-230"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpId"><span class="hs-identifier hs-type">UpId</span></a></span><span>
</span><span id="line-231"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier hs-type">Core.VKey</span></a></span><span>
</span><span id="line-232"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ProtVer"><span class="hs-identifier hs-type">ProtVer</span></a></span><span>
</span><span id="line-233"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#PParams"><span class="hs-identifier hs-type">PParams</span></a></span><span>
</span><span id="line-234"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#SwVer"><span class="hs-identifier hs-type">SwVer</span></a></span><span>
</span><span id="line-235"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#STag"><span class="hs-identifier hs-type">STag</span></a></span><span>
</span><span id="line-236"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#Metadata"><span class="hs-identifier hs-type">Metadata</span></a></span><span>
</span><span id="line-237"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UProp"><span class="hs-identifier hs-type">UProp</span></a></span><span>
</span><span id="line-238"></span><span id="mkUProp"><span class="annot"><span class="annottext">mkUProp :: UpId
-&gt; VKey
-&gt; ProtVer
-&gt; PParams
-&gt; SwVer
-&gt; Set String
-&gt; Metadata
-&gt; UProp
</span><a href="Byron.Spec.Ledger.Update.html#mkUProp"><span class="hs-identifier hs-var hs-var">mkUProp</span></a></span></span><span> </span><span id="local-6989586621679556909"><span class="annot"><span class="annottext">UpId
</span><a href="#local-6989586621679556909"><span class="hs-identifier hs-var">aUpId</span></a></span></span><span> </span><span id="local-6989586621679556908"><span class="annot"><span class="annottext">VKey
</span><a href="#local-6989586621679556908"><span class="hs-identifier hs-var">issuer</span></a></span></span><span> </span><span id="local-6989586621679556907"><span class="annot"><span class="annottext">ProtVer
</span><a href="#local-6989586621679556907"><span class="hs-identifier hs-var">pv</span></a></span></span><span> </span><span id="local-6989586621679556906"><span class="annot"><span class="annottext">PParams
</span><a href="#local-6989586621679556906"><span class="hs-identifier hs-var">pps</span></a></span></span><span> </span><span id="local-6989586621679556905"><span class="annot"><span class="annottext">SwVer
</span><a href="#local-6989586621679556905"><span class="hs-identifier hs-var">sv</span></a></span></span><span> </span><span id="local-6989586621679556904"><span class="annot"><span class="annottext">Set String
</span><a href="#local-6989586621679556904"><span class="hs-identifier hs-var">stags</span></a></span></span><span> </span><span id="local-6989586621679556903"><span class="annot"><span class="annottext">Metadata
</span><a href="#local-6989586621679556903"><span class="hs-identifier hs-var">mdt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UProp
</span><a href="#local-6989586621679556902"><span class="hs-identifier hs-var">uprop</span></a></span><span>
</span><span id="line-239"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-240"></span><span>    </span><span id="local-6989586621679556902"><span class="annot"><span class="annottext">uprop :: UProp
</span><a href="#local-6989586621679556902"><span class="hs-identifier hs-var hs-var">uprop</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UProp :: UpId
-&gt; VKey
-&gt; PParams
-&gt; ProtVer
-&gt; SwVer
-&gt; Sig UpSD
-&gt; Set String
-&gt; Metadata
-&gt; UProp
</span><a href="Byron.Spec.Ledger.Update.html#UProp"><span class="hs-identifier hs-type">UProp</span></a></span><span>
</span><span id="line-241"></span><span>            </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">_upId :: UpId
</span><a href="Byron.Spec.Ledger.Update.html#_upId"><span class="hs-identifier hs-var">_upId</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UpId
</span><a href="#local-6989586621679556909"><span class="hs-identifier hs-var">aUpId</span></a></span><span>
</span><span id="line-242"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_upIssuer :: VKey
</span><a href="Byron.Spec.Ledger.Update.html#_upIssuer"><span class="hs-identifier hs-var">_upIssuer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">VKey
</span><a href="#local-6989586621679556908"><span class="hs-identifier hs-var">issuer</span></a></span><span>
</span><span id="line-243"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_upParams :: PParams
</span><a href="Byron.Spec.Ledger.Update.html#_upParams"><span class="hs-identifier hs-var">_upParams</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PParams
</span><a href="#local-6989586621679556906"><span class="hs-identifier hs-var">pps</span></a></span><span>
</span><span id="line-244"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_upPV :: ProtVer
</span><a href="Byron.Spec.Ledger.Update.html#_upPV"><span class="hs-identifier hs-var">_upPV</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ProtVer
</span><a href="#local-6989586621679556907"><span class="hs-identifier hs-var">pv</span></a></span><span>
</span><span id="line-245"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_upSwVer :: SwVer
</span><a href="Byron.Spec.Ledger.Update.html#_upSwVer"><span class="hs-identifier hs-var">_upSwVer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SwVer
</span><a href="#local-6989586621679556905"><span class="hs-identifier hs-var">sv</span></a></span><span>
</span><span id="line-246"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_upSig :: Sig UpSD
</span><a href="Byron.Spec.Ledger.Update.html#_upSig"><span class="hs-identifier hs-var">_upSig</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SKey -&gt; UpSD -&gt; Sig UpSD
forall a. SKey -&gt; a -&gt; Sig a
</span><a href="Byron.Spec.Ledger.Core.html#sign"><span class="hs-identifier hs-var">Core.sign</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VKey -&gt; SKey
</span><a href="Byron.Spec.Ledger.Core.Omniscient.html#skey"><span class="hs-identifier hs-var">skey</span></a></span><span> </span><span class="annot"><span class="annottext">VKey
</span><a href="#local-6989586621679556908"><span class="hs-identifier hs-var">issuer</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UProp
</span><a href="#local-6989586621679556902"><span class="hs-identifier hs-var">uprop</span></a></span><span> </span><span class="annot"><span class="annottext">UProp -&gt; Getting UpSD UProp UpSD -&gt; UpSD
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting UpSD UProp UpSD
Lens UProp UProp UpSD UpSD
</span><a href="Byron.Spec.Ledger.Update.html#upSigData"><span class="hs-identifier hs-var">upSigData</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-247"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_upSTags :: Set String
</span><a href="Byron.Spec.Ledger.Update.html#_upSTags"><span class="hs-identifier hs-var">_upSTags</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set String
</span><a href="#local-6989586621679556904"><span class="hs-identifier hs-var">stags</span></a></span><span>
</span><span id="line-248"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_upMdt :: Metadata
</span><a href="Byron.Spec.Ledger.Update.html#_upMdt"><span class="hs-identifier hs-var">_upMdt</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Metadata
</span><a href="#local-6989586621679556903"><span class="hs-identifier hs-var">mdt</span></a></span><span>
</span><span id="line-249"></span><span>            </span><span class="hs-special">}</span><span>
</span><span id="line-250"></span><span>
</span><span id="line-251"></span><span>
</span><span id="line-252"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679556899"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">HasTypeReps</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ProtVer"><span class="hs-identifier hs-type">ProtVer</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#PParams"><span class="hs-identifier hs-type">PParams</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#SwVer"><span class="hs-identifier hs-type">SwVer</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#STag"><span class="hs-identifier hs-type">STag</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#Metadata"><span class="hs-identifier hs-type">Metadata</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-253"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679556897"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">HasTypeReps</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#Metadata"><span class="hs-identifier hs-type">Metadata</span></a></span></span><span>
</span><span id="line-254"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679556895"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">HasTypeReps</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UProp"><span class="hs-identifier hs-type">UProp</span></a></span></span><span>
</span><span id="line-255"></span><span>
</span><span id="line-256"></span><span>
</span><span id="line-257"></span><span class="hs-comment">-- | Test if a pair is present in a map.</span><span>
</span><span id="line-258"></span><span id="local-6989586621679558675"><span id="local-6989586621679558676"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#inMap"><span class="hs-identifier hs-type">inMap</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679558676"><span class="hs-identifier hs-type">key</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621679558675"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679558676"><span class="hs-identifier hs-type">key</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679558675"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="#local-6989586621679558676"><span class="hs-identifier hs-type">key</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679558675"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span></span><span>
</span><span id="line-259"></span><span id="inMap"><span class="annot"><span class="annottext">inMap :: key -&gt; v -&gt; Map key v -&gt; Bool
</span><a href="Byron.Spec.Ledger.Update.html#inMap"><span class="hs-identifier hs-var hs-var">inMap</span></a></span></span><span> </span><span id="local-6989586621679556893"><span class="annot"><span class="annottext">key
</span><a href="#local-6989586621679556893"><span class="hs-identifier hs-var">key</span></a></span></span><span> </span><span id="local-6989586621679556892"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621679556892"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621679556891"><span class="annot"><span class="annottext">Map key v
</span><a href="#local-6989586621679556891"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">key -&gt; Map key v -&gt; Maybe v
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="annot"><span class="annottext">key
</span><a href="#local-6989586621679556893"><span class="hs-identifier hs-var">key</span></a></span><span> </span><span class="annot"><span class="annottext">Map key v
</span><a href="#local-6989586621679556891"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-260"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679556889"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621679556889"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621679556889"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">v -&gt; v -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621679556892"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-261"></span><span>  </span><span class="annot"><span class="annottext">Maybe v
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-262"></span><span>
</span><span id="line-263"></span><span class="hs-comment">-- | Invert a map</span><span>
</span><span id="line-264"></span><span class="hs-comment">--</span><span>
</span><span id="line-265"></span><span class="hs-comment">--   Examples:</span><span>
</span><span id="line-266"></span><span class="hs-comment">--</span><span>
</span><span id="line-267"></span><span class="hs-comment">--   &gt;&gt;&gt; invertMap (Map.fromList [('a', 1 :: Int), ('b', 2), ('c', 3), ('d', 1)])</span><span>
</span><span id="line-268"></span><span class="hs-comment">--   fromList [(1,fromList &quot;ad&quot;),(2,fromList &quot;b&quot;),(3,fromList &quot;c&quot;)]</span><span>
</span><span id="line-269"></span><span id="local-6989586621679556887"><span id="local-6989586621679556888"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#invertMap"><span class="hs-identifier hs-type">invertMap</span></a></span><span>
</span><span id="line-270"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679556888"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679556887"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-271"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="#local-6989586621679556888"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556887"><span class="hs-identifier hs-type">v</span></a></span><span>
</span><span id="line-272"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="#local-6989586621679556887"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><a href="#local-6989586621679556888"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-273"></span><span id="invertMap"><span class="annot"><span class="annottext">invertMap :: Map k v -&gt; Map v (Set k)
</span><a href="Byron.Spec.Ledger.Update.html#invertMap"><span class="hs-identifier hs-var hs-var">invertMap</span></a></span></span><span>
</span><span id="line-274"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Set k -&gt; Set k -&gt; Set k) -&gt; [(v, Set k)] -&gt; Map v (Set k)
forall k a. Ord k =&gt; (a -&gt; a -&gt; a) -&gt; [(k, a)] -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.fromListWith</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Set k -&gt; Set k -&gt; Set k
forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Set a
</span><span class="hs-identifier hs-var">Set.union</span></span><span class="hs-special">)</span><span>
</span><span id="line-275"></span><span>  </span><span class="annot"><span class="annottext">([(v, Set k)] -&gt; Map v (Set k))
-&gt; (Map k v -&gt; [(v, Set k)]) -&gt; Map k v -&gt; Map v (Set k)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">((k, v) -&gt; (v, Set k)) -&gt; [(k, v)] -&gt; [(v, Set k)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(k -&gt; Set k) -&gt; (v, k) -&gt; (v, Set k)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">k -&gt; Set k
forall a. a -&gt; Set a
</span><span class="hs-identifier hs-var">Set.singleton</span></span><span> </span><span class="annot"><span class="annottext">((v, k) -&gt; (v, Set k))
-&gt; ((k, v) -&gt; (v, k)) -&gt; (k, v) -&gt; (v, Set k)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(k, v) -&gt; (v, k)
forall a b. (a, b) -&gt; (b, a)
</span><span class="hs-identifier hs-var">swap</span></span><span class="hs-special">)</span><span>
</span><span id="line-276"></span><span>  </span><span class="annot"><span class="annottext">([(k, v)] -&gt; [(v, Set k)])
-&gt; (Map k v -&gt; [(k, v)]) -&gt; Map k v -&gt; [(v, Set k)]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Map k v -&gt; [(k, v)]
forall k a. Map k a -&gt; [(k, a)]
</span><span class="hs-identifier hs-var">Map.toList</span></span><span>
</span><span id="line-277"></span><span>
</span><span id="line-278"></span><span class="hs-comment">-- | Invert a map which we assert to be a bijection.</span><span>
</span><span id="line-279"></span><span class="hs-comment">--   If this map is not a bijection, the behaviour is not guaranteed.</span><span>
</span><span id="line-280"></span><span class="hs-comment">--</span><span>
</span><span id="line-281"></span><span class="hs-comment">--   Examples:</span><span>
</span><span id="line-282"></span><span class="hs-comment">--</span><span>
</span><span id="line-283"></span><span class="hs-comment">--   &gt;&gt;&gt; invertBijection (Map.fromList [('a', 1 :: Int), ('b', 2), ('c', 3)])</span><span>
</span><span id="line-284"></span><span class="hs-comment">--   fromList [(1,'a'),(2,'b'),(3,'c')]</span><span>
</span><span id="line-285"></span><span id="local-6989586621679556880"><span id="local-6989586621679556881"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#invertBijection"><span class="hs-identifier hs-type">invertBijection</span></a></span><span>
</span><span id="line-286"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679556881"><span class="hs-identifier hs-type">v</span></a></span><span>
</span><span id="line-287"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="#local-6989586621679556880"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556881"><span class="hs-identifier hs-type">v</span></a></span><span>
</span><span id="line-288"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="#local-6989586621679556881"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556880"><span class="hs-identifier hs-type">k</span></a></span></span></span><span>
</span><span id="line-289"></span><span id="invertBijection"><span class="annot"><span class="annottext">invertBijection :: Map k v -&gt; Map v k
</span><a href="Byron.Spec.Ledger.Update.html#invertBijection"><span class="hs-identifier hs-var hs-var">invertBijection</span></a></span></span><span>
</span><span id="line-290"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(k -&gt; k -&gt; k) -&gt; [(v, k)] -&gt; Map v k
forall k a. Ord k =&gt; (a -&gt; a -&gt; a) -&gt; [(k, a)] -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.fromListWith</span></span><span> </span><span class="annot"><span class="annottext">k -&gt; k -&gt; k
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span>
</span><span id="line-291"></span><span>  </span><span class="annot"><span class="annottext">([(v, k)] -&gt; Map v k)
-&gt; (Map k v -&gt; [(v, k)]) -&gt; Map k v -&gt; Map v k
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">((k, v) -&gt; (v, k)) -&gt; [(k, v)] -&gt; [(v, k)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">(k, v) -&gt; (v, k)
forall a b. (a, b) -&gt; (b, a)
</span><span class="hs-identifier hs-var">swap</span></span><span>
</span><span id="line-292"></span><span>  </span><span class="annot"><span class="annottext">([(k, v)] -&gt; [(v, k)])
-&gt; (Map k v -&gt; [(k, v)]) -&gt; Map k v -&gt; [(v, k)]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Map k v -&gt; [(k, v)]
forall k a. Map k a -&gt; [(k, a)]
</span><span class="hs-identifier hs-var">Map.toList</span></span><span>
</span><span id="line-293"></span><span>
</span><span id="line-294"></span><span>
</span><span id="line-295"></span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#%3D%3D%3E"><span class="hs-operator hs-type">(==&gt;)</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-296"></span><span id="local-6989586621679556876"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679556876"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="%3D%3D%3E"><span class="annot"><span class="annottext">==&gt; :: Bool -&gt; Bool -&gt; Bool
</span><a href="Byron.Spec.Ledger.Update.html#%3D%3D%3E"><span class="hs-operator hs-var hs-var">==&gt;</span></a></span></span><span> </span><span id="local-6989586621679556875"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679556875"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679556876"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679556875"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-297"></span><span class="hs-keyword">infix</span><span> </span><span class="hs-number">1</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#%3D%3D%3E"><span class="hs-operator hs-type">==&gt;</span></a></span><span>
</span><span id="line-298"></span><span>
</span><span id="line-299"></span><span class="hs-comment">-- | Check whether a protocol version can follow the current protocol version.</span><span>
</span><span id="line-300"></span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#pvCanFollow"><span class="hs-identifier hs-type">pvCanFollow</span></a></span><span>
</span><span id="line-301"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ProtVer"><span class="hs-identifier hs-type">ProtVer</span></a></span><span>
</span><span id="line-302"></span><span>  </span><span class="hs-comment">-- ^ Next protocol version</span><span>
</span><span id="line-303"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ProtVer"><span class="hs-identifier hs-type">ProtVer</span></a></span><span>
</span><span id="line-304"></span><span>  </span><span class="hs-comment">-- ^ Previous protocol version</span><span>
</span><span id="line-305"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-306"></span><span id="pvCanFollow"><span class="annot"><span class="annottext">pvCanFollow :: ProtVer -&gt; ProtVer -&gt; Bool
</span><a href="Byron.Spec.Ledger.Update.html#pvCanFollow"><span class="hs-identifier hs-var hs-var">pvCanFollow</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ProtVer"><span class="hs-identifier hs-type">ProtVer</span></a></span><span> </span><span id="local-6989586621679556871"><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679556871"><span class="hs-identifier hs-var">mjn</span></a></span></span><span> </span><span id="local-6989586621679556870"><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679556870"><span class="hs-identifier hs-var">mn</span></a></span></span><span> </span><span id="local-6989586621679556869"><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679556869"><span class="hs-identifier hs-var">an</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ProtVer"><span class="hs-identifier hs-type">ProtVer</span></a></span><span> </span><span id="local-6989586621679556868"><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679556868"><span class="hs-identifier hs-var">mjp</span></a></span></span><span> </span><span id="local-6989586621679556867"><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679556867"><span class="hs-identifier hs-var">mip</span></a></span></span><span> </span><span id="local-6989586621679556866"><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679556866"><span class="hs-identifier hs-var">ap</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-307"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679556868"><span class="hs-identifier hs-var">mjp</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679556867"><span class="hs-identifier hs-var">mip</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679556866"><span class="hs-identifier hs-var">ap</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Natural, Natural, Natural) -&gt; (Natural, Natural, Natural) -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679556871"><span class="hs-identifier hs-var">mjn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679556870"><span class="hs-identifier hs-var">mn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679556869"><span class="hs-identifier hs-var">an</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-308"></span><span>  </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Natural, Natural) -&gt; Natural -&gt; Bool
forall a. Ix a =&gt; (a, a) -&gt; a -&gt; Bool
</span><span class="hs-identifier hs-var">inRange</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">0</span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679556871"><span class="hs-identifier hs-var">mjn</span></a></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Natural -&gt; Natural
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679556868"><span class="hs-identifier hs-var">mjp</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-309"></span><span>  </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679556868"><span class="hs-identifier hs-var">mjp</span></a></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Natural -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679556871"><span class="hs-identifier hs-var">mjn</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><a href="Byron.Spec.Ledger.Update.html#%3D%3D%3E"><span class="hs-operator hs-var">==&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679556867"><span class="hs-identifier hs-var">mip</span></a></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Natural -&gt; Natural
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Natural -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679556870"><span class="hs-identifier hs-var">mn</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-310"></span><span>  </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679556868"><span class="hs-identifier hs-var">mjp</span></a></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Natural -&gt; Natural
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Natural -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679556871"><span class="hs-identifier hs-var">mjn</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><a href="Byron.Spec.Ledger.Update.html#%3D%3D%3E"><span class="hs-operator hs-var">==&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679556870"><span class="hs-identifier hs-var">mn</span></a></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Natural -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-311"></span><span>
</span><span id="line-312"></span><span class="hs-comment">-- | Check whether an update proposal marks a valid update</span><span>
</span><span id="line-313"></span><span class="hs-comment">--</span><span>
</span><span id="line-314"></span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#checkUpdateConstraints"><span class="hs-identifier hs-type">checkUpdateConstraints</span></a></span><span>
</span><span id="line-315"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#PParams"><span class="hs-identifier hs-type">PParams</span></a></span><span>
</span><span id="line-316"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UProp"><span class="hs-identifier hs-type">UProp</span></a></span><span>
</span><span id="line-317"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpdateConstraintViolation"><span class="hs-identifier hs-type">UpdateConstraintViolation</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-318"></span><span id="checkUpdateConstraints"><span class="annot"><span class="annottext">checkUpdateConstraints :: PParams -&gt; UProp -&gt; [UpdateConstraintViolation]
</span><a href="Byron.Spec.Ledger.Update.html#checkUpdateConstraints"><span class="hs-identifier hs-var hs-var">checkUpdateConstraints</span></a></span></span><span> </span><span id="local-6989586621679556861"><span class="annot"><span class="annottext">PParams
</span><a href="#local-6989586621679556861"><span class="hs-identifier hs-var">pps</span></a></span></span><span> </span><span id="local-6989586621679556860"><span class="annot"><span class="annottext">UProp
</span><a href="#local-6989586621679556860"><span class="hs-identifier hs-var">prop</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-319"></span><span>  </span><span class="annot"><span class="annottext">[Maybe UpdateConstraintViolation] -&gt; [UpdateConstraintViolation]
forall a. [Maybe a] -&gt; [a]
</span><span class="hs-identifier hs-var">catMaybes</span></span><span>
</span><span id="line-320"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UProp
</span><a href="#local-6989586621679556860"><span class="hs-identifier hs-var">prop</span></a></span><span> </span><span class="annot"><span class="annottext">UProp -&gt; Getting Natural UProp Natural -&gt; Natural
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">(PParams -&gt; Const Natural PParams) -&gt; UProp -&gt; Const Natural UProp
Lens' UProp PParams
</span><a href="Byron.Spec.Ledger.Update.html#upParams"><span class="hs-identifier hs-var">upParams</span></a></span><span> </span><span class="annot"><span class="annottext">((PParams -&gt; Const Natural PParams)
 -&gt; UProp -&gt; Const Natural UProp)
-&gt; ((Natural -&gt; Const Natural Natural)
    -&gt; PParams -&gt; Const Natural PParams)
-&gt; Getting Natural UProp Natural
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Natural -&gt; Const Natural Natural)
-&gt; PParams -&gt; Const Natural PParams
Lens' PParams Natural
</span><a href="Byron.Spec.Ledger.Update.html#maxBkSz"><span class="hs-identifier hs-var">maxBkSz</span></a></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Natural -&gt; Maybe (Natural, Threshold Natural)
forall a. Ord a =&gt; a -&gt; a -&gt; Maybe (a, Threshold a)
</span><a href="Byron.Spec.Ledger.Update.html#%3C%3D%3F"><span class="hs-operator hs-var">&lt;=?</span></a></span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Natural -&gt; Natural
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">*</span></span><span> </span><span class="annot"><span class="annottext">PParams
</span><a href="#local-6989586621679556861"><span class="hs-identifier hs-var">pps</span></a></span><span> </span><span class="annot"><span class="annottext">PParams
-&gt; ((Natural -&gt; Const Natural Natural)
    -&gt; PParams -&gt; Const Natural PParams)
-&gt; Natural
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">(Natural -&gt; Const Natural Natural)
-&gt; PParams -&gt; Const Natural PParams
Lens' PParams Natural
</span><a href="Byron.Spec.Ledger.Update.html#maxBkSz"><span class="hs-identifier hs-var">maxBkSz</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-321"></span><span>        </span><span class="annot"><span class="annottext">Maybe (Natural, Threshold Natural)
-&gt; (Natural -&gt; Threshold Natural -&gt; UpdateConstraintViolation)
-&gt; Maybe UpdateConstraintViolation
forall a b e. Maybe (a, b) -&gt; (a -&gt; b -&gt; e) -&gt; Maybe e
</span><a href="Byron.Spec.Ledger.Update.html#orError"><span class="hs-operator hs-var">`orError`</span></a></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Threshold Natural -&gt; UpdateConstraintViolation
</span><a href="Byron.Spec.Ledger.Update.html#BlockSizeTooLarge"><span class="hs-identifier hs-var">BlockSizeTooLarge</span></a></span><span>
</span><span id="line-322"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UProp
</span><a href="#local-6989586621679556860"><span class="hs-identifier hs-var">prop</span></a></span><span> </span><span class="annot"><span class="annottext">UProp -&gt; Getting Natural UProp Natural -&gt; Natural
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">(PParams -&gt; Const Natural PParams) -&gt; UProp -&gt; Const Natural UProp
Lens' UProp PParams
</span><a href="Byron.Spec.Ledger.Update.html#upParams"><span class="hs-identifier hs-var">upParams</span></a></span><span> </span><span class="annot"><span class="annottext">((PParams -&gt; Const Natural PParams)
 -&gt; UProp -&gt; Const Natural UProp)
-&gt; ((Natural -&gt; Const Natural Natural)
    -&gt; PParams -&gt; Const Natural PParams)
-&gt; Getting Natural UProp Natural
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Natural -&gt; Const Natural Natural)
-&gt; PParams -&gt; Const Natural PParams
Lens' PParams Natural
</span><a href="Byron.Spec.Ledger.Update.html#maxTxSz"><span class="hs-identifier hs-var">maxTxSz</span></a></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Natural -&gt; Natural
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Natural -&gt; Maybe (Natural, Threshold Natural)
forall a. Ord a =&gt; a -&gt; a -&gt; Maybe (a, Threshold a)
</span><a href="Byron.Spec.Ledger.Update.html#%3C%3D%3F"><span class="hs-operator hs-var">&lt;=?</span></a></span><span> </span><span class="annot"><span class="annottext">UProp
</span><a href="#local-6989586621679556860"><span class="hs-identifier hs-var">prop</span></a></span><span> </span><span class="annot"><span class="annottext">UProp -&gt; Getting Natural UProp Natural -&gt; Natural
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">(PParams -&gt; Const Natural PParams) -&gt; UProp -&gt; Const Natural UProp
Lens' UProp PParams
</span><a href="Byron.Spec.Ledger.Update.html#upParams"><span class="hs-identifier hs-var">upParams</span></a></span><span> </span><span class="annot"><span class="annottext">((PParams -&gt; Const Natural PParams)
 -&gt; UProp -&gt; Const Natural UProp)
-&gt; ((Natural -&gt; Const Natural Natural)
    -&gt; PParams -&gt; Const Natural PParams)
-&gt; Getting Natural UProp Natural
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Natural -&gt; Const Natural Natural)
-&gt; PParams -&gt; Const Natural PParams
Lens' PParams Natural
</span><a href="Byron.Spec.Ledger.Update.html#maxBkSz"><span class="hs-identifier hs-var">maxBkSz</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-323"></span><span>        </span><span class="annot"><span class="annottext">Maybe (Natural, Threshold Natural)
-&gt; (Natural -&gt; Threshold Natural -&gt; UpdateConstraintViolation)
-&gt; Maybe UpdateConstraintViolation
forall a b e. Maybe (a, b) -&gt; (a -&gt; b -&gt; e) -&gt; Maybe e
</span><a href="Byron.Spec.Ledger.Update.html#orError"><span class="hs-operator hs-var">`orError`</span></a></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Threshold Natural -&gt; UpdateConstraintViolation
</span><a href="Byron.Spec.Ledger.Update.html#TransactionSizeTooLarge"><span class="hs-identifier hs-var">TransactionSizeTooLarge</span></a></span><span>
</span><span id="line-324"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PParams
</span><a href="#local-6989586621679556861"><span class="hs-identifier hs-var">pps</span></a></span><span> </span><span class="annot"><span class="annottext">PParams
-&gt; ((Natural -&gt; Const Natural Natural)
    -&gt; PParams -&gt; Const Natural PParams)
-&gt; Natural
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">(Natural -&gt; Const Natural Natural)
-&gt; PParams -&gt; Const Natural PParams
Lens' PParams Natural
</span><a href="Byron.Spec.Ledger.Update.html#scriptVersion"><span class="hs-identifier hs-var">scriptVersion</span></a></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Natural -&gt; Maybe (Natural, Threshold Natural)
forall a. Ord a =&gt; a -&gt; a -&gt; Maybe (a, Threshold a)
</span><a href="Byron.Spec.Ledger.Update.html#%3C%3D%3F"><span class="hs-operator hs-var">&lt;=?</span></a></span><span> </span><span class="annot"><span class="annottext">UProp
</span><a href="#local-6989586621679556860"><span class="hs-identifier hs-var">prop</span></a></span><span> </span><span class="annot"><span class="annottext">UProp -&gt; Getting Natural UProp Natural -&gt; Natural
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">(PParams -&gt; Const Natural PParams) -&gt; UProp -&gt; Const Natural UProp
Lens' UProp PParams
</span><a href="Byron.Spec.Ledger.Update.html#upParams"><span class="hs-identifier hs-var">upParams</span></a></span><span> </span><span class="annot"><span class="annottext">((PParams -&gt; Const Natural PParams)
 -&gt; UProp -&gt; Const Natural UProp)
-&gt; ((Natural -&gt; Const Natural Natural)
    -&gt; PParams -&gt; Const Natural PParams)
-&gt; Getting Natural UProp Natural
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Natural -&gt; Const Natural Natural)
-&gt; PParams -&gt; Const Natural PParams
Lens' PParams Natural
</span><a href="Byron.Spec.Ledger.Update.html#scriptVersion"><span class="hs-identifier hs-var">scriptVersion</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-325"></span><span>        </span><span class="annot"><span class="annottext">Maybe (Natural, Threshold Natural)
-&gt; (Natural -&gt; Threshold Natural -&gt; UpdateConstraintViolation)
-&gt; Maybe UpdateConstraintViolation
forall a b e. Maybe (a, b) -&gt; (a -&gt; b -&gt; e) -&gt; Maybe e
</span><a href="Byron.Spec.Ledger.Update.html#orError"><span class="hs-operator hs-var">`orError`</span></a></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Threshold Natural -&gt; UpdateConstraintViolation
</span><a href="Byron.Spec.Ledger.Update.html#ScriptVersionTooSmall"><span class="hs-identifier hs-var">ScriptVersionTooSmall</span></a></span><span>
</span><span id="line-326"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UProp
</span><a href="#local-6989586621679556860"><span class="hs-identifier hs-var">prop</span></a></span><span> </span><span class="annot"><span class="annottext">UProp -&gt; Getting Natural UProp Natural -&gt; Natural
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">(PParams -&gt; Const Natural PParams) -&gt; UProp -&gt; Const Natural UProp
Lens' UProp PParams
</span><a href="Byron.Spec.Ledger.Update.html#upParams"><span class="hs-identifier hs-var">upParams</span></a></span><span> </span><span class="annot"><span class="annottext">((PParams -&gt; Const Natural PParams)
 -&gt; UProp -&gt; Const Natural UProp)
-&gt; ((Natural -&gt; Const Natural Natural)
    -&gt; PParams -&gt; Const Natural PParams)
-&gt; Getting Natural UProp Natural
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Natural -&gt; Const Natural Natural)
-&gt; PParams -&gt; Const Natural PParams
Lens' PParams Natural
</span><a href="Byron.Spec.Ledger.Update.html#scriptVersion"><span class="hs-identifier hs-var">scriptVersion</span></a></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Natural -&gt; Maybe (Natural, Threshold Natural)
forall a. Ord a =&gt; a -&gt; a -&gt; Maybe (a, Threshold a)
</span><a href="Byron.Spec.Ledger.Update.html#%3C%3D%3F"><span class="hs-operator hs-var">&lt;=?</span></a></span><span> </span><span class="annot"><span class="annottext">PParams
</span><a href="#local-6989586621679556861"><span class="hs-identifier hs-var">pps</span></a></span><span> </span><span class="annot"><span class="annottext">PParams
-&gt; ((Natural -&gt; Const Natural Natural)
    -&gt; PParams -&gt; Const Natural PParams)
-&gt; Natural
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">(Natural -&gt; Const Natural Natural)
-&gt; PParams -&gt; Const Natural PParams
Lens' PParams Natural
</span><a href="Byron.Spec.Ledger.Update.html#scriptVersion"><span class="hs-identifier hs-var">scriptVersion</span></a></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Natural -&gt; Natural
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-327"></span><span>        </span><span class="annot"><span class="annottext">Maybe (Natural, Threshold Natural)
-&gt; (Natural -&gt; Threshold Natural -&gt; UpdateConstraintViolation)
-&gt; Maybe UpdateConstraintViolation
forall a b e. Maybe (a, b) -&gt; (a -&gt; b -&gt; e) -&gt; Maybe e
</span><a href="Byron.Spec.Ledger.Update.html#orError"><span class="hs-operator hs-var">`orError`</span></a></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Threshold Natural -&gt; UpdateConstraintViolation
</span><a href="Byron.Spec.Ledger.Update.html#ScriptVersionTooLarge"><span class="hs-identifier hs-var">ScriptVersionTooLarge</span></a></span><span>
</span><span id="line-328"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-329"></span><span>
</span><span id="line-330"></span><span id="local-6989586621679558872"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#%3C%3D%3F"><span class="hs-operator hs-type">(&lt;=?)</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679558872"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679558872"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679558872"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679558872"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">Threshold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679558872"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-331"></span><span id="local-6989586621679556852"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679556852"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="%3C%3D%3F"><span class="annot"><span class="annottext">&lt;=? :: a -&gt; a -&gt; Maybe (a, Threshold a)
</span><a href="Byron.Spec.Ledger.Update.html#%3C%3D%3F"><span class="hs-operator hs-var hs-var">&lt;=?</span></a></span></span><span> </span><span id="local-6989586621679556851"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679556851"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679556852"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;=</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679556851"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Maybe (a, Threshold a)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">(a, Threshold a) -&gt; Maybe (a, Threshold a)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679556852"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">a -&gt; Threshold a
forall a. a -&gt; Threshold a
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">Threshold</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679556851"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-332"></span><span>
</span><span id="line-333"></span><span class="hs-keyword">infix</span><span> </span><span class="hs-number">4</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#%3C%3D%3F"><span class="hs-operator hs-type">&lt;=?</span></a></span><span>
</span><span id="line-334"></span><span>
</span><span id="line-335"></span><span id="local-6989586621679558869"><span id="local-6989586621679558870"><span id="local-6989586621679558871"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#orError"><span class="hs-identifier hs-type">orError</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679558871"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679558870"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679558871"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679558870"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679558869"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679558869"><span class="hs-identifier hs-type">e</span></a></span></span></span></span><span>
</span><span id="line-336"></span><span id="orError"><span class="annot"><span class="annottext">orError :: Maybe (a, b) -&gt; (a -&gt; b -&gt; e) -&gt; Maybe e
</span><a href="Byron.Spec.Ledger.Update.html#orError"><span class="hs-identifier hs-var hs-var">orError</span></a></span></span><span> </span><span id="local-6989586621679556848"><span class="annot"><span class="annottext">Maybe (a, b)
</span><a href="#local-6989586621679556848"><span class="hs-identifier hs-var">mab</span></a></span></span><span> </span><span id="local-6989586621679556847"><span class="annot"><span class="annottext">a -&gt; b -&gt; e
</span><a href="#local-6989586621679556847"><span class="hs-identifier hs-var">ferr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; b -&gt; e) -&gt; (a, b) -&gt; e
forall a b c. (a -&gt; b -&gt; c) -&gt; (a, b) -&gt; c
</span><span class="hs-identifier hs-var">uncurry</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; b -&gt; e
</span><a href="#local-6989586621679556847"><span class="hs-identifier hs-var">ferr</span></a></span><span> </span><span class="annot"><span class="annottext">((a, b) -&gt; e) -&gt; Maybe (a, b) -&gt; Maybe e
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe (a, b)
</span><a href="#local-6989586621679556848"><span class="hs-identifier hs-var">mab</span></a></span><span>
</span><span id="line-337"></span><span>
</span><span id="line-338"></span><span id="local-6989586621679558720"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#canUpdate"><span class="hs-identifier hs-type">canUpdate</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#PParams"><span class="hs-identifier hs-type">PParams</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UProp"><span class="hs-identifier hs-type">UProp</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">Rule</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPPVV"><span class="hs-identifier hs-type">UPPVV</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679558720"><span class="hs-identifier hs-type">ctx</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-339"></span><span id="canUpdate"><span class="annot"><span class="annottext">canUpdate :: PParams -&gt; UProp -&gt; Rule UPPVV ctx ()
</span><a href="Byron.Spec.Ledger.Update.html#canUpdate"><span class="hs-identifier hs-var hs-var">canUpdate</span></a></span></span><span> </span><span id="local-6989586621679556843"><span class="annot"><span class="annottext">PParams
</span><a href="#local-6989586621679556843"><span class="hs-identifier hs-var">pps</span></a></span></span><span> </span><span id="local-6989586621679556842"><span class="annot"><span class="annottext">UProp
</span><a href="#local-6989586621679556842"><span class="hs-identifier hs-var">prop</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[UpdateConstraintViolation]
</span><a href="#local-6989586621679556841"><span class="hs-identifier hs-var">violations</span></a></span><span> </span><span class="annot"><span class="annottext">[UpdateConstraintViolation] -&gt; [UpdateConstraintViolation] -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; PredicateFailure UPPVV -&gt; Rule UPPVV ctx ()
forall sts (ctx :: RuleType).
Bool -&gt; PredicateFailure sts -&gt; Rule sts ctx ()
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-operator hs-var">?!</span></a></span><span> </span><span class="annot"><span class="annottext">[UpdateConstraintViolation] -&gt; UppvvPredicateFailure
</span><a href="Byron.Spec.Ledger.Update.html#CannotUpdatePv"><span class="hs-identifier hs-var">CannotUpdatePv</span></a></span><span> </span><span class="annot"><span class="annottext">[UpdateConstraintViolation]
</span><a href="#local-6989586621679556841"><span class="hs-identifier hs-var">violations</span></a></span><span>
</span><span id="line-340"></span><span>  </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679556841"><span class="annot"><span class="annottext">violations :: [UpdateConstraintViolation]
</span><a href="#local-6989586621679556841"><span class="hs-identifier hs-var hs-var">violations</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PParams -&gt; UProp -&gt; [UpdateConstraintViolation]
</span><a href="Byron.Spec.Ledger.Update.html#checkUpdateConstraints"><span class="hs-identifier hs-var">checkUpdateConstraints</span></a></span><span> </span><span class="annot"><span class="annottext">PParams
</span><a href="#local-6989586621679556843"><span class="hs-identifier hs-var">pps</span></a></span><span> </span><span class="annot"><span class="annottext">UProp
</span><a href="#local-6989586621679556842"><span class="hs-identifier hs-var">prop</span></a></span><span>
</span><span id="line-341"></span><span>
</span><span id="line-342"></span><span class="hs-comment">-- | Violations on the constraints of the allowed values for new protocol</span><span>
</span><span id="line-343"></span><span class="hs-comment">-- parameters.</span><span>
</span><span id="line-344"></span><span id="local-6989586621679556837"><span id="local-6989586621679556838"></span></span><span class="hs-keyword">data</span><span> </span><span id="UpdateConstraintViolation"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpdateConstraintViolation"><span class="hs-identifier hs-var">UpdateConstraintViolation</span></a></span></span><span>
</span><span id="line-345"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="BlockSizeTooLarge"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#BlockSizeTooLarge"><span class="hs-identifier hs-var">BlockSizeTooLarge</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Natural</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">Threshold</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Natural</span></span><span class="hs-special">)</span><span>
</span><span id="line-346"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="TransactionSizeTooLarge"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#TransactionSizeTooLarge"><span class="hs-identifier hs-var">TransactionSizeTooLarge</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Natural</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">Threshold</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Natural</span></span><span class="hs-special">)</span><span>
</span><span id="line-347"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="ScriptVersionTooLarge"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ScriptVersionTooLarge"><span class="hs-identifier hs-var">ScriptVersionTooLarge</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Natural</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">Threshold</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Natural</span></span><span class="hs-special">)</span><span>
</span><span id="line-348"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="ScriptVersionTooSmall"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ScriptVersionTooSmall"><span class="hs-identifier hs-var">ScriptVersionTooSmall</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Natural</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">Threshold</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Natural</span></span><span class="hs-special">)</span><span>
</span><span id="line-349"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556833"><span id="local-6989586621679556835"><span class="annot"><span class="annottext">UpdateConstraintViolation -&gt; UpdateConstraintViolation -&gt; Bool
(UpdateConstraintViolation -&gt; UpdateConstraintViolation -&gt; Bool)
-&gt; (UpdateConstraintViolation -&gt; UpdateConstraintViolation -&gt; Bool)
-&gt; Eq UpdateConstraintViolation
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: UpdateConstraintViolation -&gt; UpdateConstraintViolation -&gt; Bool
$c/= :: UpdateConstraintViolation -&gt; UpdateConstraintViolation -&gt; Bool
== :: UpdateConstraintViolation -&gt; UpdateConstraintViolation -&gt; Bool
$c== :: UpdateConstraintViolation -&gt; UpdateConstraintViolation -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679556818"><span id="local-6989586621679556820"><span id="local-6989586621679556822"><span id="local-6989586621679556824"><span id="local-6989586621679556826"><span id="local-6989586621679556828"><span id="local-6989586621679556830"><span class="annot"><span class="annottext">Eq UpdateConstraintViolation
Eq UpdateConstraintViolation
-&gt; (UpdateConstraintViolation
    -&gt; UpdateConstraintViolation -&gt; Ordering)
-&gt; (UpdateConstraintViolation -&gt; UpdateConstraintViolation -&gt; Bool)
-&gt; (UpdateConstraintViolation -&gt; UpdateConstraintViolation -&gt; Bool)
-&gt; (UpdateConstraintViolation -&gt; UpdateConstraintViolation -&gt; Bool)
-&gt; (UpdateConstraintViolation -&gt; UpdateConstraintViolation -&gt; Bool)
-&gt; (UpdateConstraintViolation
    -&gt; UpdateConstraintViolation -&gt; UpdateConstraintViolation)
-&gt; (UpdateConstraintViolation
    -&gt; UpdateConstraintViolation -&gt; UpdateConstraintViolation)
-&gt; Ord UpdateConstraintViolation
UpdateConstraintViolation -&gt; UpdateConstraintViolation -&gt; Bool
UpdateConstraintViolation -&gt; UpdateConstraintViolation -&gt; Ordering
UpdateConstraintViolation
-&gt; UpdateConstraintViolation -&gt; UpdateConstraintViolation
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: UpdateConstraintViolation
-&gt; UpdateConstraintViolation -&gt; UpdateConstraintViolation
$cmin :: UpdateConstraintViolation
-&gt; UpdateConstraintViolation -&gt; UpdateConstraintViolation
max :: UpdateConstraintViolation
-&gt; UpdateConstraintViolation -&gt; UpdateConstraintViolation
$cmax :: UpdateConstraintViolation
-&gt; UpdateConstraintViolation -&gt; UpdateConstraintViolation
&gt;= :: UpdateConstraintViolation -&gt; UpdateConstraintViolation -&gt; Bool
$c&gt;= :: UpdateConstraintViolation -&gt; UpdateConstraintViolation -&gt; Bool
&gt; :: UpdateConstraintViolation -&gt; UpdateConstraintViolation -&gt; Bool
$c&gt; :: UpdateConstraintViolation -&gt; UpdateConstraintViolation -&gt; Bool
&lt;= :: UpdateConstraintViolation -&gt; UpdateConstraintViolation -&gt; Bool
$c&lt;= :: UpdateConstraintViolation -&gt; UpdateConstraintViolation -&gt; Bool
&lt; :: UpdateConstraintViolation -&gt; UpdateConstraintViolation -&gt; Bool
$c&lt; :: UpdateConstraintViolation -&gt; UpdateConstraintViolation -&gt; Bool
compare :: UpdateConstraintViolation -&gt; UpdateConstraintViolation -&gt; Ordering
$ccompare :: UpdateConstraintViolation -&gt; UpdateConstraintViolation -&gt; Ordering
$cp1Ord :: Eq UpdateConstraintViolation
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679556812"><span id="local-6989586621679556814"><span id="local-6989586621679556816"><span class="annot"><span class="annottext">Int -&gt; UpdateConstraintViolation -&gt; ShowS
[UpdateConstraintViolation] -&gt; ShowS
UpdateConstraintViolation -&gt; String
(Int -&gt; UpdateConstraintViolation -&gt; ShowS)
-&gt; (UpdateConstraintViolation -&gt; String)
-&gt; ([UpdateConstraintViolation] -&gt; ShowS)
-&gt; Show UpdateConstraintViolation
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [UpdateConstraintViolation] -&gt; ShowS
$cshowList :: [UpdateConstraintViolation] -&gt; ShowS
show :: UpdateConstraintViolation -&gt; String
$cshow :: UpdateConstraintViolation -&gt; String
showsPrec :: Int -&gt; UpdateConstraintViolation -&gt; ShowS
$cshowsPrec :: Int -&gt; UpdateConstraintViolation -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="%24cScriptVersionTooSmall"><span id="%24cScriptVersionTooLarge"><span id="%24cTransactionSizeTooLarge"><span id="%24cBlockSizeTooLarge"><span id="%24tUpdateConstraintViolation"><span id="local-6989586621679556783"><span id="local-6989586621679556785"><span id="local-6989586621679556787"><span id="local-6989586621679556789"><span id="local-6989586621679556791"><span id="local-6989586621679556793"><span id="local-6989586621679556795"><span id="local-6989586621679556797"><span id="local-6989586621679556799"><span id="local-6989586621679556801"><span id="local-6989586621679556803"><span id="local-6989586621679556805"><span id="local-6989586621679556807"><span id="local-6989586621679556809"><span class="annot"><span class="annottext">Typeable UpdateConstraintViolation
DataType
Constr
Typeable UpdateConstraintViolation
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g)
    -&gt; UpdateConstraintViolation
    -&gt; c UpdateConstraintViolation)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UpdateConstraintViolation)
-&gt; (UpdateConstraintViolation -&gt; Constr)
-&gt; (UpdateConstraintViolation -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d))
    -&gt; Maybe (c UpdateConstraintViolation))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e))
    -&gt; Maybe (c UpdateConstraintViolation))
-&gt; ((forall b. Data b =&gt; b -&gt; b)
    -&gt; UpdateConstraintViolation -&gt; UpdateConstraintViolation)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r
    -&gt; (forall d. Data d =&gt; d -&gt; r')
    -&gt; UpdateConstraintViolation
    -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r
    -&gt; (forall d. Data d =&gt; d -&gt; r')
    -&gt; UpdateConstraintViolation
    -&gt; r)
-&gt; (forall u.
    (forall d. Data d =&gt; d -&gt; u) -&gt; UpdateConstraintViolation -&gt; [u])
-&gt; (forall u.
    Int
    -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UpdateConstraintViolation -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; UpdateConstraintViolation -&gt; m UpdateConstraintViolation)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; UpdateConstraintViolation -&gt; m UpdateConstraintViolation)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; UpdateConstraintViolation -&gt; m UpdateConstraintViolation)
-&gt; Data UpdateConstraintViolation
UpdateConstraintViolation -&gt; DataType
UpdateConstraintViolation -&gt; Constr
(forall b. Data b =&gt; b -&gt; b)
-&gt; UpdateConstraintViolation -&gt; UpdateConstraintViolation
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; UpdateConstraintViolation
-&gt; c UpdateConstraintViolation
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UpdateConstraintViolation
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u.
Int
-&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UpdateConstraintViolation -&gt; u
forall u.
(forall d. Data d =&gt; d -&gt; u) -&gt; UpdateConstraintViolation -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; UpdateConstraintViolation
-&gt; r
forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; UpdateConstraintViolation
-&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; UpdateConstraintViolation -&gt; m UpdateConstraintViolation
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; UpdateConstraintViolation -&gt; m UpdateConstraintViolation
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UpdateConstraintViolation
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; UpdateConstraintViolation
-&gt; c UpdateConstraintViolation
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d))
-&gt; Maybe (c UpdateConstraintViolation)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c UpdateConstraintViolation)
$cScriptVersionTooSmall :: Constr
$cScriptVersionTooLarge :: Constr
$cTransactionSizeTooLarge :: Constr
$cBlockSizeTooLarge :: Constr
$tUpdateConstraintViolation :: DataType
gmapMo :: (forall d. Data d =&gt; d -&gt; m d)
-&gt; UpdateConstraintViolation -&gt; m UpdateConstraintViolation
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; UpdateConstraintViolation -&gt; m UpdateConstraintViolation
gmapMp :: (forall d. Data d =&gt; d -&gt; m d)
-&gt; UpdateConstraintViolation -&gt; m UpdateConstraintViolation
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; UpdateConstraintViolation -&gt; m UpdateConstraintViolation
gmapM :: (forall d. Data d =&gt; d -&gt; m d)
-&gt; UpdateConstraintViolation -&gt; m UpdateConstraintViolation
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; UpdateConstraintViolation -&gt; m UpdateConstraintViolation
gmapQi :: Int
-&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UpdateConstraintViolation -&gt; u
$cgmapQi :: forall u.
Int
-&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UpdateConstraintViolation -&gt; u
gmapQ :: (forall d. Data d =&gt; d -&gt; u) -&gt; UpdateConstraintViolation -&gt; [u]
$cgmapQ :: forall u.
(forall d. Data d =&gt; d -&gt; u) -&gt; UpdateConstraintViolation -&gt; [u]
gmapQr :: (r' -&gt; r -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; UpdateConstraintViolation
-&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; UpdateConstraintViolation
-&gt; r
gmapQl :: (r -&gt; r' -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; UpdateConstraintViolation
-&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; UpdateConstraintViolation
-&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b)
-&gt; UpdateConstraintViolation -&gt; UpdateConstraintViolation
$cgmapT :: (forall b. Data b =&gt; b -&gt; b)
-&gt; UpdateConstraintViolation -&gt; UpdateConstraintViolation
dataCast2 :: (forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c UpdateConstraintViolation)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c UpdateConstraintViolation)
dataCast1 :: (forall d. Data d =&gt; c (t d))
-&gt; Maybe (c UpdateConstraintViolation)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d))
-&gt; Maybe (c UpdateConstraintViolation)
dataTypeOf :: UpdateConstraintViolation -&gt; DataType
$cdataTypeOf :: UpdateConstraintViolation -&gt; DataType
toConstr :: UpdateConstraintViolation -&gt; Constr
$ctoConstr :: UpdateConstraintViolation -&gt; Constr
gunfold :: (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UpdateConstraintViolation
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UpdateConstraintViolation
gfoldl :: (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; UpdateConstraintViolation
-&gt; c UpdateConstraintViolation
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; UpdateConstraintViolation
-&gt; c UpdateConstraintViolation
$cp1Data :: Typeable UpdateConstraintViolation
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x.
 UpdateConstraintViolation -&gt; Rep UpdateConstraintViolation x)
-&gt; (forall x.
    Rep UpdateConstraintViolation x -&gt; UpdateConstraintViolation)
-&gt; Generic UpdateConstraintViolation
forall x.
Rep UpdateConstraintViolation x -&gt; UpdateConstraintViolation
forall x.
UpdateConstraintViolation -&gt; Rep UpdateConstraintViolation x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x.
Rep UpdateConstraintViolation x -&gt; UpdateConstraintViolation
$cfrom :: forall x.
UpdateConstraintViolation -&gt; Rep UpdateConstraintViolation x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679556770"><span id="local-6989586621679556772"><span id="local-6989586621679556774"><span class="annot"><span class="annottext">Context -&gt; UpdateConstraintViolation -&gt; IO (Maybe ThunkInfo)
Proxy UpdateConstraintViolation -&gt; String
(Context -&gt; UpdateConstraintViolation -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; UpdateConstraintViolation -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy UpdateConstraintViolation -&gt; String)
-&gt; NoThunks UpdateConstraintViolation
forall a.
(Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy a -&gt; String)
-&gt; NoThunks a
showTypeOf :: Proxy UpdateConstraintViolation -&gt; String
$cshowTypeOf :: Proxy UpdateConstraintViolation -&gt; String
wNoThunks :: Context -&gt; UpdateConstraintViolation -&gt; IO (Maybe ThunkInfo)
$cwNoThunks :: Context -&gt; UpdateConstraintViolation -&gt; IO (Maybe ThunkInfo)
noThunks :: Context -&gt; UpdateConstraintViolation -&gt; IO (Maybe ThunkInfo)
$cnoThunks :: Context -&gt; UpdateConstraintViolation -&gt; IO (Maybe ThunkInfo)
</span><a href="#local-6989586621679556770"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">NoThunks</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-350"></span><span>
</span><span id="line-351"></span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#svCanFollow"><span class="hs-identifier hs-type">svCanFollow</span></a></span><span>
</span><span id="line-352"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ApName"><span class="hs-identifier hs-type">ApName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ApVer"><span class="hs-identifier hs-type">ApVer</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Slot"><span class="hs-identifier hs-type">Core.Slot</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#Metadata"><span class="hs-identifier hs-type">Metadata</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-353"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ApName"><span class="hs-identifier hs-type">ApName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ApVer"><span class="hs-identifier hs-type">ApVer</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-354"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-355"></span><span id="svCanFollow"><span class="annot"><span class="annottext">svCanFollow :: Map ApName (ApVer, Slot, Metadata) -&gt; (ApName, ApVer) -&gt; Bool
</span><a href="Byron.Spec.Ledger.Update.html#svCanFollow"><span class="hs-identifier hs-var hs-var">svCanFollow</span></a></span></span><span> </span><span id="local-6989586621679556768"><span class="annot"><span class="annottext">Map ApName (ApVer, Slot, Metadata)
</span><a href="#local-6989586621679556768"><span class="hs-identifier hs-var">avs</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556767"><span class="annot"><span class="annottext">ApName
</span><a href="#local-6989586621679556767"><span class="hs-identifier hs-var">an</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679556766"><span class="annot"><span class="annottext">ApVer
</span><a href="#local-6989586621679556766"><span class="hs-identifier hs-var">av</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-356"></span><span>    </span><span class="hs-special">(</span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ApName
-&gt; Map ApName (ApVer, Slot, Metadata)
-&gt; Maybe (ApVer, Slot, Metadata)
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="annot"><span class="annottext">ApName
</span><a href="#local-6989586621679556767"><span class="hs-identifier hs-var">an</span></a></span><span> </span><span class="annot"><span class="annottext">Map ApName (ApVer, Slot, Metadata)
</span><a href="#local-6989586621679556768"><span class="hs-identifier hs-var">avs</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-357"></span><span>      </span><span class="annot"><span class="annottext">Maybe (ApVer, Slot, Metadata)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-358"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556765"><span class="annot"><span class="annottext">ApVer
</span><a href="#local-6989586621679556765"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Slot
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Metadata
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ApVer
</span><a href="#local-6989586621679556766"><span class="hs-identifier hs-var">av</span></a></span><span> </span><span class="annot"><span class="annottext">ApVer -&gt; ApVer -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">ApVer
</span><a href="#local-6989586621679556765"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">ApVer -&gt; ApVer -&gt; ApVer
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">ApVer
</span><span class="hs-number">1</span></span><span>
</span><span id="line-359"></span><span>    </span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ApName
</span><a href="#local-6989586621679556767"><span class="hs-identifier hs-var">an</span></a></span><span> </span><span class="annot"><span class="annottext">ApName -&gt; Set ApName -&gt; Bool
forall a. Ord a =&gt; a -&gt; Set a -&gt; Bool
</span><span class="hs-operator hs-var">`Set.notMember`</span></span><span> </span><span class="annot"><span class="annottext">Map ApName (ApVer, Slot, Metadata)
-&gt; Set (Domain (Map ApName (ApVer, Slot, Metadata)))
forall m. (Relation m, Ord (Domain m)) =&gt; m -&gt; Set (Domain m)
</span><a href="Byron.Spec.Ledger.Core.html#dom"><span class="hs-identifier hs-var">dom</span></a></span><span> </span><span class="annot"><span class="annottext">Map ApName (ApVer, Slot, Metadata)
</span><a href="#local-6989586621679556768"><span class="hs-identifier hs-var">avs</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><a href="Byron.Spec.Ledger.Update.html#%3D%3D%3E"><span class="hs-operator hs-var">==&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ApVer
</span><a href="#local-6989586621679556766"><span class="hs-identifier hs-var">av</span></a></span><span> </span><span class="annot"><span class="annottext">ApVer -&gt; ApVer -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; ApVer
</span><a href="Byron.Spec.Ledger.Update.html#ApVer"><span class="hs-identifier hs-var">ApVer</span></a></span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">ApVer
</span><a href="#local-6989586621679556766"><span class="hs-identifier hs-var">av</span></a></span><span> </span><span class="annot"><span class="annottext">ApVer -&gt; ApVer -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; ApVer
</span><a href="Byron.Spec.Ledger.Update.html#ApVer"><span class="hs-identifier hs-var">ApVer</span></a></span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-360"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-361"></span><span>
</span><span id="line-362"></span><span class="hs-comment">------------------------------------------------------------------------</span><span>
</span><span id="line-363"></span><span class="hs-comment">-- Update proposals</span><span>
</span><span id="line-364"></span><span class="hs-comment">------------------------------------------------------------------------</span><span>
</span><span id="line-365"></span><span>
</span><span id="line-366"></span><span class="hs-comment">-- | Update Proposal Software Version Validation</span><span>
</span><span id="line-367"></span><span id="local-6989586621679556762"><span id="local-6989586621679556763"></span></span><span class="hs-keyword">data</span><span> </span><span id="UPSVV"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPSVV"><span class="hs-identifier hs-var">UPSVV</span></a></span></span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(forall x. UPSVV -&gt; Rep UPSVV x)
-&gt; (forall x. Rep UPSVV x -&gt; UPSVV) -&gt; Generic UPSVV
forall x. Rep UPSVV x -&gt; UPSVV
forall x. UPSVV -&gt; Rep UPSVV x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep UPSVV x -&gt; UPSVV
$cfrom :: forall x. UPSVV -&gt; Rep UPSVV x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">,</span><span> </span><span id="%24tUPSVV"><span id="local-6989586621679556731"><span id="local-6989586621679556733"><span id="local-6989586621679556735"><span id="local-6989586621679556737"><span id="local-6989586621679556739"><span id="local-6989586621679556741"><span id="local-6989586621679556743"><span id="local-6989586621679556745"><span id="local-6989586621679556747"><span id="local-6989586621679556749"><span id="local-6989586621679556751"><span id="local-6989586621679556753"><span id="local-6989586621679556755"><span id="local-6989586621679556757"><span class="annot"><span class="annottext">Typeable UPSVV
DataType
Typeable UPSVV
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; UPSVV -&gt; c UPSVV)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UPSVV)
-&gt; (UPSVV -&gt; Constr)
-&gt; (UPSVV -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UPSVV))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c UPSVV))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; UPSVV -&gt; UPSVV)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPSVV -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPSVV -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; UPSVV -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UPSVV -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; UPSVV -&gt; m UPSVV)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; UPSVV -&gt; m UPSVV)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; UPSVV -&gt; m UPSVV)
-&gt; Data UPSVV
UPSVV -&gt; DataType
UPSVV -&gt; Constr
(forall b. Data b =&gt; b -&gt; b) -&gt; UPSVV -&gt; UPSVV
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; UPSVV -&gt; c UPSVV
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UPSVV
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UPSVV -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; UPSVV -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPSVV -&gt; r
forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPSVV -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UPSVV -&gt; m UPSVV
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UPSVV -&gt; m UPSVV
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UPSVV
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; UPSVV -&gt; c UPSVV
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UPSVV)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c UPSVV)
$tUPSVV :: DataType
gmapMo :: (forall d. Data d =&gt; d -&gt; m d) -&gt; UPSVV -&gt; m UPSVV
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UPSVV -&gt; m UPSVV
gmapMp :: (forall d. Data d =&gt; d -&gt; m d) -&gt; UPSVV -&gt; m UPSVV
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UPSVV -&gt; m UPSVV
gmapM :: (forall d. Data d =&gt; d -&gt; m d) -&gt; UPSVV -&gt; m UPSVV
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UPSVV -&gt; m UPSVV
gmapQi :: Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UPSVV -&gt; u
$cgmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UPSVV -&gt; u
gmapQ :: (forall d. Data d =&gt; d -&gt; u) -&gt; UPSVV -&gt; [u]
$cgmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; UPSVV -&gt; [u]
gmapQr :: (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPSVV -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPSVV -&gt; r
gmapQl :: (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPSVV -&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPSVV -&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; UPSVV -&gt; UPSVV
$cgmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; UPSVV -&gt; UPSVV
dataCast2 :: (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c UPSVV)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c UPSVV)
dataCast1 :: (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UPSVV)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UPSVV)
dataTypeOf :: UPSVV -&gt; DataType
$cdataTypeOf :: UPSVV -&gt; DataType
toConstr :: UPSVV -&gt; Constr
$ctoConstr :: UPSVV -&gt; Constr
gunfold :: (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UPSVV
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UPSVV
gfoldl :: (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; UPSVV -&gt; c UPSVV
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; UPSVV -&gt; c UPSVV
$cp1Data :: Typeable UPSVV
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">)</span><span>
</span><span id="line-368"></span><span>
</span><span id="line-369"></span><span class="hs-comment">-- | These `PredicateFailure`s are all &quot;throwable&quot;. The disjunction of the</span><span>
</span><span id="line-370"></span><span class="hs-comment">--   rules' preconditions is not `True` - the `PredicateFailure`s represent</span><span>
</span><span id="line-371"></span><span class="hs-comment">--   `False` cases.</span><span>
</span><span id="line-372"></span><span id="local-6989586621679556728"><span id="local-6989586621679556729"></span></span><span class="hs-keyword">data</span><span> </span><span id="UpsvvPredicateFailure"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpsvvPredicateFailure"><span class="hs-identifier hs-var">UpsvvPredicateFailure</span></a></span></span><span>
</span><span id="line-373"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="AlreadyProposedSv"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#AlreadyProposedSv"><span class="hs-identifier hs-var">AlreadyProposedSv</span></a></span></span><span>
</span><span id="line-374"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="CannotFollowSv"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#CannotFollowSv"><span class="hs-identifier hs-var">CannotFollowSv</span></a></span></span><span>
</span><span id="line-375"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="InvalidApplicationName"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#InvalidApplicationName"><span class="hs-identifier hs-var">InvalidApplicationName</span></a></span></span><span>
</span><span id="line-376"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="InvalidSystemTags"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#InvalidSystemTags"><span class="hs-identifier hs-var">InvalidSystemTags</span></a></span></span><span>
</span><span id="line-377"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556720"><span id="local-6989586621679556722"><span class="annot"><span class="annottext">UpsvvPredicateFailure -&gt; UpsvvPredicateFailure -&gt; Bool
(UpsvvPredicateFailure -&gt; UpsvvPredicateFailure -&gt; Bool)
-&gt; (UpsvvPredicateFailure -&gt; UpsvvPredicateFailure -&gt; Bool)
-&gt; Eq UpsvvPredicateFailure
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: UpsvvPredicateFailure -&gt; UpsvvPredicateFailure -&gt; Bool
$c/= :: UpsvvPredicateFailure -&gt; UpsvvPredicateFailure -&gt; Bool
== :: UpsvvPredicateFailure -&gt; UpsvvPredicateFailure -&gt; Bool
$c== :: UpsvvPredicateFailure -&gt; UpsvvPredicateFailure -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679556714"><span id="local-6989586621679556716"><span id="local-6989586621679556718"><span class="annot"><span class="annottext">Int -&gt; UpsvvPredicateFailure -&gt; ShowS
[UpsvvPredicateFailure] -&gt; ShowS
UpsvvPredicateFailure -&gt; String
(Int -&gt; UpsvvPredicateFailure -&gt; ShowS)
-&gt; (UpsvvPredicateFailure -&gt; String)
-&gt; ([UpsvvPredicateFailure] -&gt; ShowS)
-&gt; Show UpsvvPredicateFailure
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [UpsvvPredicateFailure] -&gt; ShowS
$cshowList :: [UpsvvPredicateFailure] -&gt; ShowS
show :: UpsvvPredicateFailure -&gt; String
$cshow :: UpsvvPredicateFailure -&gt; String
showsPrec :: Int -&gt; UpsvvPredicateFailure -&gt; ShowS
$cshowsPrec :: Int -&gt; UpsvvPredicateFailure -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="%24cInvalidSystemTags"><span id="%24cInvalidApplicationName"><span id="%24cCannotFollowSv"><span id="%24cAlreadyProposedSv"><span id="%24tUpsvvPredicateFailure"><span id="local-6989586621679556685"><span id="local-6989586621679556687"><span id="local-6989586621679556689"><span id="local-6989586621679556691"><span id="local-6989586621679556693"><span id="local-6989586621679556695"><span id="local-6989586621679556697"><span id="local-6989586621679556699"><span id="local-6989586621679556701"><span id="local-6989586621679556703"><span id="local-6989586621679556705"><span id="local-6989586621679556707"><span id="local-6989586621679556709"><span id="local-6989586621679556711"><span class="annot"><span class="annottext">Typeable UpsvvPredicateFailure
DataType
Constr
Typeable UpsvvPredicateFailure
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g)
    -&gt; UpsvvPredicateFailure
    -&gt; c UpsvvPredicateFailure)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UpsvvPredicateFailure)
-&gt; (UpsvvPredicateFailure -&gt; Constr)
-&gt; (UpsvvPredicateFailure -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UpsvvPredicateFailure))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e))
    -&gt; Maybe (c UpsvvPredicateFailure))
-&gt; ((forall b. Data b =&gt; b -&gt; b)
    -&gt; UpsvvPredicateFailure -&gt; UpsvvPredicateFailure)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r
    -&gt; (forall d. Data d =&gt; d -&gt; r')
    -&gt; UpsvvPredicateFailure
    -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r
    -&gt; (forall d. Data d =&gt; d -&gt; r')
    -&gt; UpsvvPredicateFailure
    -&gt; r)
-&gt; (forall u.
    (forall d. Data d =&gt; d -&gt; u) -&gt; UpsvvPredicateFailure -&gt; [u])
-&gt; (forall u.
    Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UpsvvPredicateFailure -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; UpsvvPredicateFailure -&gt; m UpsvvPredicateFailure)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; UpsvvPredicateFailure -&gt; m UpsvvPredicateFailure)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; UpsvvPredicateFailure -&gt; m UpsvvPredicateFailure)
-&gt; Data UpsvvPredicateFailure
UpsvvPredicateFailure -&gt; DataType
UpsvvPredicateFailure -&gt; Constr
(forall b. Data b =&gt; b -&gt; b)
-&gt; UpsvvPredicateFailure -&gt; UpsvvPredicateFailure
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; UpsvvPredicateFailure
-&gt; c UpsvvPredicateFailure
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UpsvvPredicateFailure
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u.
Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UpsvvPredicateFailure -&gt; u
forall u.
(forall d. Data d =&gt; d -&gt; u) -&gt; UpsvvPredicateFailure -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UpsvvPredicateFailure -&gt; r
forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UpsvvPredicateFailure -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; UpsvvPredicateFailure -&gt; m UpsvvPredicateFailure
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; UpsvvPredicateFailure -&gt; m UpsvvPredicateFailure
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UpsvvPredicateFailure
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; UpsvvPredicateFailure
-&gt; c UpsvvPredicateFailure
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UpsvvPredicateFailure)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c UpsvvPredicateFailure)
$cInvalidSystemTags :: Constr
$cInvalidApplicationName :: Constr
$cCannotFollowSv :: Constr
$cAlreadyProposedSv :: Constr
$tUpsvvPredicateFailure :: DataType
gmapMo :: (forall d. Data d =&gt; d -&gt; m d)
-&gt; UpsvvPredicateFailure -&gt; m UpsvvPredicateFailure
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; UpsvvPredicateFailure -&gt; m UpsvvPredicateFailure
gmapMp :: (forall d. Data d =&gt; d -&gt; m d)
-&gt; UpsvvPredicateFailure -&gt; m UpsvvPredicateFailure
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; UpsvvPredicateFailure -&gt; m UpsvvPredicateFailure
gmapM :: (forall d. Data d =&gt; d -&gt; m d)
-&gt; UpsvvPredicateFailure -&gt; m UpsvvPredicateFailure
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; UpsvvPredicateFailure -&gt; m UpsvvPredicateFailure
gmapQi :: Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UpsvvPredicateFailure -&gt; u
$cgmapQi :: forall u.
Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UpsvvPredicateFailure -&gt; u
gmapQ :: (forall d. Data d =&gt; d -&gt; u) -&gt; UpsvvPredicateFailure -&gt; [u]
$cgmapQ :: forall u.
(forall d. Data d =&gt; d -&gt; u) -&gt; UpsvvPredicateFailure -&gt; [u]
gmapQr :: (r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UpsvvPredicateFailure -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UpsvvPredicateFailure -&gt; r
gmapQl :: (r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UpsvvPredicateFailure -&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UpsvvPredicateFailure -&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b)
-&gt; UpsvvPredicateFailure -&gt; UpsvvPredicateFailure
$cgmapT :: (forall b. Data b =&gt; b -&gt; b)
-&gt; UpsvvPredicateFailure -&gt; UpsvvPredicateFailure
dataCast2 :: (forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c UpsvvPredicateFailure)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c UpsvvPredicateFailure)
dataCast1 :: (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UpsvvPredicateFailure)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UpsvvPredicateFailure)
dataTypeOf :: UpsvvPredicateFailure -&gt; DataType
$cdataTypeOf :: UpsvvPredicateFailure -&gt; DataType
toConstr :: UpsvvPredicateFailure -&gt; Constr
$ctoConstr :: UpsvvPredicateFailure -&gt; Constr
gunfold :: (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UpsvvPredicateFailure
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UpsvvPredicateFailure
gfoldl :: (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; UpsvvPredicateFailure
-&gt; c UpsvvPredicateFailure
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; UpsvvPredicateFailure
-&gt; c UpsvvPredicateFailure
$cp1Data :: Typeable UpsvvPredicateFailure
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. UpsvvPredicateFailure -&gt; Rep UpsvvPredicateFailure x)
-&gt; (forall x. Rep UpsvvPredicateFailure x -&gt; UpsvvPredicateFailure)
-&gt; Generic UpsvvPredicateFailure
forall x. Rep UpsvvPredicateFailure x -&gt; UpsvvPredicateFailure
forall x. UpsvvPredicateFailure -&gt; Rep UpsvvPredicateFailure x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep UpsvvPredicateFailure x -&gt; UpsvvPredicateFailure
$cfrom :: forall x. UpsvvPredicateFailure -&gt; Rep UpsvvPredicateFailure x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679556672"><span id="local-6989586621679556674"><span id="local-6989586621679556676"><span class="annot"><span class="annottext">Context -&gt; UpsvvPredicateFailure -&gt; IO (Maybe ThunkInfo)
Proxy UpsvvPredicateFailure -&gt; String
(Context -&gt; UpsvvPredicateFailure -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; UpsvvPredicateFailure -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy UpsvvPredicateFailure -&gt; String)
-&gt; NoThunks UpsvvPredicateFailure
forall a.
(Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy a -&gt; String)
-&gt; NoThunks a
showTypeOf :: Proxy UpsvvPredicateFailure -&gt; String
$cshowTypeOf :: Proxy UpsvvPredicateFailure -&gt; String
wNoThunks :: Context -&gt; UpsvvPredicateFailure -&gt; IO (Maybe ThunkInfo)
$cwNoThunks :: Context -&gt; UpsvvPredicateFailure -&gt; IO (Maybe ThunkInfo)
noThunks :: Context -&gt; UpsvvPredicateFailure -&gt; IO (Maybe ThunkInfo)
$cnoThunks :: Context -&gt; UpsvvPredicateFailure -&gt; IO (Maybe ThunkInfo)
</span><a href="#local-6989586621679556672"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">NoThunks</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-378"></span><span>
</span><span id="line-379"></span><span>
</span><span id="line-380"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679556662"><span id="local-6989586621679556664"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">STS</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPSVV"><span class="hs-identifier hs-type">UPSVV</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-381"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Environment"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">Environment</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPSVV"><span class="hs-identifier hs-type">UPSVV</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ApName"><span class="hs-identifier hs-type">ApName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ApVer"><span class="hs-identifier hs-type">ApVer</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Slot"><span class="hs-identifier hs-type">Core.Slot</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#Metadata"><span class="hs-identifier hs-type">Metadata</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-382"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="State"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">State</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPSVV"><span class="hs-identifier hs-type">UPSVV</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpId"><span class="hs-identifier hs-type">UpId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ApName"><span class="hs-identifier hs-type">ApName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ApVer"><span class="hs-identifier hs-type">ApVer</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#Metadata"><span class="hs-identifier hs-type">Metadata</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-383"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Signal"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">Signal</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPSVV"><span class="hs-identifier hs-type">UPSVV</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UProp"><span class="hs-identifier hs-type">UProp</span></a></span><span>
</span><span id="line-384"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="PredicateFailure"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">PredicateFailure</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPSVV"><span class="hs-identifier hs-type">UPSVV</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpsvvPredicateFailure"><span class="hs-identifier hs-type">UpsvvPredicateFailure</span></a></span><span>
</span><span id="line-385"></span><span>
</span><span id="line-386"></span><span>  </span><span id="local-6989586621679556660"><span class="annot"><span class="annottext">initialRules :: [InitialRule UPSVV]
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">initialRules</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-387"></span><span>  </span><span id="local-6989586621679556658"><span class="annot"><span class="annottext">transitionRules :: [TransitionRule UPSVV]
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">transitionRules</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-388"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-389"></span><span>        </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">TRC</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556655"><span class="annot"><span class="annottext">Environment UPSVV
</span><a href="#local-6989586621679556655"><span class="hs-identifier hs-var">avs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679556654"><span class="annot"><span class="annottext">State UPSVV
</span><a href="#local-6989586621679556654"><span class="hs-identifier hs-var">raus</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679556653"><span class="annot"><span class="annottext">Signal UPSVV
</span><a href="#local-6989586621679556653"><span class="hs-identifier hs-var">up</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">F (Clause UPSVV 'Transition) (TRC UPSVV)
forall sts (rtype :: RuleType).
Rule sts rtype (RuleContext rtype sts)
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">judgmentContext</span></a></span><span>
</span><span id="line-390"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#SwVer"><span class="hs-identifier hs-type">SwVer</span></a></span><span> </span><span id="local-6989586621679556651"><span class="annot"><span class="annottext">ApName
</span><a href="#local-6989586621679556651"><span class="hs-identifier hs-var">an</span></a></span></span><span> </span><span id="local-6989586621679556650"><span class="annot"><span class="annottext">ApVer
</span><a href="#local-6989586621679556650"><span class="hs-identifier hs-var">av</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Signal UPSVV
UProp
</span><a href="#local-6989586621679556653"><span class="hs-identifier hs-var">up</span></a></span><span> </span><span class="annot"><span class="annottext">UProp -&gt; Getting SwVer UProp SwVer -&gt; SwVer
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting SwVer UProp SwVer
Lens' UProp SwVer
</span><a href="Byron.Spec.Ledger.Update.html#upSwVer"><span class="hs-identifier hs-var">upSwVer</span></a></span><span>
</span><span id="line-391"></span><span>        </span><span class="annot"><span class="annottext">ApName -&gt; Bool
</span><a href="#local-6989586621679556649"><span class="hs-identifier hs-var">apNameValid</span></a></span><span> </span><span class="annot"><span class="annottext">ApName
</span><a href="#local-6989586621679556651"><span class="hs-identifier hs-var">an</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; PredicateFailure UPSVV -&gt; Rule UPSVV 'Transition ()
forall sts (ctx :: RuleType).
Bool -&gt; PredicateFailure sts -&gt; Rule sts ctx ()
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-operator hs-var">?!</span></a></span><span> </span><span class="annot"><span class="annottext">PredicateFailure UPSVV
UpsvvPredicateFailure
</span><a href="Byron.Spec.Ledger.Update.html#InvalidApplicationName"><span class="hs-identifier hs-var">InvalidApplicationName</span></a></span><span>
</span><span id="line-392"></span><span>        </span><span class="annot"><span class="annottext">Map ApName (ApVer, Slot, Metadata) -&gt; (ApName, ApVer) -&gt; Bool
</span><a href="Byron.Spec.Ledger.Update.html#svCanFollow"><span class="hs-identifier hs-var">svCanFollow</span></a></span><span> </span><span class="annot"><span class="annottext">Map ApName (ApVer, Slot, Metadata)
Environment UPSVV
</span><a href="#local-6989586621679556655"><span class="hs-identifier hs-var">avs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ApName
</span><a href="#local-6989586621679556651"><span class="hs-identifier hs-var">an</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">ApVer
</span><a href="#local-6989586621679556650"><span class="hs-identifier hs-var">av</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; PredicateFailure UPSVV -&gt; Rule UPSVV 'Transition ()
forall sts (ctx :: RuleType).
Bool -&gt; PredicateFailure sts -&gt; Rule sts ctx ()
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-operator hs-var">?!</span></a></span><span> </span><span class="annot"><span class="annottext">PredicateFailure UPSVV
UpsvvPredicateFailure
</span><a href="Byron.Spec.Ledger.Update.html#CannotFollowSv"><span class="hs-identifier hs-var">CannotFollowSv</span></a></span><span>
</span><span id="line-393"></span><span>        </span><span class="annot"><span class="annottext">ApName
</span><a href="#local-6989586621679556651"><span class="hs-identifier hs-var">an</span></a></span><span> </span><span class="annot"><span class="annottext">ApName -&gt; [ApName] -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><span class="hs-operator hs-var">`notElem`</span></span><span> </span><span class="annot"><span class="annottext">((ApName, ApVer, Metadata) -&gt; ApName)
-&gt; [(ApName, ApVer, Metadata)] -&gt; [ApName]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">(ApName, ApVer, Metadata) -&gt; ApName
forall a b c. (a, b, c) -&gt; a
</span><a href="#local-6989586621679556647"><span class="hs-identifier hs-var">fst'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map UpId (ApName, ApVer, Metadata) -&gt; [(ApName, ApVer, Metadata)]
forall k a. Map k a -&gt; [a]
</span><span class="hs-identifier hs-var">Map.elems</span></span><span> </span><span class="annot"><span class="annottext">Map UpId (ApName, ApVer, Metadata)
State UPSVV
</span><a href="#local-6989586621679556654"><span class="hs-identifier hs-var">raus</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; PredicateFailure UPSVV -&gt; Rule UPSVV 'Transition ()
forall sts (ctx :: RuleType).
Bool -&gt; PredicateFailure sts -&gt; Rule sts ctx ()
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-operator hs-var">?!</span></a></span><span> </span><span class="annot"><span class="annottext">PredicateFailure UPSVV
UpsvvPredicateFailure
</span><a href="Byron.Spec.Ledger.Update.html#AlreadyProposedSv"><span class="hs-identifier hs-var">AlreadyProposedSv</span></a></span><span>
</span><span id="line-394"></span><span>        </span><span class="annot"><span class="annottext">(String -&gt; Bool) -&gt; Set String -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">all</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Bool
forall (t :: * -&gt; *). Foldable t =&gt; t Char -&gt; Bool
</span><a href="#local-6989586621679556644"><span class="hs-identifier hs-var">sTagValid</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Signal UPSVV
UProp
</span><a href="#local-6989586621679556653"><span class="hs-identifier hs-var">up</span></a></span><span> </span><span class="annot"><span class="annottext">UProp -&gt; Getting (Set String) UProp (Set String) -&gt; Set String
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting (Set String) UProp (Set String)
Lens' UProp (Set String)
</span><a href="Byron.Spec.Ledger.Update.html#upSTags"><span class="hs-identifier hs-var">upSTags</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; PredicateFailure UPSVV -&gt; Rule UPSVV 'Transition ()
forall sts (ctx :: RuleType).
Bool -&gt; PredicateFailure sts -&gt; Rule sts ctx ()
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-operator hs-var">?!</span></a></span><span> </span><span class="annot"><span class="annottext">PredicateFailure UPSVV
UpsvvPredicateFailure
</span><a href="Byron.Spec.Ledger.Update.html#InvalidSystemTags"><span class="hs-identifier hs-var">InvalidSystemTags</span></a></span><span>
</span><span id="line-395"></span><span>        </span><span class="annot"><span class="annottext">Map UpId (ApName, ApVer, Metadata)
-&gt; F (Clause UPSVV 'Transition)
     (Map UpId (ApName, ApVer, Metadata))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Map UpId (ApName, ApVer, Metadata)
 -&gt; F (Clause UPSVV 'Transition)
      (Map UpId (ApName, ApVer, Metadata)))
-&gt; Map UpId (ApName, ApVer, Metadata)
-&gt; F (Clause UPSVV 'Transition)
     (Map UpId (ApName, ApVer, Metadata))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="annot"><span class="annottext">Map UpId (ApName, ApVer, Metadata)
State UPSVV
</span><a href="#local-6989586621679556654"><span class="hs-identifier hs-var">raus</span></a></span><span> </span><span class="annot"><span class="annottext">Map UpId (ApName, ApVer, Metadata)
-&gt; [(Domain (Map UpId (ApName, ApVer, Metadata)),
     Range (Map UpId (ApName, ApVer, Metadata)))]
-&gt; Map UpId (ApName, ApVer, Metadata)
forall m (f :: * -&gt; *).
(Relation m, Ord (Domain m), Ord (Range m), Foldable f) =&gt;
m -&gt; f (Domain m, Range m) -&gt; m
</span><a href="Byron.Spec.Ledger.Core.html#%2A03"><span class="hs-operator hs-var">&#10755;</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Signal UPSVV
UProp
</span><a href="#local-6989586621679556653"><span class="hs-identifier hs-var">up</span></a></span><span> </span><span class="annot"><span class="annottext">UProp -&gt; Getting UpId UProp UpId -&gt; UpId
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting UpId UProp UpId
Lens' UProp UpId
</span><a href="Byron.Spec.Ledger.Update.html#upId"><span class="hs-identifier hs-var">upId</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ApName
</span><a href="#local-6989586621679556651"><span class="hs-identifier hs-var">an</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ApVer
</span><a href="#local-6989586621679556650"><span class="hs-identifier hs-var">av</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Signal UPSVV
UProp
</span><a href="#local-6989586621679556653"><span class="hs-identifier hs-var">up</span></a></span><span> </span><span class="annot"><span class="annottext">UProp -&gt; Getting Metadata UProp Metadata -&gt; Metadata
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting Metadata UProp Metadata
Lens' UProp Metadata
</span><a href="Byron.Spec.Ledger.Update.html#upMdt"><span class="hs-identifier hs-var">upMdt</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-396"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-397"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-398"></span><span>      </span><span id="local-6989586621679556647"><span class="annot"><span class="annottext">fst' :: (a, b, c) -&gt; a
</span><a href="#local-6989586621679556647"><span class="hs-identifier hs-var hs-var">fst'</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556642"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679556642"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">b
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">c
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679556642"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-399"></span><span>
</span><span id="line-400"></span><span>      </span><span id="local-6989586621679556649"><span class="annot"><span class="annottext">apNameValid :: ApName -&gt; Bool
</span><a href="#local-6989586621679556649"><span class="hs-identifier hs-var hs-var">apNameValid</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ApName"><span class="hs-identifier hs-type">ApName</span></a></span><span> </span><span id="local-6989586621679556641"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679556641"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Char -&gt; Bool) -&gt; String -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">all</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><span class="hs-identifier hs-var">isAscii</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679556641"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679556641"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">12</span></span><span>
</span><span id="line-401"></span><span>
</span><span id="line-402"></span><span>      </span><span id="local-6989586621679556644"><span class="annot"><span class="annottext">sTagValid :: t Char -&gt; Bool
</span><a href="#local-6989586621679556644"><span class="hs-identifier hs-var hs-var">sTagValid</span></a></span></span><span> </span><span id="local-6989586621679556639"><span class="annot"><span class="annottext">t Char
</span><a href="#local-6989586621679556639"><span class="hs-identifier hs-var">tag</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Char -&gt; Bool) -&gt; t Char -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">all</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><span class="hs-identifier hs-var">isAscii</span></span><span> </span><span class="annot"><span class="annottext">t Char
</span><a href="#local-6989586621679556639"><span class="hs-identifier hs-var">tag</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">t Char -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">t Char
</span><a href="#local-6989586621679556639"><span class="hs-identifier hs-var">tag</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">10</span></span><span>
</span><span id="line-403"></span><span>
</span><span id="line-404"></span><span id="local-6989586621679556637"><span id="local-6989586621679556638"></span></span><span class="hs-keyword">data</span><span> </span><span id="UPPVV"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPPVV"><span class="hs-identifier hs-var">UPPVV</span></a></span></span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(forall x. UPPVV -&gt; Rep UPPVV x)
-&gt; (forall x. Rep UPPVV x -&gt; UPPVV) -&gt; Generic UPPVV
forall x. Rep UPPVV x -&gt; UPPVV
forall x. UPPVV -&gt; Rep UPPVV x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep UPPVV x -&gt; UPPVV
$cfrom :: forall x. UPPVV -&gt; Rep UPPVV x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">,</span><span> </span><span id="%24tUPPVV"><span id="local-6989586621679556606"><span id="local-6989586621679556608"><span id="local-6989586621679556610"><span id="local-6989586621679556612"><span id="local-6989586621679556614"><span id="local-6989586621679556616"><span id="local-6989586621679556618"><span id="local-6989586621679556620"><span id="local-6989586621679556622"><span id="local-6989586621679556624"><span id="local-6989586621679556626"><span id="local-6989586621679556628"><span id="local-6989586621679556630"><span id="local-6989586621679556632"><span class="annot"><span class="annottext">Typeable UPPVV
DataType
Typeable UPPVV
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; UPPVV -&gt; c UPPVV)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UPPVV)
-&gt; (UPPVV -&gt; Constr)
-&gt; (UPPVV -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UPPVV))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c UPPVV))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; UPPVV -&gt; UPPVV)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPPVV -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPPVV -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; UPPVV -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UPPVV -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; UPPVV -&gt; m UPPVV)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; UPPVV -&gt; m UPPVV)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; UPPVV -&gt; m UPPVV)
-&gt; Data UPPVV
UPPVV -&gt; DataType
UPPVV -&gt; Constr
(forall b. Data b =&gt; b -&gt; b) -&gt; UPPVV -&gt; UPPVV
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; UPPVV -&gt; c UPPVV
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UPPVV
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UPPVV -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; UPPVV -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPPVV -&gt; r
forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPPVV -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UPPVV -&gt; m UPPVV
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UPPVV -&gt; m UPPVV
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UPPVV
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; UPPVV -&gt; c UPPVV
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UPPVV)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c UPPVV)
$tUPPVV :: DataType
gmapMo :: (forall d. Data d =&gt; d -&gt; m d) -&gt; UPPVV -&gt; m UPPVV
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UPPVV -&gt; m UPPVV
gmapMp :: (forall d. Data d =&gt; d -&gt; m d) -&gt; UPPVV -&gt; m UPPVV
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UPPVV -&gt; m UPPVV
gmapM :: (forall d. Data d =&gt; d -&gt; m d) -&gt; UPPVV -&gt; m UPPVV
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UPPVV -&gt; m UPPVV
gmapQi :: Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UPPVV -&gt; u
$cgmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UPPVV -&gt; u
gmapQ :: (forall d. Data d =&gt; d -&gt; u) -&gt; UPPVV -&gt; [u]
$cgmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; UPPVV -&gt; [u]
gmapQr :: (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPPVV -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPPVV -&gt; r
gmapQl :: (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPPVV -&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPPVV -&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; UPPVV -&gt; UPPVV
$cgmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; UPPVV -&gt; UPPVV
dataCast2 :: (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c UPPVV)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c UPPVV)
dataCast1 :: (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UPPVV)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UPPVV)
dataTypeOf :: UPPVV -&gt; DataType
$cdataTypeOf :: UPPVV -&gt; DataType
toConstr :: UPPVV -&gt; Constr
$ctoConstr :: UPPVV -&gt; Constr
gunfold :: (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UPPVV
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UPPVV
gfoldl :: (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; UPPVV -&gt; c UPPVV
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; UPPVV -&gt; c UPPVV
$cp1Data :: Typeable UPPVV
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">)</span><span>
</span><span id="line-405"></span><span>
</span><span id="line-406"></span><span class="hs-comment">-- | These `PredicateFailure`s are all &quot;throwable&quot;. The disjunction of the</span><span>
</span><span id="line-407"></span><span class="hs-comment">--   rules' preconditions is not `True` - the `PredicateFailure`s represent</span><span>
</span><span id="line-408"></span><span class="hs-comment">--   `False` cases.</span><span>
</span><span id="line-409"></span><span id="local-6989586621679556603"><span id="local-6989586621679556604"></span></span><span class="hs-keyword">data</span><span> </span><span id="UppvvPredicateFailure"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UppvvPredicateFailure"><span class="hs-identifier hs-var">UppvvPredicateFailure</span></a></span></span><span>
</span><span id="line-410"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="CannotFollowPv"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#CannotFollowPv"><span class="hs-identifier hs-var">CannotFollowPv</span></a></span></span><span>
</span><span id="line-411"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="CannotUpdatePv"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#CannotUpdatePv"><span class="hs-identifier hs-var">CannotUpdatePv</span></a></span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpdateConstraintViolation"><span class="hs-identifier hs-type">UpdateConstraintViolation</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-412"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="AlreadyProposedPv"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#AlreadyProposedPv"><span class="hs-identifier hs-var">AlreadyProposedPv</span></a></span></span><span>
</span><span id="line-413"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556597"><span id="local-6989586621679556599"><span class="annot"><span class="annottext">UppvvPredicateFailure -&gt; UppvvPredicateFailure -&gt; Bool
(UppvvPredicateFailure -&gt; UppvvPredicateFailure -&gt; Bool)
-&gt; (UppvvPredicateFailure -&gt; UppvvPredicateFailure -&gt; Bool)
-&gt; Eq UppvvPredicateFailure
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: UppvvPredicateFailure -&gt; UppvvPredicateFailure -&gt; Bool
$c/= :: UppvvPredicateFailure -&gt; UppvvPredicateFailure -&gt; Bool
== :: UppvvPredicateFailure -&gt; UppvvPredicateFailure -&gt; Bool
$c== :: UppvvPredicateFailure -&gt; UppvvPredicateFailure -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679556591"><span id="local-6989586621679556593"><span id="local-6989586621679556595"><span class="annot"><span class="annottext">Int -&gt; UppvvPredicateFailure -&gt; ShowS
[UppvvPredicateFailure] -&gt; ShowS
UppvvPredicateFailure -&gt; String
(Int -&gt; UppvvPredicateFailure -&gt; ShowS)
-&gt; (UppvvPredicateFailure -&gt; String)
-&gt; ([UppvvPredicateFailure] -&gt; ShowS)
-&gt; Show UppvvPredicateFailure
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [UppvvPredicateFailure] -&gt; ShowS
$cshowList :: [UppvvPredicateFailure] -&gt; ShowS
show :: UppvvPredicateFailure -&gt; String
$cshow :: UppvvPredicateFailure -&gt; String
showsPrec :: Int -&gt; UppvvPredicateFailure -&gt; ShowS
$cshowsPrec :: Int -&gt; UppvvPredicateFailure -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="%24cAlreadyProposedPv"><span id="%24cCannotUpdatePv"><span id="%24cCannotFollowPv"><span id="%24tUppvvPredicateFailure"><span id="local-6989586621679556562"><span id="local-6989586621679556564"><span id="local-6989586621679556566"><span id="local-6989586621679556568"><span id="local-6989586621679556570"><span id="local-6989586621679556572"><span id="local-6989586621679556574"><span id="local-6989586621679556576"><span id="local-6989586621679556578"><span id="local-6989586621679556580"><span id="local-6989586621679556582"><span id="local-6989586621679556584"><span id="local-6989586621679556586"><span id="local-6989586621679556588"><span class="annot"><span class="annottext">Typeable UppvvPredicateFailure
DataType
Constr
Typeable UppvvPredicateFailure
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g)
    -&gt; UppvvPredicateFailure
    -&gt; c UppvvPredicateFailure)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UppvvPredicateFailure)
-&gt; (UppvvPredicateFailure -&gt; Constr)
-&gt; (UppvvPredicateFailure -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UppvvPredicateFailure))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e))
    -&gt; Maybe (c UppvvPredicateFailure))
-&gt; ((forall b. Data b =&gt; b -&gt; b)
    -&gt; UppvvPredicateFailure -&gt; UppvvPredicateFailure)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r
    -&gt; (forall d. Data d =&gt; d -&gt; r')
    -&gt; UppvvPredicateFailure
    -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r
    -&gt; (forall d. Data d =&gt; d -&gt; r')
    -&gt; UppvvPredicateFailure
    -&gt; r)
-&gt; (forall u.
    (forall d. Data d =&gt; d -&gt; u) -&gt; UppvvPredicateFailure -&gt; [u])
-&gt; (forall u.
    Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UppvvPredicateFailure -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; UppvvPredicateFailure -&gt; m UppvvPredicateFailure)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; UppvvPredicateFailure -&gt; m UppvvPredicateFailure)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; UppvvPredicateFailure -&gt; m UppvvPredicateFailure)
-&gt; Data UppvvPredicateFailure
UppvvPredicateFailure -&gt; DataType
UppvvPredicateFailure -&gt; Constr
(forall b. Data b =&gt; b -&gt; b)
-&gt; UppvvPredicateFailure -&gt; UppvvPredicateFailure
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; UppvvPredicateFailure
-&gt; c UppvvPredicateFailure
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UppvvPredicateFailure
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u.
Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UppvvPredicateFailure -&gt; u
forall u.
(forall d. Data d =&gt; d -&gt; u) -&gt; UppvvPredicateFailure -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UppvvPredicateFailure -&gt; r
forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UppvvPredicateFailure -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; UppvvPredicateFailure -&gt; m UppvvPredicateFailure
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; UppvvPredicateFailure -&gt; m UppvvPredicateFailure
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UppvvPredicateFailure
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; UppvvPredicateFailure
-&gt; c UppvvPredicateFailure
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UppvvPredicateFailure)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c UppvvPredicateFailure)
$cAlreadyProposedPv :: Constr
$cCannotUpdatePv :: Constr
$cCannotFollowPv :: Constr
$tUppvvPredicateFailure :: DataType
gmapMo :: (forall d. Data d =&gt; d -&gt; m d)
-&gt; UppvvPredicateFailure -&gt; m UppvvPredicateFailure
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; UppvvPredicateFailure -&gt; m UppvvPredicateFailure
gmapMp :: (forall d. Data d =&gt; d -&gt; m d)
-&gt; UppvvPredicateFailure -&gt; m UppvvPredicateFailure
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; UppvvPredicateFailure -&gt; m UppvvPredicateFailure
gmapM :: (forall d. Data d =&gt; d -&gt; m d)
-&gt; UppvvPredicateFailure -&gt; m UppvvPredicateFailure
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; UppvvPredicateFailure -&gt; m UppvvPredicateFailure
gmapQi :: Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UppvvPredicateFailure -&gt; u
$cgmapQi :: forall u.
Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UppvvPredicateFailure -&gt; u
gmapQ :: (forall d. Data d =&gt; d -&gt; u) -&gt; UppvvPredicateFailure -&gt; [u]
$cgmapQ :: forall u.
(forall d. Data d =&gt; d -&gt; u) -&gt; UppvvPredicateFailure -&gt; [u]
gmapQr :: (r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UppvvPredicateFailure -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UppvvPredicateFailure -&gt; r
gmapQl :: (r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UppvvPredicateFailure -&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UppvvPredicateFailure -&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b)
-&gt; UppvvPredicateFailure -&gt; UppvvPredicateFailure
$cgmapT :: (forall b. Data b =&gt; b -&gt; b)
-&gt; UppvvPredicateFailure -&gt; UppvvPredicateFailure
dataCast2 :: (forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c UppvvPredicateFailure)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c UppvvPredicateFailure)
dataCast1 :: (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UppvvPredicateFailure)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UppvvPredicateFailure)
dataTypeOf :: UppvvPredicateFailure -&gt; DataType
$cdataTypeOf :: UppvvPredicateFailure -&gt; DataType
toConstr :: UppvvPredicateFailure -&gt; Constr
$ctoConstr :: UppvvPredicateFailure -&gt; Constr
gunfold :: (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UppvvPredicateFailure
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UppvvPredicateFailure
gfoldl :: (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; UppvvPredicateFailure
-&gt; c UppvvPredicateFailure
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; UppvvPredicateFailure
-&gt; c UppvvPredicateFailure
$cp1Data :: Typeable UppvvPredicateFailure
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. UppvvPredicateFailure -&gt; Rep UppvvPredicateFailure x)
-&gt; (forall x. Rep UppvvPredicateFailure x -&gt; UppvvPredicateFailure)
-&gt; Generic UppvvPredicateFailure
forall x. Rep UppvvPredicateFailure x -&gt; UppvvPredicateFailure
forall x. UppvvPredicateFailure -&gt; Rep UppvvPredicateFailure x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep UppvvPredicateFailure x -&gt; UppvvPredicateFailure
$cfrom :: forall x. UppvvPredicateFailure -&gt; Rep UppvvPredicateFailure x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679556550"><span id="local-6989586621679556552"><span id="local-6989586621679556554"><span class="annot"><span class="annottext">Context -&gt; UppvvPredicateFailure -&gt; IO (Maybe ThunkInfo)
Proxy UppvvPredicateFailure -&gt; String
(Context -&gt; UppvvPredicateFailure -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; UppvvPredicateFailure -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy UppvvPredicateFailure -&gt; String)
-&gt; NoThunks UppvvPredicateFailure
forall a.
(Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy a -&gt; String)
-&gt; NoThunks a
showTypeOf :: Proxy UppvvPredicateFailure -&gt; String
$cshowTypeOf :: Proxy UppvvPredicateFailure -&gt; String
wNoThunks :: Context -&gt; UppvvPredicateFailure -&gt; IO (Maybe ThunkInfo)
$cwNoThunks :: Context -&gt; UppvvPredicateFailure -&gt; IO (Maybe ThunkInfo)
noThunks :: Context -&gt; UppvvPredicateFailure -&gt; IO (Maybe ThunkInfo)
$cnoThunks :: Context -&gt; UppvvPredicateFailure -&gt; IO (Maybe ThunkInfo)
</span><a href="#local-6989586621679556550"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">NoThunks</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-414"></span><span>
</span><span id="line-415"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679556540"><span id="local-6989586621679556542"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">STS</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPPVV"><span class="hs-identifier hs-type">UPPVV</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-416"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Environment"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">Environment</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPPVV"><span class="hs-identifier hs-type">UPPVV</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-417"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ProtVer"><span class="hs-identifier hs-type">ProtVer</span></a></span><span>
</span><span id="line-418"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#PParams"><span class="hs-identifier hs-type">PParams</span></a></span><span>
</span><span id="line-419"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-420"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="State"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">State</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPPVV"><span class="hs-identifier hs-type">UPPVV</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpId"><span class="hs-identifier hs-type">UpId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ProtVer"><span class="hs-identifier hs-type">ProtVer</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#PParams"><span class="hs-identifier hs-type">PParams</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-421"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Signal"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">Signal</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPPVV"><span class="hs-identifier hs-type">UPPVV</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UProp"><span class="hs-identifier hs-type">UProp</span></a></span><span>
</span><span id="line-422"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="PredicateFailure"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">PredicateFailure</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPPVV"><span class="hs-identifier hs-type">UPPVV</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UppvvPredicateFailure"><span class="hs-identifier hs-type">UppvvPredicateFailure</span></a></span><span>
</span><span id="line-423"></span><span>
</span><span id="line-424"></span><span>  </span><span id="local-6989586621679556539"><span class="annot"><span class="annottext">initialRules :: [InitialRule UPPVV]
</span><a href="#local-6989586621679556539"><span class="hs-identifier hs-var hs-var hs-var hs-var">initialRules</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-425"></span><span>  </span><span id="local-6989586621679556538"><span class="annot"><span class="annottext">transitionRules :: [TransitionRule UPPVV]
</span><a href="#local-6989586621679556538"><span class="hs-identifier hs-var hs-var hs-var hs-var">transitionRules</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-426"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-427"></span><span>        </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">TRC</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621679556537"><span class="annot"><a href="#local-6989586621679556537"><span class="hs-identifier hs-var">pv</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679556536"><span class="annot"><a href="#local-6989586621679556536"><span class="hs-identifier hs-var">pps</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621679556535"><span class="annot"><span class="annottext">State UPPVV
</span><a href="#local-6989586621679556535"><span class="hs-identifier hs-var">rpus</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679556534"><span class="annot"><span class="annottext">Signal UPPVV
</span><a href="#local-6989586621679556534"><span class="hs-identifier hs-var">up</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">F (Clause UPPVV 'Transition) (TRC UPPVV)
forall sts (rtype :: RuleType).
Rule sts rtype (RuleContext rtype sts)
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">judgmentContext</span></a></span><span>
</span><span id="line-428"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679556533"><span class="annot"><span class="annottext">pid :: UpId
</span><a href="#local-6989586621679556533"><span class="hs-identifier hs-var hs-var">pid</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Signal UPPVV
UProp
</span><a href="#local-6989586621679556534"><span class="hs-identifier hs-var">up</span></a></span><span> </span><span class="annot"><span class="annottext">UProp -&gt; Getting UpId UProp UpId -&gt; UpId
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting UpId UProp UpId
Lens' UProp UpId
</span><a href="Byron.Spec.Ledger.Update.html#upId"><span class="hs-identifier hs-var">upId</span></a></span><span>
</span><span id="line-429"></span><span>            </span><span id="local-6989586621679556532"><span class="annot"><span class="annottext">nv :: ProtVer
</span><a href="#local-6989586621679556532"><span class="hs-identifier hs-var hs-var">nv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Signal UPPVV
UProp
</span><a href="#local-6989586621679556534"><span class="hs-identifier hs-var">up</span></a></span><span> </span><span class="annot"><span class="annottext">UProp -&gt; Getting ProtVer UProp ProtVer -&gt; ProtVer
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting ProtVer UProp ProtVer
Lens' UProp ProtVer
</span><a href="Byron.Spec.Ledger.Update.html#upPV"><span class="hs-identifier hs-var">upPV</span></a></span><span>
</span><span id="line-430"></span><span>            </span><span id="local-6989586621679556531"><span class="annot"><span class="annottext">ppsn :: PParams
</span><a href="#local-6989586621679556531"><span class="hs-identifier hs-var hs-var">ppsn</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Signal UPPVV
UProp
</span><a href="#local-6989586621679556534"><span class="hs-identifier hs-var">up</span></a></span><span> </span><span class="annot"><span class="annottext">UProp -&gt; Getting PParams UProp PParams -&gt; PParams
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting PParams UProp PParams
Lens' UProp PParams
</span><a href="Byron.Spec.Ledger.Update.html#upParams"><span class="hs-identifier hs-var">upParams</span></a></span><span>
</span><span id="line-431"></span><span>        </span><span class="annot"><span class="annottext">ProtVer -&gt; ProtVer -&gt; Bool
</span><a href="Byron.Spec.Ledger.Update.html#pvCanFollow"><span class="hs-identifier hs-var">pvCanFollow</span></a></span><span> </span><span class="annot"><span class="annottext">ProtVer
</span><a href="#local-6989586621679556532"><span class="hs-identifier hs-var">nv</span></a></span><span> </span><span class="annot"><span class="annottext">ProtVer
</span><a href="#local-6989586621679556537"><span class="hs-identifier hs-var">pv</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; PredicateFailure UPPVV -&gt; Rule UPPVV 'Transition ()
forall sts (ctx :: RuleType).
Bool -&gt; PredicateFailure sts -&gt; Rule sts ctx ()
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-operator hs-var">?!</span></a></span><span> </span><span class="annot"><span class="annottext">PredicateFailure UPPVV
UppvvPredicateFailure
</span><a href="Byron.Spec.Ledger.Update.html#CannotFollowPv"><span class="hs-identifier hs-var">CannotFollowPv</span></a></span><span>
</span><span id="line-432"></span><span>        </span><span class="annot"><span class="annottext">PParams -&gt; UProp -&gt; Rule UPPVV 'Transition ()
forall (ctx :: RuleType). PParams -&gt; UProp -&gt; Rule UPPVV ctx ()
</span><a href="Byron.Spec.Ledger.Update.html#canUpdate"><span class="hs-identifier hs-var">canUpdate</span></a></span><span> </span><span class="annot"><span class="annottext">PParams
</span><a href="#local-6989586621679556536"><span class="hs-identifier hs-var">pps</span></a></span><span> </span><span class="annot"><span class="annottext">Signal UPPVV
UProp
</span><a href="#local-6989586621679556534"><span class="hs-identifier hs-var">up</span></a></span><span>
</span><span id="line-433"></span><span>        </span><span class="annot"><span class="annottext">ProtVer
</span><a href="#local-6989586621679556532"><span class="hs-identifier hs-var">nv</span></a></span><span> </span><span class="annot"><span class="annottext">ProtVer -&gt; [ProtVer] -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><span class="hs-operator hs-var">`notElem`</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(ProtVer, PParams) -&gt; ProtVer
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">((ProtVer, PParams) -&gt; ProtVer)
-&gt; [(ProtVer, PParams)] -&gt; [ProtVer]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Map UpId (ProtVer, PParams) -&gt; [(ProtVer, PParams)]
forall k a. Map k a -&gt; [a]
</span><span class="hs-identifier hs-var">Map.elems</span></span><span> </span><span class="annot"><span class="annottext">Map UpId (ProtVer, PParams)
State UPPVV
</span><a href="#local-6989586621679556535"><span class="hs-identifier hs-var">rpus</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; PredicateFailure UPPVV -&gt; Rule UPPVV 'Transition ()
forall sts (ctx :: RuleType).
Bool -&gt; PredicateFailure sts -&gt; Rule sts ctx ()
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-operator hs-var">?!</span></a></span><span> </span><span class="annot"><span class="annottext">PredicateFailure UPPVV
UppvvPredicateFailure
</span><a href="Byron.Spec.Ledger.Update.html#AlreadyProposedPv"><span class="hs-identifier hs-var">AlreadyProposedPv</span></a></span><span>
</span><span id="line-434"></span><span>        </span><span class="annot"><span class="annottext">Map UpId (ProtVer, PParams)
-&gt; F (Clause UPPVV 'Transition) (Map UpId (ProtVer, PParams))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Map UpId (ProtVer, PParams)
 -&gt; F (Clause UPPVV 'Transition) (Map UpId (ProtVer, PParams)))
-&gt; Map UpId (ProtVer, PParams)
-&gt; F (Clause UPPVV 'Transition) (Map UpId (ProtVer, PParams))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="annot"><span class="annottext">Map UpId (ProtVer, PParams)
State UPPVV
</span><a href="#local-6989586621679556535"><span class="hs-identifier hs-var">rpus</span></a></span><span> </span><span class="annot"><span class="annottext">Map UpId (ProtVer, PParams)
-&gt; [(Domain (Map UpId (ProtVer, PParams)),
     Range (Map UpId (ProtVer, PParams)))]
-&gt; Map UpId (ProtVer, PParams)
forall m (f :: * -&gt; *).
(Relation m, Ord (Domain m), Ord (Range m), Foldable f) =&gt;
m -&gt; f (Domain m, Range m) -&gt; m
</span><a href="Byron.Spec.Ledger.Core.html#%2A03"><span class="hs-operator hs-var">&#10755;</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">UpId
</span><a href="#local-6989586621679556533"><span class="hs-identifier hs-var">pid</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ProtVer
</span><a href="#local-6989586621679556532"><span class="hs-identifier hs-var">nv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PParams
</span><a href="#local-6989586621679556531"><span class="hs-identifier hs-var">ppsn</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-435"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-436"></span><span>
</span><span id="line-437"></span><span>
</span><span id="line-438"></span><span class="hs-comment">-- | Update proposal validity</span><span>
</span><span id="line-439"></span><span id="local-6989586621679556529"><span id="local-6989586621679556530"></span></span><span class="hs-keyword">data</span><span> </span><span id="UPV"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPV"><span class="hs-identifier hs-var">UPV</span></a></span></span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(forall x. UPV -&gt; Rep UPV x)
-&gt; (forall x. Rep UPV x -&gt; UPV) -&gt; Generic UPV
forall x. Rep UPV x -&gt; UPV
forall x. UPV -&gt; Rep UPV x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep UPV x -&gt; UPV
$cfrom :: forall x. UPV -&gt; Rep UPV x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">,</span><span> </span><span id="%24tUPV"><span id="local-6989586621679556498"><span id="local-6989586621679556500"><span id="local-6989586621679556502"><span id="local-6989586621679556504"><span id="local-6989586621679556506"><span id="local-6989586621679556508"><span id="local-6989586621679556510"><span id="local-6989586621679556512"><span id="local-6989586621679556514"><span id="local-6989586621679556516"><span id="local-6989586621679556518"><span id="local-6989586621679556520"><span id="local-6989586621679556522"><span id="local-6989586621679556524"><span class="annot"><span class="annottext">Typeable UPV
DataType
Typeable UPV
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; UPV -&gt; c UPV)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UPV)
-&gt; (UPV -&gt; Constr)
-&gt; (UPV -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UPV))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c UPV))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; UPV -&gt; UPV)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPV -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPV -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; UPV -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UPV -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; UPV -&gt; m UPV)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; UPV -&gt; m UPV)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; UPV -&gt; m UPV)
-&gt; Data UPV
UPV -&gt; DataType
UPV -&gt; Constr
(forall b. Data b =&gt; b -&gt; b) -&gt; UPV -&gt; UPV
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; UPV -&gt; c UPV
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UPV
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UPV -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; UPV -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPV -&gt; r
forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPV -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UPV -&gt; m UPV
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UPV -&gt; m UPV
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UPV
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; UPV -&gt; c UPV
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UPV)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c UPV)
$tUPV :: DataType
gmapMo :: (forall d. Data d =&gt; d -&gt; m d) -&gt; UPV -&gt; m UPV
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UPV -&gt; m UPV
gmapMp :: (forall d. Data d =&gt; d -&gt; m d) -&gt; UPV -&gt; m UPV
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UPV -&gt; m UPV
gmapM :: (forall d. Data d =&gt; d -&gt; m d) -&gt; UPV -&gt; m UPV
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UPV -&gt; m UPV
gmapQi :: Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UPV -&gt; u
$cgmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UPV -&gt; u
gmapQ :: (forall d. Data d =&gt; d -&gt; u) -&gt; UPV -&gt; [u]
$cgmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; UPV -&gt; [u]
gmapQr :: (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPV -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPV -&gt; r
gmapQl :: (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPV -&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPV -&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; UPV -&gt; UPV
$cgmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; UPV -&gt; UPV
dataCast2 :: (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c UPV)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c UPV)
dataCast1 :: (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UPV)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UPV)
dataTypeOf :: UPV -&gt; DataType
$cdataTypeOf :: UPV -&gt; DataType
toConstr :: UPV -&gt; Constr
$ctoConstr :: UPV -&gt; Constr
gunfold :: (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UPV
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UPV
gfoldl :: (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; UPV -&gt; c UPV
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; UPV -&gt; c UPV
$cp1Data :: Typeable UPV
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">)</span><span>
</span><span id="line-440"></span><span>
</span><span id="line-441"></span><span class="hs-comment">-- | These `PredicateFailure`s are all throwable.</span><span>
</span><span id="line-442"></span><span id="local-6989586621679556495"><span id="local-6989586621679556496"></span></span><span class="hs-keyword">data</span><span> </span><span id="UpvPredicateFailure"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpvPredicateFailure"><span class="hs-identifier hs-var">UpvPredicateFailure</span></a></span></span><span>
</span><span id="line-443"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="UPPVVFailure"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPPVVFailure"><span class="hs-identifier hs-var">UPPVVFailure</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">PredicateFailure</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPPVV"><span class="hs-identifier hs-type">UPPVV</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-444"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="UPSVVFailure"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPSVVFailure"><span class="hs-identifier hs-var">UPSVVFailure</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">PredicateFailure</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPSVV"><span class="hs-identifier hs-type">UPSVV</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-445"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="AVChangedInPVUpdate"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#AVChangedInPVUpdate"><span class="hs-identifier hs-var">AVChangedInPVUpdate</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ApName"><span class="hs-identifier hs-type">ApName</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ApVer"><span class="hs-identifier hs-type">ApVer</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ApVer"><span class="hs-identifier hs-type">ApVer</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Slot"><span class="hs-identifier hs-type">Slot</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#Metadata"><span class="hs-identifier hs-type">Metadata</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-446"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="ParamsChangedInSVUpdate"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ParamsChangedInSVUpdate"><span class="hs-identifier hs-var">ParamsChangedInSVUpdate</span></a></span></span><span>
</span><span id="line-447"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="PVChangedInSVUpdate"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#PVChangedInSVUpdate"><span class="hs-identifier hs-var">PVChangedInSVUpdate</span></a></span></span><span>
</span><span id="line-448"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556486"><span id="local-6989586621679556488"><span class="annot"><span class="annottext">UpvPredicateFailure -&gt; UpvPredicateFailure -&gt; Bool
(UpvPredicateFailure -&gt; UpvPredicateFailure -&gt; Bool)
-&gt; (UpvPredicateFailure -&gt; UpvPredicateFailure -&gt; Bool)
-&gt; Eq UpvPredicateFailure
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: UpvPredicateFailure -&gt; UpvPredicateFailure -&gt; Bool
$c/= :: UpvPredicateFailure -&gt; UpvPredicateFailure -&gt; Bool
== :: UpvPredicateFailure -&gt; UpvPredicateFailure -&gt; Bool
$c== :: UpvPredicateFailure -&gt; UpvPredicateFailure -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679556480"><span id="local-6989586621679556482"><span id="local-6989586621679556484"><span class="annot"><span class="annottext">Int -&gt; UpvPredicateFailure -&gt; ShowS
[UpvPredicateFailure] -&gt; ShowS
UpvPredicateFailure -&gt; String
(Int -&gt; UpvPredicateFailure -&gt; ShowS)
-&gt; (UpvPredicateFailure -&gt; String)
-&gt; ([UpvPredicateFailure] -&gt; ShowS)
-&gt; Show UpvPredicateFailure
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [UpvPredicateFailure] -&gt; ShowS
$cshowList :: [UpvPredicateFailure] -&gt; ShowS
show :: UpvPredicateFailure -&gt; String
$cshow :: UpvPredicateFailure -&gt; String
showsPrec :: Int -&gt; UpvPredicateFailure -&gt; ShowS
$cshowsPrec :: Int -&gt; UpvPredicateFailure -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="%24cPVChangedInSVUpdate"><span id="%24cParamsChangedInSVUpdate"><span id="%24cAVChangedInPVUpdate"><span id="%24cUPSVVFailure"><span id="%24cUPPVVFailure"><span id="%24tUpvPredicateFailure"><span id="local-6989586621679556451"><span id="local-6989586621679556453"><span id="local-6989586621679556455"><span id="local-6989586621679556457"><span id="local-6989586621679556459"><span id="local-6989586621679556461"><span id="local-6989586621679556463"><span id="local-6989586621679556465"><span id="local-6989586621679556467"><span id="local-6989586621679556469"><span id="local-6989586621679556471"><span id="local-6989586621679556473"><span id="local-6989586621679556475"><span id="local-6989586621679556477"><span class="annot"><span class="annottext">Typeable UpvPredicateFailure
DataType
Constr
Typeable UpvPredicateFailure
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g)
    -&gt; UpvPredicateFailure
    -&gt; c UpvPredicateFailure)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UpvPredicateFailure)
-&gt; (UpvPredicateFailure -&gt; Constr)
-&gt; (UpvPredicateFailure -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UpvPredicateFailure))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e))
    -&gt; Maybe (c UpvPredicateFailure))
-&gt; ((forall b. Data b =&gt; b -&gt; b)
    -&gt; UpvPredicateFailure -&gt; UpvPredicateFailure)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UpvPredicateFailure -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UpvPredicateFailure -&gt; r)
-&gt; (forall u.
    (forall d. Data d =&gt; d -&gt; u) -&gt; UpvPredicateFailure -&gt; [u])
-&gt; (forall u.
    Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UpvPredicateFailure -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; UpvPredicateFailure -&gt; m UpvPredicateFailure)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; UpvPredicateFailure -&gt; m UpvPredicateFailure)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; UpvPredicateFailure -&gt; m UpvPredicateFailure)
-&gt; Data UpvPredicateFailure
UpvPredicateFailure -&gt; DataType
UpvPredicateFailure -&gt; Constr
(forall b. Data b =&gt; b -&gt; b)
-&gt; UpvPredicateFailure -&gt; UpvPredicateFailure
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; UpvPredicateFailure
-&gt; c UpvPredicateFailure
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UpvPredicateFailure
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u.
Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UpvPredicateFailure -&gt; u
forall u.
(forall d. Data d =&gt; d -&gt; u) -&gt; UpvPredicateFailure -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UpvPredicateFailure -&gt; r
forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UpvPredicateFailure -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; UpvPredicateFailure -&gt; m UpvPredicateFailure
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; UpvPredicateFailure -&gt; m UpvPredicateFailure
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UpvPredicateFailure
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; UpvPredicateFailure
-&gt; c UpvPredicateFailure
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UpvPredicateFailure)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c UpvPredicateFailure)
$cPVChangedInSVUpdate :: Constr
$cParamsChangedInSVUpdate :: Constr
$cAVChangedInPVUpdate :: Constr
$cUPSVVFailure :: Constr
$cUPPVVFailure :: Constr
$tUpvPredicateFailure :: DataType
gmapMo :: (forall d. Data d =&gt; d -&gt; m d)
-&gt; UpvPredicateFailure -&gt; m UpvPredicateFailure
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; UpvPredicateFailure -&gt; m UpvPredicateFailure
gmapMp :: (forall d. Data d =&gt; d -&gt; m d)
-&gt; UpvPredicateFailure -&gt; m UpvPredicateFailure
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; UpvPredicateFailure -&gt; m UpvPredicateFailure
gmapM :: (forall d. Data d =&gt; d -&gt; m d)
-&gt; UpvPredicateFailure -&gt; m UpvPredicateFailure
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; UpvPredicateFailure -&gt; m UpvPredicateFailure
gmapQi :: Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UpvPredicateFailure -&gt; u
$cgmapQi :: forall u.
Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UpvPredicateFailure -&gt; u
gmapQ :: (forall d. Data d =&gt; d -&gt; u) -&gt; UpvPredicateFailure -&gt; [u]
$cgmapQ :: forall u.
(forall d. Data d =&gt; d -&gt; u) -&gt; UpvPredicateFailure -&gt; [u]
gmapQr :: (r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UpvPredicateFailure -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UpvPredicateFailure -&gt; r
gmapQl :: (r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UpvPredicateFailure -&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UpvPredicateFailure -&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b)
-&gt; UpvPredicateFailure -&gt; UpvPredicateFailure
$cgmapT :: (forall b. Data b =&gt; b -&gt; b)
-&gt; UpvPredicateFailure -&gt; UpvPredicateFailure
dataCast2 :: (forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c UpvPredicateFailure)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c UpvPredicateFailure)
dataCast1 :: (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UpvPredicateFailure)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UpvPredicateFailure)
dataTypeOf :: UpvPredicateFailure -&gt; DataType
$cdataTypeOf :: UpvPredicateFailure -&gt; DataType
toConstr :: UpvPredicateFailure -&gt; Constr
$ctoConstr :: UpvPredicateFailure -&gt; Constr
gunfold :: (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UpvPredicateFailure
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UpvPredicateFailure
gfoldl :: (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; UpvPredicateFailure
-&gt; c UpvPredicateFailure
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; UpvPredicateFailure
-&gt; c UpvPredicateFailure
$cp1Data :: Typeable UpvPredicateFailure
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. UpvPredicateFailure -&gt; Rep UpvPredicateFailure x)
-&gt; (forall x. Rep UpvPredicateFailure x -&gt; UpvPredicateFailure)
-&gt; Generic UpvPredicateFailure
forall x. Rep UpvPredicateFailure x -&gt; UpvPredicateFailure
forall x. UpvPredicateFailure -&gt; Rep UpvPredicateFailure x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep UpvPredicateFailure x -&gt; UpvPredicateFailure
$cfrom :: forall x. UpvPredicateFailure -&gt; Rep UpvPredicateFailure x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679556437"><span id="local-6989586621679556439"><span id="local-6989586621679556441"><span class="annot"><span class="annottext">Context -&gt; UpvPredicateFailure -&gt; IO (Maybe ThunkInfo)
Proxy UpvPredicateFailure -&gt; String
(Context -&gt; UpvPredicateFailure -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; UpvPredicateFailure -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy UpvPredicateFailure -&gt; String)
-&gt; NoThunks UpvPredicateFailure
forall a.
(Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy a -&gt; String)
-&gt; NoThunks a
showTypeOf :: Proxy UpvPredicateFailure -&gt; String
$cshowTypeOf :: Proxy UpvPredicateFailure -&gt; String
wNoThunks :: Context -&gt; UpvPredicateFailure -&gt; IO (Maybe ThunkInfo)
$cwNoThunks :: Context -&gt; UpvPredicateFailure -&gt; IO (Maybe ThunkInfo)
noThunks :: Context -&gt; UpvPredicateFailure -&gt; IO (Maybe ThunkInfo)
$cnoThunks :: Context -&gt; UpvPredicateFailure -&gt; IO (Maybe ThunkInfo)
</span><a href="#local-6989586621679556437"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">NoThunks</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-449"></span><span>
</span><span id="line-450"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679556427"><span id="local-6989586621679556429"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">STS</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPV"><span class="hs-identifier hs-type">UPV</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-451"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Environment"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">Environment</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPV"><span class="hs-identifier hs-type">UPV</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-452"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ProtVer"><span class="hs-identifier hs-type">ProtVer</span></a></span><span>
</span><span id="line-453"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#PParams"><span class="hs-identifier hs-type">PParams</span></a></span><span>
</span><span id="line-454"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ApName"><span class="hs-identifier hs-type">ApName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ApVer"><span class="hs-identifier hs-type">ApVer</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Slot"><span class="hs-identifier hs-type">Core.Slot</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#Metadata"><span class="hs-identifier hs-type">Metadata</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-455"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-456"></span><span>
</span><span id="line-457"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="State"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">State</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPV"><span class="hs-identifier hs-type">UPV</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-458"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpId"><span class="hs-identifier hs-type">UpId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ProtVer"><span class="hs-identifier hs-type">ProtVer</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#PParams"><span class="hs-identifier hs-type">PParams</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-459"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpId"><span class="hs-identifier hs-type">UpId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ApName"><span class="hs-identifier hs-type">ApName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ApVer"><span class="hs-identifier hs-type">ApVer</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#Metadata"><span class="hs-identifier hs-type">Metadata</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-460"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-461"></span><span>
</span><span id="line-462"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Signal"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">Signal</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPV"><span class="hs-identifier hs-type">UPV</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UProp"><span class="hs-identifier hs-type">UProp</span></a></span><span>
</span><span id="line-463"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="PredicateFailure"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">PredicateFailure</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPV"><span class="hs-identifier hs-type">UPV</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpvPredicateFailure"><span class="hs-identifier hs-type">UpvPredicateFailure</span></a></span><span>
</span><span id="line-464"></span><span>
</span><span id="line-465"></span><span>
</span><span id="line-466"></span><span>  </span><span id="local-6989586621679556426"><span class="annot"><span class="annottext">initialRules :: [InitialRule UPV]
</span><a href="#local-6989586621679556426"><span class="hs-identifier hs-var hs-var hs-var hs-var">initialRules</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-467"></span><span>  </span><span id="local-6989586621679556425"><span class="annot"><span class="annottext">transitionRules :: [TransitionRule UPV]
</span><a href="#local-6989586621679556425"><span class="hs-identifier hs-var hs-var hs-var hs-var">transitionRules</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-468"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-469"></span><span>        </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">TRC</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556424"><span class="annot"><a href="#local-6989586621679556424"><span class="hs-identifier hs-var">pv</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679556423"><span class="annot"><a href="#local-6989586621679556423"><span class="hs-identifier hs-var">pps</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679556422"><span class="annot"><a href="#local-6989586621679556422"><span class="hs-identifier hs-var">avs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-470"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556421"><span class="annot"><a href="#local-6989586621679556421"><span class="hs-identifier hs-var">rpus</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679556420"><span class="annot"><a href="#local-6989586621679556420"><span class="hs-identifier hs-var">raus</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-471"></span><span>            </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679556419"><span class="annot"><span class="annottext">Signal UPV
</span><a href="#local-6989586621679556419"><span class="hs-identifier hs-var">up</span></a></span></span><span>
</span><span id="line-472"></span><span>            </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">F (Clause UPV 'Transition) (TRC UPV)
forall sts (rtype :: RuleType).
Rule sts rtype (RuleContext rtype sts)
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">judgmentContext</span></a></span><span>
</span><span id="line-473"></span><span>        </span><span id="local-6989586621679556418"><span class="annot"><span class="annottext">Map UpId (ProtVer, PParams)
</span><a href="#local-6989586621679556418"><span class="hs-identifier hs-var">rpus'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall sub super (rtype :: RuleType).
Embed sub super =&gt;
RuleContext rtype sub -&gt; Rule super rtype (State sub)
forall super (rtype :: RuleType).
Embed UPPVV super =&gt;
RuleContext rtype UPPVV -&gt; Rule super rtype (State UPPVV)
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">trans</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPPVV"><span class="hs-identifier hs-type">UPPVV</span></a></span><span> </span><span class="annot"><span class="annottext">(RuleContext 'Transition UPPVV
 -&gt; Rule UPV 'Transition (State UPPVV))
-&gt; RuleContext 'Transition UPPVV
-&gt; Rule UPV 'Transition (State UPPVV)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Environment UPPVV, State UPPVV, Signal UPPVV) -&gt; TRC UPPVV
forall sts. (Environment sts, State sts, Signal sts) -&gt; TRC sts
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">TRC</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">ProtVer
</span><a href="#local-6989586621679556424"><span class="hs-identifier hs-var">pv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PParams
</span><a href="#local-6989586621679556423"><span class="hs-identifier hs-var">pps</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map UpId (ProtVer, PParams)
State UPPVV
</span><a href="#local-6989586621679556421"><span class="hs-identifier hs-var">rpus</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Signal UPV
Signal UPPVV
</span><a href="#local-6989586621679556419"><span class="hs-identifier hs-var">up</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-474"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#SwVer"><span class="hs-identifier hs-type">SwVer</span></a></span><span> </span><span id="local-6989586621679556416"><span class="annot"><span class="annottext">ApName
</span><a href="#local-6989586621679556416"><span class="hs-identifier hs-var">an</span></a></span></span><span> </span><span id="local-6989586621679556415"><span class="annot"><span class="annottext">ApVer
</span><a href="#local-6989586621679556415"><span class="hs-identifier hs-var">av</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Signal UPV
UProp
</span><a href="#local-6989586621679556419"><span class="hs-identifier hs-var">up</span></a></span><span> </span><span class="annot"><span class="annottext">UProp -&gt; Getting SwVer UProp SwVer -&gt; SwVer
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting SwVer UProp SwVer
Lens' UProp SwVer
</span><a href="Byron.Spec.Ledger.Update.html#upSwVer"><span class="hs-identifier hs-var">upSwVer</span></a></span><span>
</span><span id="line-475"></span><span>        </span><span class="annot"><span class="annottext">ApName -&gt; ApVer -&gt; Map ApName ApVer -&gt; Bool
forall key v. (Ord key, Eq v) =&gt; key -&gt; v -&gt; Map key v -&gt; Bool
</span><a href="Byron.Spec.Ledger.Update.html#inMap"><span class="hs-identifier hs-var">inMap</span></a></span><span> </span><span class="annot"><span class="annottext">ApName
</span><a href="#local-6989586621679556416"><span class="hs-identifier hs-var">an</span></a></span><span> </span><span class="annot"><span class="annottext">ApVer
</span><a href="#local-6989586621679556415"><span class="hs-identifier hs-var">av</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(ApVer, Slot, Metadata) -&gt; ApVer
forall a b c. (a, b, c) -&gt; a
</span><a href="#local-6989586621679556414"><span class="hs-identifier hs-var">swVer</span></a></span><span> </span><span class="annot"><span class="annottext">((ApVer, Slot, Metadata) -&gt; ApVer)
-&gt; Map ApName (ApVer, Slot, Metadata) -&gt; Map ApName ApVer
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Map ApName (ApVer, Slot, Metadata)
</span><a href="#local-6989586621679556422"><span class="hs-identifier hs-var">avs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; PredicateFailure UPV -&gt; Rule UPV 'Transition ()
forall sts (ctx :: RuleType).
Bool -&gt; PredicateFailure sts -&gt; Rule sts ctx ()
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-operator hs-var">?!</span></a></span><span> </span><span class="annot"><span class="annottext">ApName
-&gt; ApVer -&gt; Maybe (ApVer, Slot, Metadata) -&gt; UpvPredicateFailure
</span><a href="Byron.Spec.Ledger.Update.html#AVChangedInPVUpdate"><span class="hs-identifier hs-var">AVChangedInPVUpdate</span></a></span><span> </span><span class="annot"><span class="annottext">ApName
</span><a href="#local-6989586621679556416"><span class="hs-identifier hs-var">an</span></a></span><span> </span><span class="annot"><span class="annottext">ApVer
</span><a href="#local-6989586621679556415"><span class="hs-identifier hs-var">av</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ApName
-&gt; Map ApName (ApVer, Slot, Metadata)
-&gt; Maybe (ApVer, Slot, Metadata)
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="annot"><span class="annottext">ApName
</span><a href="#local-6989586621679556416"><span class="hs-identifier hs-var">an</span></a></span><span> </span><span class="annot"><span class="annottext">Map ApName (ApVer, Slot, Metadata)
</span><a href="#local-6989586621679556422"><span class="hs-identifier hs-var">avs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-476"></span><span>        </span><span class="annot"><span class="annottext">(Map UpId (ProtVer, PParams), Map UpId (ApName, ApVer, Metadata))
-&gt; F (Clause UPV 'Transition)
     (Map UpId (ProtVer, PParams), Map UpId (ApName, ApVer, Metadata))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">((Map UpId (ProtVer, PParams), Map UpId (ApName, ApVer, Metadata))
 -&gt; F (Clause UPV 'Transition)
      (Map UpId (ProtVer, PParams), Map UpId (ApName, ApVer, Metadata)))
-&gt; (Map UpId (ProtVer, PParams),
    Map UpId (ApName, ApVer, Metadata))
-&gt; F (Clause UPV 'Transition)
     (Map UpId (ProtVer, PParams), Map UpId (ApName, ApVer, Metadata))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map UpId (ProtVer, PParams)
</span><a href="#local-6989586621679556418"><span class="hs-identifier hs-var">rpus'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map UpId (ApName, ApVer, Metadata)
</span><a href="#local-6989586621679556420"><span class="hs-identifier hs-var">raus</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-477"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-478"></span><span>        </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">TRC</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556413"><span class="annot"><a href="#local-6989586621679556413"><span class="hs-identifier hs-var">pv</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679556412"><span class="annot"><a href="#local-6989586621679556412"><span class="hs-identifier hs-var">pps</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679556411"><span class="annot"><a href="#local-6989586621679556411"><span class="hs-identifier hs-var">avs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-479"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556410"><span class="annot"><a href="#local-6989586621679556410"><span class="hs-identifier hs-var">rpus</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679556409"><span class="annot"><a href="#local-6989586621679556409"><span class="hs-identifier hs-var">raus</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-480"></span><span>            </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679556408"><span class="annot"><span class="annottext">Signal UPV
</span><a href="#local-6989586621679556408"><span class="hs-identifier hs-var">up</span></a></span></span><span>
</span><span id="line-481"></span><span>            </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">F (Clause UPV 'Transition) (TRC UPV)
forall sts (rtype :: RuleType).
Rule sts rtype (RuleContext rtype sts)
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">judgmentContext</span></a></span><span>
</span><span id="line-482"></span><span>        </span><span class="annot"><span class="annottext">ProtVer
</span><a href="#local-6989586621679556413"><span class="hs-identifier hs-var">pv</span></a></span><span> </span><span class="annot"><span class="annottext">ProtVer -&gt; ProtVer -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Signal UPV
UProp
</span><a href="#local-6989586621679556408"><span class="hs-identifier hs-var">up</span></a></span><span> </span><span class="annot"><span class="annottext">UProp -&gt; Getting ProtVer UProp ProtVer -&gt; ProtVer
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting ProtVer UProp ProtVer
Lens' UProp ProtVer
</span><a href="Byron.Spec.Ledger.Update.html#upPV"><span class="hs-identifier hs-var">upPV</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; PredicateFailure UPV -&gt; Rule UPV 'Transition ()
forall sts (ctx :: RuleType).
Bool -&gt; PredicateFailure sts -&gt; Rule sts ctx ()
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-operator hs-var">?!</span></a></span><span> </span><span class="annot"><span class="annottext">PredicateFailure UPV
UpvPredicateFailure
</span><a href="Byron.Spec.Ledger.Update.html#PVChangedInSVUpdate"><span class="hs-identifier hs-var">PVChangedInSVUpdate</span></a></span><span>
</span><span id="line-483"></span><span>        </span><span class="annot"><span class="annottext">Signal UPV
UProp
</span><a href="#local-6989586621679556408"><span class="hs-identifier hs-var">up</span></a></span><span> </span><span class="annot"><span class="annottext">UProp -&gt; Getting PParams UProp PParams -&gt; PParams
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting PParams UProp PParams
Lens' UProp PParams
</span><a href="Byron.Spec.Ledger.Update.html#upParams"><span class="hs-identifier hs-var">upParams</span></a></span><span> </span><span class="annot"><span class="annottext">PParams -&gt; PParams -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">PParams
</span><a href="#local-6989586621679556412"><span class="hs-identifier hs-var">pps</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; PredicateFailure UPV -&gt; Rule UPV 'Transition ()
forall sts (ctx :: RuleType).
Bool -&gt; PredicateFailure sts -&gt; Rule sts ctx ()
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-operator hs-var">?!</span></a></span><span> </span><span class="annot"><span class="annottext">PredicateFailure UPV
UpvPredicateFailure
</span><a href="Byron.Spec.Ledger.Update.html#ParamsChangedInSVUpdate"><span class="hs-identifier hs-var">ParamsChangedInSVUpdate</span></a></span><span>
</span><span id="line-484"></span><span>        </span><span id="local-6989586621679556407"><span class="annot"><span class="annottext">Map UpId (ApName, ApVer, Metadata)
</span><a href="#local-6989586621679556407"><span class="hs-identifier hs-var">raus'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall sub super (rtype :: RuleType).
Embed sub super =&gt;
RuleContext rtype sub -&gt; Rule super rtype (State sub)
forall super (rtype :: RuleType).
Embed UPSVV super =&gt;
RuleContext rtype UPSVV -&gt; Rule super rtype (State UPSVV)
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">trans</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPSVV"><span class="hs-identifier hs-type">UPSVV</span></a></span><span> </span><span class="annot"><span class="annottext">(RuleContext 'Transition UPSVV
 -&gt; Rule UPV 'Transition (State UPSVV))
-&gt; RuleContext 'Transition UPSVV
-&gt; Rule UPV 'Transition (State UPSVV)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Environment UPSVV, State UPSVV, Signal UPSVV) -&gt; TRC UPSVV
forall sts. (Environment sts, State sts, Signal sts) -&gt; TRC sts
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">TRC</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map ApName (ApVer, Slot, Metadata)
Environment UPSVV
</span><a href="#local-6989586621679556411"><span class="hs-identifier hs-var">avs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map UpId (ApName, ApVer, Metadata)
State UPSVV
</span><a href="#local-6989586621679556409"><span class="hs-identifier hs-var">raus</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Signal UPV
Signal UPSVV
</span><a href="#local-6989586621679556408"><span class="hs-identifier hs-var">up</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-485"></span><span>        </span><span class="annot"><span class="annottext">(Map UpId (ProtVer, PParams), Map UpId (ApName, ApVer, Metadata))
-&gt; F (Clause UPV 'Transition)
     (Map UpId (ProtVer, PParams), Map UpId (ApName, ApVer, Metadata))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">((Map UpId (ProtVer, PParams), Map UpId (ApName, ApVer, Metadata))
 -&gt; F (Clause UPV 'Transition)
      (Map UpId (ProtVer, PParams), Map UpId (ApName, ApVer, Metadata)))
-&gt; (Map UpId (ProtVer, PParams),
    Map UpId (ApName, ApVer, Metadata))
-&gt; F (Clause UPV 'Transition)
     (Map UpId (ProtVer, PParams), Map UpId (ApName, ApVer, Metadata))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map UpId (ProtVer, PParams)
</span><a href="#local-6989586621679556410"><span class="hs-identifier hs-var">rpus</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map UpId (ApName, ApVer, Metadata)
</span><a href="#local-6989586621679556407"><span class="hs-identifier hs-var">raus'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-486"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-487"></span><span>        </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">TRC</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556406"><span class="annot"><a href="#local-6989586621679556406"><span class="hs-identifier hs-var">pv</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679556405"><span class="annot"><a href="#local-6989586621679556405"><span class="hs-identifier hs-var">pps</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679556404"><span class="annot"><a href="#local-6989586621679556404"><span class="hs-identifier hs-var">avs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-488"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556403"><span class="annot"><a href="#local-6989586621679556403"><span class="hs-identifier hs-var">rpus</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679556402"><span class="annot"><a href="#local-6989586621679556402"><span class="hs-identifier hs-var">raus</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-489"></span><span>            </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679556401"><span class="annot"><span class="annottext">Signal UPV
</span><a href="#local-6989586621679556401"><span class="hs-identifier hs-var">up</span></a></span></span><span>
</span><span id="line-490"></span><span>            </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">F (Clause UPV 'Transition) (TRC UPV)
forall sts (rtype :: RuleType).
Rule sts rtype (RuleContext rtype sts)
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">judgmentContext</span></a></span><span>
</span><span id="line-491"></span><span>        </span><span id="local-6989586621679556400"><span class="annot"><span class="annottext">Map UpId (ProtVer, PParams)
</span><a href="#local-6989586621679556400"><span class="hs-identifier hs-var">rpus'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall sub super (rtype :: RuleType).
Embed sub super =&gt;
RuleContext rtype sub -&gt; Rule super rtype (State sub)
forall super (rtype :: RuleType).
Embed UPPVV super =&gt;
RuleContext rtype UPPVV -&gt; Rule super rtype (State UPPVV)
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">trans</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPPVV"><span class="hs-identifier hs-type">UPPVV</span></a></span><span> </span><span class="annot"><span class="annottext">(RuleContext 'Transition UPPVV
 -&gt; Rule UPV 'Transition (State UPPVV))
-&gt; RuleContext 'Transition UPPVV
-&gt; Rule UPV 'Transition (State UPPVV)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Environment UPPVV, State UPPVV, Signal UPPVV) -&gt; TRC UPPVV
forall sts. (Environment sts, State sts, Signal sts) -&gt; TRC sts
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">TRC</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">ProtVer
</span><a href="#local-6989586621679556406"><span class="hs-identifier hs-var">pv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PParams
</span><a href="#local-6989586621679556405"><span class="hs-identifier hs-var">pps</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map UpId (ProtVer, PParams)
State UPPVV
</span><a href="#local-6989586621679556403"><span class="hs-identifier hs-var">rpus</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Signal UPV
Signal UPPVV
</span><a href="#local-6989586621679556401"><span class="hs-identifier hs-var">up</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-492"></span><span>        </span><span id="local-6989586621679556399"><span class="annot"><span class="annottext">Map UpId (ApName, ApVer, Metadata)
</span><a href="#local-6989586621679556399"><span class="hs-identifier hs-var">raus'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall sub super (rtype :: RuleType).
Embed sub super =&gt;
RuleContext rtype sub -&gt; Rule super rtype (State sub)
forall super (rtype :: RuleType).
Embed UPSVV super =&gt;
RuleContext rtype UPSVV -&gt; Rule super rtype (State UPSVV)
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">trans</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPSVV"><span class="hs-identifier hs-type">UPSVV</span></a></span><span> </span><span class="annot"><span class="annottext">(RuleContext 'Transition UPSVV
 -&gt; Rule UPV 'Transition (State UPSVV))
-&gt; RuleContext 'Transition UPSVV
-&gt; Rule UPV 'Transition (State UPSVV)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Environment UPSVV, State UPSVV, Signal UPSVV) -&gt; TRC UPSVV
forall sts. (Environment sts, State sts, Signal sts) -&gt; TRC sts
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">TRC</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map ApName (ApVer, Slot, Metadata)
Environment UPSVV
</span><a href="#local-6989586621679556404"><span class="hs-identifier hs-var">avs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map UpId (ApName, ApVer, Metadata)
State UPSVV
</span><a href="#local-6989586621679556402"><span class="hs-identifier hs-var">raus</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Signal UPV
Signal UPSVV
</span><a href="#local-6989586621679556401"><span class="hs-identifier hs-var">up</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-493"></span><span>        </span><span class="annot"><span class="annottext">(Map UpId (ProtVer, PParams), Map UpId (ApName, ApVer, Metadata))
-&gt; F (Clause UPV 'Transition)
     (Map UpId (ProtVer, PParams), Map UpId (ApName, ApVer, Metadata))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">((Map UpId (ProtVer, PParams), Map UpId (ApName, ApVer, Metadata))
 -&gt; F (Clause UPV 'Transition)
      (Map UpId (ProtVer, PParams), Map UpId (ApName, ApVer, Metadata)))
-&gt; (Map UpId (ProtVer, PParams),
    Map UpId (ApName, ApVer, Metadata))
-&gt; F (Clause UPV 'Transition)
     (Map UpId (ProtVer, PParams), Map UpId (ApName, ApVer, Metadata))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map UpId (ProtVer, PParams)
</span><a href="#local-6989586621679556400"><span class="hs-identifier hs-var">rpus'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map UpId (ApName, ApVer, Metadata)
</span><a href="#local-6989586621679556399"><span class="hs-identifier hs-var">raus'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-494"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-495"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-496"></span><span>      </span><span id="local-6989586621679556414"><span class="annot"><span class="annottext">swVer :: (a, b, c) -&gt; a
</span><a href="#local-6989586621679556414"><span class="hs-identifier hs-var hs-var">swVer</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556398"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679556398"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">b
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">c
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679556398"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-497"></span><span>
</span><span id="line-498"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">Embed</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPPVV"><span class="hs-identifier hs-type">UPPVV</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPV"><span class="hs-identifier hs-type">UPV</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-499"></span><span>  </span><span id="local-6989586621679556393"><span class="annot"><span class="annottext">wrapFailed :: PredicateFailure UPPVV -&gt; PredicateFailure UPV
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">wrapFailed</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PredicateFailure UPPVV -&gt; PredicateFailure UPV
PredicateFailure UPPVV -&gt; UpvPredicateFailure
</span><a href="Byron.Spec.Ledger.Update.html#UPPVVFailure"><span class="hs-identifier hs-var">UPPVVFailure</span></a></span><span>
</span><span id="line-500"></span><span>
</span><span id="line-501"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">Embed</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPSVV"><span class="hs-identifier hs-type">UPSVV</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPV"><span class="hs-identifier hs-type">UPV</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-502"></span><span>  </span><span id="local-6989586621679556388"><span class="annot"><span class="annottext">wrapFailed :: PredicateFailure UPSVV -&gt; PredicateFailure UPV
</span><a href="#local-6989586621679556388"><span class="hs-identifier hs-var hs-var hs-var hs-var">wrapFailed</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PredicateFailure UPSVV -&gt; PredicateFailure UPV
PredicateFailure UPSVV -&gt; UpvPredicateFailure
</span><a href="Byron.Spec.Ledger.Update.html#UPSVVFailure"><span class="hs-identifier hs-var">UPSVVFailure</span></a></span><span>
</span><span id="line-503"></span><span>
</span><span id="line-504"></span><span id="local-6989586621679556386"><span id="local-6989586621679556387"></span></span><span class="hs-keyword">data</span><span> </span><span id="UPREG"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPREG"><span class="hs-identifier hs-var">UPREG</span></a></span></span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(forall x. UPREG -&gt; Rep UPREG x)
-&gt; (forall x. Rep UPREG x -&gt; UPREG) -&gt; Generic UPREG
forall x. Rep UPREG x -&gt; UPREG
forall x. UPREG -&gt; Rep UPREG x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep UPREG x -&gt; UPREG
$cfrom :: forall x. UPREG -&gt; Rep UPREG x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">,</span><span> </span><span id="%24tUPREG"><span id="local-6989586621679556355"><span id="local-6989586621679556357"><span id="local-6989586621679556359"><span id="local-6989586621679556361"><span id="local-6989586621679556363"><span id="local-6989586621679556365"><span id="local-6989586621679556367"><span id="local-6989586621679556369"><span id="local-6989586621679556371"><span id="local-6989586621679556373"><span id="local-6989586621679556375"><span id="local-6989586621679556377"><span id="local-6989586621679556379"><span id="local-6989586621679556381"><span class="annot"><span class="annottext">Typeable UPREG
DataType
Typeable UPREG
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; UPREG -&gt; c UPREG)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UPREG)
-&gt; (UPREG -&gt; Constr)
-&gt; (UPREG -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UPREG))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c UPREG))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; UPREG -&gt; UPREG)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPREG -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPREG -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; UPREG -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UPREG -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; UPREG -&gt; m UPREG)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; UPREG -&gt; m UPREG)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; UPREG -&gt; m UPREG)
-&gt; Data UPREG
UPREG -&gt; DataType
UPREG -&gt; Constr
(forall b. Data b =&gt; b -&gt; b) -&gt; UPREG -&gt; UPREG
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; UPREG -&gt; c UPREG
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UPREG
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UPREG -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; UPREG -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPREG -&gt; r
forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPREG -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UPREG -&gt; m UPREG
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UPREG -&gt; m UPREG
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UPREG
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; UPREG -&gt; c UPREG
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UPREG)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c UPREG)
$tUPREG :: DataType
gmapMo :: (forall d. Data d =&gt; d -&gt; m d) -&gt; UPREG -&gt; m UPREG
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UPREG -&gt; m UPREG
gmapMp :: (forall d. Data d =&gt; d -&gt; m d) -&gt; UPREG -&gt; m UPREG
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UPREG -&gt; m UPREG
gmapM :: (forall d. Data d =&gt; d -&gt; m d) -&gt; UPREG -&gt; m UPREG
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UPREG -&gt; m UPREG
gmapQi :: Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UPREG -&gt; u
$cgmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UPREG -&gt; u
gmapQ :: (forall d. Data d =&gt; d -&gt; u) -&gt; UPREG -&gt; [u]
$cgmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; UPREG -&gt; [u]
gmapQr :: (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPREG -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPREG -&gt; r
gmapQl :: (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPREG -&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPREG -&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; UPREG -&gt; UPREG
$cgmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; UPREG -&gt; UPREG
dataCast2 :: (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c UPREG)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c UPREG)
dataCast1 :: (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UPREG)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UPREG)
dataTypeOf :: UPREG -&gt; DataType
$cdataTypeOf :: UPREG -&gt; DataType
toConstr :: UPREG -&gt; Constr
$ctoConstr :: UPREG -&gt; Constr
gunfold :: (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UPREG
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UPREG
gfoldl :: (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; UPREG -&gt; c UPREG
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; UPREG -&gt; c UPREG
$cp1Data :: Typeable UPREG
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">)</span><span>
</span><span id="line-505"></span><span class="hs-comment">-- | These `PredicateFailure`s are all throwable.</span><span>
</span><span id="line-506"></span><span id="local-6989586621679556352"><span id="local-6989586621679556353"></span></span><span class="hs-keyword">data</span><span> </span><span id="UpregPredicateFailure"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpregPredicateFailure"><span class="hs-identifier hs-var">UpregPredicateFailure</span></a></span></span><span>
</span><span id="line-507"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="UPVFailure"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPVFailure"><span class="hs-identifier hs-var">UPVFailure</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">PredicateFailure</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPV"><span class="hs-identifier hs-type">UPV</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-508"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="NotGenesisDelegate"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#NotGenesisDelegate"><span class="hs-identifier hs-var">NotGenesisDelegate</span></a></span></span><span>
</span><span id="line-509"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="DoesNotVerify"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#DoesNotVerify"><span class="hs-identifier hs-var">DoesNotVerify</span></a></span></span><span>
</span><span id="line-510"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556345"><span id="local-6989586621679556347"><span class="annot"><span class="annottext">UpregPredicateFailure -&gt; UpregPredicateFailure -&gt; Bool
(UpregPredicateFailure -&gt; UpregPredicateFailure -&gt; Bool)
-&gt; (UpregPredicateFailure -&gt; UpregPredicateFailure -&gt; Bool)
-&gt; Eq UpregPredicateFailure
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: UpregPredicateFailure -&gt; UpregPredicateFailure -&gt; Bool
$c/= :: UpregPredicateFailure -&gt; UpregPredicateFailure -&gt; Bool
== :: UpregPredicateFailure -&gt; UpregPredicateFailure -&gt; Bool
$c== :: UpregPredicateFailure -&gt; UpregPredicateFailure -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679556339"><span id="local-6989586621679556341"><span id="local-6989586621679556343"><span class="annot"><span class="annottext">Int -&gt; UpregPredicateFailure -&gt; ShowS
[UpregPredicateFailure] -&gt; ShowS
UpregPredicateFailure -&gt; String
(Int -&gt; UpregPredicateFailure -&gt; ShowS)
-&gt; (UpregPredicateFailure -&gt; String)
-&gt; ([UpregPredicateFailure] -&gt; ShowS)
-&gt; Show UpregPredicateFailure
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [UpregPredicateFailure] -&gt; ShowS
$cshowList :: [UpregPredicateFailure] -&gt; ShowS
show :: UpregPredicateFailure -&gt; String
$cshow :: UpregPredicateFailure -&gt; String
showsPrec :: Int -&gt; UpregPredicateFailure -&gt; ShowS
$cshowsPrec :: Int -&gt; UpregPredicateFailure -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="%24cDoesNotVerify"><span id="%24cNotGenesisDelegate"><span id="%24cUPVFailure"><span id="%24tUpregPredicateFailure"><span id="local-6989586621679556310"><span id="local-6989586621679556312"><span id="local-6989586621679556314"><span id="local-6989586621679556316"><span id="local-6989586621679556318"><span id="local-6989586621679556320"><span id="local-6989586621679556322"><span id="local-6989586621679556324"><span id="local-6989586621679556326"><span id="local-6989586621679556328"><span id="local-6989586621679556330"><span id="local-6989586621679556332"><span id="local-6989586621679556334"><span id="local-6989586621679556336"><span class="annot"><span class="annottext">Typeable UpregPredicateFailure
DataType
Constr
Typeable UpregPredicateFailure
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g)
    -&gt; UpregPredicateFailure
    -&gt; c UpregPredicateFailure)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UpregPredicateFailure)
-&gt; (UpregPredicateFailure -&gt; Constr)
-&gt; (UpregPredicateFailure -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UpregPredicateFailure))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e))
    -&gt; Maybe (c UpregPredicateFailure))
-&gt; ((forall b. Data b =&gt; b -&gt; b)
    -&gt; UpregPredicateFailure -&gt; UpregPredicateFailure)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r
    -&gt; (forall d. Data d =&gt; d -&gt; r')
    -&gt; UpregPredicateFailure
    -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r
    -&gt; (forall d. Data d =&gt; d -&gt; r')
    -&gt; UpregPredicateFailure
    -&gt; r)
-&gt; (forall u.
    (forall d. Data d =&gt; d -&gt; u) -&gt; UpregPredicateFailure -&gt; [u])
-&gt; (forall u.
    Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UpregPredicateFailure -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; UpregPredicateFailure -&gt; m UpregPredicateFailure)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; UpregPredicateFailure -&gt; m UpregPredicateFailure)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; UpregPredicateFailure -&gt; m UpregPredicateFailure)
-&gt; Data UpregPredicateFailure
UpregPredicateFailure -&gt; DataType
UpregPredicateFailure -&gt; Constr
(forall b. Data b =&gt; b -&gt; b)
-&gt; UpregPredicateFailure -&gt; UpregPredicateFailure
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; UpregPredicateFailure
-&gt; c UpregPredicateFailure
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UpregPredicateFailure
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u.
Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UpregPredicateFailure -&gt; u
forall u.
(forall d. Data d =&gt; d -&gt; u) -&gt; UpregPredicateFailure -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UpregPredicateFailure -&gt; r
forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UpregPredicateFailure -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; UpregPredicateFailure -&gt; m UpregPredicateFailure
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; UpregPredicateFailure -&gt; m UpregPredicateFailure
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UpregPredicateFailure
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; UpregPredicateFailure
-&gt; c UpregPredicateFailure
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UpregPredicateFailure)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c UpregPredicateFailure)
$cDoesNotVerify :: Constr
$cNotGenesisDelegate :: Constr
$cUPVFailure :: Constr
$tUpregPredicateFailure :: DataType
gmapMo :: (forall d. Data d =&gt; d -&gt; m d)
-&gt; UpregPredicateFailure -&gt; m UpregPredicateFailure
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; UpregPredicateFailure -&gt; m UpregPredicateFailure
gmapMp :: (forall d. Data d =&gt; d -&gt; m d)
-&gt; UpregPredicateFailure -&gt; m UpregPredicateFailure
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; UpregPredicateFailure -&gt; m UpregPredicateFailure
gmapM :: (forall d. Data d =&gt; d -&gt; m d)
-&gt; UpregPredicateFailure -&gt; m UpregPredicateFailure
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; UpregPredicateFailure -&gt; m UpregPredicateFailure
gmapQi :: Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UpregPredicateFailure -&gt; u
$cgmapQi :: forall u.
Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UpregPredicateFailure -&gt; u
gmapQ :: (forall d. Data d =&gt; d -&gt; u) -&gt; UpregPredicateFailure -&gt; [u]
$cgmapQ :: forall u.
(forall d. Data d =&gt; d -&gt; u) -&gt; UpregPredicateFailure -&gt; [u]
gmapQr :: (r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UpregPredicateFailure -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UpregPredicateFailure -&gt; r
gmapQl :: (r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UpregPredicateFailure -&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UpregPredicateFailure -&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b)
-&gt; UpregPredicateFailure -&gt; UpregPredicateFailure
$cgmapT :: (forall b. Data b =&gt; b -&gt; b)
-&gt; UpregPredicateFailure -&gt; UpregPredicateFailure
dataCast2 :: (forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c UpregPredicateFailure)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c UpregPredicateFailure)
dataCast1 :: (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UpregPredicateFailure)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UpregPredicateFailure)
dataTypeOf :: UpregPredicateFailure -&gt; DataType
$cdataTypeOf :: UpregPredicateFailure -&gt; DataType
toConstr :: UpregPredicateFailure -&gt; Constr
$ctoConstr :: UpregPredicateFailure -&gt; Constr
gunfold :: (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UpregPredicateFailure
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UpregPredicateFailure
gfoldl :: (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; UpregPredicateFailure
-&gt; c UpregPredicateFailure
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; UpregPredicateFailure
-&gt; c UpregPredicateFailure
$cp1Data :: Typeable UpregPredicateFailure
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. UpregPredicateFailure -&gt; Rep UpregPredicateFailure x)
-&gt; (forall x. Rep UpregPredicateFailure x -&gt; UpregPredicateFailure)
-&gt; Generic UpregPredicateFailure
forall x. Rep UpregPredicateFailure x -&gt; UpregPredicateFailure
forall x. UpregPredicateFailure -&gt; Rep UpregPredicateFailure x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep UpregPredicateFailure x -&gt; UpregPredicateFailure
$cfrom :: forall x. UpregPredicateFailure -&gt; Rep UpregPredicateFailure x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679556298"><span id="local-6989586621679556300"><span id="local-6989586621679556302"><span class="annot"><span class="annottext">Context -&gt; UpregPredicateFailure -&gt; IO (Maybe ThunkInfo)
Proxy UpregPredicateFailure -&gt; String
(Context -&gt; UpregPredicateFailure -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; UpregPredicateFailure -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy UpregPredicateFailure -&gt; String)
-&gt; NoThunks UpregPredicateFailure
forall a.
(Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy a -&gt; String)
-&gt; NoThunks a
showTypeOf :: Proxy UpregPredicateFailure -&gt; String
$cshowTypeOf :: Proxy UpregPredicateFailure -&gt; String
wNoThunks :: Context -&gt; UpregPredicateFailure -&gt; IO (Maybe ThunkInfo)
$cwNoThunks :: Context -&gt; UpregPredicateFailure -&gt; IO (Maybe ThunkInfo)
noThunks :: Context -&gt; UpregPredicateFailure -&gt; IO (Maybe ThunkInfo)
$cnoThunks :: Context -&gt; UpregPredicateFailure -&gt; IO (Maybe ThunkInfo)
</span><a href="#local-6989586621679556298"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">NoThunks</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-511"></span><span>
</span><span id="line-512"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679556288"><span id="local-6989586621679556290"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">STS</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPREG"><span class="hs-identifier hs-type">UPREG</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-513"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Environment"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">Environment</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPREG"><span class="hs-identifier hs-type">UPREG</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-514"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ProtVer"><span class="hs-identifier hs-type">ProtVer</span></a></span><span>
</span><span id="line-515"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#PParams"><span class="hs-identifier hs-type">PParams</span></a></span><span>
</span><span id="line-516"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ApName"><span class="hs-identifier hs-type">ApName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ApVer"><span class="hs-identifier hs-type">ApVer</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Slot"><span class="hs-identifier hs-type">Core.Slot</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#Metadata"><span class="hs-identifier hs-type">Metadata</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-517"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bimap</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">Core.VKeyGenesis</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier hs-type">Core.VKey</span></a></span><span>
</span><span id="line-518"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-519"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="State"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">State</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPREG"><span class="hs-identifier hs-type">UPREG</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-520"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpId"><span class="hs-identifier hs-type">UpId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ProtVer"><span class="hs-identifier hs-type">ProtVer</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#PParams"><span class="hs-identifier hs-type">PParams</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-521"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpId"><span class="hs-identifier hs-type">UpId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ApName"><span class="hs-identifier hs-type">ApName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ApVer"><span class="hs-identifier hs-type">ApVer</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#Metadata"><span class="hs-identifier hs-type">Metadata</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-522"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-523"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Signal"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">Signal</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPREG"><span class="hs-identifier hs-type">UPREG</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UProp"><span class="hs-identifier hs-type">UProp</span></a></span><span>
</span><span id="line-524"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="PredicateFailure"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">PredicateFailure</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPREG"><span class="hs-identifier hs-type">UPREG</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpregPredicateFailure"><span class="hs-identifier hs-type">UpregPredicateFailure</span></a></span><span>
</span><span id="line-525"></span><span>
</span><span id="line-526"></span><span>  </span><span id="local-6989586621679556287"><span class="annot"><span class="annottext">initialRules :: [InitialRule UPREG]
</span><a href="#local-6989586621679556287"><span class="hs-identifier hs-var hs-var hs-var hs-var">initialRules</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-527"></span><span>  </span><span id="local-6989586621679556286"><span class="annot"><span class="annottext">transitionRules :: [TransitionRule UPREG]
</span><a href="#local-6989586621679556286"><span class="hs-identifier hs-var hs-var hs-var hs-var">transitionRules</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-528"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-529"></span><span>        </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">TRC</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556285"><span class="annot"><a href="#local-6989586621679556285"><span class="hs-identifier hs-var">pv</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679556284"><span class="annot"><a href="#local-6989586621679556284"><span class="hs-identifier hs-var">pps</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679556283"><span class="annot"><a href="#local-6989586621679556283"><span class="hs-identifier hs-var">avs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679556282"><span class="annot"><a href="#local-6989586621679556282"><span class="hs-identifier hs-var">dms</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-530"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556281"><span class="annot"><a href="#local-6989586621679556281"><span class="hs-identifier hs-var">rpus</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679556280"><span class="annot"><a href="#local-6989586621679556280"><span class="hs-identifier hs-var">raus</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-531"></span><span>            </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679556279"><span class="annot"><span class="annottext">Signal UPREG
</span><a href="#local-6989586621679556279"><span class="hs-identifier hs-var">up</span></a></span></span><span>
</span><span id="line-532"></span><span>            </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">F (Clause UPREG 'Transition) (TRC UPREG)
forall sts (rtype :: RuleType).
Rule sts rtype (RuleContext rtype sts)
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">judgmentContext</span></a></span><span>
</span><span id="line-533"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621679556278"><span class="annot"><span class="annottext">Map UpId (ProtVer, PParams)
</span><a href="#local-6989586621679556278"><span class="hs-identifier hs-var">rpus'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679556277"><span class="annot"><span class="annottext">Map UpId (ApName, ApVer, Metadata)
</span><a href="#local-6989586621679556277"><span class="hs-identifier hs-var">raus'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall sub super (rtype :: RuleType).
Embed sub super =&gt;
RuleContext rtype sub -&gt; Rule super rtype (State sub)
forall super (rtype :: RuleType).
Embed UPV super =&gt;
RuleContext rtype UPV -&gt; Rule super rtype (State UPV)
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">trans</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPV"><span class="hs-identifier hs-type">UPV</span></a></span><span> </span><span class="annot"><span class="annottext">(RuleContext 'Transition UPV -&gt; Rule UPREG 'Transition (State UPV))
-&gt; RuleContext 'Transition UPV
-&gt; Rule UPREG 'Transition (State UPV)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Environment UPV, State UPV, Signal UPV) -&gt; TRC UPV
forall sts. (Environment sts, State sts, Signal sts) -&gt; TRC sts
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">TRC</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">ProtVer
</span><a href="#local-6989586621679556285"><span class="hs-identifier hs-var">pv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PParams
</span><a href="#local-6989586621679556284"><span class="hs-identifier hs-var">pps</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map ApName (ApVer, Slot, Metadata)
</span><a href="#local-6989586621679556283"><span class="hs-identifier hs-var">avs</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map UpId (ProtVer, PParams)
</span><a href="#local-6989586621679556281"><span class="hs-identifier hs-var">rpus</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map UpId (ApName, ApVer, Metadata)
</span><a href="#local-6989586621679556280"><span class="hs-identifier hs-var">raus</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Signal UPREG
Signal UPV
</span><a href="#local-6989586621679556279"><span class="hs-identifier hs-var">up</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-534"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679556276"><span class="annot"><span class="annottext">vk :: VKey
</span><a href="#local-6989586621679556276"><span class="hs-identifier hs-var hs-var">vk</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Signal UPREG
UProp
</span><a href="#local-6989586621679556279"><span class="hs-identifier hs-var">up</span></a></span><span> </span><span class="annot"><span class="annottext">UProp -&gt; Getting VKey UProp VKey -&gt; VKey
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting VKey UProp VKey
Lens' UProp VKey
</span><a href="Byron.Spec.Ledger.Update.html#upIssuer"><span class="hs-identifier hs-var">upIssuer</span></a></span><span>
</span><span id="line-535"></span><span>        </span><span class="annot"><span class="annottext">Bimap VKeyGenesis VKey
</span><a href="#local-6989586621679556282"><span class="hs-identifier hs-var">dms</span></a></span><span> </span><span class="annot"><span class="annottext">Bimap VKeyGenesis VKey
-&gt; Set (Range (Bimap VKeyGenesis VKey)) -&gt; Bimap VKeyGenesis VKey
forall m. (Relation m, Ord (Range m)) =&gt; m -&gt; Set (Range m) -&gt; m
</span><a href="Byron.Spec.Ledger.Core.html#%25B7"><span class="hs-operator hs-var">&#9655;</span></a></span><span> </span><span class="annot"><span class="annottext">VKey -&gt; Set VKey
forall a. a -&gt; Set a
</span><span class="hs-identifier hs-var">Set.singleton</span></span><span> </span><span class="annot"><span class="annottext">VKey
</span><a href="#local-6989586621679556276"><span class="hs-identifier hs-var">vk</span></a></span><span> </span><span class="annot"><span class="annottext">Bimap VKeyGenesis VKey -&gt; Bimap VKeyGenesis VKey -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">Bimap VKeyGenesis VKey
forall a b. Bimap a b
</span><span class="hs-identifier hs-var">empty</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; PredicateFailure UPREG -&gt; Rule UPREG 'Transition ()
forall sts (ctx :: RuleType).
Bool -&gt; PredicateFailure sts -&gt; Rule sts ctx ()
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-operator hs-var">?!</span></a></span><span> </span><span class="annot"><span class="annottext">PredicateFailure UPREG
UpregPredicateFailure
</span><a href="Byron.Spec.Ledger.Update.html#NotGenesisDelegate"><span class="hs-identifier hs-var">NotGenesisDelegate</span></a></span><span>
</span><span id="line-536"></span><span>        </span><span class="annot"><span class="annottext">VKey -&gt; UpSD -&gt; Sig UpSD -&gt; Bool
forall a. Eq a =&gt; VKey -&gt; a -&gt; Sig a -&gt; Bool
</span><a href="Byron.Spec.Ledger.Core.html#verify"><span class="hs-identifier hs-var">Core.verify</span></a></span><span> </span><span class="annot"><span class="annottext">VKey
</span><a href="#local-6989586621679556276"><span class="hs-identifier hs-var">vk</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Signal UPREG
UProp
</span><a href="#local-6989586621679556279"><span class="hs-identifier hs-var">up</span></a></span><span> </span><span class="annot"><span class="annottext">UProp -&gt; Getting UpSD UProp UpSD -&gt; UpSD
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting UpSD UProp UpSD
Lens UProp UProp UpSD UpSD
</span><a href="Byron.Spec.Ledger.Update.html#upSigData"><span class="hs-identifier hs-var">upSigData</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Signal UPREG
UProp
</span><a href="#local-6989586621679556279"><span class="hs-identifier hs-var">up</span></a></span><span> </span><span class="annot"><span class="annottext">UProp -&gt; Getting (Sig UpSD) UProp (Sig UpSD) -&gt; Sig UpSD
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting (Sig UpSD) UProp (Sig UpSD)
Lens' UProp (Sig UpSD)
</span><a href="Byron.Spec.Ledger.Update.html#upSig"><span class="hs-identifier hs-var">upSig</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; PredicateFailure UPREG -&gt; Rule UPREG 'Transition ()
forall sts (ctx :: RuleType).
Bool -&gt; PredicateFailure sts -&gt; Rule sts ctx ()
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-operator hs-var">?!</span></a></span><span> </span><span class="annot"><span class="annottext">PredicateFailure UPREG
UpregPredicateFailure
</span><a href="Byron.Spec.Ledger.Update.html#DoesNotVerify"><span class="hs-identifier hs-var">DoesNotVerify</span></a></span><span>
</span><span id="line-537"></span><span>        </span><span class="annot"><span class="annottext">(Map UpId (ProtVer, PParams), Map UpId (ApName, ApVer, Metadata))
-&gt; F (Clause UPREG 'Transition)
     (Map UpId (ProtVer, PParams), Map UpId (ApName, ApVer, Metadata))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">((Map UpId (ProtVer, PParams), Map UpId (ApName, ApVer, Metadata))
 -&gt; F (Clause UPREG 'Transition)
      (Map UpId (ProtVer, PParams), Map UpId (ApName, ApVer, Metadata)))
-&gt; (Map UpId (ProtVer, PParams),
    Map UpId (ApName, ApVer, Metadata))
-&gt; F (Clause UPREG 'Transition)
     (Map UpId (ProtVer, PParams), Map UpId (ApName, ApVer, Metadata))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map UpId (ProtVer, PParams)
</span><a href="#local-6989586621679556278"><span class="hs-identifier hs-var">rpus'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map UpId (ApName, ApVer, Metadata)
</span><a href="#local-6989586621679556277"><span class="hs-identifier hs-var">raus'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-538"></span><span>
</span><span id="line-539"></span><span>
</span><span id="line-540"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-541"></span><span>
</span><span id="line-542"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">Embed</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPV"><span class="hs-identifier hs-type">UPV</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPREG"><span class="hs-identifier hs-type">UPREG</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-543"></span><span>  </span><span id="local-6989586621679556270"><span class="annot"><span class="annottext">wrapFailed :: PredicateFailure UPV -&gt; PredicateFailure UPREG
</span><a href="#local-6989586621679556270"><span class="hs-identifier hs-var hs-var hs-var hs-var">wrapFailed</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PredicateFailure UPV -&gt; PredicateFailure UPREG
PredicateFailure UPV -&gt; UpregPredicateFailure
</span><a href="Byron.Spec.Ledger.Update.html#UPVFailure"><span class="hs-identifier hs-var">UPVFailure</span></a></span><span>
</span><span id="line-544"></span><span>
</span><span id="line-545"></span><span class="hs-comment">------------------------------------------------------------------------</span><span>
</span><span id="line-546"></span><span class="hs-comment">-- Update voting</span><span>
</span><span id="line-547"></span><span class="hs-comment">------------------------------------------------------------------------</span><span>
</span><span id="line-548"></span><span>
</span><span id="line-549"></span><span id="local-6989586621679556268"><span id="local-6989586621679556269"></span></span><span class="hs-keyword">data</span><span> </span><span id="Vote"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#Vote"><span class="hs-identifier hs-var">Vote</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Vote"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#Vote"><span class="hs-identifier hs-var">Vote</span></a></span></span><span>
</span><span id="line-550"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="_vCaster"><span class="annot"><span class="annottext">Vote -&gt; VKey
</span><a href="Byron.Spec.Ledger.Update.html#_vCaster"><span class="hs-identifier hs-var hs-var">_vCaster</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier hs-type">Core.VKey</span></a></span><span>
</span><span id="line-551"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="_vPropId"><span class="annot"><span class="annottext">Vote -&gt; UpId
</span><a href="Byron.Spec.Ledger.Update.html#_vPropId"><span class="hs-identifier hs-var hs-var">_vPropId</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpId"><span class="hs-identifier hs-type">UpId</span></a></span><span>
</span><span id="line-552"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="_vSig"><span class="annot"><span class="annottext">Vote -&gt; Sig UpId
</span><a href="Byron.Spec.Ledger.Update.html#_vSig"><span class="hs-identifier hs-var hs-var">_vSig</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Sig"><span class="hs-identifier hs-type">Core.Sig</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpId"><span class="hs-identifier hs-type">UpId</span></a></span><span>
</span><span id="line-553"></span><span>  </span><span class="hs-special">}</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556260"><span id="local-6989586621679556262"><span class="annot"><span class="annottext">Vote -&gt; Vote -&gt; Bool
(Vote -&gt; Vote -&gt; Bool) -&gt; (Vote -&gt; Vote -&gt; Bool) -&gt; Eq Vote
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: Vote -&gt; Vote -&gt; Bool
$c/= :: Vote -&gt; Vote -&gt; Bool
== :: Vote -&gt; Vote -&gt; Bool
$c== :: Vote -&gt; Vote -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. Vote -&gt; Rep Vote x)
-&gt; (forall x. Rep Vote x -&gt; Vote) -&gt; Generic Vote
forall x. Rep Vote x -&gt; Vote
forall x. Vote -&gt; Rep Vote x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep Vote x -&gt; Vote
$cfrom :: forall x. Vote -&gt; Rep Vote x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679556252"><span id="local-6989586621679556254"><span id="local-6989586621679556256"><span class="annot"><span class="annottext">Int -&gt; Vote -&gt; ShowS
[Vote] -&gt; ShowS
Vote -&gt; String
(Int -&gt; Vote -&gt; ShowS)
-&gt; (Vote -&gt; String) -&gt; ([Vote] -&gt; ShowS) -&gt; Show Vote
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [Vote] -&gt; ShowS
$cshowList :: [Vote] -&gt; ShowS
show :: Vote -&gt; String
$cshow :: Vote -&gt; String
showsPrec :: Int -&gt; Vote -&gt; ShowS
$cshowsPrec :: Int -&gt; Vote -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679556248"><span id="local-6989586621679556250"><span class="annot"><span class="annottext">Int -&gt; Vote -&gt; Int
Vote -&gt; Int
(Int -&gt; Vote -&gt; Int) -&gt; (Vote -&gt; Int) -&gt; Hashable Vote
forall a. (Int -&gt; a -&gt; Int) -&gt; (a -&gt; Int) -&gt; Hashable a
hash :: Vote -&gt; Int
$chash :: Vote -&gt; Int
hashWithSalt :: Int -&gt; Vote -&gt; Int
$chashWithSalt :: Int -&gt; Vote -&gt; Int
</span><a href="#local-6989586621679556248"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Hashable</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="%24cVote"><span id="%24tVote"><span id="local-6989586621679556219"><span id="local-6989586621679556221"><span id="local-6989586621679556223"><span id="local-6989586621679556225"><span id="local-6989586621679556227"><span id="local-6989586621679556229"><span id="local-6989586621679556231"><span id="local-6989586621679556233"><span id="local-6989586621679556235"><span id="local-6989586621679556237"><span id="local-6989586621679556239"><span id="local-6989586621679556241"><span id="local-6989586621679556243"><span id="local-6989586621679556245"><span class="annot"><span class="annottext">Typeable Vote
DataType
Constr
Typeable Vote
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; Vote -&gt; c Vote)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c Vote)
-&gt; (Vote -&gt; Constr)
-&gt; (Vote -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c Vote))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c Vote))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; Vote -&gt; Vote)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Vote -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Vote -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; Vote -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; Vote -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; Vote -&gt; m Vote)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; Vote -&gt; m Vote)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; Vote -&gt; m Vote)
-&gt; Data Vote
Vote -&gt; DataType
Vote -&gt; Constr
(forall b. Data b =&gt; b -&gt; b) -&gt; Vote -&gt; Vote
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; Vote -&gt; c Vote
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c Vote
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; Vote -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; Vote -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Vote -&gt; r
forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Vote -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; Vote -&gt; m Vote
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; Vote -&gt; m Vote
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c Vote
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; Vote -&gt; c Vote
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c Vote)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c Vote)
$cVote :: Constr
$tVote :: DataType
gmapMo :: (forall d. Data d =&gt; d -&gt; m d) -&gt; Vote -&gt; m Vote
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; Vote -&gt; m Vote
gmapMp :: (forall d. Data d =&gt; d -&gt; m d) -&gt; Vote -&gt; m Vote
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; Vote -&gt; m Vote
gmapM :: (forall d. Data d =&gt; d -&gt; m d) -&gt; Vote -&gt; m Vote
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; Vote -&gt; m Vote
gmapQi :: Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; Vote -&gt; u
$cgmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; Vote -&gt; u
gmapQ :: (forall d. Data d =&gt; d -&gt; u) -&gt; Vote -&gt; [u]
$cgmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; Vote -&gt; [u]
gmapQr :: (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Vote -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Vote -&gt; r
gmapQl :: (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Vote -&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Vote -&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; Vote -&gt; Vote
$cgmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; Vote -&gt; Vote
dataCast2 :: (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c Vote)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c Vote)
dataCast1 :: (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c Vote)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c Vote)
dataTypeOf :: Vote -&gt; DataType
$cdataTypeOf :: Vote -&gt; DataType
toConstr :: Vote -&gt; Constr
$ctoConstr :: Vote -&gt; Constr
gunfold :: (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c Vote
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c Vote
gfoldl :: (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; Vote -&gt; c Vote
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; Vote -&gt; c Vote
$cp1Data :: Typeable Vote
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679556211"><span id="local-6989586621679556213"><span id="local-6989586621679556215"><span class="annot"><span class="annottext">Context -&gt; Vote -&gt; IO (Maybe ThunkInfo)
Proxy Vote -&gt; String
(Context -&gt; Vote -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; Vote -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy Vote -&gt; String)
-&gt; NoThunks Vote
forall a.
(Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy a -&gt; String)
-&gt; NoThunks a
showTypeOf :: Proxy Vote -&gt; String
$cshowTypeOf :: Proxy Vote -&gt; String
wNoThunks :: Context -&gt; Vote -&gt; IO (Maybe ThunkInfo)
$cwNoThunks :: Context -&gt; Vote -&gt; IO (Maybe ThunkInfo)
noThunks :: Context -&gt; Vote -&gt; IO (Maybe ThunkInfo)
$cnoThunks :: Context -&gt; Vote -&gt; IO (Maybe ThunkInfo)
</span><a href="#local-6989586621679556211"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">NoThunks</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-554"></span><span>
</span><span id="line-555"></span><span>
</span><span id="line-556"></span><span id="vSig"><span id="vPropId"><span id="vCaster"><span class="hs-identifier">makeLenses</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">Vote</span></span></span></span><span>
</span><span id="line-557"></span><span>
</span><span id="line-558"></span><span>
</span><span id="line-559"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679556206"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">HasTypeReps</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#Vote"><span class="hs-identifier hs-type">Vote</span></a></span></span><span>
</span><span id="line-560"></span><span>
</span><span id="line-561"></span><span>
</span><span id="line-562"></span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#mkVote"><span class="hs-identifier hs-type">mkVote</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier hs-type">Core.VKey</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpId"><span class="hs-identifier hs-type">UpId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#Vote"><span class="hs-identifier hs-type">Vote</span></a></span><span>
</span><span id="line-563"></span><span id="mkVote"><span class="annot"><span class="annottext">mkVote :: VKey -&gt; UpId -&gt; Vote
</span><a href="Byron.Spec.Ledger.Update.html#mkVote"><span class="hs-identifier hs-var hs-var">mkVote</span></a></span></span><span> </span><span id="local-6989586621679556204"><span class="annot"><span class="annottext">VKey
</span><a href="#local-6989586621679556204"><span class="hs-identifier hs-var">caster</span></a></span></span><span> </span><span id="local-6989586621679556203"><span class="annot"><span class="annottext">UpId
</span><a href="#local-6989586621679556203"><span class="hs-identifier hs-var">proposalId</span></a></span></span><span>
</span><span id="line-564"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Vote :: VKey -&gt; UpId -&gt; Sig UpId -&gt; Vote
</span><a href="Byron.Spec.Ledger.Update.html#Vote"><span class="hs-identifier hs-type">Vote</span></a></span><span>
</span><span id="line-565"></span><span>  </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">_vCaster :: VKey
</span><a href="Byron.Spec.Ledger.Update.html#_vCaster"><span class="hs-identifier hs-var">_vCaster</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">VKey
</span><a href="#local-6989586621679556204"><span class="hs-identifier hs-var">caster</span></a></span><span>
</span><span id="line-566"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_vPropId :: UpId
</span><a href="Byron.Spec.Ledger.Update.html#_vPropId"><span class="hs-identifier hs-var">_vPropId</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UpId
</span><a href="#local-6989586621679556203"><span class="hs-identifier hs-var">proposalId</span></a></span><span>
</span><span id="line-567"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_vSig :: Sig UpId
</span><a href="Byron.Spec.Ledger.Update.html#_vSig"><span class="hs-identifier hs-var">_vSig</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SKey -&gt; UpId -&gt; Sig UpId
forall a. SKey -&gt; a -&gt; Sig a
</span><a href="Byron.Spec.Ledger.Core.html#sign"><span class="hs-identifier hs-var">Core.sign</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VKey -&gt; SKey
</span><a href="Byron.Spec.Ledger.Core.Omniscient.html#skey"><span class="hs-identifier hs-var">skey</span></a></span><span> </span><span class="annot"><span class="annottext">VKey
</span><a href="#local-6989586621679556204"><span class="hs-identifier hs-var">caster</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">UpId
</span><a href="#local-6989586621679556203"><span class="hs-identifier hs-var">proposalId</span></a></span><span>
</span><span id="line-568"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-569"></span><span>
</span><span id="line-570"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#HasHash"><span class="hs-identifier hs-type">HasHash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UProp"><span class="hs-identifier hs-type">Byron.Spec.Ledger.Update.UProp</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#Vote"><span class="hs-identifier hs-type">Byron.Spec.Ledger.Update.Vote</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-571"></span><span>  </span><span id="local-6989586621679556200"><span class="annot"><span class="annottext">hash :: (Maybe UProp, [Vote]) -&gt; Hash
</span><a href="#local-6989586621679556200"><span class="hs-identifier hs-var hs-var hs-var hs-var">hash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Int -&gt; Hash
</span><a href="Byron.Spec.Ledger.Core.html#Hash"><span class="hs-identifier hs-var">Core.Hash</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe Int -&gt; Hash)
-&gt; ((Maybe UProp, [Vote]) -&gt; Maybe Int)
-&gt; (Maybe UProp, [Vote])
-&gt; Hash
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Maybe Int
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Maybe Int)
-&gt; ((Maybe UProp, [Vote]) -&gt; Int)
-&gt; (Maybe UProp, [Vote])
-&gt; Maybe Int
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Maybe UProp, [Vote]) -&gt; Int
forall a. Hashable a =&gt; a -&gt; Int
</span><span class="hs-identifier hs-var">H.hash</span></span><span>
</span><span id="line-572"></span><span>
</span><span id="line-573"></span><span>
</span><span id="line-574"></span><span id="local-6989586621679556196"><span id="local-6989586621679556197"></span></span><span class="hs-keyword">data</span><span> </span><span id="ADDVOTE"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ADDVOTE"><span class="hs-identifier hs-var">ADDVOTE</span></a></span></span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(forall x. ADDVOTE -&gt; Rep ADDVOTE x)
-&gt; (forall x. Rep ADDVOTE x -&gt; ADDVOTE) -&gt; Generic ADDVOTE
forall x. Rep ADDVOTE x -&gt; ADDVOTE
forall x. ADDVOTE -&gt; Rep ADDVOTE x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep ADDVOTE x -&gt; ADDVOTE
$cfrom :: forall x. ADDVOTE -&gt; Rep ADDVOTE x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">,</span><span> </span><span id="%24tADDVOTE"><span id="local-6989586621679556165"><span id="local-6989586621679556167"><span id="local-6989586621679556169"><span id="local-6989586621679556171"><span id="local-6989586621679556173"><span id="local-6989586621679556175"><span id="local-6989586621679556177"><span id="local-6989586621679556179"><span id="local-6989586621679556181"><span id="local-6989586621679556183"><span id="local-6989586621679556185"><span id="local-6989586621679556187"><span id="local-6989586621679556189"><span id="local-6989586621679556191"><span class="annot"><span class="annottext">Typeable ADDVOTE
DataType
Typeable ADDVOTE
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; ADDVOTE -&gt; c ADDVOTE)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c ADDVOTE)
-&gt; (ADDVOTE -&gt; Constr)
-&gt; (ADDVOTE -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c ADDVOTE))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c ADDVOTE))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; ADDVOTE -&gt; ADDVOTE)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ADDVOTE -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ADDVOTE -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; ADDVOTE -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; ADDVOTE -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; ADDVOTE -&gt; m ADDVOTE)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; ADDVOTE -&gt; m ADDVOTE)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; ADDVOTE -&gt; m ADDVOTE)
-&gt; Data ADDVOTE
ADDVOTE -&gt; DataType
ADDVOTE -&gt; Constr
(forall b. Data b =&gt; b -&gt; b) -&gt; ADDVOTE -&gt; ADDVOTE
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; ADDVOTE -&gt; c ADDVOTE
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c ADDVOTE
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; ADDVOTE -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; ADDVOTE -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ADDVOTE -&gt; r
forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ADDVOTE -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ADDVOTE -&gt; m ADDVOTE
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ADDVOTE -&gt; m ADDVOTE
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c ADDVOTE
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; ADDVOTE -&gt; c ADDVOTE
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c ADDVOTE)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c ADDVOTE)
$tADDVOTE :: DataType
gmapMo :: (forall d. Data d =&gt; d -&gt; m d) -&gt; ADDVOTE -&gt; m ADDVOTE
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ADDVOTE -&gt; m ADDVOTE
gmapMp :: (forall d. Data d =&gt; d -&gt; m d) -&gt; ADDVOTE -&gt; m ADDVOTE
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ADDVOTE -&gt; m ADDVOTE
gmapM :: (forall d. Data d =&gt; d -&gt; m d) -&gt; ADDVOTE -&gt; m ADDVOTE
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ADDVOTE -&gt; m ADDVOTE
gmapQi :: Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; ADDVOTE -&gt; u
$cgmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; ADDVOTE -&gt; u
gmapQ :: (forall d. Data d =&gt; d -&gt; u) -&gt; ADDVOTE -&gt; [u]
$cgmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; ADDVOTE -&gt; [u]
gmapQr :: (r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ADDVOTE -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ADDVOTE -&gt; r
gmapQl :: (r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ADDVOTE -&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ADDVOTE -&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; ADDVOTE -&gt; ADDVOTE
$cgmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; ADDVOTE -&gt; ADDVOTE
dataCast2 :: (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c ADDVOTE)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c ADDVOTE)
dataCast1 :: (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c ADDVOTE)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c ADDVOTE)
dataTypeOf :: ADDVOTE -&gt; DataType
$cdataTypeOf :: ADDVOTE -&gt; DataType
toConstr :: ADDVOTE -&gt; Constr
$ctoConstr :: ADDVOTE -&gt; Constr
gunfold :: (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c ADDVOTE
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c ADDVOTE
gfoldl :: (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; ADDVOTE -&gt; c ADDVOTE
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; ADDVOTE -&gt; c ADDVOTE
$cp1Data :: Typeable ADDVOTE
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">)</span><span>
</span><span id="line-575"></span><span>
</span><span id="line-576"></span><span class="hs-comment">-- | These `PredicateFailure`s are all throwable.</span><span>
</span><span id="line-577"></span><span id="local-6989586621679556162"><span id="local-6989586621679556163"></span></span><span class="hs-keyword">data</span><span> </span><span id="AddvotePredicateFailure"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#AddvotePredicateFailure"><span class="hs-identifier hs-var">AddvotePredicateFailure</span></a></span></span><span>
</span><span id="line-578"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="AVSigDoesNotVerify"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#AVSigDoesNotVerify"><span class="hs-identifier hs-var">AVSigDoesNotVerify</span></a></span></span><span>
</span><span id="line-579"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="NoUpdateProposal"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#NoUpdateProposal"><span class="hs-identifier hs-var">NoUpdateProposal</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpId"><span class="hs-identifier hs-type">UpId</span></a></span><span>
</span><span id="line-580"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="VoteByNonGenesisDelegate"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#VoteByNonGenesisDelegate"><span class="hs-identifier hs-var">VoteByNonGenesisDelegate</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier hs-type">VKey</span></a></span><span>
</span><span id="line-581"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="RepeatVoteByGenesisDelegate"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#RepeatVoteByGenesisDelegate"><span class="hs-identifier hs-var">RepeatVoteByGenesisDelegate</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier hs-type">VKey</span></a></span><span>
</span><span id="line-582"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556154"><span id="local-6989586621679556156"><span class="annot"><span class="annottext">AddvotePredicateFailure -&gt; AddvotePredicateFailure -&gt; Bool
(AddvotePredicateFailure -&gt; AddvotePredicateFailure -&gt; Bool)
-&gt; (AddvotePredicateFailure -&gt; AddvotePredicateFailure -&gt; Bool)
-&gt; Eq AddvotePredicateFailure
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: AddvotePredicateFailure -&gt; AddvotePredicateFailure -&gt; Bool
$c/= :: AddvotePredicateFailure -&gt; AddvotePredicateFailure -&gt; Bool
== :: AddvotePredicateFailure -&gt; AddvotePredicateFailure -&gt; Bool
$c== :: AddvotePredicateFailure -&gt; AddvotePredicateFailure -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679556148"><span id="local-6989586621679556150"><span id="local-6989586621679556152"><span class="annot"><span class="annottext">Int -&gt; AddvotePredicateFailure -&gt; ShowS
[AddvotePredicateFailure] -&gt; ShowS
AddvotePredicateFailure -&gt; String
(Int -&gt; AddvotePredicateFailure -&gt; ShowS)
-&gt; (AddvotePredicateFailure -&gt; String)
-&gt; ([AddvotePredicateFailure] -&gt; ShowS)
-&gt; Show AddvotePredicateFailure
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [AddvotePredicateFailure] -&gt; ShowS
$cshowList :: [AddvotePredicateFailure] -&gt; ShowS
show :: AddvotePredicateFailure -&gt; String
$cshow :: AddvotePredicateFailure -&gt; String
showsPrec :: Int -&gt; AddvotePredicateFailure -&gt; ShowS
$cshowsPrec :: Int -&gt; AddvotePredicateFailure -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="%24cRepeatVoteByGenesisDelegate"><span id="%24cVoteByNonGenesisDelegate"><span id="%24cNoUpdateProposal"><span id="%24cAVSigDoesNotVerify"><span id="%24tAddvotePredicateFailure"><span id="local-6989586621679556119"><span id="local-6989586621679556121"><span id="local-6989586621679556123"><span id="local-6989586621679556125"><span id="local-6989586621679556127"><span id="local-6989586621679556129"><span id="local-6989586621679556131"><span id="local-6989586621679556133"><span id="local-6989586621679556135"><span id="local-6989586621679556137"><span id="local-6989586621679556139"><span id="local-6989586621679556141"><span id="local-6989586621679556143"><span id="local-6989586621679556145"><span class="annot"><span class="annottext">Typeable AddvotePredicateFailure
DataType
Constr
Typeable AddvotePredicateFailure
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g)
    -&gt; AddvotePredicateFailure
    -&gt; c AddvotePredicateFailure)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c AddvotePredicateFailure)
-&gt; (AddvotePredicateFailure -&gt; Constr)
-&gt; (AddvotePredicateFailure -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c AddvotePredicateFailure))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e))
    -&gt; Maybe (c AddvotePredicateFailure))
-&gt; ((forall b. Data b =&gt; b -&gt; b)
    -&gt; AddvotePredicateFailure -&gt; AddvotePredicateFailure)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r
    -&gt; (forall d. Data d =&gt; d -&gt; r')
    -&gt; AddvotePredicateFailure
    -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r
    -&gt; (forall d. Data d =&gt; d -&gt; r')
    -&gt; AddvotePredicateFailure
    -&gt; r)
-&gt; (forall u.
    (forall d. Data d =&gt; d -&gt; u) -&gt; AddvotePredicateFailure -&gt; [u])
-&gt; (forall u.
    Int
    -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; AddvotePredicateFailure -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; AddvotePredicateFailure -&gt; m AddvotePredicateFailure)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; AddvotePredicateFailure -&gt; m AddvotePredicateFailure)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; AddvotePredicateFailure -&gt; m AddvotePredicateFailure)
-&gt; Data AddvotePredicateFailure
AddvotePredicateFailure -&gt; DataType
AddvotePredicateFailure -&gt; Constr
(forall b. Data b =&gt; b -&gt; b)
-&gt; AddvotePredicateFailure -&gt; AddvotePredicateFailure
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; AddvotePredicateFailure
-&gt; c AddvotePredicateFailure
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c AddvotePredicateFailure
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u.
Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; AddvotePredicateFailure -&gt; u
forall u.
(forall d. Data d =&gt; d -&gt; u) -&gt; AddvotePredicateFailure -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; AddvotePredicateFailure
-&gt; r
forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; AddvotePredicateFailure
-&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; AddvotePredicateFailure -&gt; m AddvotePredicateFailure
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; AddvotePredicateFailure -&gt; m AddvotePredicateFailure
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c AddvotePredicateFailure
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; AddvotePredicateFailure
-&gt; c AddvotePredicateFailure
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c AddvotePredicateFailure)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c AddvotePredicateFailure)
$cRepeatVoteByGenesisDelegate :: Constr
$cVoteByNonGenesisDelegate :: Constr
$cNoUpdateProposal :: Constr
$cAVSigDoesNotVerify :: Constr
$tAddvotePredicateFailure :: DataType
gmapMo :: (forall d. Data d =&gt; d -&gt; m d)
-&gt; AddvotePredicateFailure -&gt; m AddvotePredicateFailure
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; AddvotePredicateFailure -&gt; m AddvotePredicateFailure
gmapMp :: (forall d. Data d =&gt; d -&gt; m d)
-&gt; AddvotePredicateFailure -&gt; m AddvotePredicateFailure
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; AddvotePredicateFailure -&gt; m AddvotePredicateFailure
gmapM :: (forall d. Data d =&gt; d -&gt; m d)
-&gt; AddvotePredicateFailure -&gt; m AddvotePredicateFailure
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; AddvotePredicateFailure -&gt; m AddvotePredicateFailure
gmapQi :: Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; AddvotePredicateFailure -&gt; u
$cgmapQi :: forall u.
Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; AddvotePredicateFailure -&gt; u
gmapQ :: (forall d. Data d =&gt; d -&gt; u) -&gt; AddvotePredicateFailure -&gt; [u]
$cgmapQ :: forall u.
(forall d. Data d =&gt; d -&gt; u) -&gt; AddvotePredicateFailure -&gt; [u]
gmapQr :: (r' -&gt; r -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; AddvotePredicateFailure
-&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; AddvotePredicateFailure
-&gt; r
gmapQl :: (r -&gt; r' -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; AddvotePredicateFailure
-&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; AddvotePredicateFailure
-&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b)
-&gt; AddvotePredicateFailure -&gt; AddvotePredicateFailure
$cgmapT :: (forall b. Data b =&gt; b -&gt; b)
-&gt; AddvotePredicateFailure -&gt; AddvotePredicateFailure
dataCast2 :: (forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c AddvotePredicateFailure)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c AddvotePredicateFailure)
dataCast1 :: (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c AddvotePredicateFailure)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c AddvotePredicateFailure)
dataTypeOf :: AddvotePredicateFailure -&gt; DataType
$cdataTypeOf :: AddvotePredicateFailure -&gt; DataType
toConstr :: AddvotePredicateFailure -&gt; Constr
$ctoConstr :: AddvotePredicateFailure -&gt; Constr
gunfold :: (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c AddvotePredicateFailure
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c AddvotePredicateFailure
gfoldl :: (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; AddvotePredicateFailure
-&gt; c AddvotePredicateFailure
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; AddvotePredicateFailure
-&gt; c AddvotePredicateFailure
$cp1Data :: Typeable AddvotePredicateFailure
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x.
 AddvotePredicateFailure -&gt; Rep AddvotePredicateFailure x)
-&gt; (forall x.
    Rep AddvotePredicateFailure x -&gt; AddvotePredicateFailure)
-&gt; Generic AddvotePredicateFailure
forall x. Rep AddvotePredicateFailure x -&gt; AddvotePredicateFailure
forall x. AddvotePredicateFailure -&gt; Rep AddvotePredicateFailure x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep AddvotePredicateFailure x -&gt; AddvotePredicateFailure
$cfrom :: forall x. AddvotePredicateFailure -&gt; Rep AddvotePredicateFailure x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679556106"><span id="local-6989586621679556108"><span id="local-6989586621679556110"><span class="annot"><span class="annottext">Context -&gt; AddvotePredicateFailure -&gt; IO (Maybe ThunkInfo)
Proxy AddvotePredicateFailure -&gt; String
(Context -&gt; AddvotePredicateFailure -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; AddvotePredicateFailure -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy AddvotePredicateFailure -&gt; String)
-&gt; NoThunks AddvotePredicateFailure
forall a.
(Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy a -&gt; String)
-&gt; NoThunks a
showTypeOf :: Proxy AddvotePredicateFailure -&gt; String
$cshowTypeOf :: Proxy AddvotePredicateFailure -&gt; String
wNoThunks :: Context -&gt; AddvotePredicateFailure -&gt; IO (Maybe ThunkInfo)
$cwNoThunks :: Context -&gt; AddvotePredicateFailure -&gt; IO (Maybe ThunkInfo)
noThunks :: Context -&gt; AddvotePredicateFailure -&gt; IO (Maybe ThunkInfo)
$cnoThunks :: Context -&gt; AddvotePredicateFailure -&gt; IO (Maybe ThunkInfo)
</span><a href="#local-6989586621679556106"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">NoThunks</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-583"></span><span>
</span><span id="line-584"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679556096"><span id="local-6989586621679556098"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">STS</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ADDVOTE"><span class="hs-identifier hs-type">ADDVOTE</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-585"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Environment"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">Environment</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ADDVOTE"><span class="hs-identifier hs-type">ADDVOTE</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-586"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpId"><span class="hs-identifier hs-type">UpId</span></a></span><span>
</span><span id="line-587"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bimap</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">Core.VKeyGenesis</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier hs-type">Core.VKey</span></a></span><span>
</span><span id="line-588"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-589"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="State"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">State</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ADDVOTE"><span class="hs-identifier hs-type">ADDVOTE</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpId"><span class="hs-identifier hs-type">UpId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">Core.VKeyGenesis</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-590"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Signal"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">Signal</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ADDVOTE"><span class="hs-identifier hs-type">ADDVOTE</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#Vote"><span class="hs-identifier hs-type">Vote</span></a></span><span>
</span><span id="line-591"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="PredicateFailure"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">PredicateFailure</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ADDVOTE"><span class="hs-identifier hs-type">ADDVOTE</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#AddvotePredicateFailure"><span class="hs-identifier hs-type">AddvotePredicateFailure</span></a></span><span>
</span><span id="line-592"></span><span>
</span><span id="line-593"></span><span>  </span><span id="local-6989586621679556095"><span class="annot"><span class="annottext">initialRules :: [InitialRule ADDVOTE]
</span><a href="#local-6989586621679556095"><span class="hs-identifier hs-var hs-var hs-var hs-var">initialRules</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-594"></span><span>  </span><span id="local-6989586621679556094"><span class="annot"><span class="annottext">transitionRules :: [TransitionRule ADDVOTE]
</span><a href="#local-6989586621679556094"><span class="hs-identifier hs-var hs-var hs-var hs-var">transitionRules</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-595"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-596"></span><span>        </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">TRC</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556093"><span class="annot"><a href="#local-6989586621679556093"><span class="hs-identifier hs-var">rups</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679556092"><span class="annot"><a href="#local-6989586621679556092"><span class="hs-identifier hs-var">dms</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-597"></span><span>            </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679556091"><span class="annot"><span class="annottext">State ADDVOTE
</span><a href="#local-6989586621679556091"><span class="hs-identifier hs-var">vts</span></a></span></span><span>
</span><span id="line-598"></span><span>            </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679556090"><span class="annot"><span class="annottext">Signal ADDVOTE
</span><a href="#local-6989586621679556090"><span class="hs-identifier hs-var">vote</span></a></span></span><span>
</span><span id="line-599"></span><span>            </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">F (Clause ADDVOTE 'Transition) (TRC ADDVOTE)
forall sts (rtype :: RuleType).
Rule sts rtype (RuleContext rtype sts)
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">judgmentContext</span></a></span><span>
</span><span id="line-600"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679556089"><span class="annot"><span class="annottext">pid :: UpId
</span><a href="#local-6989586621679556089"><span class="hs-identifier hs-var hs-var">pid</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Signal ADDVOTE
Vote
</span><a href="#local-6989586621679556090"><span class="hs-identifier hs-var">vote</span></a></span><span> </span><span class="annot"><span class="annottext">Vote -&gt; Getting UpId Vote UpId -&gt; UpId
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting UpId Vote UpId
Lens' Vote UpId
</span><a href="Byron.Spec.Ledger.Update.html#vPropId"><span class="hs-identifier hs-var">vPropId</span></a></span><span>
</span><span id="line-601"></span><span>            </span><span id="local-6989586621679556088"><span class="annot"><span class="annottext">vk :: VKey
</span><a href="#local-6989586621679556088"><span class="hs-identifier hs-var hs-var">vk</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Signal ADDVOTE
Vote
</span><a href="#local-6989586621679556090"><span class="hs-identifier hs-var">vote</span></a></span><span> </span><span class="annot"><span class="annottext">Vote -&gt; Getting VKey Vote VKey -&gt; VKey
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting VKey Vote VKey
Lens' Vote VKey
</span><a href="Byron.Spec.Ledger.Update.html#vCaster"><span class="hs-identifier hs-var">vCaster</span></a></span><span>
</span><span id="line-602"></span><span>            </span><span id="local-6989586621679556087"><span class="annot"><span class="annottext">vtsPid :: Set (UpId, VKeyGenesis)
</span><a href="#local-6989586621679556087"><span class="hs-identifier hs-var hs-var">vtsPid</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-603"></span><span>              </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">VKey -&gt; Bimap VKeyGenesis VKey -&gt; Maybe VKeyGenesis
forall a b (m :: * -&gt; *).
(Ord a, Ord b, MonadThrow m) =&gt;
b -&gt; Bimap a b -&gt; m a
</span><span class="hs-identifier hs-var">lookupR</span></span><span> </span><span class="annot"><span class="annottext">VKey
</span><a href="#local-6989586621679556088"><span class="hs-identifier hs-var">vk</span></a></span><span> </span><span class="annot"><span class="annottext">Bimap VKeyGenesis VKey
</span><a href="#local-6989586621679556092"><span class="hs-identifier hs-var">dms</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-604"></span><span>                </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679556086"><span class="annot"><span class="annottext">VKeyGenesis
</span><a href="#local-6989586621679556086"><span class="hs-identifier hs-var">vks</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(UpId, VKeyGenesis) -&gt; Set (UpId, VKeyGenesis)
forall a. a -&gt; Set a
</span><span class="hs-identifier hs-var">Set.singleton</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UpId
</span><a href="#local-6989586621679556089"><span class="hs-identifier hs-var">pid</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">VKeyGenesis
</span><a href="#local-6989586621679556086"><span class="hs-identifier hs-var">vks</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-605"></span><span>                </span><span class="annot"><span class="annottext">Maybe VKeyGenesis
</span><span class="hs-identifier hs-var">Nothing</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Set (UpId, VKeyGenesis)
forall a. Set a
</span><span class="hs-identifier hs-var">Set.empty</span></span><span>
</span><span id="line-606"></span><span>        </span><span class="annot"><span class="annottext">Set (UpId, VKeyGenesis)
</span><a href="#local-6989586621679556087"><span class="hs-identifier hs-var">vtsPid</span></a></span><span> </span><span class="annot"><span class="annottext">Set (UpId, VKeyGenesis) -&gt; Set (UpId, VKeyGenesis) -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">Set (UpId, VKeyGenesis)
forall a. Set a
</span><span class="hs-identifier hs-var">Set.empty</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; PredicateFailure ADDVOTE -&gt; Rule ADDVOTE 'Transition ()
forall sts (ctx :: RuleType).
Bool -&gt; PredicateFailure sts -&gt; Rule sts ctx ()
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-operator hs-var">?!</span></a></span><span> </span><span class="annot"><span class="annottext">VKey -&gt; AddvotePredicateFailure
</span><a href="Byron.Spec.Ledger.Update.html#VoteByNonGenesisDelegate"><span class="hs-identifier hs-var">VoteByNonGenesisDelegate</span></a></span><span> </span><span class="annot"><span class="annottext">VKey
</span><a href="#local-6989586621679556088"><span class="hs-identifier hs-var">vk</span></a></span><span>
</span><span id="line-607"></span><span>        </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Set (UpId, VKeyGenesis)
</span><a href="#local-6989586621679556087"><span class="hs-identifier hs-var">vtsPid</span></a></span><span> </span><span class="annot"><span class="annottext">Set (UpId, VKeyGenesis) -&gt; Set (UpId, VKeyGenesis) -&gt; Bool
forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Bool
</span><span class="hs-operator hs-var">`Set.isSubsetOf`</span></span><span> </span><span class="annot"><span class="annottext">Set (UpId, VKeyGenesis)
State ADDVOTE
</span><a href="#local-6989586621679556091"><span class="hs-identifier hs-var">vts</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; PredicateFailure ADDVOTE -&gt; Rule ADDVOTE 'Transition ()
forall sts (ctx :: RuleType).
Bool -&gt; PredicateFailure sts -&gt; Rule sts ctx ()
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-operator hs-var">?!</span></a></span><span> </span><span class="annot"><span class="annottext">VKey -&gt; AddvotePredicateFailure
</span><a href="Byron.Spec.Ledger.Update.html#RepeatVoteByGenesisDelegate"><span class="hs-identifier hs-var">RepeatVoteByGenesisDelegate</span></a></span><span> </span><span class="annot"><span class="annottext">VKey
</span><a href="#local-6989586621679556088"><span class="hs-identifier hs-var">vk</span></a></span><span>
</span><span id="line-608"></span><span>        </span><span class="annot"><span class="annottext">UpId -&gt; Set UpId -&gt; Bool
forall a. Ord a =&gt; a -&gt; Set a -&gt; Bool
</span><span class="hs-identifier hs-var">Set.member</span></span><span> </span><span class="annot"><span class="annottext">UpId
</span><a href="#local-6989586621679556089"><span class="hs-identifier hs-var">pid</span></a></span><span> </span><span class="annot"><span class="annottext">Set UpId
</span><a href="#local-6989586621679556093"><span class="hs-identifier hs-var">rups</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; PredicateFailure ADDVOTE -&gt; Rule ADDVOTE 'Transition ()
forall sts (ctx :: RuleType).
Bool -&gt; PredicateFailure sts -&gt; Rule sts ctx ()
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-operator hs-var">?!</span></a></span><span> </span><span class="annot"><span class="annottext">UpId -&gt; AddvotePredicateFailure
</span><a href="Byron.Spec.Ledger.Update.html#NoUpdateProposal"><span class="hs-identifier hs-var">NoUpdateProposal</span></a></span><span> </span><span class="annot"><span class="annottext">UpId
</span><a href="#local-6989586621679556089"><span class="hs-identifier hs-var">pid</span></a></span><span>
</span><span id="line-609"></span><span>        </span><span class="annot"><span class="annottext">VKey -&gt; UpId -&gt; Sig UpId -&gt; Bool
forall a. Eq a =&gt; VKey -&gt; a -&gt; Sig a -&gt; Bool
</span><a href="Byron.Spec.Ledger.Core.html#verify"><span class="hs-identifier hs-var">Core.verify</span></a></span><span> </span><span class="annot"><span class="annottext">VKey
</span><a href="#local-6989586621679556088"><span class="hs-identifier hs-var">vk</span></a></span><span> </span><span class="annot"><span class="annottext">UpId
</span><a href="#local-6989586621679556089"><span class="hs-identifier hs-var">pid</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Signal ADDVOTE
Vote
</span><a href="#local-6989586621679556090"><span class="hs-identifier hs-var">vote</span></a></span><span> </span><span class="annot"><span class="annottext">Vote -&gt; Getting (Sig UpId) Vote (Sig UpId) -&gt; Sig UpId
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting (Sig UpId) Vote (Sig UpId)
Lens' Vote (Sig UpId)
</span><a href="Byron.Spec.Ledger.Update.html#vSig"><span class="hs-identifier hs-var">vSig</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; PredicateFailure ADDVOTE -&gt; Rule ADDVOTE 'Transition ()
forall sts (ctx :: RuleType).
Bool -&gt; PredicateFailure sts -&gt; Rule sts ctx ()
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-operator hs-var">?!</span></a></span><span> </span><span class="annot"><span class="annottext">PredicateFailure ADDVOTE
AddvotePredicateFailure
</span><a href="Byron.Spec.Ledger.Update.html#AVSigDoesNotVerify"><span class="hs-identifier hs-var">AVSigDoesNotVerify</span></a></span><span>
</span><span id="line-610"></span><span>        </span><span class="annot"><span class="annottext">Set (UpId, VKeyGenesis)
-&gt; F (Clause ADDVOTE 'Transition) (Set (UpId, VKeyGenesis))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Set (UpId, VKeyGenesis)
 -&gt; F (Clause ADDVOTE 'Transition) (Set (UpId, VKeyGenesis)))
-&gt; Set (UpId, VKeyGenesis)
-&gt; F (Clause ADDVOTE 'Transition) (Set (UpId, VKeyGenesis))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="annot"><span class="annottext">Set (UpId, VKeyGenesis)
State ADDVOTE
</span><a href="#local-6989586621679556091"><span class="hs-identifier hs-var">vts</span></a></span><span> </span><span class="annot"><span class="annottext">Set (UpId, VKeyGenesis)
-&gt; Set (UpId, VKeyGenesis) -&gt; Set (UpId, VKeyGenesis)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Set (UpId, VKeyGenesis)
</span><a href="#local-6989586621679556087"><span class="hs-identifier hs-var">vtsPid</span></a></span><span>
</span><span id="line-611"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-612"></span><span>
</span><span id="line-613"></span><span id="local-6989586621679556081"><span id="local-6989586621679556082"></span></span><span class="hs-keyword">data</span><span> </span><span id="UPVOTE"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPVOTE"><span class="hs-identifier hs-var">UPVOTE</span></a></span></span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(forall x. UPVOTE -&gt; Rep UPVOTE x)
-&gt; (forall x. Rep UPVOTE x -&gt; UPVOTE) -&gt; Generic UPVOTE
forall x. Rep UPVOTE x -&gt; UPVOTE
forall x. UPVOTE -&gt; Rep UPVOTE x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep UPVOTE x -&gt; UPVOTE
$cfrom :: forall x. UPVOTE -&gt; Rep UPVOTE x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">,</span><span> </span><span id="%24tUPVOTE"><span id="local-6989586621679556050"><span id="local-6989586621679556052"><span id="local-6989586621679556054"><span id="local-6989586621679556056"><span id="local-6989586621679556058"><span id="local-6989586621679556060"><span id="local-6989586621679556062"><span id="local-6989586621679556064"><span id="local-6989586621679556066"><span id="local-6989586621679556068"><span id="local-6989586621679556070"><span id="local-6989586621679556072"><span id="local-6989586621679556074"><span id="local-6989586621679556076"><span class="annot"><span class="annottext">Typeable UPVOTE
DataType
Typeable UPVOTE
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; UPVOTE -&gt; c UPVOTE)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UPVOTE)
-&gt; (UPVOTE -&gt; Constr)
-&gt; (UPVOTE -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UPVOTE))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c UPVOTE))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; UPVOTE -&gt; UPVOTE)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPVOTE -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPVOTE -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; UPVOTE -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UPVOTE -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; UPVOTE -&gt; m UPVOTE)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; UPVOTE -&gt; m UPVOTE)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; UPVOTE -&gt; m UPVOTE)
-&gt; Data UPVOTE
UPVOTE -&gt; DataType
UPVOTE -&gt; Constr
(forall b. Data b =&gt; b -&gt; b) -&gt; UPVOTE -&gt; UPVOTE
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; UPVOTE -&gt; c UPVOTE
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UPVOTE
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UPVOTE -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; UPVOTE -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPVOTE -&gt; r
forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPVOTE -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UPVOTE -&gt; m UPVOTE
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UPVOTE -&gt; m UPVOTE
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UPVOTE
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; UPVOTE -&gt; c UPVOTE
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UPVOTE)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c UPVOTE)
$tUPVOTE :: DataType
gmapMo :: (forall d. Data d =&gt; d -&gt; m d) -&gt; UPVOTE -&gt; m UPVOTE
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UPVOTE -&gt; m UPVOTE
gmapMp :: (forall d. Data d =&gt; d -&gt; m d) -&gt; UPVOTE -&gt; m UPVOTE
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UPVOTE -&gt; m UPVOTE
gmapM :: (forall d. Data d =&gt; d -&gt; m d) -&gt; UPVOTE -&gt; m UPVOTE
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UPVOTE -&gt; m UPVOTE
gmapQi :: Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UPVOTE -&gt; u
$cgmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UPVOTE -&gt; u
gmapQ :: (forall d. Data d =&gt; d -&gt; u) -&gt; UPVOTE -&gt; [u]
$cgmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; UPVOTE -&gt; [u]
gmapQr :: (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPVOTE -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPVOTE -&gt; r
gmapQl :: (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPVOTE -&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPVOTE -&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; UPVOTE -&gt; UPVOTE
$cgmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; UPVOTE -&gt; UPVOTE
dataCast2 :: (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c UPVOTE)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c UPVOTE)
dataCast1 :: (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UPVOTE)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UPVOTE)
dataTypeOf :: UPVOTE -&gt; DataType
$cdataTypeOf :: UPVOTE -&gt; DataType
toConstr :: UPVOTE -&gt; Constr
$ctoConstr :: UPVOTE -&gt; Constr
gunfold :: (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UPVOTE
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UPVOTE
gfoldl :: (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; UPVOTE -&gt; c UPVOTE
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; UPVOTE -&gt; c UPVOTE
$cp1Data :: Typeable UPVOTE
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">)</span><span>
</span><span id="line-614"></span><span>
</span><span id="line-615"></span><span class="hs-comment">-- | The 3 non-embedded `PredicateFailure`s here are all structural. The</span><span>
</span><span id="line-616"></span><span class="hs-comment">-- disjuntion of the preconditions is `True` - one rule either fires or the</span><span>
</span><span id="line-617"></span><span class="hs-comment">-- other does.</span><span>
</span><span id="line-618"></span><span id="local-6989586621679556047"><span id="local-6989586621679556048"></span></span><span class="hs-keyword">data</span><span> </span><span id="UpvotePredicateFailure"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpvotePredicateFailure"><span class="hs-identifier hs-var">UpvotePredicateFailure</span></a></span></span><span>
</span><span id="line-619"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="ADDVOTEFailure"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ADDVOTEFailure"><span class="hs-identifier hs-var">ADDVOTEFailure</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">PredicateFailure</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ADDVOTE"><span class="hs-identifier hs-type">ADDVOTE</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-620"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="S_HigherThanThdAndNotAlreadyConfirmed"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#S_HigherThanThdAndNotAlreadyConfirmed"><span class="hs-identifier hs-var">S_HigherThanThdAndNotAlreadyConfirmed</span></a></span></span><span>
</span><span id="line-621"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="S_CfmThdNotReached"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#S_CfmThdNotReached"><span class="hs-identifier hs-var">S_CfmThdNotReached</span></a></span></span><span>
</span><span id="line-622"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="S_AlreadyConfirmed"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#S_AlreadyConfirmed"><span class="hs-identifier hs-var">S_AlreadyConfirmed</span></a></span></span><span>
</span><span id="line-623"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556039"><span id="local-6989586621679556041"><span class="annot"><span class="annottext">UpvotePredicateFailure -&gt; UpvotePredicateFailure -&gt; Bool
(UpvotePredicateFailure -&gt; UpvotePredicateFailure -&gt; Bool)
-&gt; (UpvotePredicateFailure -&gt; UpvotePredicateFailure -&gt; Bool)
-&gt; Eq UpvotePredicateFailure
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: UpvotePredicateFailure -&gt; UpvotePredicateFailure -&gt; Bool
$c/= :: UpvotePredicateFailure -&gt; UpvotePredicateFailure -&gt; Bool
== :: UpvotePredicateFailure -&gt; UpvotePredicateFailure -&gt; Bool
$c== :: UpvotePredicateFailure -&gt; UpvotePredicateFailure -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679556033"><span id="local-6989586621679556035"><span id="local-6989586621679556037"><span class="annot"><span class="annottext">Int -&gt; UpvotePredicateFailure -&gt; ShowS
[UpvotePredicateFailure] -&gt; ShowS
UpvotePredicateFailure -&gt; String
(Int -&gt; UpvotePredicateFailure -&gt; ShowS)
-&gt; (UpvotePredicateFailure -&gt; String)
-&gt; ([UpvotePredicateFailure] -&gt; ShowS)
-&gt; Show UpvotePredicateFailure
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [UpvotePredicateFailure] -&gt; ShowS
$cshowList :: [UpvotePredicateFailure] -&gt; ShowS
show :: UpvotePredicateFailure -&gt; String
$cshow :: UpvotePredicateFailure -&gt; String
showsPrec :: Int -&gt; UpvotePredicateFailure -&gt; ShowS
$cshowsPrec :: Int -&gt; UpvotePredicateFailure -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="%24cS_AlreadyConfirmed"><span id="%24cS_CfmThdNotReached"><span id="%24cS_HigherThanThdAndNotAlreadyConfirmed"><span id="%24cADDVOTEFailure"><span id="%24tUpvotePredicateFailure"><span id="local-6989586621679556004"><span id="local-6989586621679556006"><span id="local-6989586621679556008"><span id="local-6989586621679556010"><span id="local-6989586621679556012"><span id="local-6989586621679556014"><span id="local-6989586621679556016"><span id="local-6989586621679556018"><span id="local-6989586621679556020"><span id="local-6989586621679556022"><span id="local-6989586621679556024"><span id="local-6989586621679556026"><span id="local-6989586621679556028"><span id="local-6989586621679556030"><span class="annot"><span class="annottext">Typeable UpvotePredicateFailure
DataType
Constr
Typeable UpvotePredicateFailure
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g)
    -&gt; UpvotePredicateFailure
    -&gt; c UpvotePredicateFailure)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UpvotePredicateFailure)
-&gt; (UpvotePredicateFailure -&gt; Constr)
-&gt; (UpvotePredicateFailure -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UpvotePredicateFailure))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e))
    -&gt; Maybe (c UpvotePredicateFailure))
-&gt; ((forall b. Data b =&gt; b -&gt; b)
    -&gt; UpvotePredicateFailure -&gt; UpvotePredicateFailure)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r
    -&gt; (forall d. Data d =&gt; d -&gt; r')
    -&gt; UpvotePredicateFailure
    -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r
    -&gt; (forall d. Data d =&gt; d -&gt; r')
    -&gt; UpvotePredicateFailure
    -&gt; r)
-&gt; (forall u.
    (forall d. Data d =&gt; d -&gt; u) -&gt; UpvotePredicateFailure -&gt; [u])
-&gt; (forall u.
    Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UpvotePredicateFailure -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; UpvotePredicateFailure -&gt; m UpvotePredicateFailure)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; UpvotePredicateFailure -&gt; m UpvotePredicateFailure)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; UpvotePredicateFailure -&gt; m UpvotePredicateFailure)
-&gt; Data UpvotePredicateFailure
UpvotePredicateFailure -&gt; DataType
UpvotePredicateFailure -&gt; Constr
(forall b. Data b =&gt; b -&gt; b)
-&gt; UpvotePredicateFailure -&gt; UpvotePredicateFailure
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; UpvotePredicateFailure
-&gt; c UpvotePredicateFailure
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UpvotePredicateFailure
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u.
Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UpvotePredicateFailure -&gt; u
forall u.
(forall d. Data d =&gt; d -&gt; u) -&gt; UpvotePredicateFailure -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; UpvotePredicateFailure
-&gt; r
forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; UpvotePredicateFailure
-&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; UpvotePredicateFailure -&gt; m UpvotePredicateFailure
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; UpvotePredicateFailure -&gt; m UpvotePredicateFailure
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UpvotePredicateFailure
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; UpvotePredicateFailure
-&gt; c UpvotePredicateFailure
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UpvotePredicateFailure)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c UpvotePredicateFailure)
$cS_AlreadyConfirmed :: Constr
$cS_CfmThdNotReached :: Constr
$cS_HigherThanThdAndNotAlreadyConfirmed :: Constr
$cADDVOTEFailure :: Constr
$tUpvotePredicateFailure :: DataType
gmapMo :: (forall d. Data d =&gt; d -&gt; m d)
-&gt; UpvotePredicateFailure -&gt; m UpvotePredicateFailure
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; UpvotePredicateFailure -&gt; m UpvotePredicateFailure
gmapMp :: (forall d. Data d =&gt; d -&gt; m d)
-&gt; UpvotePredicateFailure -&gt; m UpvotePredicateFailure
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; UpvotePredicateFailure -&gt; m UpvotePredicateFailure
gmapM :: (forall d. Data d =&gt; d -&gt; m d)
-&gt; UpvotePredicateFailure -&gt; m UpvotePredicateFailure
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; UpvotePredicateFailure -&gt; m UpvotePredicateFailure
gmapQi :: Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UpvotePredicateFailure -&gt; u
$cgmapQi :: forall u.
Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UpvotePredicateFailure -&gt; u
gmapQ :: (forall d. Data d =&gt; d -&gt; u) -&gt; UpvotePredicateFailure -&gt; [u]
$cgmapQ :: forall u.
(forall d. Data d =&gt; d -&gt; u) -&gt; UpvotePredicateFailure -&gt; [u]
gmapQr :: (r' -&gt; r -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; UpvotePredicateFailure
-&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; UpvotePredicateFailure
-&gt; r
gmapQl :: (r -&gt; r' -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; UpvotePredicateFailure
-&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; UpvotePredicateFailure
-&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b)
-&gt; UpvotePredicateFailure -&gt; UpvotePredicateFailure
$cgmapT :: (forall b. Data b =&gt; b -&gt; b)
-&gt; UpvotePredicateFailure -&gt; UpvotePredicateFailure
dataCast2 :: (forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c UpvotePredicateFailure)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c UpvotePredicateFailure)
dataCast1 :: (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UpvotePredicateFailure)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UpvotePredicateFailure)
dataTypeOf :: UpvotePredicateFailure -&gt; DataType
$cdataTypeOf :: UpvotePredicateFailure -&gt; DataType
toConstr :: UpvotePredicateFailure -&gt; Constr
$ctoConstr :: UpvotePredicateFailure -&gt; Constr
gunfold :: (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UpvotePredicateFailure
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UpvotePredicateFailure
gfoldl :: (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; UpvotePredicateFailure
-&gt; c UpvotePredicateFailure
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; UpvotePredicateFailure
-&gt; c UpvotePredicateFailure
$cp1Data :: Typeable UpvotePredicateFailure
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. UpvotePredicateFailure -&gt; Rep UpvotePredicateFailure x)
-&gt; (forall x.
    Rep UpvotePredicateFailure x -&gt; UpvotePredicateFailure)
-&gt; Generic UpvotePredicateFailure
forall x. Rep UpvotePredicateFailure x -&gt; UpvotePredicateFailure
forall x. UpvotePredicateFailure -&gt; Rep UpvotePredicateFailure x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep UpvotePredicateFailure x -&gt; UpvotePredicateFailure
$cfrom :: forall x. UpvotePredicateFailure -&gt; Rep UpvotePredicateFailure x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555991"><span id="local-6989586621679555993"><span id="local-6989586621679555995"><span class="annot"><span class="annottext">Context -&gt; UpvotePredicateFailure -&gt; IO (Maybe ThunkInfo)
Proxy UpvotePredicateFailure -&gt; String
(Context -&gt; UpvotePredicateFailure -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; UpvotePredicateFailure -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy UpvotePredicateFailure -&gt; String)
-&gt; NoThunks UpvotePredicateFailure
forall a.
(Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy a -&gt; String)
-&gt; NoThunks a
showTypeOf :: Proxy UpvotePredicateFailure -&gt; String
$cshowTypeOf :: Proxy UpvotePredicateFailure -&gt; String
wNoThunks :: Context -&gt; UpvotePredicateFailure -&gt; IO (Maybe ThunkInfo)
$cwNoThunks :: Context -&gt; UpvotePredicateFailure -&gt; IO (Maybe ThunkInfo)
noThunks :: Context -&gt; UpvotePredicateFailure -&gt; IO (Maybe ThunkInfo)
$cnoThunks :: Context -&gt; UpvotePredicateFailure -&gt; IO (Maybe ThunkInfo)
</span><a href="#local-6989586621679555991"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">NoThunks</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-624"></span><span>
</span><span id="line-625"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679555981"><span id="local-6989586621679555983"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">STS</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPVOTE"><span class="hs-identifier hs-type">UPVOTE</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-626"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Environment"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">Environment</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPVOTE"><span class="hs-identifier hs-type">UPVOTE</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-627"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Slot"><span class="hs-identifier hs-type">Core.Slot</span></a></span><span>
</span><span id="line-628"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word8</span></span><span>
</span><span id="line-629"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpId"><span class="hs-identifier hs-type">UpId</span></a></span><span>
</span><span id="line-630"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bimap</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">Core.VKeyGenesis</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier hs-type">Core.VKey</span></a></span><span>
</span><span id="line-631"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-632"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="State"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">State</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPVOTE"><span class="hs-identifier hs-type">UPVOTE</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-633"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpId"><span class="hs-identifier hs-type">UpId</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Slot"><span class="hs-identifier hs-type">Core.Slot</span></a></span><span>
</span><span id="line-634"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpId"><span class="hs-identifier hs-type">UpId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">Core.VKeyGenesis</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-635"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-636"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Signal"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">Signal</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPVOTE"><span class="hs-identifier hs-type">UPVOTE</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#Vote"><span class="hs-identifier hs-type">Vote</span></a></span><span>
</span><span id="line-637"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="PredicateFailure"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">PredicateFailure</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPVOTE"><span class="hs-identifier hs-type">UPVOTE</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpvotePredicateFailure"><span class="hs-identifier hs-type">UpvotePredicateFailure</span></a></span><span>
</span><span id="line-638"></span><span>
</span><span id="line-639"></span><span>  </span><span id="local-6989586621679555980"><span class="annot"><span class="annottext">initialRules :: [InitialRule UPVOTE]
</span><a href="#local-6989586621679555980"><span class="hs-identifier hs-var hs-var hs-var hs-var">initialRules</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-640"></span><span>  </span><span id="local-6989586621679555979"><span class="annot"><span class="annottext">transitionRules :: [TransitionRule UPVOTE]
</span><a href="#local-6989586621679555979"><span class="hs-identifier hs-var hs-var hs-var hs-var">transitionRules</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-641"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-642"></span><span>        </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">TRC</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555978"><span class="annot"><a href="#local-6989586621679555978"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555977"><span class="annot"><a href="#local-6989586621679555977"><span class="hs-identifier hs-var">rups</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555976"><span class="annot"><a href="#local-6989586621679555976"><span class="hs-identifier hs-var">dms</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-643"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679555975"><span class="annot"><a href="#local-6989586621679555975"><span class="hs-identifier hs-var">cps</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555974"><span class="annot"><a href="#local-6989586621679555974"><span class="hs-identifier hs-var">vts</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-644"></span><span>            </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555973"><span class="annot"><span class="annottext">Signal UPVOTE
</span><a href="#local-6989586621679555973"><span class="hs-identifier hs-var">vote</span></a></span></span><span>
</span><span id="line-645"></span><span>            </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">F (Clause UPVOTE 'Transition) (TRC UPVOTE)
forall sts (rtype :: RuleType).
Rule sts rtype (RuleContext rtype sts)
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">judgmentContext</span></a></span><span>
</span><span id="line-646"></span><span>        </span><span id="local-6989586621679555972"><span class="annot"><span class="annottext">Set (UpId, VKeyGenesis)
</span><a href="#local-6989586621679555972"><span class="hs-identifier hs-var">vts'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall sub super (rtype :: RuleType).
Embed sub super =&gt;
RuleContext rtype sub -&gt; Rule super rtype (State sub)
forall super (rtype :: RuleType).
Embed ADDVOTE super =&gt;
RuleContext rtype ADDVOTE -&gt; Rule super rtype (State ADDVOTE)
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">trans</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ADDVOTE"><span class="hs-identifier hs-type">ADDVOTE</span></a></span><span> </span><span class="annot"><span class="annottext">(RuleContext 'Transition ADDVOTE
 -&gt; Rule UPVOTE 'Transition (State ADDVOTE))
-&gt; RuleContext 'Transition ADDVOTE
-&gt; Rule UPVOTE 'Transition (State ADDVOTE)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Environment ADDVOTE, State ADDVOTE, Signal ADDVOTE) -&gt; TRC ADDVOTE
forall sts. (Environment sts, State sts, Signal sts) -&gt; TRC sts
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">TRC</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Set UpId
</span><a href="#local-6989586621679555977"><span class="hs-identifier hs-var">rups</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bimap VKeyGenesis VKey
</span><a href="#local-6989586621679555976"><span class="hs-identifier hs-var">dms</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Set (UpId, VKeyGenesis)
State ADDVOTE
</span><a href="#local-6989586621679555974"><span class="hs-identifier hs-var">vts</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Signal UPVOTE
Signal ADDVOTE
</span><a href="#local-6989586621679555973"><span class="hs-identifier hs-var">vote</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-647"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679555971"><span class="annot"><span class="annottext">pid :: UpId
</span><a href="#local-6989586621679555971"><span class="hs-identifier hs-var hs-var">pid</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Signal UPVOTE
Vote
</span><a href="#local-6989586621679555973"><span class="hs-identifier hs-var">vote</span></a></span><span> </span><span class="annot"><span class="annottext">Vote -&gt; Getting UpId Vote UpId -&gt; UpId
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting UpId Vote UpId
Lens' Vote UpId
</span><a href="Byron.Spec.Ledger.Update.html#vPropId"><span class="hs-identifier hs-var">vPropId</span></a></span><span>
</span><span id="line-648"></span><span>        </span><span class="annot"><span class="annottext">Set (UpId, VKeyGenesis) -&gt; Word8
forall m n. (Relation m, Integral n) =&gt; m -&gt; n
</span><a href="Byron.Spec.Ledger.Core.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><span class="annottext">UpId
</span><a href="#local-6989586621679555971"><span class="hs-identifier hs-var">pid</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[Domain (Set (UpId, VKeyGenesis))]
-&gt; Set (UpId, VKeyGenesis) -&gt; Set (UpId, VKeyGenesis)
forall m (f :: * -&gt; *).
(Relation m, Ord (Domain m), Foldable f) =&gt;
f (Domain m) -&gt; m -&gt; m
</span><a href="Byron.Spec.Ledger.Core.html#%25C1"><span class="hs-operator hs-var">&#9665;</span></a></span><span> </span><span class="annot"><span class="annottext">Set (UpId, VKeyGenesis)
</span><a href="#local-6989586621679555972"><span class="hs-identifier hs-var">vts'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679555978"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">UpId
</span><a href="#local-6989586621679555971"><span class="hs-identifier hs-var">pid</span></a></span><span> </span><span class="annot"><span class="annottext">UpId -&gt; Set UpId -&gt; Bool
forall a (f :: * -&gt; *). (Eq a, Foldable f) =&gt; a -&gt; f a -&gt; Bool
</span><a href="Byron.Spec.Ledger.Core.html#%2208"><span class="hs-operator hs-var">&#8712;</span></a></span><span> </span><span class="annot"><span class="annottext">Map UpId Slot -&gt; Set (Domain (Map UpId Slot))
forall m. (Relation m, Ord (Domain m)) =&gt; m -&gt; Set (Domain m)
</span><a href="Byron.Spec.Ledger.Core.html#dom"><span class="hs-identifier hs-var">dom</span></a></span><span> </span><span class="annot"><span class="annottext">Map UpId Slot
</span><a href="#local-6989586621679555975"><span class="hs-identifier hs-var">cps</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; PredicateFailure UPVOTE -&gt; Rule UPVOTE 'Transition ()
forall sts (ctx :: RuleType).
Bool -&gt; PredicateFailure sts -&gt; Rule sts ctx ()
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-operator hs-var">?!</span></a></span><span> </span><span class="annot"><span class="annottext">PredicateFailure UPVOTE
UpvotePredicateFailure
</span><a href="Byron.Spec.Ledger.Update.html#S_HigherThanThdAndNotAlreadyConfirmed"><span class="hs-identifier hs-var">S_HigherThanThdAndNotAlreadyConfirmed</span></a></span><span>
</span><span id="line-649"></span><span>        </span><span class="annot"><span class="annottext">(Map UpId Slot, Set (UpId, VKeyGenesis))
-&gt; F (Clause UPVOTE 'Transition)
     (Map UpId Slot, Set (UpId, VKeyGenesis))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">((Map UpId Slot, Set (UpId, VKeyGenesis))
 -&gt; F (Clause UPVOTE 'Transition)
      (Map UpId Slot, Set (UpId, VKeyGenesis)))
-&gt; (Map UpId Slot, Set (UpId, VKeyGenesis))
-&gt; F (Clause UPVOTE 'Transition)
     (Map UpId Slot, Set (UpId, VKeyGenesis))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">Map UpId Slot
</span><a href="#local-6989586621679555975"><span class="hs-identifier hs-var">cps</span></a></span><span>
</span><span id="line-650"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Set (UpId, VKeyGenesis)
</span><a href="#local-6989586621679555972"><span class="hs-identifier hs-var">vts'</span></a></span><span>
</span><span id="line-651"></span><span>                </span><span class="hs-special">)</span><span>
</span><span id="line-652"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-653"></span><span>        </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">TRC</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679555969"><span class="annot"><a href="#local-6989586621679555969"><span class="hs-identifier hs-var">sn</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555968"><span class="annot"><a href="#local-6989586621679555968"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555967"><span class="annot"><a href="#local-6989586621679555967"><span class="hs-identifier hs-var">rups</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555966"><span class="annot"><a href="#local-6989586621679555966"><span class="hs-identifier hs-var">dms</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-654"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679555965"><span class="annot"><a href="#local-6989586621679555965"><span class="hs-identifier hs-var">cps</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555964"><span class="annot"><a href="#local-6989586621679555964"><span class="hs-identifier hs-var">vts</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-655"></span><span>            </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555963"><span class="annot"><span class="annottext">Signal UPVOTE
</span><a href="#local-6989586621679555963"><span class="hs-identifier hs-var">vote</span></a></span></span><span>
</span><span id="line-656"></span><span>            </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">F (Clause UPVOTE 'Transition) (TRC UPVOTE)
forall sts (rtype :: RuleType).
Rule sts rtype (RuleContext rtype sts)
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">judgmentContext</span></a></span><span>
</span><span id="line-657"></span><span>        </span><span id="local-6989586621679555962"><span class="annot"><span class="annottext">Set (UpId, VKeyGenesis)
</span><a href="#local-6989586621679555962"><span class="hs-identifier hs-var">vts'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall sub super (rtype :: RuleType).
Embed sub super =&gt;
RuleContext rtype sub -&gt; Rule super rtype (State sub)
forall super (rtype :: RuleType).
Embed ADDVOTE super =&gt;
RuleContext rtype ADDVOTE -&gt; Rule super rtype (State ADDVOTE)
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">trans</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ADDVOTE"><span class="hs-identifier hs-type">ADDVOTE</span></a></span><span> </span><span class="annot"><span class="annottext">(RuleContext 'Transition ADDVOTE
 -&gt; Rule UPVOTE 'Transition (State ADDVOTE))
-&gt; RuleContext 'Transition ADDVOTE
-&gt; Rule UPVOTE 'Transition (State ADDVOTE)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Environment ADDVOTE, State ADDVOTE, Signal ADDVOTE) -&gt; TRC ADDVOTE
forall sts. (Environment sts, State sts, Signal sts) -&gt; TRC sts
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">TRC</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Set UpId
</span><a href="#local-6989586621679555967"><span class="hs-identifier hs-var">rups</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bimap VKeyGenesis VKey
</span><a href="#local-6989586621679555966"><span class="hs-identifier hs-var">dms</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Set (UpId, VKeyGenesis)
State ADDVOTE
</span><a href="#local-6989586621679555964"><span class="hs-identifier hs-var">vts</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Signal UPVOTE
Signal ADDVOTE
</span><a href="#local-6989586621679555963"><span class="hs-identifier hs-var">vote</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-658"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679555961"><span class="annot"><span class="annottext">pid :: UpId
</span><a href="#local-6989586621679555961"><span class="hs-identifier hs-var hs-var">pid</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Signal UPVOTE
Vote
</span><a href="#local-6989586621679555963"><span class="hs-identifier hs-var">vote</span></a></span><span> </span><span class="annot"><span class="annottext">Vote -&gt; Getting UpId Vote UpId -&gt; UpId
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting UpId Vote UpId
Lens' Vote UpId
</span><a href="Byron.Spec.Ledger.Update.html#vPropId"><span class="hs-identifier hs-var">vPropId</span></a></span><span>
</span><span id="line-659"></span><span>        </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679555968"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;=</span></span><span> </span><span class="annot"><span class="annottext">Set (UpId, VKeyGenesis) -&gt; Word8
forall m n. (Relation m, Integral n) =&gt; m -&gt; n
</span><a href="Byron.Spec.Ledger.Core.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><span class="annottext">UpId
</span><a href="#local-6989586621679555961"><span class="hs-identifier hs-var">pid</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[Domain (Set (UpId, VKeyGenesis))]
-&gt; Set (UpId, VKeyGenesis) -&gt; Set (UpId, VKeyGenesis)
forall m (f :: * -&gt; *).
(Relation m, Ord (Domain m), Foldable f) =&gt;
f (Domain m) -&gt; m -&gt; m
</span><a href="Byron.Spec.Ledger.Core.html#%25C1"><span class="hs-operator hs-var">&#9665;</span></a></span><span> </span><span class="annot"><span class="annottext">Set (UpId, VKeyGenesis)
</span><a href="#local-6989586621679555962"><span class="hs-identifier hs-var">vts'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; PredicateFailure UPVOTE -&gt; Rule UPVOTE 'Transition ()
forall sts (ctx :: RuleType).
Bool -&gt; PredicateFailure sts -&gt; Rule sts ctx ()
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-operator hs-var">?!</span></a></span><span> </span><span class="annot"><span class="annottext">PredicateFailure UPVOTE
UpvotePredicateFailure
</span><a href="Byron.Spec.Ledger.Update.html#S_CfmThdNotReached"><span class="hs-identifier hs-var">S_CfmThdNotReached</span></a></span><span>
</span><span id="line-660"></span><span>        </span><span class="annot"><span class="annottext">UpId
</span><a href="#local-6989586621679555961"><span class="hs-identifier hs-var">pid</span></a></span><span> </span><span class="annot"><span class="annottext">UpId -&gt; Set UpId -&gt; Bool
forall a (f :: * -&gt; *). (Eq a, Foldable f) =&gt; a -&gt; f a -&gt; Bool
</span><a href="Byron.Spec.Ledger.Core.html#%2209"><span class="hs-operator hs-var">&#8713;</span></a></span><span> </span><span class="annot"><span class="annottext">Map UpId Slot -&gt; Set (Domain (Map UpId Slot))
forall m. (Relation m, Ord (Domain m)) =&gt; m -&gt; Set (Domain m)
</span><a href="Byron.Spec.Ledger.Core.html#dom"><span class="hs-identifier hs-var">dom</span></a></span><span> </span><span class="annot"><span class="annottext">Map UpId Slot
</span><a href="#local-6989586621679555965"><span class="hs-identifier hs-var">cps</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; PredicateFailure UPVOTE -&gt; Rule UPVOTE 'Transition ()
forall sts (ctx :: RuleType).
Bool -&gt; PredicateFailure sts -&gt; Rule sts ctx ()
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-operator hs-var">?!</span></a></span><span> </span><span class="annot"><span class="annottext">PredicateFailure UPVOTE
UpvotePredicateFailure
</span><a href="Byron.Spec.Ledger.Update.html#S_AlreadyConfirmed"><span class="hs-identifier hs-var">S_AlreadyConfirmed</span></a></span><span>
</span><span id="line-661"></span><span>        </span><span class="annot"><span class="annottext">(Map UpId Slot, Set (UpId, VKeyGenesis))
-&gt; F (Clause UPVOTE 'Transition)
     (Map UpId Slot, Set (UpId, VKeyGenesis))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">((Map UpId Slot, Set (UpId, VKeyGenesis))
 -&gt; F (Clause UPVOTE 'Transition)
      (Map UpId Slot, Set (UpId, VKeyGenesis)))
-&gt; (Map UpId Slot, Set (UpId, VKeyGenesis))
-&gt; F (Clause UPVOTE 'Transition)
     (Map UpId Slot, Set (UpId, VKeyGenesis))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">Map UpId Slot
</span><a href="#local-6989586621679555965"><span class="hs-identifier hs-var">cps</span></a></span><span> </span><span class="annot"><span class="annottext">Map UpId Slot
-&gt; [(Domain (Map UpId Slot), Range (Map UpId Slot))]
-&gt; Map UpId Slot
forall m (f :: * -&gt; *).
(Relation m, Ord (Domain m), Ord (Range m), Foldable f) =&gt;
m -&gt; f (Domain m, Range m) -&gt; m
</span><a href="Byron.Spec.Ledger.Core.html#%2A03"><span class="hs-operator hs-var">&#10755;</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">UpId
</span><a href="#local-6989586621679555961"><span class="hs-identifier hs-var">pid</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Slot
</span><a href="#local-6989586621679555969"><span class="hs-identifier hs-var">sn</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-662"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Set (UpId, VKeyGenesis)
</span><a href="#local-6989586621679555962"><span class="hs-identifier hs-var">vts'</span></a></span><span>
</span><span id="line-663"></span><span>                </span><span class="hs-special">)</span><span>
</span><span id="line-664"></span><span>
</span><span id="line-665"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-666"></span><span>
</span><span id="line-667"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">Embed</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ADDVOTE"><span class="hs-identifier hs-type">ADDVOTE</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPVOTE"><span class="hs-identifier hs-type">UPVOTE</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-668"></span><span>  </span><span id="local-6989586621679555957"><span class="annot"><span class="annottext">wrapFailed :: PredicateFailure ADDVOTE -&gt; PredicateFailure UPVOTE
</span><a href="#local-6989586621679555957"><span class="hs-identifier hs-var hs-var hs-var hs-var">wrapFailed</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PredicateFailure ADDVOTE -&gt; PredicateFailure UPVOTE
PredicateFailure ADDVOTE -&gt; UpvotePredicateFailure
</span><a href="Byron.Spec.Ledger.Update.html#ADDVOTEFailure"><span class="hs-identifier hs-var">ADDVOTEFailure</span></a></span><span>
</span><span id="line-669"></span><span>
</span><span id="line-670"></span><span class="hs-comment">------------------------------------------------------------------------</span><span>
</span><span id="line-671"></span><span class="hs-comment">-- Update voting</span><span>
</span><span id="line-672"></span><span class="hs-comment">------------------------------------------------------------------------</span><span>
</span><span id="line-673"></span><span>
</span><span id="line-674"></span><span id="local-6989586621679555955"><span id="local-6989586621679555956"></span></span><span class="hs-keyword">data</span><span> </span><span id="FADS"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#FADS"><span class="hs-identifier hs-var">FADS</span></a></span></span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(forall x. FADS -&gt; Rep FADS x)
-&gt; (forall x. Rep FADS x -&gt; FADS) -&gt; Generic FADS
forall x. Rep FADS x -&gt; FADS
forall x. FADS -&gt; Rep FADS x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep FADS x -&gt; FADS
$cfrom :: forall x. FADS -&gt; Rep FADS x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">,</span><span> </span><span id="%24tFADS"><span id="local-6989586621679555924"><span id="local-6989586621679555926"><span id="local-6989586621679555928"><span id="local-6989586621679555930"><span id="local-6989586621679555932"><span id="local-6989586621679555934"><span id="local-6989586621679555936"><span id="local-6989586621679555938"><span id="local-6989586621679555940"><span id="local-6989586621679555942"><span id="local-6989586621679555944"><span id="local-6989586621679555946"><span id="local-6989586621679555948"><span id="local-6989586621679555950"><span class="annot"><span class="annottext">Typeable FADS
DataType
Typeable FADS
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; FADS -&gt; c FADS)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c FADS)
-&gt; (FADS -&gt; Constr)
-&gt; (FADS -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c FADS))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c FADS))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; FADS -&gt; FADS)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; FADS -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; FADS -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; FADS -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; FADS -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; FADS -&gt; m FADS)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; FADS -&gt; m FADS)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; FADS -&gt; m FADS)
-&gt; Data FADS
FADS -&gt; DataType
FADS -&gt; Constr
(forall b. Data b =&gt; b -&gt; b) -&gt; FADS -&gt; FADS
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; FADS -&gt; c FADS
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c FADS
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; FADS -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; FADS -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; FADS -&gt; r
forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; FADS -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; FADS -&gt; m FADS
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; FADS -&gt; m FADS
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c FADS
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; FADS -&gt; c FADS
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c FADS)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c FADS)
$tFADS :: DataType
gmapMo :: (forall d. Data d =&gt; d -&gt; m d) -&gt; FADS -&gt; m FADS
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; FADS -&gt; m FADS
gmapMp :: (forall d. Data d =&gt; d -&gt; m d) -&gt; FADS -&gt; m FADS
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; FADS -&gt; m FADS
gmapM :: (forall d. Data d =&gt; d -&gt; m d) -&gt; FADS -&gt; m FADS
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; FADS -&gt; m FADS
gmapQi :: Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; FADS -&gt; u
$cgmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; FADS -&gt; u
gmapQ :: (forall d. Data d =&gt; d -&gt; u) -&gt; FADS -&gt; [u]
$cgmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; FADS -&gt; [u]
gmapQr :: (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; FADS -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; FADS -&gt; r
gmapQl :: (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; FADS -&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; FADS -&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; FADS -&gt; FADS
$cgmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; FADS -&gt; FADS
dataCast2 :: (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c FADS)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c FADS)
dataCast1 :: (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c FADS)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c FADS)
dataTypeOf :: FADS -&gt; DataType
$cdataTypeOf :: FADS -&gt; DataType
toConstr :: FADS -&gt; Constr
$ctoConstr :: FADS -&gt; Constr
gunfold :: (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c FADS
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c FADS
gfoldl :: (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; FADS -&gt; c FADS
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; FADS -&gt; c FADS
$cp1Data :: Typeable FADS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">)</span><span>
</span><span id="line-675"></span><span>
</span><span id="line-676"></span><span id="local-6989586621679555921"><span id="local-6989586621679555922"></span></span><span class="hs-keyword">data</span><span> </span><span id="FadsPredicateFailure"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#FadsPredicateFailure"><span class="hs-identifier hs-var">FadsPredicateFailure</span></a></span></span><span>
</span><span id="line-677"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679555917"><span id="local-6989586621679555919"><span class="annot"><span class="annottext">FadsPredicateFailure -&gt; FadsPredicateFailure -&gt; Bool
(FadsPredicateFailure -&gt; FadsPredicateFailure -&gt; Bool)
-&gt; (FadsPredicateFailure -&gt; FadsPredicateFailure -&gt; Bool)
-&gt; Eq FadsPredicateFailure
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: FadsPredicateFailure -&gt; FadsPredicateFailure -&gt; Bool
$c/= :: FadsPredicateFailure -&gt; FadsPredicateFailure -&gt; Bool
== :: FadsPredicateFailure -&gt; FadsPredicateFailure -&gt; Bool
$c== :: FadsPredicateFailure -&gt; FadsPredicateFailure -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555911"><span id="local-6989586621679555913"><span id="local-6989586621679555915"><span class="annot"><span class="annottext">Int -&gt; FadsPredicateFailure -&gt; ShowS
[FadsPredicateFailure] -&gt; ShowS
FadsPredicateFailure -&gt; String
(Int -&gt; FadsPredicateFailure -&gt; ShowS)
-&gt; (FadsPredicateFailure -&gt; String)
-&gt; ([FadsPredicateFailure] -&gt; ShowS)
-&gt; Show FadsPredicateFailure
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [FadsPredicateFailure] -&gt; ShowS
$cshowList :: [FadsPredicateFailure] -&gt; ShowS
show :: FadsPredicateFailure -&gt; String
$cshow :: FadsPredicateFailure -&gt; String
showsPrec :: Int -&gt; FadsPredicateFailure -&gt; ShowS
$cshowsPrec :: Int -&gt; FadsPredicateFailure -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="%24tFadsPredicateFailure"><span id="local-6989586621679555882"><span id="local-6989586621679555884"><span id="local-6989586621679555886"><span id="local-6989586621679555888"><span id="local-6989586621679555890"><span id="local-6989586621679555892"><span id="local-6989586621679555894"><span id="local-6989586621679555896"><span id="local-6989586621679555898"><span id="local-6989586621679555900"><span id="local-6989586621679555902"><span id="local-6989586621679555904"><span id="local-6989586621679555906"><span id="local-6989586621679555908"><span class="annot"><span class="annottext">Typeable FadsPredicateFailure
DataType
Typeable FadsPredicateFailure
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g)
    -&gt; FadsPredicateFailure
    -&gt; c FadsPredicateFailure)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c FadsPredicateFailure)
-&gt; (FadsPredicateFailure -&gt; Constr)
-&gt; (FadsPredicateFailure -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c FadsPredicateFailure))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e))
    -&gt; Maybe (c FadsPredicateFailure))
-&gt; ((forall b. Data b =&gt; b -&gt; b)
    -&gt; FadsPredicateFailure -&gt; FadsPredicateFailure)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; FadsPredicateFailure -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; FadsPredicateFailure -&gt; r)
-&gt; (forall u.
    (forall d. Data d =&gt; d -&gt; u) -&gt; FadsPredicateFailure -&gt; [u])
-&gt; (forall u.
    Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; FadsPredicateFailure -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; FadsPredicateFailure -&gt; m FadsPredicateFailure)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; FadsPredicateFailure -&gt; m FadsPredicateFailure)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; FadsPredicateFailure -&gt; m FadsPredicateFailure)
-&gt; Data FadsPredicateFailure
FadsPredicateFailure -&gt; DataType
FadsPredicateFailure -&gt; Constr
(forall b. Data b =&gt; b -&gt; b)
-&gt; FadsPredicateFailure -&gt; FadsPredicateFailure
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; FadsPredicateFailure
-&gt; c FadsPredicateFailure
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c FadsPredicateFailure
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u.
Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; FadsPredicateFailure -&gt; u
forall u.
(forall d. Data d =&gt; d -&gt; u) -&gt; FadsPredicateFailure -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; FadsPredicateFailure -&gt; r
forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; FadsPredicateFailure -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; FadsPredicateFailure -&gt; m FadsPredicateFailure
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; FadsPredicateFailure -&gt; m FadsPredicateFailure
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c FadsPredicateFailure
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; FadsPredicateFailure
-&gt; c FadsPredicateFailure
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c FadsPredicateFailure)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c FadsPredicateFailure)
$tFadsPredicateFailure :: DataType
gmapMo :: (forall d. Data d =&gt; d -&gt; m d)
-&gt; FadsPredicateFailure -&gt; m FadsPredicateFailure
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; FadsPredicateFailure -&gt; m FadsPredicateFailure
gmapMp :: (forall d. Data d =&gt; d -&gt; m d)
-&gt; FadsPredicateFailure -&gt; m FadsPredicateFailure
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; FadsPredicateFailure -&gt; m FadsPredicateFailure
gmapM :: (forall d. Data d =&gt; d -&gt; m d)
-&gt; FadsPredicateFailure -&gt; m FadsPredicateFailure
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; FadsPredicateFailure -&gt; m FadsPredicateFailure
gmapQi :: Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; FadsPredicateFailure -&gt; u
$cgmapQi :: forall u.
Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; FadsPredicateFailure -&gt; u
gmapQ :: (forall d. Data d =&gt; d -&gt; u) -&gt; FadsPredicateFailure -&gt; [u]
$cgmapQ :: forall u.
(forall d. Data d =&gt; d -&gt; u) -&gt; FadsPredicateFailure -&gt; [u]
gmapQr :: (r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; FadsPredicateFailure -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; FadsPredicateFailure -&gt; r
gmapQl :: (r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; FadsPredicateFailure -&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; FadsPredicateFailure -&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b)
-&gt; FadsPredicateFailure -&gt; FadsPredicateFailure
$cgmapT :: (forall b. Data b =&gt; b -&gt; b)
-&gt; FadsPredicateFailure -&gt; FadsPredicateFailure
dataCast2 :: (forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c FadsPredicateFailure)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c FadsPredicateFailure)
dataCast1 :: (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c FadsPredicateFailure)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c FadsPredicateFailure)
dataTypeOf :: FadsPredicateFailure -&gt; DataType
$cdataTypeOf :: FadsPredicateFailure -&gt; DataType
toConstr :: FadsPredicateFailure -&gt; Constr
$ctoConstr :: FadsPredicateFailure -&gt; Constr
gunfold :: (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c FadsPredicateFailure
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c FadsPredicateFailure
gfoldl :: (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; FadsPredicateFailure
-&gt; c FadsPredicateFailure
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; FadsPredicateFailure
-&gt; c FadsPredicateFailure
$cp1Data :: Typeable FadsPredicateFailure
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. FadsPredicateFailure -&gt; Rep FadsPredicateFailure x)
-&gt; (forall x. Rep FadsPredicateFailure x -&gt; FadsPredicateFailure)
-&gt; Generic FadsPredicateFailure
forall x. Rep FadsPredicateFailure x -&gt; FadsPredicateFailure
forall x. FadsPredicateFailure -&gt; Rep FadsPredicateFailure x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep FadsPredicateFailure x -&gt; FadsPredicateFailure
$cfrom :: forall x. FadsPredicateFailure -&gt; Rep FadsPredicateFailure x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-678"></span><span>
</span><span id="line-679"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679555869"><span id="local-6989586621679555871"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">STS</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#FADS"><span class="hs-identifier hs-type">FADS</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-680"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Environment"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">Environment</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#FADS"><span class="hs-identifier hs-type">FADS</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-681"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="State"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">State</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#FADS"><span class="hs-identifier hs-type">FADS</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Slot"><span class="hs-identifier hs-type">Core.Slot</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ProtVer"><span class="hs-identifier hs-type">ProtVer</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#PParams"><span class="hs-identifier hs-type">PParams</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-682"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Signal"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">Signal</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#FADS"><span class="hs-identifier hs-type">FADS</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Slot"><span class="hs-identifier hs-type">Core.Slot</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ProtVer"><span class="hs-identifier hs-type">ProtVer</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#PParams"><span class="hs-identifier hs-type">PParams</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-683"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="PredicateFailure"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">PredicateFailure</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#FADS"><span class="hs-identifier hs-type">FADS</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#FadsPredicateFailure"><span class="hs-identifier hs-type">FadsPredicateFailure</span></a></span><span>
</span><span id="line-684"></span><span>
</span><span id="line-685"></span><span>  </span><span id="local-6989586621679555868"><span class="annot"><span class="annottext">initialRules :: [InitialRule FADS]
</span><a href="#local-6989586621679555868"><span class="hs-identifier hs-var hs-var hs-var hs-var">initialRules</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-686"></span><span>  </span><span id="local-6989586621679555867"><span class="annot"><span class="annottext">transitionRules :: [TransitionRule FADS]
</span><a href="#local-6989586621679555867"><span class="hs-identifier hs-var hs-var hs-var hs-var">transitionRules</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-687"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-688"></span><span>        </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">TRC</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-689"></span><span>            </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555866"><span class="annot"><span class="annottext">State FADS
</span><a href="#local-6989586621679555866"><span class="hs-identifier hs-var">fads</span></a></span></span><span>
</span><span id="line-690"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679555865"><span class="annot"><a href="#local-6989586621679555865"><span class="hs-identifier hs-var">sn</span></a></span></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679555864"><span class="annot"><a href="#local-6989586621679555864"><span class="hs-identifier hs-var">bv</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555863"><span class="annot"><a href="#local-6989586621679555863"><span class="hs-identifier hs-var">ppsc</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-691"></span><span>            </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">F (Clause FADS 'Transition) (TRC FADS)
forall sts (rtype :: RuleType).
Rule sts rtype (RuleContext rtype sts)
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">judgmentContext</span></a></span><span>
</span><span id="line-692"></span><span>        </span><span class="annot"><span class="annottext">[(Slot, (ProtVer, PParams))]
-&gt; F (Clause FADS 'Transition) [(Slot, (ProtVer, PParams))]
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">([(Slot, (ProtVer, PParams))]
 -&gt; F (Clause FADS 'Transition) [(Slot, (ProtVer, PParams))])
-&gt; [(Slot, (ProtVer, PParams))]
-&gt; F (Clause FADS 'Transition) [(Slot, (ProtVer, PParams))]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">State FADS
</span><a href="#local-6989586621679555866"><span class="hs-identifier hs-var">fads</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-693"></span><span>          </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679555862"><span class="annot"><a href="#local-6989586621679555862"><span class="hs-identifier hs-var">pvc</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">ProtVer
</span><a href="#local-6989586621679555862"><span class="hs-identifier hs-var">pvc</span></a></span><span> </span><span class="annot"><span class="annottext">ProtVer -&gt; ProtVer -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="annottext">ProtVer
</span><a href="#local-6989586621679555864"><span class="hs-identifier hs-var">bv</span></a></span><span>
</span><span id="line-694"></span><span>            </span><span class="hs-keyword">then</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Slot
</span><a href="#local-6989586621679555865"><span class="hs-identifier hs-var">sn</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ProtVer
</span><a href="#local-6989586621679555864"><span class="hs-identifier hs-var">bv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PParams
</span><a href="#local-6989586621679555863"><span class="hs-identifier hs-var">ppsc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Slot, (ProtVer, PParams))
-&gt; [(Slot, (ProtVer, PParams))] -&gt; [(Slot, (ProtVer, PParams))]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[(Slot, (ProtVer, PParams))]
State FADS
</span><a href="#local-6989586621679555866"><span class="hs-identifier hs-var">fads</span></a></span><span>
</span><span id="line-695"></span><span>            </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">[(Slot, (ProtVer, PParams))]
State FADS
</span><a href="#local-6989586621679555866"><span class="hs-identifier hs-var">fads</span></a></span><span>
</span><span id="line-696"></span><span>          </span><span class="annot"><span class="annottext">State FADS
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Slot
</span><a href="#local-6989586621679555865"><span class="hs-identifier hs-var">sn</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ProtVer
</span><a href="#local-6989586621679555864"><span class="hs-identifier hs-var">bv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PParams
</span><a href="#local-6989586621679555863"><span class="hs-identifier hs-var">ppsc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Slot, (ProtVer, PParams))
-&gt; [(Slot, (ProtVer, PParams))] -&gt; [(Slot, (ProtVer, PParams))]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[(Slot, (ProtVer, PParams))]
State FADS
</span><a href="#local-6989586621679555866"><span class="hs-identifier hs-var">fads</span></a></span><span>
</span><span id="line-697"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-698"></span><span>
</span><span id="line-699"></span><span id="local-6989586621679555860"><span id="local-6989586621679555861"></span></span><span class="hs-keyword">data</span><span> </span><span id="UPEND"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPEND"><span class="hs-identifier hs-var">UPEND</span></a></span></span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(forall x. UPEND -&gt; Rep UPEND x)
-&gt; (forall x. Rep UPEND x -&gt; UPEND) -&gt; Generic UPEND
forall x. Rep UPEND x -&gt; UPEND
forall x. UPEND -&gt; Rep UPEND x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep UPEND x -&gt; UPEND
$cfrom :: forall x. UPEND -&gt; Rep UPEND x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">,</span><span> </span><span id="%24tUPEND"><span id="local-6989586621679555829"><span id="local-6989586621679555831"><span id="local-6989586621679555833"><span id="local-6989586621679555835"><span id="local-6989586621679555837"><span id="local-6989586621679555839"><span id="local-6989586621679555841"><span id="local-6989586621679555843"><span id="local-6989586621679555845"><span id="local-6989586621679555847"><span id="local-6989586621679555849"><span id="local-6989586621679555851"><span id="local-6989586621679555853"><span id="local-6989586621679555855"><span class="annot"><span class="annottext">Typeable UPEND
DataType
Typeable UPEND
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; UPEND -&gt; c UPEND)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UPEND)
-&gt; (UPEND -&gt; Constr)
-&gt; (UPEND -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UPEND))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c UPEND))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; UPEND -&gt; UPEND)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPEND -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPEND -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; UPEND -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UPEND -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; UPEND -&gt; m UPEND)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; UPEND -&gt; m UPEND)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; UPEND -&gt; m UPEND)
-&gt; Data UPEND
UPEND -&gt; DataType
UPEND -&gt; Constr
(forall b. Data b =&gt; b -&gt; b) -&gt; UPEND -&gt; UPEND
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; UPEND -&gt; c UPEND
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UPEND
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UPEND -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; UPEND -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPEND -&gt; r
forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPEND -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UPEND -&gt; m UPEND
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UPEND -&gt; m UPEND
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UPEND
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; UPEND -&gt; c UPEND
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UPEND)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c UPEND)
$tUPEND :: DataType
gmapMo :: (forall d. Data d =&gt; d -&gt; m d) -&gt; UPEND -&gt; m UPEND
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UPEND -&gt; m UPEND
gmapMp :: (forall d. Data d =&gt; d -&gt; m d) -&gt; UPEND -&gt; m UPEND
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UPEND -&gt; m UPEND
gmapM :: (forall d. Data d =&gt; d -&gt; m d) -&gt; UPEND -&gt; m UPEND
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UPEND -&gt; m UPEND
gmapQi :: Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UPEND -&gt; u
$cgmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UPEND -&gt; u
gmapQ :: (forall d. Data d =&gt; d -&gt; u) -&gt; UPEND -&gt; [u]
$cgmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; UPEND -&gt; [u]
gmapQr :: (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPEND -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPEND -&gt; r
gmapQl :: (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPEND -&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPEND -&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; UPEND -&gt; UPEND
$cgmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; UPEND -&gt; UPEND
dataCast2 :: (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c UPEND)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c UPEND)
dataCast1 :: (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UPEND)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UPEND)
dataTypeOf :: UPEND -&gt; DataType
$cdataTypeOf :: UPEND -&gt; DataType
toConstr :: UPEND -&gt; Constr
$ctoConstr :: UPEND -&gt; Constr
gunfold :: (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UPEND
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UPEND
gfoldl :: (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; UPEND -&gt; c UPEND
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; UPEND -&gt; c UPEND
$cp1Data :: Typeable UPEND
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">)</span><span>
</span><span id="line-700"></span><span>
</span><span id="line-701"></span><span class="hs-comment">-- | Find the key that corresponds to the value satisfying the given predicate.</span><span>
</span><span id="line-702"></span><span class="hs-comment">-- In case zero or more than one key is found this function returns Nothing.</span><span>
</span><span id="line-703"></span><span id="local-6989586621679558442"><span id="local-6989586621679558443"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#findKey"><span class="hs-identifier hs-type">findKey</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679558443"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="#local-6989586621679558442"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679558443"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679558442"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679558443"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-704"></span><span id="findKey"><span class="annot"><span class="annottext">findKey :: (v -&gt; Bool) -&gt; Map k v -&gt; Maybe (k, v)
</span><a href="Byron.Spec.Ledger.Update.html#findKey"><span class="hs-identifier hs-var hs-var">findKey</span></a></span></span><span> </span><span id="local-6989586621679555826"><span class="annot"><span class="annottext">v -&gt; Bool
</span><a href="#local-6989586621679555826"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621679555825"><span class="annot"><span class="annottext">Map k v
</span><a href="#local-6989586621679555825"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-705"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Map k v -&gt; [(k, v)]
forall k a. Map k a -&gt; [(k, a)]
</span><span class="hs-identifier hs-var">Map.toList</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(v -&gt; Bool) -&gt; Map k v -&gt; Map k v
forall a k. (a -&gt; Bool) -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.filter</span></span><span> </span><span class="annot"><span class="annottext">v -&gt; Bool
</span><a href="#local-6989586621679555826"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Map k v
</span><a href="#local-6989586621679555825"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-706"></span><span>    </span><span class="hs-special">[</span><span class="hs-special">(</span><span id="local-6989586621679555823"><span class="annot"><span class="annottext">k
</span><a href="#local-6989586621679555823"><span class="hs-identifier hs-var">k</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555822"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621679555822"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(k, v) -&gt; Maybe (k, v)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">k
</span><a href="#local-6989586621679555823"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621679555822"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-707"></span><span>    </span><span class="annot"><span class="annottext">[(k, v)]
</span><span class="hs-identifier">_</span></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (k, v)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-708"></span><span>
</span><span id="line-709"></span><span class="hs-comment">-- | `S_TryNextRule` is a structural `PredicateFailure`, used to fail from</span><span>
</span><span id="line-710"></span><span class="hs-comment">-- one transition rule to the other. The other `PredicateFailure`s are all</span><span>
</span><span id="line-711"></span><span class="hs-comment">-- throwable.</span><span>
</span><span id="line-712"></span><span id="local-6989586621679555820"><span id="local-6989586621679555821"></span></span><span class="hs-keyword">data</span><span> </span><span id="UpendPredicateFailure"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpendPredicateFailure"><span class="hs-identifier hs-var">UpendPredicateFailure</span></a></span></span><span>
</span><span id="line-713"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="ProtVerUnknown"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ProtVerUnknown"><span class="hs-identifier hs-var">ProtVerUnknown</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ProtVer"><span class="hs-identifier hs-type">ProtVer</span></a></span><span>
</span><span id="line-714"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="S_TryNextRule"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#S_TryNextRule"><span class="hs-identifier hs-var">S_TryNextRule</span></a></span></span><span>
</span><span id="line-715"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="CanAdopt"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#CanAdopt"><span class="hs-identifier hs-var">CanAdopt</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ProtVer"><span class="hs-identifier hs-type">ProtVer</span></a></span><span>
</span><span id="line-716"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="CannotAdopt"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#CannotAdopt"><span class="hs-identifier hs-var">CannotAdopt</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ProtVer"><span class="hs-identifier hs-type">ProtVer</span></a></span><span>
</span><span id="line-717"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="NotADelegate"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#NotADelegate"><span class="hs-identifier hs-var">NotADelegate</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier hs-type">VKey</span></a></span><span>
</span><span id="line-718"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="UnconfirmedProposal"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UnconfirmedProposal"><span class="hs-identifier hs-var">UnconfirmedProposal</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpId"><span class="hs-identifier hs-type">UpId</span></a></span><span>
</span><span id="line-719"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679555810"><span id="local-6989586621679555812"><span class="annot"><span class="annottext">UpendPredicateFailure -&gt; UpendPredicateFailure -&gt; Bool
(UpendPredicateFailure -&gt; UpendPredicateFailure -&gt; Bool)
-&gt; (UpendPredicateFailure -&gt; UpendPredicateFailure -&gt; Bool)
-&gt; Eq UpendPredicateFailure
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: UpendPredicateFailure -&gt; UpendPredicateFailure -&gt; Bool
$c/= :: UpendPredicateFailure -&gt; UpendPredicateFailure -&gt; Bool
== :: UpendPredicateFailure -&gt; UpendPredicateFailure -&gt; Bool
$c== :: UpendPredicateFailure -&gt; UpendPredicateFailure -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555804"><span id="local-6989586621679555806"><span id="local-6989586621679555808"><span class="annot"><span class="annottext">Int -&gt; UpendPredicateFailure -&gt; ShowS
[UpendPredicateFailure] -&gt; ShowS
UpendPredicateFailure -&gt; String
(Int -&gt; UpendPredicateFailure -&gt; ShowS)
-&gt; (UpendPredicateFailure -&gt; String)
-&gt; ([UpendPredicateFailure] -&gt; ShowS)
-&gt; Show UpendPredicateFailure
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [UpendPredicateFailure] -&gt; ShowS
$cshowList :: [UpendPredicateFailure] -&gt; ShowS
show :: UpendPredicateFailure -&gt; String
$cshow :: UpendPredicateFailure -&gt; String
showsPrec :: Int -&gt; UpendPredicateFailure -&gt; ShowS
$cshowsPrec :: Int -&gt; UpendPredicateFailure -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="%24cUnconfirmedProposal"><span id="%24cNotADelegate"><span id="%24cCannotAdopt"><span id="%24cCanAdopt"><span id="%24cS_TryNextRule"><span id="%24cProtVerUnknown"><span id="%24tUpendPredicateFailure"><span id="local-6989586621679555775"><span id="local-6989586621679555777"><span id="local-6989586621679555779"><span id="local-6989586621679555781"><span id="local-6989586621679555783"><span id="local-6989586621679555785"><span id="local-6989586621679555787"><span id="local-6989586621679555789"><span id="local-6989586621679555791"><span id="local-6989586621679555793"><span id="local-6989586621679555795"><span id="local-6989586621679555797"><span id="local-6989586621679555799"><span id="local-6989586621679555801"><span class="annot"><span class="annottext">Typeable UpendPredicateFailure
DataType
Constr
Typeable UpendPredicateFailure
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g)
    -&gt; UpendPredicateFailure
    -&gt; c UpendPredicateFailure)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UpendPredicateFailure)
-&gt; (UpendPredicateFailure -&gt; Constr)
-&gt; (UpendPredicateFailure -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UpendPredicateFailure))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e))
    -&gt; Maybe (c UpendPredicateFailure))
-&gt; ((forall b. Data b =&gt; b -&gt; b)
    -&gt; UpendPredicateFailure -&gt; UpendPredicateFailure)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r
    -&gt; (forall d. Data d =&gt; d -&gt; r')
    -&gt; UpendPredicateFailure
    -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r
    -&gt; (forall d. Data d =&gt; d -&gt; r')
    -&gt; UpendPredicateFailure
    -&gt; r)
-&gt; (forall u.
    (forall d. Data d =&gt; d -&gt; u) -&gt; UpendPredicateFailure -&gt; [u])
-&gt; (forall u.
    Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UpendPredicateFailure -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; UpendPredicateFailure -&gt; m UpendPredicateFailure)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; UpendPredicateFailure -&gt; m UpendPredicateFailure)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; UpendPredicateFailure -&gt; m UpendPredicateFailure)
-&gt; Data UpendPredicateFailure
UpendPredicateFailure -&gt; DataType
UpendPredicateFailure -&gt; Constr
(forall b. Data b =&gt; b -&gt; b)
-&gt; UpendPredicateFailure -&gt; UpendPredicateFailure
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; UpendPredicateFailure
-&gt; c UpendPredicateFailure
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UpendPredicateFailure
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u.
Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UpendPredicateFailure -&gt; u
forall u.
(forall d. Data d =&gt; d -&gt; u) -&gt; UpendPredicateFailure -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UpendPredicateFailure -&gt; r
forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UpendPredicateFailure -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; UpendPredicateFailure -&gt; m UpendPredicateFailure
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; UpendPredicateFailure -&gt; m UpendPredicateFailure
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UpendPredicateFailure
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; UpendPredicateFailure
-&gt; c UpendPredicateFailure
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UpendPredicateFailure)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c UpendPredicateFailure)
$cUnconfirmedProposal :: Constr
$cNotADelegate :: Constr
$cCannotAdopt :: Constr
$cCanAdopt :: Constr
$cS_TryNextRule :: Constr
$cProtVerUnknown :: Constr
$tUpendPredicateFailure :: DataType
gmapMo :: (forall d. Data d =&gt; d -&gt; m d)
-&gt; UpendPredicateFailure -&gt; m UpendPredicateFailure
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; UpendPredicateFailure -&gt; m UpendPredicateFailure
gmapMp :: (forall d. Data d =&gt; d -&gt; m d)
-&gt; UpendPredicateFailure -&gt; m UpendPredicateFailure
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; UpendPredicateFailure -&gt; m UpendPredicateFailure
gmapM :: (forall d. Data d =&gt; d -&gt; m d)
-&gt; UpendPredicateFailure -&gt; m UpendPredicateFailure
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; UpendPredicateFailure -&gt; m UpendPredicateFailure
gmapQi :: Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UpendPredicateFailure -&gt; u
$cgmapQi :: forall u.
Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UpendPredicateFailure -&gt; u
gmapQ :: (forall d. Data d =&gt; d -&gt; u) -&gt; UpendPredicateFailure -&gt; [u]
$cgmapQ :: forall u.
(forall d. Data d =&gt; d -&gt; u) -&gt; UpendPredicateFailure -&gt; [u]
gmapQr :: (r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UpendPredicateFailure -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UpendPredicateFailure -&gt; r
gmapQl :: (r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UpendPredicateFailure -&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UpendPredicateFailure -&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b)
-&gt; UpendPredicateFailure -&gt; UpendPredicateFailure
$cgmapT :: (forall b. Data b =&gt; b -&gt; b)
-&gt; UpendPredicateFailure -&gt; UpendPredicateFailure
dataCast2 :: (forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c UpendPredicateFailure)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c UpendPredicateFailure)
dataCast1 :: (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UpendPredicateFailure)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UpendPredicateFailure)
dataTypeOf :: UpendPredicateFailure -&gt; DataType
$cdataTypeOf :: UpendPredicateFailure -&gt; DataType
toConstr :: UpendPredicateFailure -&gt; Constr
$ctoConstr :: UpendPredicateFailure -&gt; Constr
gunfold :: (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UpendPredicateFailure
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UpendPredicateFailure
gfoldl :: (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; UpendPredicateFailure
-&gt; c UpendPredicateFailure
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; UpendPredicateFailure
-&gt; c UpendPredicateFailure
$cp1Data :: Typeable UpendPredicateFailure
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. UpendPredicateFailure -&gt; Rep UpendPredicateFailure x)
-&gt; (forall x. Rep UpendPredicateFailure x -&gt; UpendPredicateFailure)
-&gt; Generic UpendPredicateFailure
forall x. Rep UpendPredicateFailure x -&gt; UpendPredicateFailure
forall x. UpendPredicateFailure -&gt; Rep UpendPredicateFailure x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep UpendPredicateFailure x -&gt; UpendPredicateFailure
$cfrom :: forall x. UpendPredicateFailure -&gt; Rep UpendPredicateFailure x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555760"><span id="local-6989586621679555762"><span id="local-6989586621679555764"><span class="annot"><span class="annottext">Context -&gt; UpendPredicateFailure -&gt; IO (Maybe ThunkInfo)
Proxy UpendPredicateFailure -&gt; String
(Context -&gt; UpendPredicateFailure -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; UpendPredicateFailure -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy UpendPredicateFailure -&gt; String)
-&gt; NoThunks UpendPredicateFailure
forall a.
(Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy a -&gt; String)
-&gt; NoThunks a
showTypeOf :: Proxy UpendPredicateFailure -&gt; String
$cshowTypeOf :: Proxy UpendPredicateFailure -&gt; String
wNoThunks :: Context -&gt; UpendPredicateFailure -&gt; IO (Maybe ThunkInfo)
$cwNoThunks :: Context -&gt; UpendPredicateFailure -&gt; IO (Maybe ThunkInfo)
noThunks :: Context -&gt; UpendPredicateFailure -&gt; IO (Maybe ThunkInfo)
$cnoThunks :: Context -&gt; UpendPredicateFailure -&gt; IO (Maybe ThunkInfo)
</span><a href="#local-6989586621679555760"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">NoThunks</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-720"></span><span>
</span><span id="line-721"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679555750"><span id="local-6989586621679555752"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">STS</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPEND"><span class="hs-identifier hs-type">UPEND</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-722"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Environment"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">Environment</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPEND"><span class="hs-identifier hs-type">UPEND</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-723"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Slot"><span class="hs-identifier hs-type">Core.Slot</span></a></span><span>                    </span><span class="hs-comment">-- Current slot number</span><span>
</span><span id="line-724"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Natural</span></span><span>                      </span><span class="hs-comment">-- Adoption threshold</span><span>
</span><span id="line-725"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bimap</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">VKeyGenesis</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier hs-type">VKey</span></a></span><span>       </span><span class="hs-comment">-- Delegation map</span><span>
</span><span id="line-726"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpId"><span class="hs-identifier hs-type">UpId</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Slot"><span class="hs-identifier hs-type">Core.Slot</span></a></span><span>           </span><span class="hs-comment">-- Confirmed proposals</span><span>
</span><span id="line-727"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpId"><span class="hs-identifier hs-type">UpId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ProtVer"><span class="hs-identifier hs-type">ProtVer</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#PParams"><span class="hs-identifier hs-type">PParams</span></a></span><span class="hs-special">)</span><span>  </span><span class="hs-comment">-- Registered update proposals</span><span>
</span><span id="line-728"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#BlockCount"><span class="hs-identifier hs-type">BlockCount</span></a></span><span>                   </span><span class="hs-comment">-- Chain stability parameter. This</span><span>
</span><span id="line-729"></span><span>                                   </span><span class="hs-comment">-- is deemed to be a global</span><span>
</span><span id="line-730"></span><span>                                   </span><span class="hs-comment">-- constant that we temporarily put</span><span>
</span><span id="line-731"></span><span>                                   </span><span class="hs-comment">-- there.</span><span>
</span><span id="line-732"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-733"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="State"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">State</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPEND"><span class="hs-identifier hs-type">UPEND</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-734"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Slot"><span class="hs-identifier hs-type">Core.Slot</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ProtVer"><span class="hs-identifier hs-type">ProtVer</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#PParams"><span class="hs-identifier hs-type">PParams</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-735"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ProtVer"><span class="hs-identifier hs-type">ProtVer</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">Core.VKeyGenesis</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-736"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-737"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Signal"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">Signal</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPEND"><span class="hs-identifier hs-type">UPEND</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ProtVer"><span class="hs-identifier hs-type">ProtVer</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier hs-type">Core.VKey</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-738"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="PredicateFailure"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">PredicateFailure</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPEND"><span class="hs-identifier hs-type">UPEND</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpendPredicateFailure"><span class="hs-identifier hs-type">UpendPredicateFailure</span></a></span><span>
</span><span id="line-739"></span><span>
</span><span id="line-740"></span><span>  </span><span id="local-6989586621679555749"><span class="annot"><span class="annottext">initialRules :: [InitialRule UPEND]
</span><a href="#local-6989586621679555749"><span class="hs-identifier hs-var hs-var hs-var hs-var">initialRules</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-741"></span><span>  </span><span id="local-6989586621679555748"><span class="annot"><span class="annottext">transitionRules :: [TransitionRule UPEND]
</span><a href="#local-6989586621679555748"><span class="hs-identifier hs-var hs-var hs-var hs-var">transitionRules</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-742"></span><span>    </span><span class="hs-special">[</span><span>
</span><span id="line-743"></span><span>      </span><span class="hs-keyword">do</span><span>
</span><span id="line-744"></span><span>        </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">TRC</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679555747"><span class="annot"><a href="#local-6989586621679555747"><span class="hs-identifier hs-var">sn</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555746"><span class="annot"><a href="#local-6989586621679555746"><span class="hs-identifier hs-var">_t</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555745"><span class="annot"><a href="#local-6989586621679555745"><span class="hs-identifier hs-var">_dms</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555744"><span class="annot"><a href="#local-6989586621679555744"><span class="hs-identifier hs-var">cps</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555743"><span class="annot"><a href="#local-6989586621679555743"><span class="hs-identifier hs-var">rpus</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555742"><span class="annot"><a href="#local-6989586621679555742"><span class="hs-identifier hs-var">k</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-745"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679555741"><span class="annot"><a href="#local-6989586621679555741"><span class="hs-identifier hs-var">fads</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555740"><span class="annot"><a href="#local-6989586621679555740"><span class="hs-identifier hs-var">bvs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-746"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679555739"><span class="annot"><a href="#local-6989586621679555739"><span class="hs-identifier hs-var">bv</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555738"><span class="annot"><a href="#local-6989586621679555738"><span class="hs-identifier hs-var">_vk</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-747"></span><span>            </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">F (Clause UPEND 'Transition) (TRC UPEND)
forall sts (rtype :: RuleType).
Rule sts rtype (RuleContext rtype sts)
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">judgmentContext</span></a></span><span>
</span><span id="line-748"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">((ProtVer, PParams) -&gt; Bool)
-&gt; Map UpId (ProtVer, PParams) -&gt; Maybe (UpId, (ProtVer, PParams))
forall v k. (v -&gt; Bool) -&gt; Map k v -&gt; Maybe (k, v)
</span><a href="Byron.Spec.Ledger.Update.html#findKey"><span class="hs-identifier hs-var">findKey</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">ProtVer -&gt; ProtVer -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">ProtVer
</span><a href="#local-6989586621679555739"><span class="hs-identifier hs-var">bv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(ProtVer -&gt; Bool)
-&gt; ((ProtVer, PParams) -&gt; ProtVer) -&gt; (ProtVer, PParams) -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(ProtVer, PParams) -&gt; ProtVer
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map UpId (ProtVer, PParams)
</span><a href="#local-6989586621679555743"><span class="hs-identifier hs-var">rpus</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-749"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679555737"><span class="annot"><span class="annottext">UpId
</span><a href="#local-6989586621679555737"><span class="hs-identifier hs-var">pid</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(ProtVer, PParams)
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-750"></span><span>            </span><span class="hs-comment">-- If we found the proposal id that corresponds to 'bv' then we</span><span>
</span><span id="line-751"></span><span>            </span><span class="hs-comment">-- have to check that it isn't confirmed for this rule to succeed.</span><span>
</span><span id="line-752"></span><span>            </span><span class="annot"><span class="annottext">UpId
</span><a href="#local-6989586621679555737"><span class="hs-identifier hs-var">pid</span></a></span><span> </span><span class="annot"><span class="annottext">UpId -&gt; Set UpId -&gt; Bool
forall a (f :: * -&gt; *). (Eq a, Foldable f) =&gt; a -&gt; f a -&gt; Bool
</span><a href="Byron.Spec.Ledger.Core.html#%2209"><span class="hs-operator hs-var">&#8713;</span></a></span><span> </span><span class="annot"><span class="annottext">Map UpId Slot -&gt; Set (Domain (Map UpId Slot))
forall m. (Relation m, Ord (Domain m)) =&gt; m -&gt; Set (Domain m)
</span><a href="Byron.Spec.Ledger.Core.html#dom"><span class="hs-identifier hs-var">dom</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map UpId Slot
</span><a href="#local-6989586621679555744"><span class="hs-identifier hs-var">cps</span></a></span><span> </span><span class="annot"><span class="annottext">Map UpId Slot -&gt; Range (Map UpId Slot) -&gt; Map UpId Slot
forall m. (Relation m, Ord (Range m)) =&gt; m -&gt; Range m -&gt; m
</span><a href="Byron.Spec.Ledger.Core.html#%25B7%3C%3D"><span class="hs-operator hs-var">&#9655;&lt;=</span></a></span><span> </span><span class="annot"><span class="annottext">Slot
</span><a href="#local-6989586621679555747"><span class="hs-identifier hs-var">sn</span></a></span><span>  </span><span class="annot"><span class="annottext">Slot -&gt; SlotCount -&gt; Slot
</span><a href="Byron.Spec.Ledger.Core.html#-."><span class="hs-operator hs-var">-.</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; BlockCount -&gt; SlotCount
</span><a href="Byron.Spec.Ledger.Core.html#%2A."><span class="hs-operator hs-var">*.</span></a></span><span> </span><span class="annot"><span class="annottext">BlockCount
</span><a href="#local-6989586621679555742"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; PredicateFailure UPEND -&gt; Rule UPEND 'Transition ()
forall sts (ctx :: RuleType).
Bool -&gt; PredicateFailure sts -&gt; Rule sts ctx ()
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-operator hs-var">?!</span></a></span><span> </span><span class="annot"><span class="annottext">PredicateFailure UPEND
UpendPredicateFailure
</span><a href="Byron.Spec.Ledger.Update.html#S_TryNextRule"><span class="hs-identifier hs-var">S_TryNextRule</span></a></span><span>
</span><span id="line-753"></span><span>            </span><span class="annot"><span class="annottext">([(Slot, (ProtVer, PParams))], Set (ProtVer, VKeyGenesis))
-&gt; F (Clause UPEND 'Transition)
     ([(Slot, (ProtVer, PParams))], Set (ProtVer, VKeyGenesis))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(([(Slot, (ProtVer, PParams))], Set (ProtVer, VKeyGenesis))
 -&gt; F (Clause UPEND 'Transition)
      ([(Slot, (ProtVer, PParams))], Set (ProtVer, VKeyGenesis)))
-&gt; ([(Slot, (ProtVer, PParams))], Set (ProtVer, VKeyGenesis))
-&gt; F (Clause UPEND 'Transition)
     ([(Slot, (ProtVer, PParams))], Set (ProtVer, VKeyGenesis))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(Slot, (ProtVer, PParams))]
</span><a href="#local-6989586621679555741"><span class="hs-identifier hs-var">fads</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Set (ProtVer, VKeyGenesis)
</span><a href="#local-6989586621679555740"><span class="hs-identifier hs-var">bvs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-754"></span><span>          </span><span class="annot"><span class="annottext">Maybe (UpId, (ProtVer, PParams))
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-755"></span><span>            </span><span class="hs-comment">-- If we didn't find the proposal id that corresponds to 'bv' then</span><span>
</span><span id="line-756"></span><span>            </span><span class="hs-comment">-- this rule succeeds.</span><span>
</span><span id="line-757"></span><span>            </span><span class="hs-comment">--</span><span>
</span><span id="line-758"></span><span>            </span><span class="hs-comment">-- Note that the difference w.r.t. the case above is that this case</span><span>
</span><span id="line-759"></span><span>            </span><span class="hs-comment">-- will succeed, whereas the case above can cause a predicate</span><span>
</span><span id="line-760"></span><span>            </span><span class="hs-comment">-- failure if the condition of the '!?' operator is not met. Since</span><span>
</span><span id="line-761"></span><span>            </span><span class="hs-comment">-- even on failure we _need_ to return a state, the case above also</span><span>
</span><span id="line-762"></span><span>            </span><span class="hs-comment">-- returns the state unchanged in this case.</span><span>
</span><span id="line-763"></span><span>            </span><span class="annot"><span class="annottext">([(Slot, (ProtVer, PParams))], Set (ProtVer, VKeyGenesis))
-&gt; F (Clause UPEND 'Transition)
     ([(Slot, (ProtVer, PParams))], Set (ProtVer, VKeyGenesis))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(([(Slot, (ProtVer, PParams))], Set (ProtVer, VKeyGenesis))
 -&gt; F (Clause UPEND 'Transition)
      ([(Slot, (ProtVer, PParams))], Set (ProtVer, VKeyGenesis)))
-&gt; ([(Slot, (ProtVer, PParams))], Set (ProtVer, VKeyGenesis))
-&gt; F (Clause UPEND 'Transition)
     ([(Slot, (ProtVer, PParams))], Set (ProtVer, VKeyGenesis))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(Slot, (ProtVer, PParams))]
</span><a href="#local-6989586621679555741"><span class="hs-identifier hs-var">fads</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Set (ProtVer, VKeyGenesis)
</span><a href="#local-6989586621679555740"><span class="hs-identifier hs-var">bvs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-764"></span><span>
</span><span id="line-765"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-766"></span><span>        </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">TRC</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679555736"><span class="annot"><a href="#local-6989586621679555736"><span class="hs-identifier hs-var">sn</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555735"><span class="annot"><a href="#local-6989586621679555735"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555734"><span class="annot"><a href="#local-6989586621679555734"><span class="hs-identifier hs-var">dms</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555733"><span class="annot"><a href="#local-6989586621679555733"><span class="hs-identifier hs-var">cps</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555732"><span class="annot"><a href="#local-6989586621679555732"><span class="hs-identifier hs-var">rpus</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555731"><span class="annot"><a href="#local-6989586621679555731"><span class="hs-identifier hs-var">k</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-767"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679555730"><span class="annot"><a href="#local-6989586621679555730"><span class="hs-identifier hs-var">fads</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555729"><span class="annot"><a href="#local-6989586621679555729"><span class="hs-identifier hs-var">bvs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-768"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679555728"><span class="annot"><a href="#local-6989586621679555728"><span class="hs-identifier hs-var">bv</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555727"><span class="annot"><a href="#local-6989586621679555727"><span class="hs-identifier hs-var">vk</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-769"></span><span>            </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">F (Clause UPEND 'Transition) (TRC UPEND)
forall sts (rtype :: RuleType).
Rule sts rtype (RuleContext rtype sts)
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">judgmentContext</span></a></span><span>
</span><span id="line-770"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">VKey -&gt; Bimap VKeyGenesis VKey -&gt; Maybe VKeyGenesis
forall a b (m :: * -&gt; *).
(Ord a, Ord b, MonadThrow m) =&gt;
b -&gt; Bimap a b -&gt; m a
</span><span class="hs-identifier hs-var">lookupR</span></span><span> </span><span class="annot"><span class="annottext">VKey
</span><a href="#local-6989586621679555727"><span class="hs-identifier hs-var">vk</span></a></span><span> </span><span class="annot"><span class="annottext">Bimap VKeyGenesis VKey
</span><a href="#local-6989586621679555734"><span class="hs-identifier hs-var">dms</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-771"></span><span>          </span><span class="annot"><span class="annottext">Maybe VKeyGenesis
</span><span class="hs-identifier hs-var">Nothing</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-772"></span><span>            </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; PredicateFailure UPEND -&gt; Rule UPEND 'Transition ()
forall sts (ctx :: RuleType).
Bool -&gt; PredicateFailure sts -&gt; Rule sts ctx ()
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-operator hs-var">?!</span></a></span><span> </span><span class="annot"><span class="annottext">PredicateFailure UPEND
UpendPredicateFailure
</span><a href="Byron.Spec.Ledger.Update.html#S_TryNextRule"><span class="hs-identifier hs-var">S_TryNextRule</span></a></span><span>
</span><span id="line-773"></span><span>            </span><span class="annot"><span class="annottext">([(Slot, (ProtVer, PParams))], Set (ProtVer, VKeyGenesis))
-&gt; F (Clause UPEND 'Transition)
     ([(Slot, (ProtVer, PParams))], Set (ProtVer, VKeyGenesis))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(([(Slot, (ProtVer, PParams))], Set (ProtVer, VKeyGenesis))
 -&gt; F (Clause UPEND 'Transition)
      ([(Slot, (ProtVer, PParams))], Set (ProtVer, VKeyGenesis)))
-&gt; ([(Slot, (ProtVer, PParams))], Set (ProtVer, VKeyGenesis))
-&gt; F (Clause UPEND 'Transition)
     ([(Slot, (ProtVer, PParams))], Set (ProtVer, VKeyGenesis))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(Slot, (ProtVer, PParams))]
</span><a href="#local-6989586621679555730"><span class="hs-identifier hs-var">fads</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Set (ProtVer, VKeyGenesis)
</span><a href="#local-6989586621679555729"><span class="hs-identifier hs-var">bvs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-774"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679555726"><span class="annot"><span class="annottext">VKeyGenesis
</span><a href="#local-6989586621679555726"><span class="hs-identifier hs-var">vks</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-775"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679555725"><span class="annot"><span class="annottext">bvs' :: Set (ProtVer, VKeyGenesis)
</span><a href="#local-6989586621679555725"><span class="hs-identifier hs-var hs-var">bvs'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set (ProtVer, VKeyGenesis)
</span><a href="#local-6989586621679555729"><span class="hs-identifier hs-var">bvs</span></a></span><span> </span><span class="annot"><span class="annottext">Set (ProtVer, VKeyGenesis)
-&gt; Set (ProtVer, VKeyGenesis) -&gt; Set (ProtVer, VKeyGenesis)
forall m.
(Relation m, Ord (Domain m), Ord (Range m)) =&gt;
m -&gt; m -&gt; m
</span><a href="Byron.Spec.Ledger.Core.html#%222A"><span class="hs-operator hs-var">&#8746;</span></a></span><span> </span><span class="annot"><span class="annottext">Domain (Set (ProtVer, VKeyGenesis))
-&gt; Range (Set (ProtVer, VKeyGenesis)) -&gt; Set (ProtVer, VKeyGenesis)
forall m. Relation m =&gt; Domain m -&gt; Range m -&gt; m
</span><a href="Byron.Spec.Ledger.Core.html#singleton"><span class="hs-identifier hs-var">singleton</span></a></span><span> </span><span class="annot"><span class="annottext">Domain (Set (ProtVer, VKeyGenesis))
ProtVer
</span><a href="#local-6989586621679555728"><span class="hs-identifier hs-var">bv</span></a></span><span> </span><span class="annot"><span class="annottext">Range (Set (ProtVer, VKeyGenesis))
VKeyGenesis
</span><a href="#local-6989586621679555726"><span class="hs-identifier hs-var">vks</span></a></span><span>
</span><span id="line-776"></span><span>            </span><span class="annot"><span class="annottext">Set (ProtVer, VKeyGenesis) -&gt; Natural
forall m n. (Relation m, Integral n) =&gt; m -&gt; n
</span><a href="Byron.Spec.Ledger.Core.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><span class="annottext">ProtVer
</span><a href="#local-6989586621679555728"><span class="hs-identifier hs-var">bv</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[Domain (Set (ProtVer, VKeyGenesis))]
-&gt; Set (ProtVer, VKeyGenesis) -&gt; Set (ProtVer, VKeyGenesis)
forall m (f :: * -&gt; *).
(Relation m, Ord (Domain m), Foldable f) =&gt;
f (Domain m) -&gt; m -&gt; m
</span><a href="Byron.Spec.Ledger.Core.html#%25C1"><span class="hs-operator hs-var">&#9665;</span></a></span><span> </span><span class="annot"><span class="annottext">Set (ProtVer, VKeyGenesis)
</span><a href="#local-6989586621679555725"><span class="hs-identifier hs-var">bvs'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Natural -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679555735"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; PredicateFailure UPEND -&gt; Rule UPEND 'Transition ()
forall sts (ctx :: RuleType).
Bool -&gt; PredicateFailure sts -&gt; Rule sts ctx ()
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-operator hs-var">?!</span></a></span><span> </span><span class="annot"><span class="annottext">ProtVer -&gt; UpendPredicateFailure
</span><a href="Byron.Spec.Ledger.Update.html#CanAdopt"><span class="hs-identifier hs-var">CanAdopt</span></a></span><span> </span><span class="annot"><span class="annottext">ProtVer
</span><a href="#local-6989586621679555728"><span class="hs-identifier hs-var">bv</span></a></span><span>
</span><span id="line-777"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">((ProtVer, PParams) -&gt; Bool)
-&gt; Map UpId (ProtVer, PParams) -&gt; Maybe (UpId, (ProtVer, PParams))
forall v k. (v -&gt; Bool) -&gt; Map k v -&gt; Maybe (k, v)
</span><a href="Byron.Spec.Ledger.Update.html#findKey"><span class="hs-identifier hs-var">findKey</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">ProtVer -&gt; ProtVer -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">ProtVer
</span><a href="#local-6989586621679555728"><span class="hs-identifier hs-var">bv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(ProtVer -&gt; Bool)
-&gt; ((ProtVer, PParams) -&gt; ProtVer) -&gt; (ProtVer, PParams) -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(ProtVer, PParams) -&gt; ProtVer
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map UpId (ProtVer, PParams)
</span><a href="#local-6989586621679555732"><span class="hs-identifier hs-var">rpus</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-778"></span><span>              </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679555722"><span class="annot"><span class="annottext">UpId
</span><a href="#local-6989586621679555722"><span class="hs-identifier hs-var">pid</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(ProtVer, PParams)
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-779"></span><span>                </span><span class="annot"><span class="annottext">UpId
</span><a href="#local-6989586621679555722"><span class="hs-identifier hs-var">pid</span></a></span><span> </span><span class="annot"><span class="annottext">UpId -&gt; Set UpId -&gt; Bool
forall a (f :: * -&gt; *). (Eq a, Foldable f) =&gt; a -&gt; f a -&gt; Bool
</span><a href="Byron.Spec.Ledger.Core.html#%2208"><span class="hs-operator hs-var">&#8712;</span></a></span><span> </span><span class="annot"><span class="annottext">Map UpId Slot -&gt; Set (Domain (Map UpId Slot))
forall m. (Relation m, Ord (Domain m)) =&gt; m -&gt; Set (Domain m)
</span><a href="Byron.Spec.Ledger.Core.html#dom"><span class="hs-identifier hs-var">dom</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map UpId Slot
</span><a href="#local-6989586621679555733"><span class="hs-identifier hs-var">cps</span></a></span><span> </span><span class="annot"><span class="annottext">Map UpId Slot -&gt; Range (Map UpId Slot) -&gt; Map UpId Slot
forall m. (Relation m, Ord (Range m)) =&gt; m -&gt; Range m -&gt; m
</span><a href="Byron.Spec.Ledger.Core.html#%25B7%3C%3D"><span class="hs-operator hs-var">&#9655;&lt;=</span></a></span><span> </span><span class="annot"><span class="annottext">Slot
</span><a href="#local-6989586621679555736"><span class="hs-identifier hs-var">sn</span></a></span><span> </span><span class="annot"><span class="annottext">Slot -&gt; SlotCount -&gt; Slot
</span><a href="Byron.Spec.Ledger.Core.html#-."><span class="hs-operator hs-var">-.</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; BlockCount -&gt; SlotCount
</span><a href="Byron.Spec.Ledger.Core.html#%2A."><span class="hs-operator hs-var">*.</span></a></span><span> </span><span class="annot"><span class="annottext">BlockCount
</span><a href="#local-6989586621679555731"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; PredicateFailure UPEND -&gt; Rule UPEND 'Transition ()
forall sts (ctx :: RuleType).
Bool -&gt; PredicateFailure sts -&gt; Rule sts ctx ()
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-operator hs-var">?!</span></a></span><span> </span><span class="annot"><span class="annottext">PredicateFailure UPEND
UpendPredicateFailure
</span><a href="Byron.Spec.Ledger.Update.html#S_TryNextRule"><span class="hs-identifier hs-var">S_TryNextRule</span></a></span><span>
</span><span id="line-780"></span><span>                </span><span class="annot"><span class="annottext">([(Slot, (ProtVer, PParams))], Set (ProtVer, VKeyGenesis))
-&gt; F (Clause UPEND 'Transition)
     ([(Slot, (ProtVer, PParams))], Set (ProtVer, VKeyGenesis))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(([(Slot, (ProtVer, PParams))], Set (ProtVer, VKeyGenesis))
 -&gt; F (Clause UPEND 'Transition)
      ([(Slot, (ProtVer, PParams))], Set (ProtVer, VKeyGenesis)))
-&gt; ([(Slot, (ProtVer, PParams))], Set (ProtVer, VKeyGenesis))
-&gt; F (Clause UPEND 'Transition)
     ([(Slot, (ProtVer, PParams))], Set (ProtVer, VKeyGenesis))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(Slot, (ProtVer, PParams))]
</span><a href="#local-6989586621679555730"><span class="hs-identifier hs-var">fads</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Set (ProtVer, VKeyGenesis)
</span><a href="#local-6989586621679555725"><span class="hs-identifier hs-var">bvs'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-781"></span><span>              </span><span class="annot"><span class="annottext">Maybe (UpId, (ProtVer, PParams))
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-782"></span><span>                </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; PredicateFailure UPEND -&gt; Rule UPEND 'Transition ()
forall sts (ctx :: RuleType).
Bool -&gt; PredicateFailure sts -&gt; Rule sts ctx ()
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-operator hs-var">?!</span></a></span><span> </span><span class="annot"><span class="annottext">PredicateFailure UPEND
UpendPredicateFailure
</span><a href="Byron.Spec.Ledger.Update.html#S_TryNextRule"><span class="hs-identifier hs-var">S_TryNextRule</span></a></span><span>
</span><span id="line-783"></span><span>                </span><span class="annot"><span class="annottext">([(Slot, (ProtVer, PParams))], Set (ProtVer, VKeyGenesis))
-&gt; F (Clause UPEND 'Transition)
     ([(Slot, (ProtVer, PParams))], Set (ProtVer, VKeyGenesis))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(([(Slot, (ProtVer, PParams))], Set (ProtVer, VKeyGenesis))
 -&gt; F (Clause UPEND 'Transition)
      ([(Slot, (ProtVer, PParams))], Set (ProtVer, VKeyGenesis)))
-&gt; ([(Slot, (ProtVer, PParams))], Set (ProtVer, VKeyGenesis))
-&gt; F (Clause UPEND 'Transition)
     ([(Slot, (ProtVer, PParams))], Set (ProtVer, VKeyGenesis))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(Slot, (ProtVer, PParams))]
</span><a href="#local-6989586621679555730"><span class="hs-identifier hs-var">fads</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Set (ProtVer, VKeyGenesis)
</span><a href="#local-6989586621679555725"><span class="hs-identifier hs-var">bvs'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-784"></span><span>
</span><span id="line-785"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-786"></span><span>        </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">TRC</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679555721"><span class="annot"><a href="#local-6989586621679555721"><span class="hs-identifier hs-var">sn</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555720"><span class="annot"><a href="#local-6989586621679555720"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555719"><span class="annot"><a href="#local-6989586621679555719"><span class="hs-identifier hs-var">dms</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555718"><span class="annot"><a href="#local-6989586621679555718"><span class="hs-identifier hs-var">cps</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555717"><span class="annot"><a href="#local-6989586621679555717"><span class="hs-identifier hs-var">rpus</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555716"><span class="annot"><a href="#local-6989586621679555716"><span class="hs-identifier hs-var">k</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-787"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679555715"><span class="annot"><a href="#local-6989586621679555715"><span class="hs-identifier hs-var">fads</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555714"><span class="annot"><a href="#local-6989586621679555714"><span class="hs-identifier hs-var">bvs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-788"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679555713"><span class="annot"><a href="#local-6989586621679555713"><span class="hs-identifier hs-var">bv</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555712"><span class="annot"><a href="#local-6989586621679555712"><span class="hs-identifier hs-var">vk</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-789"></span><span>            </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">F (Clause UPEND 'Transition) (TRC UPEND)
forall sts (rtype :: RuleType).
Rule sts rtype (RuleContext rtype sts)
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">judgmentContext</span></a></span><span>
</span><span id="line-790"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">VKey -&gt; Bimap VKeyGenesis VKey -&gt; Maybe VKeyGenesis
forall a b (m :: * -&gt; *).
(Ord a, Ord b, MonadThrow m) =&gt;
b -&gt; Bimap a b -&gt; m a
</span><span class="hs-identifier hs-var">lookupR</span></span><span> </span><span class="annot"><span class="annottext">VKey
</span><a href="#local-6989586621679555712"><span class="hs-identifier hs-var">vk</span></a></span><span> </span><span class="annot"><span class="annottext">Bimap VKeyGenesis VKey
</span><a href="#local-6989586621679555719"><span class="hs-identifier hs-var">dms</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-791"></span><span>          </span><span class="annot"><span class="annottext">Maybe VKeyGenesis
</span><span class="hs-identifier hs-var">Nothing</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-792"></span><span>            </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; PredicateFailure UPEND -&gt; Rule UPEND 'Transition ()
forall sts (ctx :: RuleType).
Bool -&gt; PredicateFailure sts -&gt; Rule sts ctx ()
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-operator hs-var">?!</span></a></span><span> </span><span class="annot"><span class="annottext">VKey -&gt; UpendPredicateFailure
</span><a href="Byron.Spec.Ledger.Update.html#NotADelegate"><span class="hs-identifier hs-var">NotADelegate</span></a></span><span> </span><span class="annot"><span class="annottext">VKey
</span><a href="#local-6989586621679555712"><span class="hs-identifier hs-var">vk</span></a></span><span>
</span><span id="line-793"></span><span>            </span><span class="annot"><span class="annottext">([(Slot, (ProtVer, PParams))], Set (ProtVer, VKeyGenesis))
-&gt; F (Clause UPEND 'Transition)
     ([(Slot, (ProtVer, PParams))], Set (ProtVer, VKeyGenesis))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(([(Slot, (ProtVer, PParams))], Set (ProtVer, VKeyGenesis))
 -&gt; F (Clause UPEND 'Transition)
      ([(Slot, (ProtVer, PParams))], Set (ProtVer, VKeyGenesis)))
-&gt; ([(Slot, (ProtVer, PParams))], Set (ProtVer, VKeyGenesis))
-&gt; F (Clause UPEND 'Transition)
     ([(Slot, (ProtVer, PParams))], Set (ProtVer, VKeyGenesis))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(Slot, (ProtVer, PParams))]
</span><a href="#local-6989586621679555715"><span class="hs-identifier hs-var">fads</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Set (ProtVer, VKeyGenesis)
</span><a href="#local-6989586621679555714"><span class="hs-identifier hs-var">bvs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-794"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679555711"><span class="annot"><span class="annottext">VKeyGenesis
</span><a href="#local-6989586621679555711"><span class="hs-identifier hs-var">vks</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-795"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679555710"><span class="annot"><span class="annottext">bvs' :: Set (ProtVer, VKeyGenesis)
</span><a href="#local-6989586621679555710"><span class="hs-identifier hs-var hs-var">bvs'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set (ProtVer, VKeyGenesis)
</span><a href="#local-6989586621679555714"><span class="hs-identifier hs-var">bvs</span></a></span><span> </span><span class="annot"><span class="annottext">Set (ProtVer, VKeyGenesis)
-&gt; Set (ProtVer, VKeyGenesis) -&gt; Set (ProtVer, VKeyGenesis)
forall m.
(Relation m, Ord (Domain m), Ord (Range m)) =&gt;
m -&gt; m -&gt; m
</span><a href="Byron.Spec.Ledger.Core.html#%222A"><span class="hs-operator hs-var">&#8746;</span></a></span><span> </span><span class="annot"><span class="annottext">Domain (Set (ProtVer, VKeyGenesis))
-&gt; Range (Set (ProtVer, VKeyGenesis)) -&gt; Set (ProtVer, VKeyGenesis)
forall m. Relation m =&gt; Domain m -&gt; Range m -&gt; m
</span><a href="Byron.Spec.Ledger.Core.html#singleton"><span class="hs-identifier hs-var">singleton</span></a></span><span> </span><span class="annot"><span class="annottext">Domain (Set (ProtVer, VKeyGenesis))
ProtVer
</span><a href="#local-6989586621679555713"><span class="hs-identifier hs-var">bv</span></a></span><span> </span><span class="annot"><span class="annottext">Range (Set (ProtVer, VKeyGenesis))
VKeyGenesis
</span><a href="#local-6989586621679555711"><span class="hs-identifier hs-var">vks</span></a></span><span>
</span><span id="line-796"></span><span>            </span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679555720"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Natural -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;=</span></span><span> </span><span class="annot"><span class="annottext">Set (ProtVer, VKeyGenesis) -&gt; Natural
forall m n. (Relation m, Integral n) =&gt; m -&gt; n
</span><a href="Byron.Spec.Ledger.Core.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><span class="annottext">ProtVer
</span><a href="#local-6989586621679555713"><span class="hs-identifier hs-var">bv</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[Domain (Set (ProtVer, VKeyGenesis))]
-&gt; Set (ProtVer, VKeyGenesis) -&gt; Set (ProtVer, VKeyGenesis)
forall m (f :: * -&gt; *).
(Relation m, Ord (Domain m), Foldable f) =&gt;
f (Domain m) -&gt; m -&gt; m
</span><a href="Byron.Spec.Ledger.Core.html#%25C1"><span class="hs-operator hs-var">&#9665;</span></a></span><span> </span><span class="annot"><span class="annottext">Set (ProtVer, VKeyGenesis)
</span><a href="#local-6989586621679555710"><span class="hs-identifier hs-var">bvs'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; PredicateFailure UPEND -&gt; Rule UPEND 'Transition ()
forall sts (ctx :: RuleType).
Bool -&gt; PredicateFailure sts -&gt; Rule sts ctx ()
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-operator hs-var">?!</span></a></span><span> </span><span class="annot"><span class="annottext">ProtVer -&gt; UpendPredicateFailure
</span><a href="Byron.Spec.Ledger.Update.html#CannotAdopt"><span class="hs-identifier hs-var">CannotAdopt</span></a></span><span> </span><span class="annot"><span class="annottext">ProtVer
</span><a href="#local-6989586621679555713"><span class="hs-identifier hs-var">bv</span></a></span><span>
</span><span id="line-797"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">((ProtVer, PParams) -&gt; Bool)
-&gt; Map UpId (ProtVer, PParams) -&gt; Maybe (UpId, (ProtVer, PParams))
forall v k. (v -&gt; Bool) -&gt; Map k v -&gt; Maybe (k, v)
</span><a href="Byron.Spec.Ledger.Update.html#findKey"><span class="hs-identifier hs-var">findKey</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">ProtVer -&gt; ProtVer -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">ProtVer
</span><a href="#local-6989586621679555713"><span class="hs-identifier hs-var">bv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(ProtVer -&gt; Bool)
-&gt; ((ProtVer, PParams) -&gt; ProtVer) -&gt; (ProtVer, PParams) -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(ProtVer, PParams) -&gt; ProtVer
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map UpId (ProtVer, PParams)
</span><a href="#local-6989586621679555717"><span class="hs-identifier hs-var">rpus</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-798"></span><span>              </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679555709"><span class="annot"><span class="annottext">UpId
</span><a href="#local-6989586621679555709"><span class="hs-identifier hs-var">pid</span></a></span></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ProtVer
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555708"><span class="annot"><span class="annottext">PParams
</span><a href="#local-6989586621679555708"><span class="hs-identifier hs-var">ppsc</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-799"></span><span>                </span><span class="annot"><span class="annottext">UpId
</span><a href="#local-6989586621679555709"><span class="hs-identifier hs-var">pid</span></a></span><span> </span><span class="annot"><span class="annottext">UpId -&gt; Set UpId -&gt; Bool
forall a (f :: * -&gt; *). (Eq a, Foldable f) =&gt; a -&gt; f a -&gt; Bool
</span><a href="Byron.Spec.Ledger.Core.html#%2208"><span class="hs-operator hs-var">&#8712;</span></a></span><span> </span><span class="annot"><span class="annottext">Map UpId Slot -&gt; Set (Domain (Map UpId Slot))
forall m. (Relation m, Ord (Domain m)) =&gt; m -&gt; Set (Domain m)
</span><a href="Byron.Spec.Ledger.Core.html#dom"><span class="hs-identifier hs-var">dom</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map UpId Slot
</span><a href="#local-6989586621679555718"><span class="hs-identifier hs-var">cps</span></a></span><span>  </span><span class="annot"><span class="annottext">Map UpId Slot -&gt; Range (Map UpId Slot) -&gt; Map UpId Slot
forall m. (Relation m, Ord (Range m)) =&gt; m -&gt; Range m -&gt; m
</span><a href="Byron.Spec.Ledger.Core.html#%25B7%3C%3D"><span class="hs-operator hs-var">&#9655;&lt;=</span></a></span><span> </span><span class="annot"><span class="annottext">Slot
</span><a href="#local-6989586621679555721"><span class="hs-identifier hs-var">sn</span></a></span><span> </span><span class="annot"><span class="annottext">Slot -&gt; SlotCount -&gt; Slot
</span><a href="Byron.Spec.Ledger.Core.html#-."><span class="hs-operator hs-var">-.</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; BlockCount -&gt; SlotCount
</span><a href="Byron.Spec.Ledger.Core.html#%2A."><span class="hs-operator hs-var">*.</span></a></span><span> </span><span class="annot"><span class="annottext">BlockCount
</span><a href="#local-6989586621679555716"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; PredicateFailure UPEND -&gt; Rule UPEND 'Transition ()
forall sts (ctx :: RuleType).
Bool -&gt; PredicateFailure sts -&gt; Rule sts ctx ()
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-operator hs-var">?!</span></a></span><span> </span><span class="annot"><span class="annottext">UpId -&gt; UpendPredicateFailure
</span><a href="Byron.Spec.Ledger.Update.html#UnconfirmedProposal"><span class="hs-identifier hs-var">UnconfirmedProposal</span></a></span><span> </span><span class="annot"><span class="annottext">UpId
</span><a href="#local-6989586621679555709"><span class="hs-identifier hs-var">pid</span></a></span><span>
</span><span id="line-800"></span><span>                </span><span id="local-6989586621679555707"><span class="annot"><span class="annottext">[(Slot, (ProtVer, PParams))]
</span><a href="#local-6989586621679555707"><span class="hs-identifier hs-var">fads'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall sub super (rtype :: RuleType).
Embed sub super =&gt;
RuleContext rtype sub -&gt; Rule super rtype (State sub)
forall super (rtype :: RuleType).
Embed FADS super =&gt;
RuleContext rtype FADS -&gt; Rule super rtype (State FADS)
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">trans</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#FADS"><span class="hs-identifier hs-type">FADS</span></a></span><span> </span><span class="annot"><span class="annottext">(RuleContext 'Transition FADS
 -&gt; Rule UPEND 'Transition (State FADS))
-&gt; RuleContext 'Transition FADS
-&gt; Rule UPEND 'Transition (State FADS)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Environment FADS, State FADS, Signal FADS) -&gt; TRC FADS
forall sts. (Environment sts, State sts, Signal sts) -&gt; TRC sts
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">TRC</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[(Slot, (ProtVer, PParams))]
State FADS
</span><a href="#local-6989586621679555715"><span class="hs-identifier hs-var">fads</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Slot
</span><a href="#local-6989586621679555721"><span class="hs-identifier hs-var">sn</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ProtVer
</span><a href="#local-6989586621679555713"><span class="hs-identifier hs-var">bv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PParams
</span><a href="#local-6989586621679555708"><span class="hs-identifier hs-var">ppsc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-801"></span><span>                </span><span class="annot"><span class="annottext">([(Slot, (ProtVer, PParams))], Set (ProtVer, VKeyGenesis))
-&gt; F (Clause UPEND 'Transition)
     ([(Slot, (ProtVer, PParams))], Set (ProtVer, VKeyGenesis))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(([(Slot, (ProtVer, PParams))], Set (ProtVer, VKeyGenesis))
 -&gt; F (Clause UPEND 'Transition)
      ([(Slot, (ProtVer, PParams))], Set (ProtVer, VKeyGenesis)))
-&gt; ([(Slot, (ProtVer, PParams))], Set (ProtVer, VKeyGenesis))
-&gt; F (Clause UPEND 'Transition)
     ([(Slot, (ProtVer, PParams))], Set (ProtVer, VKeyGenesis))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(Slot, (ProtVer, PParams))]
</span><a href="#local-6989586621679555707"><span class="hs-identifier hs-var">fads'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Set (ProtVer, VKeyGenesis)
</span><a href="#local-6989586621679555710"><span class="hs-identifier hs-var">bvs'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-802"></span><span>              </span><span class="annot"><span class="annottext">Maybe (UpId, (ProtVer, PParams))
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-803"></span><span>                </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; PredicateFailure UPEND -&gt; Rule UPEND 'Transition ()
forall sts (ctx :: RuleType).
Bool -&gt; PredicateFailure sts -&gt; Rule sts ctx ()
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-operator hs-var">?!</span></a></span><span> </span><span class="annot"><span class="annottext">ProtVer -&gt; UpendPredicateFailure
</span><a href="Byron.Spec.Ledger.Update.html#ProtVerUnknown"><span class="hs-identifier hs-var">ProtVerUnknown</span></a></span><span> </span><span class="annot"><span class="annottext">ProtVer
</span><a href="#local-6989586621679555713"><span class="hs-identifier hs-var">bv</span></a></span><span>
</span><span id="line-804"></span><span>                </span><span class="annot"><span class="annottext">([(Slot, (ProtVer, PParams))], Set (ProtVer, VKeyGenesis))
-&gt; F (Clause UPEND 'Transition)
     ([(Slot, (ProtVer, PParams))], Set (ProtVer, VKeyGenesis))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(([(Slot, (ProtVer, PParams))], Set (ProtVer, VKeyGenesis))
 -&gt; F (Clause UPEND 'Transition)
      ([(Slot, (ProtVer, PParams))], Set (ProtVer, VKeyGenesis)))
-&gt; ([(Slot, (ProtVer, PParams))], Set (ProtVer, VKeyGenesis))
-&gt; F (Clause UPEND 'Transition)
     ([(Slot, (ProtVer, PParams))], Set (ProtVer, VKeyGenesis))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(Slot, (ProtVer, PParams))]
</span><a href="#local-6989586621679555715"><span class="hs-identifier hs-var">fads</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Set (ProtVer, VKeyGenesis)
</span><a href="#local-6989586621679555710"><span class="hs-identifier hs-var">bvs'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-805"></span><span>
</span><span id="line-806"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-807"></span><span>
</span><span id="line-808"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">Embed</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#FADS"><span class="hs-identifier hs-type">FADS</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPEND"><span class="hs-identifier hs-type">UPEND</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-809"></span><span>  </span><span id="local-6989586621679555703"><span class="annot"><span class="annottext">wrapFailed :: PredicateFailure FADS -&gt; PredicateFailure UPEND
</span><a href="#local-6989586621679555703"><span class="hs-identifier hs-var hs-var hs-var hs-var">wrapFailed</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; FadsPredicateFailure -&gt; UpendPredicateFailure
forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;No possible failures in FADS&quot;</span></span><span>
</span><span id="line-810"></span><span>
</span><span id="line-811"></span><span class="hs-comment">------------------------------------------------------------------------</span><span>
</span><span id="line-812"></span><span class="hs-comment">-- Update interface</span><span>
</span><span id="line-813"></span><span class="hs-comment">------------------------------------------------------------------------</span><span>
</span><span id="line-814"></span><span>
</span><span id="line-815"></span><span class="hs-comment">-- | The update interface environment is shared amongst various rules, so</span><span>
</span><span id="line-816"></span><span class="hs-comment">--   we define it as an alias here.</span><span>
</span><span id="line-817"></span><span class="hs-keyword">type</span><span> </span><span id="UPIEnv"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIEnv"><span class="hs-identifier hs-var">UPIEnv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-818"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Slot"><span class="hs-identifier hs-type">Core.Slot</span></a></span><span>
</span><span id="line-819"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bimap</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">Core.VKeyGenesis</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier hs-type">Core.VKey</span></a></span><span>
</span><span id="line-820"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#BlockCount"><span class="hs-identifier hs-type">BlockCount</span></a></span><span> </span><span class="hs-comment">-- This is a global constant in the formal</span><span>
</span><span id="line-821"></span><span>               </span><span class="hs-comment">-- specification, which we put in this environment so</span><span>
</span><span id="line-822"></span><span>               </span><span class="hs-comment">-- that we can test with different values of it.</span><span>
</span><span id="line-823"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word8</span></span><span>  </span><span class="hs-comment">-- Number of genesis keys, @ngk@. Also a global constant in the</span><span>
</span><span id="line-824"></span><span>           </span><span class="hs-comment">-- formal specification which is placed here so that we can test</span><span>
</span><span id="line-825"></span><span>           </span><span class="hs-comment">-- with different values.</span><span>
</span><span id="line-826"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-827"></span><span>
</span><span id="line-828"></span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#delegationMap"><span class="hs-identifier hs-type">delegationMap</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIEnv"><span class="hs-identifier hs-type">UPIEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bimap</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">Core.VKeyGenesis</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier hs-type">Core.VKey</span></a></span><span>
</span><span id="line-829"></span><span id="delegationMap"><span class="annot"><span class="annottext">delegationMap :: UPIEnv -&gt; Bimap VKeyGenesis VKey
</span><a href="Byron.Spec.Ledger.Update.html#delegationMap"><span class="hs-identifier hs-var hs-var">delegationMap</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Slot
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555700"><span class="annot"><span class="annottext">Bimap VKeyGenesis VKey
</span><a href="#local-6989586621679555700"><span class="hs-identifier hs-var">dms</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">BlockCount
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bimap VKeyGenesis VKey
</span><a href="#local-6989586621679555700"><span class="hs-identifier hs-var">dms</span></a></span><span>
</span><span id="line-830"></span><span>
</span><span id="line-831"></span><span class="hs-comment">-- | The update interface state is shared amongst various rules, so we define it</span><span>
</span><span id="line-832"></span><span class="hs-comment">-- as an alias here.</span><span>
</span><span id="line-833"></span><span class="hs-keyword">type</span><span> </span><span id="UPIState"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIState"><span class="hs-identifier hs-var">UPIState</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-834"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ProtVer"><span class="hs-identifier hs-type">ProtVer</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#PParams"><span class="hs-identifier hs-type">PParams</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- (pv, pps)</span><span>
</span><span id="line-835"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Slot"><span class="hs-identifier hs-type">Core.Slot</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ProtVer"><span class="hs-identifier hs-type">ProtVer</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#PParams"><span class="hs-identifier hs-type">PParams</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-comment">-- fads</span><span>
</span><span id="line-836"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ApName"><span class="hs-identifier hs-type">ApName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ApVer"><span class="hs-identifier hs-type">ApVer</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Slot"><span class="hs-identifier hs-type">Core.Slot</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#Metadata"><span class="hs-identifier hs-type">Metadata</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- avs</span><span>
</span><span id="line-837"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpId"><span class="hs-identifier hs-type">UpId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ProtVer"><span class="hs-identifier hs-type">ProtVer</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#PParams"><span class="hs-identifier hs-type">PParams</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- rpus</span><span>
</span><span id="line-838"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpId"><span class="hs-identifier hs-type">UpId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ApName"><span class="hs-identifier hs-type">ApName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ApVer"><span class="hs-identifier hs-type">ApVer</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#Metadata"><span class="hs-identifier hs-type">Metadata</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- raus</span><span>
</span><span id="line-839"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpId"><span class="hs-identifier hs-type">UpId</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Slot"><span class="hs-identifier hs-type">Core.Slot</span></a></span><span> </span><span class="hs-comment">-- cps</span><span>
</span><span id="line-840"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpId"><span class="hs-identifier hs-type">UpId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">Core.VKeyGenesis</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- vts</span><span>
</span><span id="line-841"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ProtVer"><span class="hs-identifier hs-type">ProtVer</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">Core.VKeyGenesis</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- bvs</span><span>
</span><span id="line-842"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpId"><span class="hs-identifier hs-type">UpId</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Slot"><span class="hs-identifier hs-type">Core.Slot</span></a></span><span> </span><span class="hs-comment">-- pws</span><span>
</span><span id="line-843"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-844"></span><span>
</span><span id="line-845"></span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#emptyUPIState"><span class="hs-identifier hs-type">emptyUPIState</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIState"><span class="hs-identifier hs-type">UPIState</span></a></span><span>
</span><span id="line-846"></span><span id="emptyUPIState"><span class="annot"><span class="annottext">emptyUPIState :: UPIState
</span><a href="Byron.Spec.Ledger.Update.html#emptyUPIState"><span class="hs-identifier hs-var hs-var">emptyUPIState</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-847"></span><span>  </span><span class="hs-special">(</span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Natural -&gt; Natural -&gt; ProtVer
</span><a href="Byron.Spec.Ledger.Update.html#ProtVer"><span class="hs-identifier hs-var">ProtVer</span></a></span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">0</span></span><span>
</span><span id="line-848"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PParams
</span><a href="Byron.Spec.Ledger.Update.html#initialPParams"><span class="hs-identifier hs-var">initialPParams</span></a></span><span>
</span><span id="line-849"></span><span>   </span><span class="hs-special">)</span><span>
</span><span id="line-850"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-851"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map ApName (ApVer, Slot, Metadata)
forall k a. Map k a
</span><span class="hs-identifier hs-var">Map.empty</span></span><span>
</span><span id="line-852"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map UpId (ProtVer, PParams)
forall k a. Map k a
</span><span class="hs-identifier hs-var">Map.empty</span></span><span>
</span><span id="line-853"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map UpId (ApName, ApVer, Metadata)
forall k a. Map k a
</span><span class="hs-identifier hs-var">Map.empty</span></span><span>
</span><span id="line-854"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map UpId Slot
forall k a. Map k a
</span><span class="hs-identifier hs-var">Map.empty</span></span><span>
</span><span id="line-855"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Set (UpId, VKeyGenesis)
forall a. Set a
</span><span class="hs-identifier hs-var">Set.empty</span></span><span>
</span><span id="line-856"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Set (ProtVer, VKeyGenesis)
forall a. Set a
</span><span class="hs-identifier hs-var">Set.empty</span></span><span>
</span><span id="line-857"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map UpId Slot
forall k a. Map k a
</span><span class="hs-identifier hs-var">Map.empty</span></span><span class="hs-special">)</span><span>
</span><span id="line-858"></span><span>
</span><span id="line-859"></span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#initialPParams"><span class="hs-identifier hs-type">initialPParams</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#PParams"><span class="hs-identifier hs-type">PParams</span></a></span><span>
</span><span id="line-860"></span><span id="initialPParams"><span class="annot"><span class="annottext">initialPParams :: PParams
</span><a href="Byron.Spec.Ledger.Update.html#initialPParams"><span class="hs-identifier hs-var hs-var">initialPParams</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-861"></span><span>  </span><span class="annot"><span class="annottext">PParams :: Natural
-&gt; Natural
-&gt; Natural
-&gt; Natural
-&gt; BkSgnCntT
-&gt; SlotCount
-&gt; SlotCount
-&gt; Natural
-&gt; UpAdptThd
-&gt; FactorA
-&gt; FactorB
-&gt; PParams
</span><a href="Byron.Spec.Ledger.Update.html#PParams"><span class="hs-identifier hs-type">PParams</span></a></span><span>                 </span><span class="hs-comment">-- TODO: choose more sensible default values</span><span>
</span><span id="line-862"></span><span>     </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">_maxBkSz :: Natural
</span><a href="Byron.Spec.Ledger.Update.html#_maxBkSz"><span class="hs-identifier hs-var">_maxBkSz</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">10000</span></span><span>       </span><span class="hs-comment">-- max sizes chosen as non-zero to allow progress</span><span>
</span><span id="line-863"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_maxHdrSz :: Natural
</span><a href="Byron.Spec.Ledger.Update.html#_maxHdrSz"><span class="hs-identifier hs-var">_maxHdrSz</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">1000</span></span><span>
</span><span id="line-864"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_maxTxSz :: Natural
</span><a href="Byron.Spec.Ledger.Update.html#_maxTxSz"><span class="hs-identifier hs-var">_maxTxSz</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">500</span></span><span>
</span><span id="line-865"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_maxPropSz :: Natural
</span><a href="Byron.Spec.Ledger.Update.html#_maxPropSz"><span class="hs-identifier hs-var">_maxPropSz</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">10</span></span><span>
</span><span id="line-866"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_bkSgnCntT :: BkSgnCntT
</span><a href="Byron.Spec.Ledger.Update.html#_bkSgnCntT"><span class="hs-identifier hs-var">_bkSgnCntT</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BkSgnCntT
</span><span class="hs-number">0.22</span></span><span>     </span><span class="hs-comment">-- As defined in the spec.</span><span>
</span><span id="line-867"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_bkSlotsPerEpoch :: SlotCount
</span><a href="Byron.Spec.Ledger.Update.html#_bkSlotsPerEpoch"><span class="hs-identifier hs-var">_bkSlotsPerEpoch</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SlotCount
</span><span class="hs-number">10</span></span><span> </span><span class="hs-comment">-- TODO: we need to remove this, since this should</span><span>
</span><span id="line-868"></span><span>                             </span><span class="hs-comment">-- be a constant. Also the name slots-per-epoch is</span><span>
</span><span id="line-869"></span><span>                             </span><span class="hs-comment">-- wrong.</span><span>
</span><span id="line-870"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_upTtl :: SlotCount
</span><a href="Byron.Spec.Ledger.Update.html#_upTtl"><span class="hs-identifier hs-var">_upTtl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SlotCount
</span><span class="hs-number">10</span></span><span>           </span><span class="hs-comment">-- The proposal time to live needs to be related to @k@ (or the number</span><span>
</span><span id="line-871"></span><span>                             </span><span class="hs-comment">-- of slots in an epoch). We pick an arbitrary value here.</span><span>
</span><span id="line-872"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_scriptVersion :: Natural
</span><a href="Byron.Spec.Ledger.Update.html#_scriptVersion"><span class="hs-identifier hs-var">_scriptVersion</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">0</span></span><span>
</span><span id="line-873"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_upAdptThd :: UpAdptThd
</span><a href="Byron.Spec.Ledger.Update.html#_upAdptThd"><span class="hs-identifier hs-var">_upAdptThd</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UpAdptThd
</span><span class="hs-number">0.6</span></span><span>      </span><span class="hs-comment">-- Value currently used in mainet</span><span>
</span><span id="line-874"></span><span>
</span><span id="line-875"></span><span>     </span><span class="hs-comment">-- To determine the factors @A@ and @B@ used in the calculation of the</span><span>
</span><span id="line-876"></span><span>     </span><span class="hs-comment">-- transaction fees we need to know the constant @C@ that we use to bound</span><span>
</span><span id="line-877"></span><span>     </span><span class="hs-comment">-- the size of a transaction.</span><span>
</span><span id="line-878"></span><span>     </span><span class="hs-comment">--</span><span>
</span><span id="line-879"></span><span>     </span><span class="hs-comment">-- We have that for all transactions @tx@:</span><span>
</span><span id="line-880"></span><span>     </span><span class="hs-comment">--</span><span>
</span><span id="line-881"></span><span>     </span><span class="hs-comment">-- &gt; size (elaborate tx) &lt;= C * abstractSize tx</span><span>
</span><span id="line-882"></span><span>     </span><span class="hs-comment">--</span><span>
</span><span id="line-883"></span><span>     </span><span class="hs-comment">-- where @elaborate@ elaborates an abstract transaction into a concrete</span><span>
</span><span id="line-884"></span><span>     </span><span class="hs-comment">-- one.</span><span>
</span><span id="line-885"></span><span>     </span><span class="hs-comment">--</span><span>
</span><span id="line-886"></span><span>     </span><span class="hs-comment">-- We have that the (concrete) minimum fee is calculated as follows:</span><span>
</span><span id="line-887"></span><span>     </span><span class="hs-comment">--</span><span>
</span><span id="line-888"></span><span>     </span><span class="hs-comment">-- &gt; minFee tx = A_C + B_C * C</span><span>
</span><span id="line-889"></span><span>     </span><span class="hs-comment">--</span><span>
</span><span id="line-890"></span><span>     </span><span class="hs-comment">-- where @A_C@ and @B_C@ are the concrete constants that correspond to</span><span>
</span><span id="line-891"></span><span>     </span><span class="hs-comment">-- abstract constants @A@ and @B@.</span><span>
</span><span id="line-892"></span><span>     </span><span class="hs-comment">--</span><span>
</span><span id="line-893"></span><span>     </span><span class="hs-comment">-- We need to guarantee that the abstract minimum fee we use for</span><span>
</span><span id="line-894"></span><span>     </span><span class="hs-comment">-- transactions is no less than the concrete minimum fee, since otherwise</span><span>
</span><span id="line-895"></span><span>     </span><span class="hs-comment">-- we run the risk that in the elaboration we end up paying a fee to low.</span><span>
</span><span id="line-896"></span><span>     </span><span class="hs-comment">--</span><span>
</span><span id="line-897"></span><span>     </span><span class="hs-comment">-- Now consider the minimum fee for an elaborated transaction:</span><span>
</span><span id="line-898"></span><span>     </span><span class="hs-comment">--</span><span>
</span><span id="line-899"></span><span>     </span><span class="hs-comment">-- &gt; A_C + B_C * (size (elaborate tx))</span><span>
</span><span id="line-900"></span><span>     </span><span class="hs-comment">-- &gt; &lt;= { size (elaborate tx) &lt;= C * abstractSize tx }</span><span>
</span><span id="line-901"></span><span>     </span><span class="hs-comment">-- &gt; A_C + B_C * C * abstractSize tx</span><span>
</span><span id="line-902"></span><span>     </span><span class="hs-comment">--</span><span>
</span><span id="line-903"></span><span>     </span><span class="hs-comment">-- Which means that we should set:</span><span>
</span><span id="line-904"></span><span>     </span><span class="hs-comment">--</span><span>
</span><span id="line-905"></span><span>     </span><span class="hs-comment">-- &gt; _factorA = A_C</span><span>
</span><span id="line-906"></span><span>     </span><span class="hs-comment">-- &gt; _factorB = B_C * C</span><span>
</span><span id="line-907"></span><span>     </span><span class="hs-comment">--</span><span>
</span><span id="line-908"></span><span>     </span><span class="hs-comment">-- For now we choose small numbers here so that we do not need a high UTxO</span><span>
</span><span id="line-909"></span><span>     </span><span class="hs-comment">-- balance when generating the initial UTxO (see @module</span><span>
</span><span id="line-910"></span><span>     </span><span class="hs-comment">-- Byron.Spec.Ledger.UTxO.Generators@).</span><span>
</span><span id="line-911"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_factorA :: FactorA
</span><a href="Byron.Spec.Ledger.Update.html#_factorA"><span class="hs-identifier hs-var">_factorA</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; FactorA
</span><a href="Byron.Spec.Ledger.Update.html#FactorA"><span class="hs-identifier hs-var">FactorA</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="hs-comment">-- In mainet this value is set to 155381000000000 (A_C in the derivation above)</span><span>
</span><span id="line-912"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_factorB :: FactorB
</span><a href="Byron.Spec.Ledger.Update.html#_factorB"><span class="hs-identifier hs-var">_factorB</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; FactorB
</span><a href="Byron.Spec.Ledger.Update.html#FactorB"><span class="hs-identifier hs-var">FactorB</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">10</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">*</span></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="Byron.Spec.Ledger.GlobalParams.html#c"><span class="hs-identifier hs-var">GP.c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- In mainet this value is set to 43946000000</span><span>
</span><span id="line-913"></span><span>     </span><span class="hs-special">}</span><span>
</span><span id="line-914"></span><span>
</span><span id="line-915"></span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#protocolVersion"><span class="hs-identifier hs-type">protocolVersion</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIState"><span class="hs-identifier hs-type">UPIState</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ProtVer"><span class="hs-identifier hs-type">ProtVer</span></a></span><span>
</span><span id="line-916"></span><span id="protocolVersion"><span class="annot"><span class="annottext">protocolVersion :: UPIState -&gt; ProtVer
</span><a href="Byron.Spec.Ledger.Update.html#protocolVersion"><span class="hs-identifier hs-var hs-var">protocolVersion</span></a></span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621679555694"><span class="annot"><span class="annottext">ProtVer
</span><a href="#local-6989586621679555694"><span class="hs-identifier hs-var">pv</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PParams
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[(Slot, (ProtVer, PParams))]
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map ApName (ApVer, Slot, Metadata)
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map UpId (ProtVer, PParams)
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map UpId (ApName, ApVer, Metadata)
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map UpId Slot
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Set (UpId, VKeyGenesis)
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Set (ProtVer, VKeyGenesis)
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map UpId Slot
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ProtVer
</span><a href="#local-6989586621679555694"><span class="hs-identifier hs-var">pv</span></a></span><span>
</span><span id="line-917"></span><span>
</span><span id="line-918"></span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#protocolParameters"><span class="hs-identifier hs-type">protocolParameters</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIState"><span class="hs-identifier hs-type">UPIState</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#PParams"><span class="hs-identifier hs-type">PParams</span></a></span><span>
</span><span id="line-919"></span><span id="protocolParameters"><span class="annot"><span class="annottext">protocolParameters :: UPIState -&gt; PParams
</span><a href="Byron.Spec.Ledger.Update.html#protocolParameters"><span class="hs-identifier hs-var hs-var">protocolParameters</span></a></span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">ProtVer
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555692"><span class="annot"><span class="annottext">PParams
</span><a href="#local-6989586621679555692"><span class="hs-identifier hs-var">pps</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[(Slot, (ProtVer, PParams))]
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map ApName (ApVer, Slot, Metadata)
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map UpId (ProtVer, PParams)
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map UpId (ApName, ApVer, Metadata)
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map UpId Slot
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Set (UpId, VKeyGenesis)
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Set (ProtVer, VKeyGenesis)
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map UpId Slot
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PParams
</span><a href="#local-6989586621679555692"><span class="hs-identifier hs-var">pps</span></a></span><span>
</span><span id="line-920"></span><span>
</span><span id="line-921"></span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#applicationVersions"><span class="hs-identifier hs-type">applicationVersions</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIState"><span class="hs-identifier hs-type">UPIState</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ApName"><span class="hs-identifier hs-type">ApName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ApVer"><span class="hs-identifier hs-type">ApVer</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Slot"><span class="hs-identifier hs-type">Core.Slot</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#Metadata"><span class="hs-identifier hs-type">Metadata</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-922"></span><span id="applicationVersions"><span class="annot"><span class="annottext">applicationVersions :: UPIState -&gt; Map ApName (ApVer, Slot, Metadata)
</span><a href="Byron.Spec.Ledger.Update.html#applicationVersions"><span class="hs-identifier hs-var hs-var">applicationVersions</span></a></span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">ProtVer
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PParams
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[(Slot, (ProtVer, PParams))]
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555690"><span class="annot"><span class="annottext">Map ApName (ApVer, Slot, Metadata)
</span><a href="#local-6989586621679555690"><span class="hs-identifier hs-var">avs</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map UpId (ProtVer, PParams)
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map UpId (ApName, ApVer, Metadata)
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map UpId Slot
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Set (UpId, VKeyGenesis)
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Set (ProtVer, VKeyGenesis)
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map UpId Slot
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map ApName (ApVer, Slot, Metadata)
</span><a href="#local-6989586621679555690"><span class="hs-identifier hs-var">avs</span></a></span><span>
</span><span id="line-923"></span><span>
</span><span id="line-924"></span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#confirmedProposals"><span class="hs-identifier hs-type">confirmedProposals</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIState"><span class="hs-identifier hs-type">UPIState</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpId"><span class="hs-identifier hs-type">UpId</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Slot"><span class="hs-identifier hs-type">Core.Slot</span></a></span><span>
</span><span id="line-925"></span><span id="confirmedProposals"><span class="annot"><span class="annottext">confirmedProposals :: UPIState -&gt; Map UpId Slot
</span><a href="Byron.Spec.Ledger.Update.html#confirmedProposals"><span class="hs-identifier hs-var hs-var">confirmedProposals</span></a></span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">ProtVer
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PParams
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[(Slot, (ProtVer, PParams))]
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map ApName (ApVer, Slot, Metadata)
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map UpId (ProtVer, PParams)
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map UpId (ApName, ApVer, Metadata)
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555688"><span class="annot"><span class="annottext">Map UpId Slot
</span><a href="#local-6989586621679555688"><span class="hs-identifier hs-var">cps</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Set (UpId, VKeyGenesis)
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Set (ProtVer, VKeyGenesis)
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map UpId Slot
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map UpId Slot
</span><a href="#local-6989586621679555688"><span class="hs-identifier hs-var">cps</span></a></span><span>
</span><span id="line-926"></span><span>
</span><span id="line-927"></span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#futureAdoptions"><span class="hs-identifier hs-type">futureAdoptions</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIState"><span class="hs-identifier hs-type">UPIState</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Slot"><span class="hs-identifier hs-type">Core.Slot</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ProtVer"><span class="hs-identifier hs-type">ProtVer</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#PParams"><span class="hs-identifier hs-type">PParams</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-928"></span><span id="futureAdoptions"><span class="annot"><span class="annottext">futureAdoptions :: UPIState -&gt; [(Slot, (ProtVer, PParams))]
</span><a href="Byron.Spec.Ledger.Update.html#futureAdoptions"><span class="hs-identifier hs-var hs-var">futureAdoptions</span></a></span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">ProtVer
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PParams
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555686"><span class="annot"><span class="annottext">[(Slot, (ProtVer, PParams))]
</span><a href="#local-6989586621679555686"><span class="hs-identifier hs-var">fads</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map ApName (ApVer, Slot, Metadata)
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map UpId (ProtVer, PParams)
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map UpId (ApName, ApVer, Metadata)
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map UpId Slot
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Set (UpId, VKeyGenesis)
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Set (ProtVer, VKeyGenesis)
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map UpId Slot
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(Slot, (ProtVer, PParams))]
</span><a href="#local-6989586621679555686"><span class="hs-identifier hs-var">fads</span></a></span><span>
</span><span id="line-929"></span><span>
</span><span id="line-930"></span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#endorsements"><span class="hs-identifier hs-type">endorsements</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIState"><span class="hs-identifier hs-type">UPIState</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ProtVer"><span class="hs-identifier hs-type">ProtVer</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">Core.VKeyGenesis</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-931"></span><span id="endorsements"><span class="annot"><span class="annottext">endorsements :: UPIState -&gt; Set (ProtVer, VKeyGenesis)
</span><a href="Byron.Spec.Ledger.Update.html#endorsements"><span class="hs-identifier hs-var hs-var">endorsements</span></a></span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">ProtVer
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PParams
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[(Slot, (ProtVer, PParams))]
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map ApName (ApVer, Slot, Metadata)
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map UpId (ProtVer, PParams)
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map UpId (ApName, ApVer, Metadata)
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map UpId Slot
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Set (UpId, VKeyGenesis)
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555684"><span class="annot"><span class="annottext">Set (ProtVer, VKeyGenesis)
</span><a href="#local-6989586621679555684"><span class="hs-identifier hs-var">bvs</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map UpId Slot
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set (ProtVer, VKeyGenesis)
</span><a href="#local-6989586621679555684"><span class="hs-identifier hs-var">bvs</span></a></span><span>
</span><span id="line-932"></span><span>
</span><span id="line-933"></span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#registeredProtocolUpdateProposals"><span class="hs-identifier hs-type">registeredProtocolUpdateProposals</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIState"><span class="hs-identifier hs-type">UPIState</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpId"><span class="hs-identifier hs-type">UpId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ProtVer"><span class="hs-identifier hs-type">ProtVer</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#PParams"><span class="hs-identifier hs-type">PParams</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-934"></span><span id="registeredProtocolUpdateProposals"><span class="annot"><span class="annottext">registeredProtocolUpdateProposals :: UPIState -&gt; Map UpId (ProtVer, PParams)
</span><a href="Byron.Spec.Ledger.Update.html#registeredProtocolUpdateProposals"><span class="hs-identifier hs-var hs-var">registeredProtocolUpdateProposals</span></a></span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">ProtVer
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PParams
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[(Slot, (ProtVer, PParams))]
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map ApName (ApVer, Slot, Metadata)
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555682"><span class="annot"><span class="annottext">Map UpId (ProtVer, PParams)
</span><a href="#local-6989586621679555682"><span class="hs-identifier hs-var">rpus</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map UpId (ApName, ApVer, Metadata)
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map UpId Slot
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Set (UpId, VKeyGenesis)
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Set (ProtVer, VKeyGenesis)
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map UpId Slot
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map UpId (ProtVer, PParams)
</span><a href="#local-6989586621679555682"><span class="hs-identifier hs-var">rpus</span></a></span><span>
</span><span id="line-935"></span><span>
</span><span id="line-936"></span><span>
</span><span id="line-937"></span><span id="local-6989586621679555680"><span id="local-6989586621679555681"></span></span><span class="hs-keyword">data</span><span> </span><span id="UPIREG"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIREG"><span class="hs-identifier hs-var">UPIREG</span></a></span></span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(forall x. UPIREG -&gt; Rep UPIREG x)
-&gt; (forall x. Rep UPIREG x -&gt; UPIREG) -&gt; Generic UPIREG
forall x. Rep UPIREG x -&gt; UPIREG
forall x. UPIREG -&gt; Rep UPIREG x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep UPIREG x -&gt; UPIREG
$cfrom :: forall x. UPIREG -&gt; Rep UPIREG x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">,</span><span> </span><span id="%24tUPIREG"><span id="local-6989586621679555649"><span id="local-6989586621679555651"><span id="local-6989586621679555653"><span id="local-6989586621679555655"><span id="local-6989586621679555657"><span id="local-6989586621679555659"><span id="local-6989586621679555661"><span id="local-6989586621679555663"><span id="local-6989586621679555665"><span id="local-6989586621679555667"><span id="local-6989586621679555669"><span id="local-6989586621679555671"><span id="local-6989586621679555673"><span id="local-6989586621679555675"><span class="annot"><span class="annottext">Typeable UPIREG
DataType
Typeable UPIREG
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; UPIREG -&gt; c UPIREG)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UPIREG)
-&gt; (UPIREG -&gt; Constr)
-&gt; (UPIREG -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UPIREG))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c UPIREG))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; UPIREG -&gt; UPIREG)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPIREG -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPIREG -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; UPIREG -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UPIREG -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; UPIREG -&gt; m UPIREG)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; UPIREG -&gt; m UPIREG)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; UPIREG -&gt; m UPIREG)
-&gt; Data UPIREG
UPIREG -&gt; DataType
UPIREG -&gt; Constr
(forall b. Data b =&gt; b -&gt; b) -&gt; UPIREG -&gt; UPIREG
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; UPIREG -&gt; c UPIREG
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UPIREG
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UPIREG -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; UPIREG -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPIREG -&gt; r
forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPIREG -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UPIREG -&gt; m UPIREG
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UPIREG -&gt; m UPIREG
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UPIREG
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; UPIREG -&gt; c UPIREG
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UPIREG)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c UPIREG)
$tUPIREG :: DataType
gmapMo :: (forall d. Data d =&gt; d -&gt; m d) -&gt; UPIREG -&gt; m UPIREG
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UPIREG -&gt; m UPIREG
gmapMp :: (forall d. Data d =&gt; d -&gt; m d) -&gt; UPIREG -&gt; m UPIREG
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UPIREG -&gt; m UPIREG
gmapM :: (forall d. Data d =&gt; d -&gt; m d) -&gt; UPIREG -&gt; m UPIREG
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UPIREG -&gt; m UPIREG
gmapQi :: Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UPIREG -&gt; u
$cgmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UPIREG -&gt; u
gmapQ :: (forall d. Data d =&gt; d -&gt; u) -&gt; UPIREG -&gt; [u]
$cgmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; UPIREG -&gt; [u]
gmapQr :: (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPIREG -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPIREG -&gt; r
gmapQl :: (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPIREG -&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPIREG -&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; UPIREG -&gt; UPIREG
$cgmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; UPIREG -&gt; UPIREG
dataCast2 :: (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c UPIREG)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c UPIREG)
dataCast1 :: (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UPIREG)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UPIREG)
dataTypeOf :: UPIREG -&gt; DataType
$cdataTypeOf :: UPIREG -&gt; DataType
toConstr :: UPIREG -&gt; Constr
$ctoConstr :: UPIREG -&gt; Constr
gunfold :: (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UPIREG
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UPIREG
gfoldl :: (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; UPIREG -&gt; c UPIREG
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; UPIREG -&gt; c UPIREG
$cp1Data :: Typeable UPIREG
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">)</span><span>
</span><span id="line-938"></span><span>
</span><span id="line-939"></span><span id="local-6989586621679555646"><span id="local-6989586621679555647"></span></span><span class="hs-keyword">data</span><span> </span><span id="UpiregPredicateFailure"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpiregPredicateFailure"><span class="hs-identifier hs-var">UpiregPredicateFailure</span></a></span></span><span>
</span><span id="line-940"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="UPREGFailure"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPREGFailure"><span class="hs-identifier hs-var">UPREGFailure</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">PredicateFailure</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPREG"><span class="hs-identifier hs-type">UPREG</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-941"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679555641"><span id="local-6989586621679555643"><span class="annot"><span class="annottext">UpiregPredicateFailure -&gt; UpiregPredicateFailure -&gt; Bool
(UpiregPredicateFailure -&gt; UpiregPredicateFailure -&gt; Bool)
-&gt; (UpiregPredicateFailure -&gt; UpiregPredicateFailure -&gt; Bool)
-&gt; Eq UpiregPredicateFailure
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: UpiregPredicateFailure -&gt; UpiregPredicateFailure -&gt; Bool
$c/= :: UpiregPredicateFailure -&gt; UpiregPredicateFailure -&gt; Bool
== :: UpiregPredicateFailure -&gt; UpiregPredicateFailure -&gt; Bool
$c== :: UpiregPredicateFailure -&gt; UpiregPredicateFailure -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555635"><span id="local-6989586621679555637"><span id="local-6989586621679555639"><span class="annot"><span class="annottext">Int -&gt; UpiregPredicateFailure -&gt; ShowS
[UpiregPredicateFailure] -&gt; ShowS
UpiregPredicateFailure -&gt; String
(Int -&gt; UpiregPredicateFailure -&gt; ShowS)
-&gt; (UpiregPredicateFailure -&gt; String)
-&gt; ([UpiregPredicateFailure] -&gt; ShowS)
-&gt; Show UpiregPredicateFailure
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [UpiregPredicateFailure] -&gt; ShowS
$cshowList :: [UpiregPredicateFailure] -&gt; ShowS
show :: UpiregPredicateFailure -&gt; String
$cshow :: UpiregPredicateFailure -&gt; String
showsPrec :: Int -&gt; UpiregPredicateFailure -&gt; ShowS
$cshowsPrec :: Int -&gt; UpiregPredicateFailure -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="%24cUPREGFailure"><span id="%24tUpiregPredicateFailure"><span id="local-6989586621679555606"><span id="local-6989586621679555608"><span id="local-6989586621679555610"><span id="local-6989586621679555612"><span id="local-6989586621679555614"><span id="local-6989586621679555616"><span id="local-6989586621679555618"><span id="local-6989586621679555620"><span id="local-6989586621679555622"><span id="local-6989586621679555624"><span id="local-6989586621679555626"><span id="local-6989586621679555628"><span id="local-6989586621679555630"><span id="local-6989586621679555632"><span class="annot"><span class="annottext">Typeable UpiregPredicateFailure
DataType
Constr
Typeable UpiregPredicateFailure
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g)
    -&gt; UpiregPredicateFailure
    -&gt; c UpiregPredicateFailure)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UpiregPredicateFailure)
-&gt; (UpiregPredicateFailure -&gt; Constr)
-&gt; (UpiregPredicateFailure -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UpiregPredicateFailure))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e))
    -&gt; Maybe (c UpiregPredicateFailure))
-&gt; ((forall b. Data b =&gt; b -&gt; b)
    -&gt; UpiregPredicateFailure -&gt; UpiregPredicateFailure)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r
    -&gt; (forall d. Data d =&gt; d -&gt; r')
    -&gt; UpiregPredicateFailure
    -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r
    -&gt; (forall d. Data d =&gt; d -&gt; r')
    -&gt; UpiregPredicateFailure
    -&gt; r)
-&gt; (forall u.
    (forall d. Data d =&gt; d -&gt; u) -&gt; UpiregPredicateFailure -&gt; [u])
-&gt; (forall u.
    Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UpiregPredicateFailure -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; UpiregPredicateFailure -&gt; m UpiregPredicateFailure)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; UpiregPredicateFailure -&gt; m UpiregPredicateFailure)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; UpiregPredicateFailure -&gt; m UpiregPredicateFailure)
-&gt; Data UpiregPredicateFailure
UpiregPredicateFailure -&gt; DataType
UpiregPredicateFailure -&gt; Constr
(forall b. Data b =&gt; b -&gt; b)
-&gt; UpiregPredicateFailure -&gt; UpiregPredicateFailure
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; UpiregPredicateFailure
-&gt; c UpiregPredicateFailure
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UpiregPredicateFailure
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u.
Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UpiregPredicateFailure -&gt; u
forall u.
(forall d. Data d =&gt; d -&gt; u) -&gt; UpiregPredicateFailure -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; UpiregPredicateFailure
-&gt; r
forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; UpiregPredicateFailure
-&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; UpiregPredicateFailure -&gt; m UpiregPredicateFailure
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; UpiregPredicateFailure -&gt; m UpiregPredicateFailure
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UpiregPredicateFailure
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; UpiregPredicateFailure
-&gt; c UpiregPredicateFailure
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UpiregPredicateFailure)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c UpiregPredicateFailure)
$cUPREGFailure :: Constr
$tUpiregPredicateFailure :: DataType
gmapMo :: (forall d. Data d =&gt; d -&gt; m d)
-&gt; UpiregPredicateFailure -&gt; m UpiregPredicateFailure
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; UpiregPredicateFailure -&gt; m UpiregPredicateFailure
gmapMp :: (forall d. Data d =&gt; d -&gt; m d)
-&gt; UpiregPredicateFailure -&gt; m UpiregPredicateFailure
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; UpiregPredicateFailure -&gt; m UpiregPredicateFailure
gmapM :: (forall d. Data d =&gt; d -&gt; m d)
-&gt; UpiregPredicateFailure -&gt; m UpiregPredicateFailure
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; UpiregPredicateFailure -&gt; m UpiregPredicateFailure
gmapQi :: Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UpiregPredicateFailure -&gt; u
$cgmapQi :: forall u.
Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UpiregPredicateFailure -&gt; u
gmapQ :: (forall d. Data d =&gt; d -&gt; u) -&gt; UpiregPredicateFailure -&gt; [u]
$cgmapQ :: forall u.
(forall d. Data d =&gt; d -&gt; u) -&gt; UpiregPredicateFailure -&gt; [u]
gmapQr :: (r' -&gt; r -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; UpiregPredicateFailure
-&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; UpiregPredicateFailure
-&gt; r
gmapQl :: (r -&gt; r' -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; UpiregPredicateFailure
-&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; UpiregPredicateFailure
-&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b)
-&gt; UpiregPredicateFailure -&gt; UpiregPredicateFailure
$cgmapT :: (forall b. Data b =&gt; b -&gt; b)
-&gt; UpiregPredicateFailure -&gt; UpiregPredicateFailure
dataCast2 :: (forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c UpiregPredicateFailure)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c UpiregPredicateFailure)
dataCast1 :: (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UpiregPredicateFailure)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UpiregPredicateFailure)
dataTypeOf :: UpiregPredicateFailure -&gt; DataType
$cdataTypeOf :: UpiregPredicateFailure -&gt; DataType
toConstr :: UpiregPredicateFailure -&gt; Constr
$ctoConstr :: UpiregPredicateFailure -&gt; Constr
gunfold :: (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UpiregPredicateFailure
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UpiregPredicateFailure
gfoldl :: (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; UpiregPredicateFailure
-&gt; c UpiregPredicateFailure
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; UpiregPredicateFailure
-&gt; c UpiregPredicateFailure
$cp1Data :: Typeable UpiregPredicateFailure
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. UpiregPredicateFailure -&gt; Rep UpiregPredicateFailure x)
-&gt; (forall x.
    Rep UpiregPredicateFailure x -&gt; UpiregPredicateFailure)
-&gt; Generic UpiregPredicateFailure
forall x. Rep UpiregPredicateFailure x -&gt; UpiregPredicateFailure
forall x. UpiregPredicateFailure -&gt; Rep UpiregPredicateFailure x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep UpiregPredicateFailure x -&gt; UpiregPredicateFailure
$cfrom :: forall x. UpiregPredicateFailure -&gt; Rep UpiregPredicateFailure x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555596"><span id="local-6989586621679555598"><span id="local-6989586621679555600"><span class="annot"><span class="annottext">Context -&gt; UpiregPredicateFailure -&gt; IO (Maybe ThunkInfo)
Proxy UpiregPredicateFailure -&gt; String
(Context -&gt; UpiregPredicateFailure -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; UpiregPredicateFailure -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy UpiregPredicateFailure -&gt; String)
-&gt; NoThunks UpiregPredicateFailure
forall a.
(Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy a -&gt; String)
-&gt; NoThunks a
showTypeOf :: Proxy UpiregPredicateFailure -&gt; String
$cshowTypeOf :: Proxy UpiregPredicateFailure -&gt; String
wNoThunks :: Context -&gt; UpiregPredicateFailure -&gt; IO (Maybe ThunkInfo)
$cwNoThunks :: Context -&gt; UpiregPredicateFailure -&gt; IO (Maybe ThunkInfo)
noThunks :: Context -&gt; UpiregPredicateFailure -&gt; IO (Maybe ThunkInfo)
$cnoThunks :: Context -&gt; UpiregPredicateFailure -&gt; IO (Maybe ThunkInfo)
</span><a href="#local-6989586621679555596"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">NoThunks</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-942"></span><span>
</span><span id="line-943"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679555586"><span id="local-6989586621679555588"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">STS</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIREG"><span class="hs-identifier hs-type">UPIREG</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-944"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Environment"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">Environment</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIREG"><span class="hs-identifier hs-type">UPIREG</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIEnv"><span class="hs-identifier hs-type">UPIEnv</span></a></span><span>
</span><span id="line-945"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="State"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">State</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIREG"><span class="hs-identifier hs-type">UPIREG</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIState"><span class="hs-identifier hs-type">UPIState</span></a></span><span>
</span><span id="line-946"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Signal"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">Signal</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIREG"><span class="hs-identifier hs-type">UPIREG</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UProp"><span class="hs-identifier hs-type">UProp</span></a></span><span>
</span><span id="line-947"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="PredicateFailure"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">PredicateFailure</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIREG"><span class="hs-identifier hs-type">UPIREG</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpiregPredicateFailure"><span class="hs-identifier hs-type">UpiregPredicateFailure</span></a></span><span>
</span><span id="line-948"></span><span>
</span><span id="line-949"></span><span>  </span><span id="local-6989586621679555585"><span class="annot"><span class="annottext">initialRules :: [InitialRule UPIREG]
</span><a href="#local-6989586621679555585"><span class="hs-identifier hs-var hs-var hs-var hs-var">initialRules</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">UPIState -&gt; F (Clause UPIREG 'Initial) UPIState
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(UPIState -&gt; F (Clause UPIREG 'Initial) UPIState)
-&gt; UPIState -&gt; F (Clause UPIREG 'Initial) UPIState
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="annot"><span class="annottext">UPIState
</span><a href="Byron.Spec.Ledger.Update.html#emptyUPIState"><span class="hs-identifier hs-var">emptyUPIState</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-950"></span><span>
</span><span id="line-951"></span><span>  </span><span id="local-6989586621679555584"><span class="annot"><span class="annottext">transitionRules :: [TransitionRule UPIREG]
</span><a href="#local-6989586621679555584"><span class="hs-identifier hs-var hs-var hs-var hs-var">transitionRules</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-952"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-953"></span><span>        </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">TRC</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679555583"><span class="annot"><a href="#local-6989586621679555583"><span class="hs-identifier hs-var">sn</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555582"><span class="annot"><a href="#local-6989586621679555582"><span class="hs-identifier hs-var">dms</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555581"><span class="annot"><a href="#local-6989586621679555581"><span class="hs-identifier hs-var">_k</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555580"><span class="annot"><a href="#local-6989586621679555580"><span class="hs-identifier hs-var">_ngk</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-954"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679555579"><span class="annot"><a href="#local-6989586621679555579"><span class="hs-identifier hs-var">pv</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555578"><span class="annot"><a href="#local-6989586621679555578"><span class="hs-identifier hs-var">pps</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-955"></span><span>              </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555577"><span class="annot"><a href="#local-6989586621679555577"><span class="hs-identifier hs-var">fads</span></a></span></span><span>
</span><span id="line-956"></span><span>              </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555576"><span class="annot"><a href="#local-6989586621679555576"><span class="hs-identifier hs-var">avs</span></a></span></span><span>
</span><span id="line-957"></span><span>              </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555575"><span class="annot"><a href="#local-6989586621679555575"><span class="hs-identifier hs-var">rpus</span></a></span></span><span>
</span><span id="line-958"></span><span>              </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555574"><span class="annot"><a href="#local-6989586621679555574"><span class="hs-identifier hs-var">raus</span></a></span></span><span>
</span><span id="line-959"></span><span>              </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555573"><span class="annot"><a href="#local-6989586621679555573"><span class="hs-identifier hs-var">cps</span></a></span></span><span>
</span><span id="line-960"></span><span>              </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555572"><span class="annot"><a href="#local-6989586621679555572"><span class="hs-identifier hs-var">vts</span></a></span></span><span>
</span><span id="line-961"></span><span>              </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555571"><span class="annot"><a href="#local-6989586621679555571"><span class="hs-identifier hs-var">bvs</span></a></span></span><span>
</span><span id="line-962"></span><span>              </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555570"><span class="annot"><a href="#local-6989586621679555570"><span class="hs-identifier hs-var">pws</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-963"></span><span>            </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555569"><span class="annot"><span class="annottext">Signal UPIREG
</span><a href="#local-6989586621679555569"><span class="hs-identifier hs-var">up</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">F (Clause UPIREG 'Transition) (TRC UPIREG)
forall sts (rtype :: RuleType).
Rule sts rtype (RuleContext rtype sts)
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">judgmentContext</span></a></span><span>
</span><span id="line-964"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621679555568"><span class="annot"><span class="annottext">Map UpId (ProtVer, PParams)
</span><a href="#local-6989586621679555568"><span class="hs-identifier hs-var">rpus'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555567"><span class="annot"><span class="annottext">Map UpId (ApName, ApVer, Metadata)
</span><a href="#local-6989586621679555567"><span class="hs-identifier hs-var">raus'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall sub super (rtype :: RuleType).
Embed sub super =&gt;
RuleContext rtype sub -&gt; Rule super rtype (State sub)
forall super (rtype :: RuleType).
Embed UPREG super =&gt;
RuleContext rtype UPREG -&gt; Rule super rtype (State UPREG)
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">trans</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPREG"><span class="hs-identifier hs-type">UPREG</span></a></span><span> </span><span class="annot"><span class="annottext">(RuleContext 'Transition UPREG
 -&gt; Rule UPIREG 'Transition (State UPREG))
-&gt; RuleContext 'Transition UPREG
-&gt; Rule UPIREG 'Transition (State UPREG)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Environment UPREG, State UPREG, Signal UPREG) -&gt; TRC UPREG
forall sts. (Environment sts, State sts, Signal sts) -&gt; TRC sts
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">TRC</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">ProtVer
</span><a href="#local-6989586621679555579"><span class="hs-identifier hs-var">pv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PParams
</span><a href="#local-6989586621679555578"><span class="hs-identifier hs-var">pps</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map ApName (ApVer, Slot, Metadata)
</span><a href="#local-6989586621679555576"><span class="hs-identifier hs-var">avs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bimap VKeyGenesis VKey
</span><a href="#local-6989586621679555582"><span class="hs-identifier hs-var">dms</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map UpId (ProtVer, PParams)
</span><a href="#local-6989586621679555575"><span class="hs-identifier hs-var">rpus</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map UpId (ApName, ApVer, Metadata)
</span><a href="#local-6989586621679555574"><span class="hs-identifier hs-var">raus</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Signal UPREG
Signal UPIREG
</span><a href="#local-6989586621679555569"><span class="hs-identifier hs-var">up</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-965"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679555566"><span class="annot"><span class="annottext">pws' :: Map UpId Slot
</span><a href="#local-6989586621679555566"><span class="hs-identifier hs-var hs-var">pws'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map UpId Slot
</span><a href="#local-6989586621679555570"><span class="hs-identifier hs-var">pws</span></a></span><span> </span><span class="annot"><span class="annottext">Map UpId Slot
-&gt; [(Domain (Map UpId Slot), Range (Map UpId Slot))]
-&gt; Map UpId Slot
forall m (f :: * -&gt; *).
(Relation m, Ord (Domain m), Ord (Range m), Foldable f) =&gt;
m -&gt; f (Domain m, Range m) -&gt; m
</span><a href="Byron.Spec.Ledger.Core.html#%2A03"><span class="hs-operator hs-var">&#10755;</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Signal UPIREG
UProp
</span><a href="#local-6989586621679555569"><span class="hs-identifier hs-var">up</span></a></span><span> </span><span class="annot"><span class="annottext">UProp -&gt; Getting UpId UProp UpId -&gt; UpId
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting UpId UProp UpId
Lens' UProp UpId
</span><a href="Byron.Spec.Ledger.Update.html#upId"><span class="hs-identifier hs-var">upId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Slot
</span><a href="#local-6989586621679555583"><span class="hs-identifier hs-var">sn</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-966"></span><span>        </span><span class="annot"><span class="annottext">UPIState -&gt; F (Clause UPIREG 'Transition) UPIState
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(UPIState -&gt; F (Clause UPIREG 'Transition) UPIState)
-&gt; UPIState -&gt; F (Clause UPIREG 'Transition) UPIState
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ProtVer
</span><a href="#local-6989586621679555579"><span class="hs-identifier hs-var">pv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PParams
</span><a href="#local-6989586621679555578"><span class="hs-identifier hs-var">pps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-967"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[(Slot, (ProtVer, PParams))]
</span><a href="#local-6989586621679555577"><span class="hs-identifier hs-var">fads</span></a></span><span>
</span><span id="line-968"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map ApName (ApVer, Slot, Metadata)
</span><a href="#local-6989586621679555576"><span class="hs-identifier hs-var">avs</span></a></span><span>
</span><span id="line-969"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map UpId (ProtVer, PParams)
</span><a href="#local-6989586621679555568"><span class="hs-identifier hs-var">rpus'</span></a></span><span>
</span><span id="line-970"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map UpId (ApName, ApVer, Metadata)
</span><a href="#local-6989586621679555567"><span class="hs-identifier hs-var">raus'</span></a></span><span>
</span><span id="line-971"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map UpId Slot
</span><a href="#local-6989586621679555573"><span class="hs-identifier hs-var">cps</span></a></span><span>
</span><span id="line-972"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Set (UpId, VKeyGenesis)
</span><a href="#local-6989586621679555572"><span class="hs-identifier hs-var">vts</span></a></span><span>
</span><span id="line-973"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Set (ProtVer, VKeyGenesis)
</span><a href="#local-6989586621679555571"><span class="hs-identifier hs-var">bvs</span></a></span><span>
</span><span id="line-974"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map UpId Slot
</span><a href="#local-6989586621679555566"><span class="hs-identifier hs-var">pws'</span></a></span><span>
</span><span id="line-975"></span><span>                </span><span class="hs-special">)</span><span>
</span><span id="line-976"></span><span>
</span><span id="line-977"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-978"></span><span>
</span><span id="line-979"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">Embed</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPREG"><span class="hs-identifier hs-type">UPREG</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIREG"><span class="hs-identifier hs-type">UPIREG</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-980"></span><span>  </span><span id="local-6989586621679555562"><span class="annot"><span class="annottext">wrapFailed :: PredicateFailure UPREG -&gt; PredicateFailure UPIREG
</span><a href="#local-6989586621679555562"><span class="hs-identifier hs-var hs-var hs-var hs-var">wrapFailed</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PredicateFailure UPREG -&gt; PredicateFailure UPIREG
PredicateFailure UPREG -&gt; UpiregPredicateFailure
</span><a href="Byron.Spec.Ledger.Update.html#UPREGFailure"><span class="hs-identifier hs-var">UPREGFailure</span></a></span><span>
</span><span id="line-981"></span><span>
</span><span id="line-982"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679555549"><span id="local-6989586621679555551"><span id="local-6989586621679555553"><span id="local-6989586621679555555"><span id="local-6989586621679555559"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-test-0.1.0.0/noopt/doc/html/small-steps-test/src"><span class="hs-identifier hs-type">HasTrace</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIREG"><span class="hs-identifier hs-type">UPIREG</span></a></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-983"></span><span>
</span><span id="line-984"></span><span>  </span><span id="local-6989586621679555547"><span class="annot"><span class="annottext">envGen :: Word64 -&gt; Gen (Environment UPIREG)
</span><a href="#local-6989586621679555547"><span class="hs-identifier hs-var hs-var hs-var hs-var">envGen</span></a></span></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Gen UPIEnv
Gen (Environment UPIREG)
</span><a href="Byron.Spec.Ledger.Update.html#upiEnvGen"><span class="hs-identifier hs-var">upiEnvGen</span></a></span><span>
</span><span id="line-985"></span><span>
</span><span id="line-986"></span><span>  </span><span id="local-6989586621679555545"><span class="annot"><span class="annottext">sigGen :: SignalGenerator UPIREG
</span><a href="#local-6989586621679555545"><span class="hs-identifier hs-var hs-var hs-var hs-var">sigGen</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679555544"><span class="annot"><a href="#local-6989586621679555544"><span class="hs-identifier hs-var">_slot</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555543"><span class="annot"><a href="#local-6989586621679555543"><span class="hs-identifier hs-var">dms</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555542"><span class="annot"><a href="#local-6989586621679555542"><span class="hs-identifier hs-var">_k</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555541"><span class="annot"><a href="#local-6989586621679555541"><span class="hs-identifier hs-var">_ngk</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621679555540"><span class="annot"><a href="#local-6989586621679555540"><span class="hs-identifier hs-var">pv</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555539"><span class="annot"><a href="#local-6989586621679555539"><span class="hs-identifier hs-var">pps</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555538"><span class="annot"><a href="#local-6989586621679555538"><span class="hs-identifier hs-var">_fads</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555537"><span class="annot"><a href="#local-6989586621679555537"><span class="hs-identifier hs-var">avs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555536"><span class="annot"><a href="#local-6989586621679555536"><span class="hs-identifier hs-var">rpus</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555535"><span class="annot"><a href="#local-6989586621679555535"><span class="hs-identifier hs-var">raus</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555534"><span class="annot"><a href="#local-6989586621679555534"><span class="hs-identifier hs-var">_cps</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555533"><span class="annot"><a href="#local-6989586621679555533"><span class="hs-identifier hs-var">_vts</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555532"><span class="annot"><a href="#local-6989586621679555532"><span class="hs-identifier hs-var">_bvs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555531"><span class="annot"><a href="#local-6989586621679555531"><span class="hs-identifier hs-var">pws</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-987"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-988"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679555530"><span class="annot"><span class="annottext">VKey
</span><a href="#local-6989586621679555530"><span class="hs-identifier hs-var">vk</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555529"><span class="annot"><span class="annottext">ProtVer
</span><a href="#local-6989586621679555529"><span class="hs-identifier hs-var">pv'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555528"><span class="annot"><span class="annottext">PParams
</span><a href="#local-6989586621679555528"><span class="hs-identifier hs-var">pps'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555527"><span class="annot"><span class="annottext">SwVer
</span><a href="#local-6989586621679555527"><span class="hs-identifier hs-var">sv'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">,</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(VKey
 -&gt; ProtVer -&gt; PParams -&gt; SwVer -&gt; (VKey, ProtVer, PParams, SwVer))
-&gt; GenT Identity VKey
-&gt; GenT
     Identity
     (ProtVer -&gt; PParams -&gt; SwVer -&gt; (VKey, ProtVer, PParams, SwVer))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">GenT Identity VKey
</span><a href="#local-6989586621679555526"><span class="hs-identifier hs-var">issuerGen</span></a></span><span>
</span><span id="line-989"></span><span>                                  </span><span class="annot"><span class="annottext">GenT
  Identity
  (ProtVer -&gt; PParams -&gt; SwVer -&gt; (VKey, ProtVer, PParams, SwVer))
-&gt; GenT Identity ProtVer
-&gt; GenT
     Identity (PParams -&gt; SwVer -&gt; (VKey, ProtVer, PParams, SwVer))
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">GenT Identity ProtVer
</span><a href="#local-6989586621679555525"><span class="hs-identifier hs-var">pvGen</span></a></span><span>
</span><span id="line-990"></span><span>                                  </span><span class="annot"><span class="annottext">GenT Identity (PParams -&gt; SwVer -&gt; (VKey, ProtVer, PParams, SwVer))
-&gt; GenT Identity PParams
-&gt; GenT Identity (SwVer -&gt; (VKey, ProtVer, PParams, SwVer))
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">GenT Identity PParams
</span><a href="#local-6989586621679555524"><span class="hs-identifier hs-var">pparamsGen</span></a></span><span>
</span><span id="line-991"></span><span>                                  </span><span class="annot"><span class="annottext">GenT Identity (SwVer -&gt; (VKey, ProtVer, PParams, SwVer))
-&gt; GenT Identity SwVer
-&gt; GenT Identity (VKey, ProtVer, PParams, SwVer)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">GenT Identity SwVer
</span><a href="#local-6989586621679555523"><span class="hs-identifier hs-var">swVerGen</span></a></span><span>
</span><span id="line-992"></span><span>
</span><span id="line-993"></span><span>    </span><span class="annot"><span class="annottext">[(Int, GenT Identity UProp)] -&gt; GenT Identity UProp
forall (m :: * -&gt; *) a. MonadGen m =&gt; [(Int, m a)] -&gt; m a
</span><span class="hs-identifier hs-var">Gen.frequency</span></span><span>
</span><span id="line-994"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="hs-comment">-- Do not change the protocol version. We generate a lower fraction of</span><span>
</span><span id="line-995"></span><span>        </span><span class="hs-comment">-- these kind of update proposals since we want to have more test cases</span><span>
</span><span id="line-996"></span><span>        </span><span class="hs-comment">-- in which the protocol parameters change. Software only updates do</span><span>
</span><span id="line-997"></span><span>        </span><span class="hs-comment">-- not offer as many possible variations as protocol parameter updates</span><span>
</span><span id="line-998"></span><span>        </span><span class="hs-comment">-- do.</span><span>
</span><span id="line-999"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">10</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">VKey -&gt; PParams -&gt; ProtVer -&gt; SwVer -&gt; GenT Identity UProp
</span><a href="#local-6989586621679555521"><span class="hs-identifier hs-var">generateUpdateProposalWith</span></a></span><span> </span><span class="annot"><span class="annottext">VKey
</span><a href="#local-6989586621679555530"><span class="hs-identifier hs-var">vk</span></a></span><span> </span><span class="annot"><span class="annottext">PParams
</span><a href="#local-6989586621679555539"><span class="hs-identifier hs-var">pps</span></a></span><span> </span><span class="annot"><span class="annottext">ProtVer
</span><a href="#local-6989586621679555540"><span class="hs-identifier hs-var">pv</span></a></span><span> </span><span class="annot"><span class="annottext">SwVer
</span><a href="#local-6989586621679555527"><span class="hs-identifier hs-var">sv'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1000"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- Do not change the software version (unless there are no software</span><span>
</span><span id="line-1001"></span><span>        </span><span class="hs-comment">-- versions in @avs@).</span><span>
</span><span id="line-1002"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">45</span></span><span class="hs-special">,</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1003"></span><span>          </span><span class="hs-comment">-- Pick a current software version (if available)</span><span>
</span><span id="line-1004"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679555520"><span class="annot"><span class="annottext">makeSoftwareVersion :: (ApName, (ApVer, b, c)) -&gt; SwVer
</span><a href="#local-6989586621679555520"><span class="hs-identifier hs-var hs-var">makeSoftwareVersion</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679555519"><span class="annot"><span class="annottext">ApName
</span><a href="#local-6989586621679555519"><span class="hs-identifier hs-var">apName</span></a></span></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679555518"><span class="annot"><span class="annottext">ApVer
</span><a href="#local-6989586621679555518"><span class="hs-identifier hs-var">apVersion</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">b
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">c
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ApName -&gt; ApVer -&gt; SwVer
</span><a href="Byron.Spec.Ledger.Update.html#SwVer"><span class="hs-identifier hs-var">SwVer</span></a></span><span> </span><span class="annot"><span class="annottext">ApName
</span><a href="#local-6989586621679555519"><span class="hs-identifier hs-var">apName</span></a></span><span> </span><span class="annot"><span class="annottext">ApVer
</span><a href="#local-6989586621679555518"><span class="hs-identifier hs-var">apVersion</span></a></span><span>
</span><span id="line-1005"></span><span>              </span><span id="local-6989586621679555517"><span class="annot"><span class="annottext">avsList :: [(ApName, (ApVer, Slot, Metadata))]
</span><a href="#local-6989586621679555517"><span class="hs-identifier hs-var hs-var">avsList</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map ApName (ApVer, Slot, Metadata)
-&gt; [(ApName, (ApVer, Slot, Metadata))]
forall k a. Map k a -&gt; [(k, a)]
</span><span class="hs-identifier hs-var">Map.toList</span></span><span> </span><span class="annot"><span class="annottext">Map ApName (ApVer, Slot, Metadata)
</span><a href="#local-6989586621679555537"><span class="hs-identifier hs-var">avs</span></a></span><span>
</span><span id="line-1006"></span><span>          </span><span id="local-6989586621679555516"><span class="annot"><span class="annottext">SwVer
</span><a href="#local-6989586621679555516"><span class="hs-identifier hs-var">currentSoftwareVersion</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">[(ApName, (ApVer, Slot, Metadata))] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">[(ApName, (ApVer, Slot, Metadata))]
</span><a href="#local-6989586621679555517"><span class="hs-identifier hs-var">avsList</span></a></span><span>
</span><span id="line-1007"></span><span>                                    </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">SwVer -&gt; GenT Identity SwVer
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(SwVer -&gt; GenT Identity SwVer) -&gt; SwVer -&gt; GenT Identity SwVer
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="annot"><span class="annottext">SwVer
</span><a href="#local-6989586621679555527"><span class="hs-identifier hs-var">sv'</span></a></span><span>
</span><span id="line-1008"></span><span>                                    </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">(ApName, (ApVer, Slot, Metadata)) -&gt; SwVer
forall b c. (ApName, (ApVer, b, c)) -&gt; SwVer
</span><a href="#local-6989586621679555520"><span class="hs-identifier hs-var">makeSoftwareVersion</span></a></span><span> </span><span class="annot"><span class="annottext">((ApName, (ApVer, Slot, Metadata)) -&gt; SwVer)
-&gt; GenT Identity (ApName, (ApVer, Slot, Metadata))
-&gt; GenT Identity SwVer
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[(ApName, (ApVer, Slot, Metadata))]
-&gt; GenT Identity (ApName, (ApVer, Slot, Metadata))
forall (m :: * -&gt; *) a. MonadGen m =&gt; [a] -&gt; m a
</span><span class="hs-identifier hs-var">Gen.element</span></span><span> </span><span class="annot"><span class="annottext">[(ApName, (ApVer, Slot, Metadata))]
</span><a href="#local-6989586621679555517"><span class="hs-identifier hs-var">avsList</span></a></span><span>
</span><span id="line-1009"></span><span>
</span><span id="line-1010"></span><span>          </span><span class="annot"><span class="annottext">VKey -&gt; PParams -&gt; ProtVer -&gt; SwVer -&gt; GenT Identity UProp
</span><a href="#local-6989586621679555521"><span class="hs-identifier hs-var">generateUpdateProposalWith</span></a></span><span> </span><span class="annot"><span class="annottext">VKey
</span><a href="#local-6989586621679555530"><span class="hs-identifier hs-var">vk</span></a></span><span> </span><span class="annot"><span class="annottext">PParams
</span><a href="#local-6989586621679555528"><span class="hs-identifier hs-var">pps'</span></a></span><span> </span><span class="annot"><span class="annottext">ProtVer
</span><a href="#local-6989586621679555529"><span class="hs-identifier hs-var">pv'</span></a></span><span> </span><span class="annot"><span class="annottext">SwVer
</span><a href="#local-6989586621679555516"><span class="hs-identifier hs-var">currentSoftwareVersion</span></a></span><span>
</span><span id="line-1011"></span><span>        </span><span class="hs-special">)</span><span>
</span><span id="line-1012"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- Change protocol and software version.</span><span>
</span><span id="line-1013"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">45</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">VKey -&gt; PParams -&gt; ProtVer -&gt; SwVer -&gt; GenT Identity UProp
</span><a href="#local-6989586621679555521"><span class="hs-identifier hs-var">generateUpdateProposalWith</span></a></span><span> </span><span class="annot"><span class="annottext">VKey
</span><a href="#local-6989586621679555530"><span class="hs-identifier hs-var">vk</span></a></span><span> </span><span class="annot"><span class="annottext">PParams
</span><a href="#local-6989586621679555528"><span class="hs-identifier hs-var">pps'</span></a></span><span> </span><span class="annot"><span class="annottext">ProtVer
</span><a href="#local-6989586621679555529"><span class="hs-identifier hs-var">pv'</span></a></span><span> </span><span class="annot"><span class="annottext">SwVer
</span><a href="#local-6989586621679555527"><span class="hs-identifier hs-var">sv'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1014"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-1015"></span><span>
</span><span id="line-1016"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-1017"></span><span>      </span><span class="annot"><a href="#local-6989586621679555513"><span class="hs-identifier hs-type">idGen</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Gen</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpId"><span class="hs-identifier hs-type">UpId</span></a></span><span>
</span><span id="line-1018"></span><span>      </span><span id="local-6989586621679555513"><span class="annot"><span class="annottext">idGen :: Gen UpId
</span><a href="#local-6989586621679555513"><span class="hs-identifier hs-var hs-var">idGen</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1019"></span><span>        </span><span class="hs-comment">-- Chose an increment for the maximum version seen in the update</span><span>
</span><span id="line-1020"></span><span>        </span><span class="hs-comment">-- proposal IDs.</span><span>
</span><span id="line-1021"></span><span>        </span><span id="local-6989586621679555512"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679555512"><span class="hs-identifier hs-var">inc</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Range Int -&gt; GenT Identity Int
forall (m :: * -&gt; *) a. (MonadGen m, Integral a) =&gt; Range a -&gt; m a
</span><span class="hs-identifier hs-var">Gen.integral</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Range Int
forall a. a -&gt; a -&gt; Range a
</span><span class="hs-identifier hs-var">Range.constant</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">10</span></span><span class="hs-special">)</span><span>
</span><span id="line-1022"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Set UpId -&gt; [UpId]
forall a. Set a -&gt; [a]
</span><span class="hs-identifier hs-var">Set.toDescList</span></span><span> </span><span class="annot"><span class="annottext">(Set UpId -&gt; [UpId]) -&gt; Set UpId -&gt; [UpId]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Map UpId Slot -&gt; Set (Domain (Map UpId Slot))
forall m. (Relation m, Ord (Domain m)) =&gt; m -&gt; Set (Domain m)
</span><a href="Byron.Spec.Ledger.Core.html#dom"><span class="hs-identifier hs-var">dom</span></a></span><span> </span><span class="annot"><span class="annottext">Map UpId Slot
</span><a href="#local-6989586621679555531"><span class="hs-identifier hs-var">pws</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1023"></span><span>          </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; UpId
</span><a href="Byron.Spec.Ledger.Update.html#UpId"><span class="hs-identifier hs-var">UpId</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; UpId) -&gt; GenT Identity Int -&gt; Gen UpId
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Int] -&gt; GenT Identity Int
forall (m :: * -&gt; *) a. MonadGen m =&gt; [a] -&gt; m a
</span><span class="hs-identifier hs-var">Gen.element</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">..</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679555512"><span class="hs-identifier hs-var">inc</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1024"></span><span>          </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpId"><span class="hs-identifier hs-type">UpId</span></a></span><span> </span><span id="local-6989586621679555508"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679555508"><span class="hs-identifier hs-var">maxId</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span class="annot"><span class="annottext">[UpId]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UpId -&gt; Gen UpId
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(UpId -&gt; Gen UpId) -&gt; UpId -&gt; Gen UpId
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; UpId
</span><a href="Byron.Spec.Ledger.Update.html#UpId"><span class="hs-identifier hs-var">UpId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679555508"><span class="hs-identifier hs-var">maxId</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679555512"><span class="hs-identifier hs-var">inc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1025"></span><span>
</span><span id="line-1026"></span><span>      </span><span class="hs-comment">-- As issuer we chose a current delegate. The delegation map must not be</span><span>
</span><span id="line-1027"></span><span>      </span><span class="hs-comment">-- empty for this signal generator to succeed.</span><span>
</span><span id="line-1028"></span><span>      </span><span class="annot"><a href="#local-6989586621679555526"><span class="hs-identifier hs-type">issuerGen</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Gen</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier hs-type">Core.VKey</span></a></span><span>
</span><span id="line-1029"></span><span>      </span><span id="local-6989586621679555526"><span class="annot"><span class="annottext">issuerGen :: GenT Identity VKey
</span><a href="#local-6989586621679555526"><span class="hs-identifier hs-var hs-var">issuerGen</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1030"></span><span>        </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">[VKey] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">[VKey]
</span><a href="#local-6989586621679555507"><span class="hs-identifier hs-var">delegates</span></a></span><span>
</span><span id="line-1031"></span><span>        </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">String -&gt; GenT Identity VKey
forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;There are no delegates to issue an update proposal.&quot;</span></span><span>
</span><span id="line-1032"></span><span>        </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">[VKey] -&gt; GenT Identity VKey
forall (m :: * -&gt; *) a. MonadGen m =&gt; [a] -&gt; m a
</span><span class="hs-identifier hs-var">Gen.element</span></span><span> </span><span class="annot"><span class="annottext">[VKey]
</span><a href="#local-6989586621679555507"><span class="hs-identifier hs-var">delegates</span></a></span><span>
</span><span id="line-1033"></span><span>        </span><span class="hs-keyword">where</span><span>
</span><span id="line-1034"></span><span>          </span><span id="local-6989586621679555507"><span class="annot"><span class="annottext">delegates :: [VKey]
</span><a href="#local-6989586621679555507"><span class="hs-identifier hs-var hs-var">delegates</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set VKey -&gt; [VKey]
forall a. Set a -&gt; [a]
</span><span class="hs-identifier hs-var">Set.toList</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bimap VKeyGenesis VKey -&gt; Set (Range (Bimap VKeyGenesis VKey))
forall m. (Relation m, Ord (Range m)) =&gt; m -&gt; Set (Range m)
</span><a href="Byron.Spec.Ledger.Core.html#range"><span class="hs-identifier hs-var">range</span></a></span><span> </span><span class="annot"><span class="annottext">Bimap VKeyGenesis VKey
</span><a href="#local-6989586621679555543"><span class="hs-identifier hs-var">dms</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1035"></span><span>
</span><span id="line-1036"></span><span>      </span><span class="annot"><a href="#local-6989586621679555524"><span class="hs-identifier hs-type">pparamsGen</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Gen</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#PParams"><span class="hs-identifier hs-type">PParams</span></a></span><span>
</span><span id="line-1037"></span><span>      </span><span id="local-6989586621679555524"><span class="annot"><span class="annottext">pparamsGen :: GenT Identity PParams
</span><a href="#local-6989586621679555524"><span class="hs-identifier hs-var hs-var">pparamsGen</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PParams -&gt; GenT Identity PParams
</span><a href="Byron.Spec.Ledger.Update.html#ppsUpdateFrom"><span class="hs-identifier hs-var">ppsUpdateFrom</span></a></span><span> </span><span class="annot"><span class="annottext">PParams
</span><a href="#local-6989586621679555539"><span class="hs-identifier hs-var">pps</span></a></span><span>
</span><span id="line-1038"></span><span>
</span><span id="line-1039"></span><span>      </span><span class="annot"><a href="#local-6989586621679555525"><span class="hs-identifier hs-type">pvGen</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Gen</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ProtVer"><span class="hs-identifier hs-type">ProtVer</span></a></span><span>
</span><span id="line-1040"></span><span>      </span><span id="local-6989586621679555525"><span class="annot"><span class="annottext">pvGen :: GenT Identity ProtVer
</span><a href="#local-6989586621679555525"><span class="hs-identifier hs-var hs-var">pvGen</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1041"></span><span>        </span><span class="annot"><span class="annottext">(Natural, Natural) -&gt; ProtVer
</span><a href="#local-6989586621679555504"><span class="hs-identifier hs-var">nextAltVersion</span></a></span><span> </span><span class="annot"><span class="annottext">((Natural, Natural) -&gt; ProtVer)
-&gt; GenT Identity (Natural, Natural) -&gt; GenT Identity ProtVer
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[(Natural, Natural)] -&gt; GenT Identity (Natural, Natural)
forall (m :: * -&gt; *) a. MonadGen m =&gt; [a] -&gt; m a
</span><span class="hs-identifier hs-var">Gen.element</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ProtVer -&gt; Natural
</span><a href="Byron.Spec.Ledger.Update.html#_pvMaj"><span class="hs-identifier hs-var hs-var">_pvMaj</span></a></span><span> </span><span class="annot"><span class="annottext">ProtVer
</span><a href="#local-6989586621679555540"><span class="hs-identifier hs-var">pv</span></a></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Natural -&gt; Natural
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">1</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span>
</span><span id="line-1042"></span><span>                                       </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ProtVer -&gt; Natural
</span><a href="Byron.Spec.Ledger.Update.html#_pvMaj"><span class="hs-identifier hs-var hs-var">_pvMaj</span></a></span><span> </span><span class="annot"><span class="annottext">ProtVer
</span><a href="#local-6989586621679555540"><span class="hs-identifier hs-var">pv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ProtVer -&gt; Natural
</span><a href="Byron.Spec.Ledger.Update.html#_pvMin"><span class="hs-identifier hs-var hs-var">_pvMin</span></a></span><span> </span><span class="annot"><span class="annottext">ProtVer
</span><a href="#local-6989586621679555540"><span class="hs-identifier hs-var">pv</span></a></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Natural -&gt; Natural
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-1043"></span><span>                                       </span><span class="hs-special">]</span><span>
</span><span id="line-1044"></span><span>        </span><span class="hs-keyword">where</span><span>
</span><span id="line-1045"></span><span>          </span><span class="hs-comment">-- Get the next alternate version, alt, so that @(maj, min, alt)@</span><span>
</span><span id="line-1046"></span><span>          </span><span class="hs-comment">-- is not part of the registered protocol-update proposals</span><span>
</span><span id="line-1047"></span><span>          </span><span class="hs-comment">-- (@rpus@).</span><span>
</span><span id="line-1048"></span><span>          </span><span class="annot"><a href="#local-6989586621679555504"><span class="hs-identifier hs-type">nextAltVersion</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Natural</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Natural</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ProtVer"><span class="hs-identifier hs-type">ProtVer</span></a></span><span>
</span><span id="line-1049"></span><span>          </span><span id="local-6989586621679555504"><span class="annot"><span class="annottext">nextAltVersion :: (Natural, Natural) -&gt; ProtVer
</span><a href="#local-6989586621679555504"><span class="hs-identifier hs-var hs-var">nextAltVersion</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679555503"><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679555503"><span class="hs-identifier hs-var">maj</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555502"><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679555502"><span class="hs-identifier hs-var">mn</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set (ProtVer, PParams) -&gt; Set (Domain (Set (ProtVer, PParams)))
forall m. (Relation m, Ord (Domain m)) =&gt; m -&gt; Set (Domain m)
</span><a href="Byron.Spec.Ledger.Core.html#dom"><span class="hs-identifier hs-var">dom</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map UpId (ProtVer, PParams)
-&gt; Set (Range (Map UpId (ProtVer, PParams)))
forall m. (Relation m, Ord (Range m)) =&gt; m -&gt; Set (Range m)
</span><a href="Byron.Spec.Ledger.Core.html#range"><span class="hs-identifier hs-var">range</span></a></span><span> </span><span class="annot"><span class="annottext">Map UpId (ProtVer, PParams)
</span><a href="#local-6989586621679555536"><span class="hs-identifier hs-var">rpus</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1050"></span><span>                                    </span><span class="annot"><span class="annottext">Set ProtVer -&gt; (Set ProtVer -&gt; Set ProtVer) -&gt; Set ProtVer
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(ProtVer -&gt; Bool) -&gt; Set ProtVer -&gt; Set ProtVer
forall a. (a -&gt; Bool) -&gt; Set a -&gt; Set a
</span><span class="hs-identifier hs-var">Set.filter</span></span><span> </span><span class="annot"><span class="annottext">ProtVer -&gt; Bool
</span><a href="#local-6989586621679555500"><span class="hs-identifier hs-var">protocolVersionEqualsMajMin</span></a></span><span>
</span><span id="line-1051"></span><span>                                    </span><span class="annot"><span class="annottext">Set ProtVer -&gt; (Set ProtVer -&gt; Set Natural) -&gt; Set Natural
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(ProtVer -&gt; Natural) -&gt; Set ProtVer -&gt; Set Natural
forall b a. Ord b =&gt; (a -&gt; b) -&gt; Set a -&gt; Set b
</span><span class="hs-identifier hs-var">Set.map</span></span><span> </span><span class="annot"><span class="annottext">ProtVer -&gt; Natural
</span><a href="Byron.Spec.Ledger.Update.html#_pvAlt"><span class="hs-identifier hs-var hs-var">_pvAlt</span></a></span><span>
</span><span id="line-1052"></span><span>                                    </span><span class="annot"><span class="annottext">Set Natural -&gt; (Set Natural -&gt; [Natural]) -&gt; [Natural]
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">Set Natural -&gt; [Natural]
forall a. Set a -&gt; [a]
</span><span class="hs-identifier hs-var">Set.toDescList</span></span><span>
</span><span id="line-1053"></span><span>                                    </span><span class="annot"><span class="annottext">[Natural] -&gt; ([Natural] -&gt; ProtVer) -&gt; ProtVer
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">[Natural] -&gt; ProtVer
</span><a href="#local-6989586621679555498"><span class="hs-identifier hs-var">nextVersion</span></a></span><span>
</span><span id="line-1054"></span><span>            </span><span class="hs-keyword">where</span><span>
</span><span id="line-1055"></span><span>              </span><span class="annot"><a href="#local-6989586621679555500"><span class="hs-identifier hs-type">protocolVersionEqualsMajMin</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ProtVer"><span class="hs-identifier hs-type">ProtVer</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1056"></span><span>              </span><span id="local-6989586621679555500"><span class="annot"><span class="annottext">protocolVersionEqualsMajMin :: ProtVer -&gt; Bool
</span><a href="#local-6989586621679555500"><span class="hs-identifier hs-var hs-var">protocolVersionEqualsMajMin</span></a></span></span><span> </span><span id="local-6989586621679555497"><span class="annot"><span class="annottext">ProtVer
</span><a href="#local-6989586621679555497"><span class="hs-identifier hs-var">pv'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1057"></span><span>                </span><span class="annot"><span class="annottext">ProtVer -&gt; Natural
</span><a href="Byron.Spec.Ledger.Update.html#_pvMaj"><span class="hs-identifier hs-var hs-var">_pvMaj</span></a></span><span> </span><span class="annot"><span class="annottext">ProtVer
</span><a href="#local-6989586621679555497"><span class="hs-identifier hs-var">pv'</span></a></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Natural -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679555503"><span class="hs-identifier hs-var">maj</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">ProtVer -&gt; Natural
</span><a href="Byron.Spec.Ledger.Update.html#_pvMin"><span class="hs-identifier hs-var hs-var">_pvMin</span></a></span><span> </span><span class="annot"><span class="annottext">ProtVer
</span><a href="#local-6989586621679555497"><span class="hs-identifier hs-var">pv'</span></a></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Natural -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679555502"><span class="hs-identifier hs-var">mn</span></a></span><span>
</span><span id="line-1058"></span><span>
</span><span id="line-1059"></span><span>              </span><span class="annot"><a href="#local-6989586621679555498"><span class="hs-identifier hs-type">nextVersion</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Natural</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ProtVer"><span class="hs-identifier hs-type">ProtVer</span></a></span><span>
</span><span id="line-1060"></span><span>              </span><span id="local-6989586621679555498"><span class="annot"><span class="annottext">nextVersion :: [Natural] -&gt; ProtVer
</span><a href="#local-6989586621679555498"><span class="hs-identifier hs-var hs-var">nextVersion</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Natural -&gt; Natural -&gt; ProtVer
</span><a href="Byron.Spec.Ledger.Update.html#ProtVer"><span class="hs-identifier hs-var">ProtVer</span></a></span><span> </span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679555503"><span class="hs-identifier hs-var">maj</span></a></span><span> </span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679555502"><span class="hs-identifier hs-var">mn</span></a></span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">0</span></span><span>
</span><span id="line-1061"></span><span>              </span><span class="annot"><a href="#local-6989586621679555498"><span class="hs-identifier hs-var">nextVersion</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679555496"><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679555496"><span class="hs-identifier hs-var">x</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span class="annot"><span class="annottext">[Natural]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Natural -&gt; Natural -&gt; ProtVer
</span><a href="Byron.Spec.Ledger.Update.html#ProtVer"><span class="hs-identifier hs-var">ProtVer</span></a></span><span> </span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679555503"><span class="hs-identifier hs-var">maj</span></a></span><span> </span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679555502"><span class="hs-identifier hs-var">mn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Natural -&gt; Natural
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679555496"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1062"></span><span>
</span><span id="line-1063"></span><span>      </span><span class="hs-comment">-- Generate a software version update.</span><span>
</span><span id="line-1064"></span><span>      </span><span class="annot"><a href="#local-6989586621679555523"><span class="hs-identifier hs-type">swVerGen</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Gen</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#SwVer"><span class="hs-identifier hs-type">SwVer</span></a></span><span>
</span><span id="line-1065"></span><span>      </span><span id="local-6989586621679555523"><span class="annot"><span class="annottext">swVerGen :: GenT Identity SwVer
</span><a href="#local-6989586621679555523"><span class="hs-identifier hs-var hs-var">swVerGen</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1066"></span><span>        </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">[(ApName, ApVer)] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">[(ApName, ApVer)]
</span><a href="#local-6989586621679555495"><span class="hs-identifier hs-var">possibleNextVersions</span></a></span><span>
</span><span id="line-1067"></span><span>        </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">GenT Identity SwVer
</span><a href="#local-6989586621679555494"><span class="hs-identifier hs-var">genNewApp</span></a></span><span>
</span><span id="line-1068"></span><span>        </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">[GenT Identity SwVer] -&gt; GenT Identity SwVer
forall (m :: * -&gt; *) a. MonadGen m =&gt; [m a] -&gt; m a
</span><span class="hs-identifier hs-var">Gen.choice</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">GenT Identity SwVer
</span><a href="#local-6989586621679555492"><span class="hs-identifier hs-var">genANextVersion</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">GenT Identity SwVer
</span><a href="#local-6989586621679555494"><span class="hs-identifier hs-var">genNewApp</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1069"></span><span>        </span><span class="hs-keyword">where</span><span>
</span><span id="line-1070"></span><span>          </span><span class="annot"><a href="#local-6989586621679555495"><span class="hs-identifier hs-type">possibleNextVersions</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ApName"><span class="hs-identifier hs-type">ApName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ApVer"><span class="hs-identifier hs-type">ApVer</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1071"></span><span>          </span><span id="local-6989586621679555495"><span class="annot"><span class="annottext">possibleNextVersions :: [(ApName, ApVer)]
</span><a href="#local-6989586621679555495"><span class="hs-identifier hs-var hs-var">possibleNextVersions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set (ApName, ApVer) -&gt; [(ApName, ApVer)]
forall a. Set a -&gt; [a]
</span><span class="hs-identifier hs-var">Set.toList</span></span><span> </span><span class="annot"><span class="annottext">(Set (ApName, ApVer) -&gt; [(ApName, ApVer)])
-&gt; Set (ApName, ApVer) -&gt; [(ApName, ApVer)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Set (ApName, ApVer)
</span><a href="#local-6989586621679555491"><span class="hs-identifier hs-var">nextVersions</span></a></span><span> </span><span class="annot"><span class="annottext">Set (ApName, ApVer) -&gt; Set (ApName, ApVer) -&gt; Set (ApName, ApVer)
forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Set a
</span><span class="hs-operator hs-var">\\</span></span><span> </span><span class="annot"><span class="annottext">Set (ApName, ApVer)
</span><a href="#local-6989586621679555490"><span class="hs-identifier hs-var">registeredNextVersions</span></a></span><span>
</span><span id="line-1072"></span><span>            </span><span class="hs-keyword">where</span><span>
</span><span id="line-1073"></span><span>              </span><span class="annot"><a href="#local-6989586621679555491"><span class="hs-identifier hs-type">nextVersions</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ApName"><span class="hs-identifier hs-type">ApName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ApVer"><span class="hs-identifier hs-type">ApVer</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1074"></span><span>              </span><span id="local-6989586621679555491"><span class="annot"><span class="annottext">nextVersions :: Set (ApName, ApVer)
</span><a href="#local-6989586621679555491"><span class="hs-identifier hs-var hs-var">nextVersions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(ApName, ApVer)] -&gt; Set (ApName, ApVer)
forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">Set.fromList</span></span><span> </span><span class="annot"><span class="annottext">([(ApName, ApVer)] -&gt; Set (ApName, ApVer))
-&gt; [(ApName, ApVer)] -&gt; Set (ApName, ApVer)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[ApName] -&gt; [ApVer] -&gt; [(ApName, ApVer)]
forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><span class="hs-identifier hs-var">zip</span></span><span> </span><span class="annot"><span class="annottext">[ApName]
</span><a href="#local-6989586621679555488"><span class="hs-identifier hs-var">currentAppNames</span></a></span><span> </span><span class="annot"><span class="annottext">[ApVer]
</span><a href="#local-6989586621679555487"><span class="hs-identifier hs-var">nextAppVersions</span></a></span><span>
</span><span id="line-1075"></span><span>                </span><span class="hs-keyword">where</span><span>
</span><span id="line-1076"></span><span>                  </span><span class="hs-special">(</span><span id="local-6989586621679555488"><span class="annot"><span class="annottext">[ApName]
</span><a href="#local-6989586621679555488"><span class="hs-identifier hs-var">currentAppNames</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555486"><span class="annot"><span class="annottext">[(ApVer, Slot, Metadata)]
</span><a href="#local-6989586621679555486"><span class="hs-identifier hs-var">currentAppVersions</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(ApName, (ApVer, Slot, Metadata))]
-&gt; ([ApName], [(ApVer, Slot, Metadata)])
forall a b. [(a, b)] -&gt; ([a], [b])
</span><span class="hs-identifier hs-var">unzip</span></span><span> </span><span class="annot"><span class="annottext">([(ApName, (ApVer, Slot, Metadata))]
 -&gt; ([ApName], [(ApVer, Slot, Metadata)]))
-&gt; [(ApName, (ApVer, Slot, Metadata))]
-&gt; ([ApName], [(ApVer, Slot, Metadata)])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Map ApName (ApVer, Slot, Metadata)
-&gt; [(ApName, (ApVer, Slot, Metadata))]
forall k a. Map k a -&gt; [(k, a)]
</span><span class="hs-identifier hs-var">Map.toList</span></span><span> </span><span class="annot"><span class="annottext">Map ApName (ApVer, Slot, Metadata)
</span><a href="#local-6989586621679555537"><span class="hs-identifier hs-var">avs</span></a></span><span>
</span><span id="line-1077"></span><span>                  </span><span class="annot"><a href="#local-6989586621679555487"><span class="hs-identifier hs-type">nextAppVersions</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ApVer"><span class="hs-identifier hs-type">ApVer</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1078"></span><span>                  </span><span id="local-6989586621679555487"><span class="annot"><span class="annottext">nextAppVersions :: [ApVer]
</span><a href="#local-6989586621679555487"><span class="hs-identifier hs-var hs-var">nextAppVersions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ApVer -&gt; ApVer -&gt; ApVer
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span class="annot"><span class="annottext">ApVer
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(ApVer -&gt; ApVer)
-&gt; ((ApVer, Slot, Metadata) -&gt; ApVer)
-&gt; (ApVer, Slot, Metadata)
-&gt; ApVer
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(ApVer, Slot, Metadata) -&gt; ApVer
forall a b c. (a, b, c) -&gt; a
</span><a href="#local-6989586621679555484"><span class="hs-identifier hs-var">fst3</span></a></span><span> </span><span class="annot"><span class="annottext">((ApVer, Slot, Metadata) -&gt; ApVer)
-&gt; [(ApVer, Slot, Metadata)] -&gt; [ApVer]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[(ApVer, Slot, Metadata)]
</span><a href="#local-6989586621679555486"><span class="hs-identifier hs-var">currentAppVersions</span></a></span><span>
</span><span id="line-1079"></span><span>              </span><span class="annot"><a href="#local-6989586621679555490"><span class="hs-identifier hs-type">registeredNextVersions</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ApName"><span class="hs-identifier hs-type">ApName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ApVer"><span class="hs-identifier hs-type">ApVer</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1080"></span><span>              </span><span id="local-6989586621679555490"><span class="annot"><span class="annottext">registeredNextVersions :: Set (ApName, ApVer)
</span><a href="#local-6989586621679555490"><span class="hs-identifier hs-var hs-var">registeredNextVersions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((ApName, ApVer, Metadata) -&gt; (ApName, ApVer))
-&gt; Set (ApName, ApVer, Metadata) -&gt; Set (ApName, ApVer)
forall b a. Ord b =&gt; (a -&gt; b) -&gt; Set a -&gt; Set b
</span><span class="hs-identifier hs-var">Set.map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(ApName, ApVer, Metadata) -&gt; ApName
forall a b c. (a, b, c) -&gt; a
</span><a href="#local-6989586621679555484"><span class="hs-identifier hs-var">fst3</span></a></span><span> </span><span class="annot"><span class="annottext">((ApName, ApVer, Metadata) -&gt; ApName)
-&gt; ((ApName, ApVer, Metadata) -&gt; ApVer)
-&gt; (ApName, ApVer, Metadata)
-&gt; (ApName, ApVer)
forall (a :: * -&gt; * -&gt; *) b c c'.
Arrow a =&gt;
a b c -&gt; a b c' -&gt; a b (c, c')
</span><span class="hs-operator hs-var">&amp;&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">(ApName, ApVer, Metadata) -&gt; ApVer
forall a b c. (a, b, c) -&gt; b
</span><a href="#local-6989586621679555483"><span class="hs-identifier hs-var">snd3</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map UpId (ApName, ApVer, Metadata)
-&gt; Set (Range (Map UpId (ApName, ApVer, Metadata)))
forall m. (Relation m, Ord (Range m)) =&gt; m -&gt; Set (Range m)
</span><a href="Byron.Spec.Ledger.Core.html#range"><span class="hs-identifier hs-var">range</span></a></span><span> </span><span class="annot"><span class="annottext">Map UpId (ApName, ApVer, Metadata)
</span><a href="#local-6989586621679555535"><span class="hs-identifier hs-var">raus</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1081"></span><span>
</span><span id="line-1082"></span><span>          </span><span class="hs-comment">-- Generate the next version for an existing application</span><span>
</span><span id="line-1083"></span><span>          </span><span class="annot"><a href="#local-6989586621679555492"><span class="hs-identifier hs-type">genANextVersion</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Gen</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#SwVer"><span class="hs-identifier hs-type">SwVer</span></a></span><span>
</span><span id="line-1084"></span><span>          </span><span id="local-6989586621679555492"><span class="annot"><span class="annottext">genANextVersion :: GenT Identity SwVer
</span><a href="#local-6989586621679555492"><span class="hs-identifier hs-var hs-var">genANextVersion</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ApName -&gt; ApVer -&gt; SwVer) -&gt; (ApName, ApVer) -&gt; SwVer
forall a b c. (a -&gt; b -&gt; c) -&gt; (a, b) -&gt; c
</span><span class="hs-identifier hs-var">uncurry</span></span><span> </span><span class="annot"><span class="annottext">ApName -&gt; ApVer -&gt; SwVer
</span><a href="Byron.Spec.Ledger.Update.html#SwVer"><span class="hs-identifier hs-var">SwVer</span></a></span><span> </span><span class="annot"><span class="annottext">((ApName, ApVer) -&gt; SwVer)
-&gt; GenT Identity (ApName, ApVer) -&gt; GenT Identity SwVer
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[(ApName, ApVer)] -&gt; GenT Identity (ApName, ApVer)
forall (m :: * -&gt; *) a. MonadGen m =&gt; [a] -&gt; m a
</span><span class="hs-identifier hs-var">Gen.element</span></span><span> </span><span class="annot"><span class="annottext">[(ApName, ApVer)]
</span><a href="#local-6989586621679555495"><span class="hs-identifier hs-var">possibleNextVersions</span></a></span><span>
</span><span id="line-1085"></span><span>
</span><span id="line-1086"></span><span>          </span><span id="local-6989586621679555484"><span class="annot"><span class="annottext">fst3 :: (a, b, c) -&gt; a
</span><a href="#local-6989586621679555484"><span class="hs-identifier hs-var hs-var">fst3</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679555482"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679555482"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">b
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">c
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679555482"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1087"></span><span>          </span><span id="local-6989586621679555483"><span class="annot"><span class="annottext">snd3 :: (a, b, c) -&gt; b
</span><a href="#local-6989586621679555483"><span class="hs-identifier hs-var hs-var">snd3</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555481"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679555481"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">c
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679555481"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-1088"></span><span>
</span><span id="line-1089"></span><span>          </span><span class="hs-comment">-- Generate a new application</span><span>
</span><span id="line-1090"></span><span>          </span><span class="annot"><a href="#local-6989586621679555494"><span class="hs-identifier hs-type">genNewApp</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Gen</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#SwVer"><span class="hs-identifier hs-type">SwVer</span></a></span><span>
</span><span id="line-1091"></span><span>          </span><span id="local-6989586621679555494"><span class="annot"><span class="annottext">genNewApp :: GenT Identity SwVer
</span><a href="#local-6989586621679555494"><span class="hs-identifier hs-var hs-var">genNewApp</span></a></span></span><span>
</span><span id="line-1092"></span><span>            </span><span class="hs-glyph">=</span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ApName -&gt; ApVer -&gt; SwVer
</span><a href="Byron.Spec.Ledger.Update.html#SwVer"><span class="hs-operator hs-var">`SwVer`</span></a></span><span> </span><span class="annot"><span class="annottext">ApVer
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(ApName -&gt; SwVer) -&gt; (String -&gt; ApName) -&gt; String -&gt; SwVer
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ApName
</span><a href="Byron.Spec.Ledger.Update.html#ApName"><span class="hs-identifier hs-var">ApName</span></a></span><span>
</span><span id="line-1093"></span><span>           </span><span class="annot"><span class="annottext">(String -&gt; SwVer) -&gt; GenT Identity String -&gt; GenT Identity SwVer
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Bool) -&gt; GenT Identity String -&gt; GenT Identity String
forall (m :: * -&gt; *) a.
(MonadGen m, GenBase m ~ Identity) =&gt;
(a -&gt; Bool) -&gt; m a -&gt; m a
</span><span class="hs-identifier hs-var">Gen.filter</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">ApName -&gt; Set ApName -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><span class="hs-operator hs-var">`notElem`</span></span><span> </span><span class="annot"><span class="annottext">Set ApName
</span><a href="#local-6989586621679555479"><span class="hs-identifier hs-var">usedNames</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(ApName -&gt; Bool) -&gt; (String -&gt; ApName) -&gt; String -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ApName
</span><a href="Byron.Spec.Ledger.Update.html#ApName"><span class="hs-identifier hs-var">ApName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1094"></span><span>                          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Range Int -&gt; GenT Identity Char -&gt; GenT Identity String
forall (m :: * -&gt; *) a. MonadGen m =&gt; Range Int -&gt; m a -&gt; m [a]
</span><span class="hs-identifier hs-var">Gen.list</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Range Int
forall a. a -&gt; a -&gt; Range a
</span><span class="hs-identifier hs-var">Range.constant</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">12</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">GenT Identity Char
forall (m :: * -&gt; *). MonadGen m =&gt; m Char
</span><span class="hs-identifier hs-var">Gen.ascii</span></span><span class="hs-special">)</span><span>
</span><span id="line-1095"></span><span>            </span><span class="hs-keyword">where</span><span>
</span><span id="line-1096"></span><span>              </span><span id="local-6989586621679555479"><span class="annot"><span class="annottext">usedNames :: Set ApName
</span><a href="#local-6989586621679555479"><span class="hs-identifier hs-var hs-var">usedNames</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((ApName, ApVer, Metadata) -&gt; ApName)
-&gt; Set (ApName, ApVer, Metadata) -&gt; Set ApName
forall b a. Ord b =&gt; (a -&gt; b) -&gt; Set a -&gt; Set b
</span><span class="hs-identifier hs-var">Set.map</span></span><span> </span><span class="annot"><span class="annottext">(ApName, ApVer, Metadata) -&gt; ApName
forall a b c. (a, b, c) -&gt; a
</span><a href="#local-6989586621679555484"><span class="hs-identifier hs-var">fst3</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map UpId (ApName, ApVer, Metadata)
-&gt; Set (Range (Map UpId (ApName, ApVer, Metadata)))
forall m. (Relation m, Ord (Range m)) =&gt; m -&gt; Set (Range m)
</span><a href="Byron.Spec.Ledger.Core.html#range"><span class="hs-identifier hs-var">range</span></a></span><span> </span><span class="annot"><span class="annottext">Map UpId (ApName, ApVer, Metadata)
</span><a href="#local-6989586621679555535"><span class="hs-identifier hs-var">raus</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1097"></span><span>                          </span><span class="annot"><span class="annottext">Set ApName -&gt; Set ApName -&gt; Set ApName
forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Set a
</span><span class="hs-operator hs-var">`union`</span></span><span>
</span><span id="line-1098"></span><span>                          </span><span class="annot"><span class="annottext">Map ApName (ApVer, Slot, Metadata)
-&gt; Set (Domain (Map ApName (ApVer, Slot, Metadata)))
forall m. (Relation m, Ord (Domain m)) =&gt; m -&gt; Set (Domain m)
</span><a href="Byron.Spec.Ledger.Core.html#dom"><span class="hs-identifier hs-var">dom</span></a></span><span> </span><span class="annot"><span class="annottext">Map ApName (ApVer, Slot, Metadata)
</span><a href="#local-6989586621679555537"><span class="hs-identifier hs-var">avs</span></a></span><span>
</span><span id="line-1099"></span><span>
</span><span id="line-1100"></span><span>      </span><span class="annot"><a href="#local-6989586621679555521"><span class="hs-identifier hs-type">generateUpdateProposalWith</span></a></span><span>
</span><span id="line-1101"></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier hs-type">VKey</span></a></span><span>
</span><span id="line-1102"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#PParams"><span class="hs-identifier hs-type">PParams</span></a></span><span>
</span><span id="line-1103"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ProtVer"><span class="hs-identifier hs-type">ProtVer</span></a></span><span>
</span><span id="line-1104"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#SwVer"><span class="hs-identifier hs-type">SwVer</span></a></span><span>
</span><span id="line-1105"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Gen</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UProp"><span class="hs-identifier hs-type">UProp</span></a></span><span>
</span><span id="line-1106"></span><span>      </span><span id="local-6989586621679555521"><span class="annot"><span class="annottext">generateUpdateProposalWith :: VKey -&gt; PParams -&gt; ProtVer -&gt; SwVer -&gt; GenT Identity UProp
</span><a href="#local-6989586621679555521"><span class="hs-identifier hs-var hs-var">generateUpdateProposalWith</span></a></span></span><span> </span><span id="local-6989586621679555476"><span class="annot"><span class="annottext">VKey
</span><a href="#local-6989586621679555476"><span class="hs-identifier hs-var">vk</span></a></span></span><span> </span><span id="local-6989586621679555475"><span class="annot"><span class="annottext">PParams
</span><a href="#local-6989586621679555475"><span class="hs-identifier hs-var">pps'</span></a></span></span><span> </span><span id="local-6989586621679555474"><span class="annot"><span class="annottext">ProtVer
</span><a href="#local-6989586621679555474"><span class="hs-identifier hs-var">pv'</span></a></span></span><span> </span><span id="local-6989586621679555473"><span class="annot"><span class="annottext">SwVer
</span><a href="#local-6989586621679555473"><span class="hs-identifier hs-var">sv'</span></a></span></span><span>
</span><span id="line-1107"></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UpId
-&gt; VKey
-&gt; ProtVer
-&gt; PParams
-&gt; SwVer
-&gt; Set String
-&gt; Metadata
-&gt; UProp
</span><a href="Byron.Spec.Ledger.Update.html#mkUProp"><span class="hs-identifier hs-var">mkUProp</span></a></span><span>
</span><span id="line-1108"></span><span>        </span><span class="annot"><span class="annottext">(UpId
 -&gt; VKey
 -&gt; ProtVer
 -&gt; PParams
 -&gt; SwVer
 -&gt; Set String
 -&gt; Metadata
 -&gt; UProp)
-&gt; Gen UpId
-&gt; GenT
     Identity
     (VKey
      -&gt; ProtVer -&gt; PParams -&gt; SwVer -&gt; Set String -&gt; Metadata -&gt; UProp)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Gen UpId
</span><a href="#local-6989586621679555513"><span class="hs-identifier hs-var">idGen</span></a></span><span>
</span><span id="line-1109"></span><span>        </span><span class="annot"><span class="annottext">GenT
  Identity
  (VKey
   -&gt; ProtVer -&gt; PParams -&gt; SwVer -&gt; Set String -&gt; Metadata -&gt; UProp)
-&gt; GenT Identity VKey
-&gt; GenT
     Identity
     (ProtVer -&gt; PParams -&gt; SwVer -&gt; Set String -&gt; Metadata -&gt; UProp)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">VKey -&gt; GenT Identity VKey
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">VKey
</span><a href="#local-6989586621679555476"><span class="hs-identifier hs-var">vk</span></a></span><span>
</span><span id="line-1110"></span><span>        </span><span class="annot"><span class="annottext">GenT
  Identity
  (ProtVer -&gt; PParams -&gt; SwVer -&gt; Set String -&gt; Metadata -&gt; UProp)
-&gt; GenT Identity ProtVer
-&gt; GenT
     Identity (PParams -&gt; SwVer -&gt; Set String -&gt; Metadata -&gt; UProp)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">ProtVer -&gt; GenT Identity ProtVer
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">ProtVer
</span><a href="#local-6989586621679555474"><span class="hs-identifier hs-var">pv'</span></a></span><span>
</span><span id="line-1111"></span><span>        </span><span class="annot"><span class="annottext">GenT Identity (PParams -&gt; SwVer -&gt; Set String -&gt; Metadata -&gt; UProp)
-&gt; GenT Identity PParams
-&gt; GenT Identity (SwVer -&gt; Set String -&gt; Metadata -&gt; UProp)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">PParams -&gt; GenT Identity PParams
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">PParams
</span><a href="#local-6989586621679555475"><span class="hs-identifier hs-var">pps'</span></a></span><span>
</span><span id="line-1112"></span><span>        </span><span class="annot"><span class="annottext">GenT Identity (SwVer -&gt; Set String -&gt; Metadata -&gt; UProp)
-&gt; GenT Identity SwVer
-&gt; GenT Identity (Set String -&gt; Metadata -&gt; UProp)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">SwVer -&gt; GenT Identity SwVer
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SwVer
</span><a href="#local-6989586621679555473"><span class="hs-identifier hs-var">sv'</span></a></span><span>
</span><span id="line-1113"></span><span>        </span><span class="annot"><span class="annottext">GenT Identity (Set String -&gt; Metadata -&gt; UProp)
-&gt; GenT Identity (Set String) -&gt; GenT Identity (Metadata -&gt; UProp)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">GenT Identity (Set String)
</span><a href="#local-6989586621679555472"><span class="hs-identifier hs-var">stTagsGen</span></a></span><span>
</span><span id="line-1114"></span><span>        </span><span class="annot"><span class="annottext">GenT Identity (Metadata -&gt; UProp)
-&gt; GenT Identity Metadata -&gt; GenT Identity UProp
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">GenT Identity Metadata
</span><a href="#local-6989586621679555471"><span class="hs-identifier hs-var">mdtGen</span></a></span><span>
</span><span id="line-1115"></span><span>
</span><span id="line-1116"></span><span>      </span><span class="annot"><a href="#local-6989586621679555472"><span class="hs-identifier hs-type">stTagsGen</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Gen</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#STag"><span class="hs-identifier hs-type">STag</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1117"></span><span>      </span><span id="local-6989586621679555472"><span class="annot"><span class="annottext">stTagsGen :: GenT Identity (Set String)
</span><a href="#local-6989586621679555472"><span class="hs-identifier hs-var hs-var">stTagsGen</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1118"></span><span>        </span><span class="hs-comment">-- TODO: We need to benchmark this against @Gen.set@. This seems to be</span><span>
</span><span id="line-1119"></span><span>        </span><span class="hs-comment">-- slightly faster.</span><span>
</span><span id="line-1120"></span><span>        </span><span class="annot"><span class="annottext">Context -&gt; Set String
forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">Set.fromList</span></span><span> </span><span class="annot"><span class="annottext">(Context -&gt; Set String)
-&gt; GenT Identity Context -&gt; GenT Identity (Set String)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span>
</span><span id="line-1121"></span><span>          </span><span class="annot"><span class="annottext">Range Int -&gt; GenT Identity String -&gt; GenT Identity Context
forall (m :: * -&gt; *) a. MonadGen m =&gt; Range Int -&gt; m a -&gt; m [a]
</span><span class="hs-identifier hs-var">Gen.list</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Range Int
forall a. Integral a =&gt; a -&gt; a -&gt; Range a
</span><span class="hs-identifier hs-var">Range.linear</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">5</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Range Int -&gt; GenT Identity Char -&gt; GenT Identity String
forall (m :: * -&gt; *) a. MonadGen m =&gt; Range Int -&gt; m a -&gt; m [a]
</span><span class="hs-identifier hs-var">Gen.list</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Range Int
forall a. a -&gt; a -&gt; Range a
</span><span class="hs-identifier hs-var">Range.constant</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">10</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">GenT Identity Char
forall (m :: * -&gt; *). MonadGen m =&gt; m Char
</span><span class="hs-identifier hs-var">Gen.ascii</span></span><span class="hs-special">)</span><span>
</span><span id="line-1122"></span><span>
</span><span id="line-1123"></span><span>      </span><span class="annot"><a href="#local-6989586621679555471"><span class="hs-identifier hs-type">mdtGen</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Gen</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#Metadata"><span class="hs-identifier hs-type">Metadata</span></a></span><span>
</span><span id="line-1124"></span><span>      </span><span id="local-6989586621679555471"><span class="annot"><span class="annottext">mdtGen :: GenT Identity Metadata
</span><a href="#local-6989586621679555471"><span class="hs-identifier hs-var hs-var">mdtGen</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Metadata -&gt; GenT Identity Metadata
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Metadata
</span><a href="Byron.Spec.Ledger.Update.html#Metadata"><span class="hs-identifier hs-var">Metadata</span></a></span><span>
</span><span id="line-1125"></span><span>
</span><span id="line-1126"></span><span>
</span><span id="line-1127"></span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#upiEnvGen"><span class="hs-identifier hs-type">upiEnvGen</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Gen</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIEnv"><span class="hs-identifier hs-type">UPIEnv</span></a></span><span>
</span><span id="line-1128"></span><span id="upiEnvGen"><span class="annot"><span class="annottext">upiEnvGen :: Gen UPIEnv
</span><a href="Byron.Spec.Ledger.Update.html#upiEnvGen"><span class="hs-identifier hs-var hs-var">upiEnvGen</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1129"></span><span>    </span><span id="local-6989586621679555469"><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679555469"><span class="hs-identifier hs-var">ngk</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Range Word8 -&gt; GenT Identity Word8
forall (m :: * -&gt; *) a. (MonadGen m, Integral a) =&gt; Range a -&gt; m a
</span><span class="hs-identifier hs-var">Gen.integral</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Range Word8
forall a. Integral a =&gt; a -&gt; a -&gt; Range a
</span><span class="hs-identifier hs-var">Range.linear</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">14</span></span><span class="hs-special">)</span><span>
</span><span id="line-1130"></span><span>    </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">,</span><span class="hs-special">,</span><span class="hs-special">)</span><span>
</span><span id="line-1131"></span><span>      </span><span class="annot"><span class="annottext">(Slot -&gt; Bimap VKeyGenesis VKey -&gt; BlockCount -&gt; Word8 -&gt; UPIEnv)
-&gt; GenT Identity Slot
-&gt; GenT
     Identity (Bimap VKeyGenesis VKey -&gt; BlockCount -&gt; Word8 -&gt; UPIEnv)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Word64 -&gt; GenT Identity Slot
</span><a href="Byron.Spec.Ledger.Core.Generators.html#slotGen"><span class="hs-identifier hs-var">CoreGen.slotGen</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">10</span></span><span> </span><span class="hs-comment">-- Current slot</span><span>
</span><span id="line-1132"></span><span>      </span><span class="annot"><span class="annottext">GenT
  Identity (Bimap VKeyGenesis VKey -&gt; BlockCount -&gt; Word8 -&gt; UPIEnv)
-&gt; GenT Identity (Bimap VKeyGenesis VKey)
-&gt; GenT Identity (BlockCount -&gt; Word8 -&gt; UPIEnv)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; GenT Identity (Bimap VKeyGenesis VKey)
</span><a href="Byron.Spec.Ledger.Update.html#dmapGen"><span class="hs-identifier hs-var">dmapGen</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679555469"><span class="hs-identifier hs-var">ngk</span></a></span><span>  </span><span class="hs-comment">-- Delegation map</span><span>
</span><span id="line-1133"></span><span>      </span><span class="annot"><span class="annottext">GenT Identity (BlockCount -&gt; Word8 -&gt; UPIEnv)
-&gt; GenT Identity BlockCount -&gt; GenT Identity (Word8 -&gt; UPIEnv)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word64 -&gt; BlockCount
</span><a href="Byron.Spec.Ledger.Core.html#BlockCount"><span class="hs-identifier hs-var">BlockCount</span></a></span><span> </span><span class="annot"><span class="annottext">(Word64 -&gt; BlockCount)
-&gt; GenT Identity Word64 -&gt; GenT Identity BlockCount
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Range Word64 -&gt; GenT Identity Word64
forall (m :: * -&gt; *). MonadGen m =&gt; Range Word64 -&gt; m Word64
</span><span class="hs-identifier hs-var">Gen.word64</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word64 -&gt; Word64 -&gt; Range Word64
forall a. a -&gt; a -&gt; Range a
</span><span class="hs-identifier hs-var">Range.constant</span></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">100</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- Chain stability parameter (k)</span><span>
</span><span id="line-1134"></span><span>      </span><span class="annot"><span class="annottext">GenT Identity (Word8 -&gt; UPIEnv)
-&gt; GenT Identity Word8 -&gt; Gen UPIEnv
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; GenT Identity Word8
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679555469"><span class="hs-identifier hs-var">ngk</span></a></span><span>
</span><span id="line-1135"></span><span>
</span><span id="line-1136"></span><span class="hs-comment">-- Generate an initial delegation map, using a constant number of genesis</span><span>
</span><span id="line-1137"></span><span class="hs-comment">-- keys, which is determined in this generator.</span><span>
</span><span id="line-1138"></span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#dmapGen"><span class="hs-identifier hs-type">dmapGen</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word8</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Gen</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Bimap</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">Core.VKeyGenesis</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier hs-type">Core.VKey</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1139"></span><span id="dmapGen"><span class="annot"><span class="annottext">dmapGen :: Word8 -&gt; GenT Identity (Bimap VKeyGenesis VKey)
</span><a href="Byron.Spec.Ledger.Update.html#dmapGen"><span class="hs-identifier hs-var hs-var">dmapGen</span></a></span></span><span> </span><span id="local-6989586621679555464"><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679555464"><span class="hs-identifier hs-var">ngk</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(VKeyGenesis, VKey)] -&gt; Bimap VKeyGenesis VKey
forall a b. (Ord a, Ord b) =&gt; [(a, b)] -&gt; Bimap a b
</span><span class="hs-identifier hs-var">Bimap.fromList</span></span><span> </span><span class="annot"><span class="annottext">([(VKeyGenesis, VKey)] -&gt; Bimap VKeyGenesis VKey)
-&gt; (([VKeyGenesis], [VKey]) -&gt; [(VKeyGenesis, VKey)])
-&gt; ([VKeyGenesis], [VKey])
-&gt; Bimap VKeyGenesis VKey
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">([VKeyGenesis] -&gt; [VKey] -&gt; [(VKeyGenesis, VKey)])
-&gt; ([VKeyGenesis], [VKey]) -&gt; [(VKeyGenesis, VKey)]
forall a b c. (a -&gt; b -&gt; c) -&gt; (a, b) -&gt; c
</span><span class="hs-identifier hs-var">uncurry</span></span><span> </span><span class="annot"><span class="annottext">[VKeyGenesis] -&gt; [VKey] -&gt; [(VKeyGenesis, VKey)]
forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><span class="hs-identifier hs-var">zip</span></span><span> </span><span class="annot"><span class="annottext">(([VKeyGenesis], [VKey]) -&gt; Bimap VKeyGenesis VKey)
-&gt; GenT Identity ([VKeyGenesis], [VKey])
-&gt; GenT Identity (Bimap VKeyGenesis VKey)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">GenT Identity ([VKeyGenesis], [VKey])
</span><a href="#local-6989586621679555462"><span class="hs-identifier hs-var">vkgVkPairsGen</span></a></span><span>
</span><span id="line-1140"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1141"></span><span>    </span><span class="annot"><a href="#local-6989586621679555462"><span class="hs-identifier hs-type">vkgVkPairsGen</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Gen</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">Core.VKeyGenesis</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier hs-type">Core.VKey</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1142"></span><span>    </span><span id="local-6989586621679555462"><span class="annot"><span class="annottext">vkgVkPairsGen :: GenT Identity ([VKeyGenesis], [VKey])
</span><a href="#local-6989586621679555462"><span class="hs-identifier hs-var hs-var">vkgVkPairsGen</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[VKeyGenesis]
</span><a href="#local-6989586621679555461"><span class="hs-identifier hs-var">vkgs</span></a></span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([VKey] -&gt; ([VKeyGenesis], [VKey]))
-&gt; GenT Identity [VKey] -&gt; GenT Identity ([VKeyGenesis], [VKey])
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">([VKey] -&gt; Bool) -&gt; GenT Identity [VKey] -&gt; GenT Identity [VKey]
forall (m :: * -&gt; *) a.
(MonadGen m, GenBase m ~ Identity) =&gt;
(a -&gt; Bool) -&gt; m a -&gt; m a
</span><span class="hs-identifier hs-var">Gen.filter</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool) -&gt; ([VKey] -&gt; Bool) -&gt; [VKey] -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">[VKey] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[VKey] -&gt; GenT Identity [VKey]
forall (m :: * -&gt; *) a. MonadGen m =&gt; [a] -&gt; m [a]
</span><span class="hs-identifier hs-var">Gen.subsequence</span></span><span> </span><span class="annot"><span class="annottext">[VKey]
</span><a href="#local-6989586621679555459"><span class="hs-identifier hs-var">vks</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1143"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-1144"></span><span>        </span><span id="local-6989586621679555461"><span class="annot"><span class="annottext">vkgs :: [VKeyGenesis]
</span><a href="#local-6989586621679555461"><span class="hs-identifier hs-var hs-var">vkgs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">VKey -&gt; VKeyGenesis
</span><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-var">VKeyGenesis</span></a></span><span> </span><span class="annot"><span class="annottext">(VKey -&gt; VKeyGenesis) -&gt; (Word8 -&gt; VKey) -&gt; Word8 -&gt; VKeyGenesis
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Owner -&gt; VKey
</span><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier hs-var">VKey</span></a></span><span> </span><span class="annot"><span class="annottext">(Owner -&gt; VKey) -&gt; (Word8 -&gt; Owner) -&gt; Word8 -&gt; VKey
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Owner
</span><a href="Byron.Spec.Ledger.Core.html#Owner"><span class="hs-identifier hs-var">Owner</span></a></span><span> </span><span class="annot"><span class="annottext">(Natural -&gt; Owner) -&gt; (Word8 -&gt; Natural) -&gt; Word8 -&gt; Owner
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Natural
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">(Word8 -&gt; VKeyGenesis) -&gt; [Word8] -&gt; [VKeyGenesis]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">..</span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679555464"><span class="hs-identifier hs-var">ngk</span></a></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Word8
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">1</span></span><span class="hs-special">]</span><span>
</span><span id="line-1145"></span><span>        </span><span class="hs-comment">-- As delegation targets we choose twice the number of genesis keys.</span><span>
</span><span id="line-1146"></span><span>        </span><span class="hs-comment">-- Note that the genesis keys can delegate to themselves in the</span><span>
</span><span id="line-1147"></span><span>        </span><span class="hs-comment">-- generated delegation map.</span><span>
</span><span id="line-1148"></span><span>        </span><span id="local-6989586621679555459"><span class="annot"><span class="annottext">vks :: [VKey]
</span><a href="#local-6989586621679555459"><span class="hs-identifier hs-var hs-var">vks</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Owner -&gt; VKey
</span><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier hs-var">VKey</span></a></span><span> </span><span class="annot"><span class="annottext">(Owner -&gt; VKey) -&gt; (Word8 -&gt; Owner) -&gt; Word8 -&gt; VKey
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Owner
</span><a href="Byron.Spec.Ledger.Core.html#Owner"><span class="hs-identifier hs-var">Owner</span></a></span><span> </span><span class="annot"><span class="annottext">(Natural -&gt; Owner) -&gt; (Word8 -&gt; Natural) -&gt; Word8 -&gt; Owner
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Natural
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">(Word8 -&gt; VKey) -&gt; [Word8] -&gt; [VKey]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">..</span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Word8
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">*</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679555464"><span class="hs-identifier hs-var">ngk</span></a></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Word8
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1149"></span><span>
</span><span id="line-1150"></span><span class="hs-comment">-- | Generate a protocol parameter update from a given set of current</span><span>
</span><span id="line-1151"></span><span class="hs-comment">-- protocol-parameters, ensuring the consistency of the new protocol parameters</span><span>
</span><span id="line-1152"></span><span class="hs-comment">-- w.r.t. the current ones, according to the @canUpdate@ predicate in the</span><span>
</span><span id="line-1153"></span><span class="hs-comment">-- formal specification.</span><span>
</span><span id="line-1154"></span><span class="hs-comment">--</span><span>
</span><span id="line-1155"></span><span class="hs-comment">-- TODO: we can move this into a Generator's module, but first we need to</span><span>
</span><span id="line-1156"></span><span class="hs-comment">-- disentangle the dependencies. Moving this to @Byron.Spec.Ledger.Update.Generators@ will</span><span>
</span><span id="line-1157"></span><span class="hs-comment">-- cause a circular dependency. I think the rules need to be moved into their</span><span>
</span><span id="line-1158"></span><span class="hs-comment">-- own modules.</span><span>
</span><span id="line-1159"></span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ppsUpdateFrom"><span class="hs-identifier hs-type">ppsUpdateFrom</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#PParams"><span class="hs-identifier hs-type">PParams</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Gen</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#PParams"><span class="hs-identifier hs-type">PParams</span></a></span><span>
</span><span id="line-1160"></span><span id="ppsUpdateFrom"><span class="annot"><span class="annottext">ppsUpdateFrom :: PParams -&gt; GenT Identity PParams
</span><a href="Byron.Spec.Ledger.Update.html#ppsUpdateFrom"><span class="hs-identifier hs-var hs-var">ppsUpdateFrom</span></a></span></span><span> </span><span id="local-6989586621679555458"><span class="annot"><span class="annottext">PParams
</span><a href="#local-6989586621679555458"><span class="hs-identifier hs-var">pps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1161"></span><span>  </span><span class="hs-comment">-- NOTE: we only generate small changes in the parameters to avoid leaving the</span><span>
</span><span id="line-1162"></span><span>  </span><span class="hs-comment">-- protocol parameters in a state that won't allow to produce any valid blocks</span><span>
</span><span id="line-1163"></span><span>  </span><span class="hs-comment">-- anymore (for instance if the maximum block size drops to a very small</span><span>
</span><span id="line-1164"></span><span>  </span><span class="hs-comment">-- value).</span><span>
</span><span id="line-1165"></span><span>
</span><span id="line-1166"></span><span>  </span><span class="hs-comment">-- Determine the change in the block size: a decrement or an increment that</span><span>
</span><span id="line-1167"></span><span>  </span><span class="hs-comment">-- is no more than twice the current block maximum size.</span><span>
</span><span id="line-1168"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-1169"></span><span>  </span><span class="hs-comment">-- We don't expect the maximum block size to change often, so we generate</span><span>
</span><span id="line-1170"></span><span>  </span><span class="hs-comment">-- more values around the current block size (@_maxBkSz@).</span><span>
</span><span id="line-1171"></span><span>  </span><span id="local-6989586621679555457"><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679555457"><span class="hs-identifier hs-var">newMaxBkSize</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-1172"></span><span>    </span><span class="annot"><span class="annottext">Range Natural -&gt; GenT Identity Natural
forall (m :: * -&gt; *) a. (MonadGen m, Integral a) =&gt; Range a -&gt; m a
</span><span class="hs-identifier hs-var">Gen.integral</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Natural -&gt; Natural -&gt; Natural -&gt; Range Natural
forall a. Integral a =&gt; a -&gt; a -&gt; a -&gt; Range a
</span><span class="hs-identifier hs-var">Range.linearFrom</span></span><span>
</span><span id="line-1173"></span><span>                    </span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679555455"><span class="hs-identifier hs-var">_maxBkSz</span></a></span><span>
</span><span id="line-1174"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679555455"><span class="hs-identifier hs-var">_maxBkSz</span></a></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Natural -&gt; Natural
</span><a href="#local-6989586621679555454"><span class="hs-operator hs-var">-?</span></a></span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">100</span></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- Decrement value was determined ad-hoc</span><span>
</span><span id="line-1175"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Natural -&gt; Natural
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">*</span></span><span> </span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679555455"><span class="hs-identifier hs-var">_maxBkSz</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1176"></span><span>                 </span><span class="hs-special">)</span><span>
</span><span id="line-1177"></span><span>    </span><span class="annot"><span class="annottext">GenT Identity Natural
-&gt; (Natural, Natural) -&gt; GenT Identity Natural
forall a. Gen a -&gt; (a, a) -&gt; Gen a
</span><a href="Byron.Spec.Ledger.Update.html#increasingProbabilityAt"><span class="hs-operator hs-var">`increasingProbabilityAt`</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679555455"><span class="hs-identifier hs-var">_maxBkSz</span></a></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Natural -&gt; Natural
</span><a href="#local-6989586621679555454"><span class="hs-operator hs-var">-?</span></a></span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">100</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Natural -&gt; Natural
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">*</span></span><span> </span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679555455"><span class="hs-identifier hs-var">_maxBkSz</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1178"></span><span>
</span><span id="line-1179"></span><span>  </span><span class="hs-comment">-- Similarly, we don't expect the transaction size to be changed often, so we</span><span>
</span><span id="line-1180"></span><span>  </span><span class="hs-comment">-- also generate more values around the current maximum transaction size.</span><span>
</span><span id="line-1181"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679555452"><span class="annot"><span class="annottext">minTxSzBound :: Natural
</span><a href="#local-6989586621679555452"><span class="hs-identifier hs-var hs-var">minTxSzBound</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679555451"><span class="hs-identifier hs-var">_maxTxSz</span></a></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Natural -&gt; Natural
forall a. Ord a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">`min`</span></span><span> </span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679555457"><span class="hs-identifier hs-var">newMaxBkSize</span></a></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Natural -&gt; Natural
</span><a href="#local-6989586621679555454"><span class="hs-operator hs-var">-?</span></a></span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">1</span></span><span>
</span><span id="line-1182"></span><span>  </span><span id="local-6989586621679555449"><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679555449"><span class="hs-identifier hs-var">newMaxTxSize</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-1183"></span><span>    </span><span class="annot"><span class="annottext">Range Natural -&gt; GenT Identity Natural
forall (m :: * -&gt; *) a. (MonadGen m, Integral a) =&gt; Range a -&gt; m a
</span><span class="hs-identifier hs-var">Gen.integral</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Natural -&gt; Natural -&gt; Range Natural
forall a. Integral a =&gt; a -&gt; a -&gt; Range a
</span><span class="hs-identifier hs-var">Range.exponential</span></span><span>
</span><span id="line-1184"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679555452"><span class="hs-identifier hs-var">minTxSzBound</span></a></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Natural -&gt; Natural
</span><a href="#local-6989586621679555454"><span class="hs-operator hs-var">-?</span></a></span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">10</span></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- Decrement value determined ad-hoc</span><span>
</span><span id="line-1185"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679555457"><span class="hs-identifier hs-var">newMaxBkSize</span></a></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Natural -&gt; Natural
</span><a href="#local-6989586621679555454"><span class="hs-operator hs-var">-?</span></a></span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-1186"></span><span>                 </span><span class="hs-special">)</span><span>
</span><span id="line-1187"></span><span>
</span><span id="line-1188"></span><span>  </span><span class="annot"><span class="annottext">Natural
-&gt; Natural
-&gt; Natural
-&gt; Natural
-&gt; BkSgnCntT
-&gt; SlotCount
-&gt; SlotCount
-&gt; Natural
-&gt; UpAdptThd
-&gt; FactorA
-&gt; FactorB
-&gt; PParams
</span><a href="Byron.Spec.Ledger.Update.html#PParams"><span class="hs-identifier hs-var">PParams</span></a></span><span>
</span><span id="line-1189"></span><span>    </span><span class="annot"><span class="annottext">(Natural
 -&gt; Natural
 -&gt; Natural
 -&gt; Natural
 -&gt; BkSgnCntT
 -&gt; SlotCount
 -&gt; SlotCount
 -&gt; Natural
 -&gt; UpAdptThd
 -&gt; FactorA
 -&gt; FactorB
 -&gt; PParams)
-&gt; GenT Identity Natural
-&gt; GenT
     Identity
     (Natural
      -&gt; Natural
      -&gt; Natural
      -&gt; BkSgnCntT
      -&gt; SlotCount
      -&gt; SlotCount
      -&gt; Natural
      -&gt; UpAdptThd
      -&gt; FactorA
      -&gt; FactorB
      -&gt; PParams)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; GenT Identity Natural
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679555457"><span class="hs-identifier hs-var">newMaxBkSize</span></a></span><span>
</span><span id="line-1190"></span><span>    </span><span class="annot"><span class="annottext">GenT
  Identity
  (Natural
   -&gt; Natural
   -&gt; Natural
   -&gt; BkSgnCntT
   -&gt; SlotCount
   -&gt; SlotCount
   -&gt; Natural
   -&gt; UpAdptThd
   -&gt; FactorA
   -&gt; FactorB
   -&gt; PParams)
-&gt; GenT Identity Natural
-&gt; GenT
     Identity
     (Natural
      -&gt; Natural
      -&gt; BkSgnCntT
      -&gt; SlotCount
      -&gt; SlotCount
      -&gt; Natural
      -&gt; UpAdptThd
      -&gt; FactorA
      -&gt; FactorB
      -&gt; PParams)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">GenT Identity Natural
</span><a href="#local-6989586621679555447"><span class="hs-identifier hs-var">nextMaxHdrSzGen</span></a></span><span>
</span><span id="line-1191"></span><span>    </span><span class="annot"><span class="annottext">GenT
  Identity
  (Natural
   -&gt; Natural
   -&gt; BkSgnCntT
   -&gt; SlotCount
   -&gt; SlotCount
   -&gt; Natural
   -&gt; UpAdptThd
   -&gt; FactorA
   -&gt; FactorB
   -&gt; PParams)
-&gt; GenT Identity Natural
-&gt; GenT
     Identity
     (Natural
      -&gt; BkSgnCntT
      -&gt; SlotCount
      -&gt; SlotCount
      -&gt; Natural
      -&gt; UpAdptThd
      -&gt; FactorA
      -&gt; FactorB
      -&gt; PParams)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; GenT Identity Natural
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679555449"><span class="hs-identifier hs-var">newMaxTxSize</span></a></span><span>
</span><span id="line-1192"></span><span>    </span><span class="annot"><span class="annottext">GenT
  Identity
  (Natural
   -&gt; BkSgnCntT
   -&gt; SlotCount
   -&gt; SlotCount
   -&gt; Natural
   -&gt; UpAdptThd
   -&gt; FactorA
   -&gt; FactorB
   -&gt; PParams)
-&gt; GenT Identity Natural
-&gt; GenT
     Identity
     (BkSgnCntT
      -&gt; SlotCount
      -&gt; SlotCount
      -&gt; Natural
      -&gt; UpAdptThd
      -&gt; FactorA
      -&gt; FactorB
      -&gt; PParams)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">GenT Identity Natural
</span><a href="#local-6989586621679555446"><span class="hs-identifier hs-var">nextMaxPropSz</span></a></span><span>
</span><span id="line-1193"></span><span>    </span><span class="annot"><span class="annottext">GenT
  Identity
  (BkSgnCntT
   -&gt; SlotCount
   -&gt; SlotCount
   -&gt; Natural
   -&gt; UpAdptThd
   -&gt; FactorA
   -&gt; FactorB
   -&gt; PParams)
-&gt; GenT Identity BkSgnCntT
-&gt; GenT
     Identity
     (SlotCount
      -&gt; SlotCount
      -&gt; Natural
      -&gt; UpAdptThd
      -&gt; FactorA
      -&gt; FactorB
      -&gt; PParams)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">GenT Identity BkSgnCntT
</span><a href="#local-6989586621679555445"><span class="hs-identifier hs-var">nextBkSgnCntT</span></a></span><span>
</span><span id="line-1194"></span><span>    </span><span class="annot"><span class="annottext">GenT
  Identity
  (SlotCount
   -&gt; SlotCount
   -&gt; Natural
   -&gt; UpAdptThd
   -&gt; FactorA
   -&gt; FactorB
   -&gt; PParams)
-&gt; GenT Identity SlotCount
-&gt; GenT
     Identity
     (SlotCount
      -&gt; Natural -&gt; UpAdptThd -&gt; FactorA -&gt; FactorB -&gt; PParams)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">SlotCount -&gt; GenT Identity SlotCount
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SlotCount
</span><a href="#local-6989586621679555444"><span class="hs-identifier hs-var">_bkSlotsPerEpoch</span></a></span><span> </span><span class="hs-comment">-- This parameter should be removed from 'PParams'</span><span>
</span><span id="line-1195"></span><span>    </span><span class="annot"><span class="annottext">GenT
  Identity
  (SlotCount
   -&gt; Natural -&gt; UpAdptThd -&gt; FactorA -&gt; FactorB -&gt; PParams)
-&gt; GenT Identity SlotCount
-&gt; GenT
     Identity (Natural -&gt; UpAdptThd -&gt; FactorA -&gt; FactorB -&gt; PParams)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">GenT Identity SlotCount
</span><a href="#local-6989586621679555443"><span class="hs-identifier hs-var">nextUpTtl</span></a></span><span>
</span><span id="line-1196"></span><span>    </span><span class="annot"><span class="annottext">GenT
  Identity (Natural -&gt; UpAdptThd -&gt; FactorA -&gt; FactorB -&gt; PParams)
-&gt; GenT Identity Natural
-&gt; GenT Identity (UpAdptThd -&gt; FactorA -&gt; FactorB -&gt; PParams)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">GenT Identity Natural
</span><a href="#local-6989586621679555442"><span class="hs-identifier hs-var">nextScriptVersion</span></a></span><span>
</span><span id="line-1197"></span><span>    </span><span class="annot"><span class="annottext">GenT Identity (UpAdptThd -&gt; FactorA -&gt; FactorB -&gt; PParams)
-&gt; GenT Identity UpAdptThd
-&gt; GenT Identity (FactorA -&gt; FactorB -&gt; PParams)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">GenT Identity UpAdptThd
</span><a href="#local-6989586621679555441"><span class="hs-identifier hs-var">nextUpAdptThd</span></a></span><span>
</span><span id="line-1198"></span><span>    </span><span class="annot"><span class="annottext">GenT Identity (FactorA -&gt; FactorB -&gt; PParams)
-&gt; GenT Identity FactorA -&gt; GenT Identity (FactorB -&gt; PParams)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">GenT Identity FactorA
</span><a href="#local-6989586621679555440"><span class="hs-identifier hs-var">nextFactorA</span></a></span><span>
</span><span id="line-1199"></span><span>    </span><span class="annot"><span class="annottext">GenT Identity (FactorB -&gt; PParams)
-&gt; GenT Identity FactorB -&gt; GenT Identity PParams
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">GenT Identity FactorB
</span><a href="#local-6989586621679555439"><span class="hs-identifier hs-var">nextFactorB</span></a></span><span>
</span><span id="line-1200"></span><span>
</span><span id="line-1201"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1202"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#PParams"><span class="hs-identifier hs-type">PParams</span></a></span><span class="hs-special">{</span><span> </span><span id="local-6989586621679555455"><span class="annot"><span class="annottext">Natural
_maxBkSz :: Natural
_maxBkSz :: PParams -&gt; Natural
</span><a href="#local-6989586621679555455"><span class="hs-identifier hs-var hs-var">_maxBkSz</span></a></span></span><span>
</span><span id="line-1203"></span><span>           </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555438"><span class="annot"><span class="annottext">Natural
_maxHdrSz :: Natural
_maxHdrSz :: PParams -&gt; Natural
</span><a href="#local-6989586621679555438"><span class="hs-identifier hs-var hs-var">_maxHdrSz</span></a></span></span><span>
</span><span id="line-1204"></span><span>           </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555451"><span class="annot"><span class="annottext">Natural
_maxTxSz :: Natural
_maxTxSz :: PParams -&gt; Natural
</span><a href="#local-6989586621679555451"><span class="hs-identifier hs-var hs-var">_maxTxSz</span></a></span></span><span>
</span><span id="line-1205"></span><span>           </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555437"><span class="annot"><span class="annottext">Natural
_maxPropSz :: Natural
_maxPropSz :: PParams -&gt; Natural
</span><a href="#local-6989586621679555437"><span class="hs-identifier hs-var hs-var">_maxPropSz</span></a></span></span><span>
</span><span id="line-1206"></span><span>           </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555436"><span class="annot"><span class="annottext">BkSgnCntT
_bkSgnCntT :: BkSgnCntT
_bkSgnCntT :: PParams -&gt; BkSgnCntT
</span><a href="#local-6989586621679555436"><span class="hs-identifier hs-var hs-var">_bkSgnCntT</span></a></span></span><span>
</span><span id="line-1207"></span><span>           </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555444"><span class="annot"><span class="annottext">SlotCount
_bkSlotsPerEpoch :: SlotCount
_bkSlotsPerEpoch :: PParams -&gt; SlotCount
</span><a href="#local-6989586621679555444"><span class="hs-identifier hs-var hs-var">_bkSlotsPerEpoch</span></a></span></span><span>
</span><span id="line-1208"></span><span>           </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555435"><span class="annot"><span class="annottext">SlotCount
_upTtl :: SlotCount
_upTtl :: PParams -&gt; SlotCount
</span><a href="#local-6989586621679555435"><span class="hs-identifier hs-var hs-var">_upTtl</span></a></span></span><span>
</span><span id="line-1209"></span><span>           </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555434"><span class="annot"><span class="annottext">Natural
_scriptVersion :: Natural
_scriptVersion :: PParams -&gt; Natural
</span><a href="#local-6989586621679555434"><span class="hs-identifier hs-var hs-var">_scriptVersion</span></a></span></span><span>
</span><span id="line-1210"></span><span>           </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555433"><span class="annot"><span class="annottext">UpAdptThd
_upAdptThd :: UpAdptThd
_upAdptThd :: PParams -&gt; UpAdptThd
</span><a href="#local-6989586621679555433"><span class="hs-identifier hs-var hs-var">_upAdptThd</span></a></span></span><span>
</span><span id="line-1211"></span><span>           </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555432"><span class="annot"><span class="annottext">FactorA
_factorA :: FactorA
_factorA :: PParams -&gt; FactorA
</span><a href="#local-6989586621679555432"><span class="hs-identifier hs-var hs-var">_factorA</span></a></span></span><span>
</span><span id="line-1212"></span><span>           </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555431"><span class="annot"><span class="annottext">FactorB
_factorB :: FactorB
_factorB :: PParams -&gt; FactorB
</span><a href="#local-6989586621679555431"><span class="hs-identifier hs-var hs-var">_factorB</span></a></span></span><span>
</span><span id="line-1213"></span><span>           </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PParams
</span><a href="#local-6989586621679555458"><span class="hs-identifier hs-var">pps</span></a></span><span>
</span><span id="line-1214"></span><span>
</span><span id="line-1215"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#FactorA"><span class="hs-identifier hs-type">FactorA</span></a></span><span> </span><span id="local-6989586621679555430"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679555430"><span class="hs-identifier hs-var">fA</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FactorA
</span><a href="#local-6989586621679555432"><span class="hs-identifier hs-var">_factorA</span></a></span><span>
</span><span id="line-1216"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#FactorB"><span class="hs-identifier hs-type">FactorB</span></a></span><span> </span><span id="local-6989586621679555429"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679555429"><span class="hs-identifier hs-var">fB</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FactorB
</span><a href="#local-6989586621679555431"><span class="hs-identifier hs-var">_factorB</span></a></span><span>
</span><span id="line-1217"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#BkSgnCntT"><span class="hs-identifier hs-type">BkSgnCntT</span></a></span><span> </span><span id="local-6989586621679555428"><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679555428"><span class="hs-identifier hs-var">bsct</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BkSgnCntT
</span><a href="#local-6989586621679555436"><span class="hs-identifier hs-var">_bkSgnCntT</span></a></span><span>
</span><span id="line-1218"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpAdptThd"><span class="hs-identifier hs-type">UpAdptThd</span></a></span><span> </span><span id="local-6989586621679555427"><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679555427"><span class="hs-identifier hs-var">uat</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UpAdptThd
</span><a href="#local-6989586621679555433"><span class="hs-identifier hs-var">_upAdptThd</span></a></span><span>
</span><span id="line-1219"></span><span>
</span><span id="line-1220"></span><span>    </span><span class="annot"><a href="#local-6989586621679555447"><span class="hs-identifier hs-type">nextMaxHdrSzGen</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Gen</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Natural</span></span><span>
</span><span id="line-1221"></span><span>    </span><span id="local-6989586621679555447"><span class="annot"><span class="annottext">nextMaxHdrSzGen :: GenT Identity Natural
</span><a href="#local-6989586621679555447"><span class="hs-identifier hs-var hs-var">nextMaxHdrSzGen</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1222"></span><span>      </span><span class="annot"><span class="annottext">Range Natural -&gt; GenT Identity Natural
forall (m :: * -&gt; *) a. (MonadGen m, Integral a) =&gt; Range a -&gt; m a
</span><span class="hs-identifier hs-var">Gen.integral</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Natural -&gt; Natural -&gt; Natural -&gt; Range Natural
forall a. Integral a =&gt; a -&gt; a -&gt; a -&gt; Range a
</span><span class="hs-identifier hs-var">Range.exponentialFrom</span></span><span>
</span><span id="line-1223"></span><span>                      </span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679555438"><span class="hs-identifier hs-var">_maxHdrSz</span></a></span><span>
</span><span id="line-1224"></span><span>                      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679555438"><span class="hs-identifier hs-var">_maxHdrSz</span></a></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Natural -&gt; Natural
</span><a href="#local-6989586621679555454"><span class="hs-operator hs-var">-?</span></a></span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">10</span></span><span class="hs-special">)</span><span>
</span><span id="line-1225"></span><span>                      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Natural -&gt; Natural
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">*</span></span><span> </span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679555438"><span class="hs-identifier hs-var">_maxHdrSz</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1226"></span><span>                   </span><span class="hs-special">)</span><span>
</span><span id="line-1227"></span><span>
</span><span id="line-1228"></span><span>    </span><span class="annot"><a href="#local-6989586621679555446"><span class="hs-identifier hs-type">nextMaxPropSz</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Gen</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Natural</span></span><span>
</span><span id="line-1229"></span><span>    </span><span id="local-6989586621679555446"><span class="annot"><span class="annottext">nextMaxPropSz :: GenT Identity Natural
</span><a href="#local-6989586621679555446"><span class="hs-identifier hs-var hs-var">nextMaxPropSz</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1230"></span><span>      </span><span class="annot"><span class="annottext">Range Natural -&gt; GenT Identity Natural
forall (m :: * -&gt; *) a. (MonadGen m, Integral a) =&gt; Range a -&gt; m a
</span><span class="hs-identifier hs-var">Gen.integral</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Natural -&gt; Natural -&gt; Natural -&gt; Range Natural
forall a. Integral a =&gt; a -&gt; a -&gt; a -&gt; Range a
</span><span class="hs-identifier hs-var">Range.exponentialFrom</span></span><span>
</span><span id="line-1231"></span><span>                      </span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679555437"><span class="hs-identifier hs-var">_maxPropSz</span></a></span><span>
</span><span id="line-1232"></span><span>                      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679555437"><span class="hs-identifier hs-var">_maxPropSz</span></a></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Natural -&gt; Natural
</span><a href="#local-6989586621679555454"><span class="hs-operator hs-var">-?</span></a></span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-1233"></span><span>                      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Natural -&gt; Natural
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">*</span></span><span> </span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679555437"><span class="hs-identifier hs-var">_maxPropSz</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1234"></span><span>                   </span><span class="hs-special">)</span><span>
</span><span id="line-1235"></span><span>
</span><span id="line-1236"></span><span>    </span><span class="annot"><a href="#local-6989586621679555445"><span class="hs-identifier hs-type">nextBkSgnCntT</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Gen</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#BkSgnCntT"><span class="hs-identifier hs-type">BkSgnCntT</span></a></span><span>
</span><span id="line-1237"></span><span>    </span><span id="local-6989586621679555445"><span class="annot"><span class="annottext">nextBkSgnCntT :: GenT Identity BkSgnCntT
</span><a href="#local-6989586621679555445"><span class="hs-identifier hs-var hs-var">nextBkSgnCntT</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Double -&gt; BkSgnCntT
</span><a href="Byron.Spec.Ledger.Update.html#BkSgnCntT"><span class="hs-identifier hs-var">BkSgnCntT</span></a></span><span> </span><span class="annot"><span class="annottext">(Double -&gt; BkSgnCntT)
-&gt; GenT Identity Double -&gt; GenT Identity BkSgnCntT
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span>
</span><span id="line-1238"></span><span>      </span><span class="annot"><span class="annottext">Range Double -&gt; GenT Identity Double
forall (m :: * -&gt; *). MonadGen m =&gt; Range Double -&gt; m Double
</span><span class="hs-identifier hs-var">Gen.double</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Double -&gt; Double -&gt; Double -&gt; Range Double
forall a. (Floating a, Ord a) =&gt; a -&gt; a -&gt; a -&gt; Range a
</span><span class="hs-identifier hs-var">Range.exponentialFloatFrom</span></span><span>
</span><span id="line-1239"></span><span>                    </span><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679555428"><span class="hs-identifier hs-var">bsct</span></a></span><span>
</span><span id="line-1240"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679555428"><span class="hs-identifier hs-var">bsct</span></a></span><span> </span><span class="annot"><span class="annottext">Double -&gt; Double -&gt; Double
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Double
</span><span class="hs-number">0.01</span></span><span class="hs-special">)</span><span>
</span><span id="line-1241"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679555428"><span class="hs-identifier hs-var">bsct</span></a></span><span> </span><span class="annot"><span class="annottext">Double -&gt; Double -&gt; Double
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Double
</span><span class="hs-number">0.01</span></span><span class="hs-special">)</span><span>
</span><span id="line-1242"></span><span>                 </span><span class="hs-special">)</span><span>
</span><span id="line-1243"></span><span>
</span><span id="line-1244"></span><span>    </span><span class="annot"><a href="#local-6989586621679555443"><span class="hs-identifier hs-type">nextUpTtl</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Gen</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#SlotCount"><span class="hs-identifier hs-type">SlotCount</span></a></span><span>
</span><span id="line-1245"></span><span>    </span><span id="local-6989586621679555443"><span class="annot"><span class="annottext">nextUpTtl :: GenT Identity SlotCount
</span><a href="#local-6989586621679555443"><span class="hs-identifier hs-var hs-var">nextUpTtl</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; SlotCount
</span><a href="Byron.Spec.Ledger.Core.html#SlotCount"><span class="hs-identifier hs-var">SlotCount</span></a></span><span> </span><span class="annot"><span class="annottext">(Word64 -&gt; SlotCount)
-&gt; GenT Identity Word64 -&gt; GenT Identity SlotCount
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span>
</span><span id="line-1246"></span><span>      </span><span class="hs-comment">-- TODO: here we need to decide what is right the minimum value for the</span><span>
</span><span id="line-1247"></span><span>      </span><span class="hs-comment">-- update-proposal TTL, and maybe adapt the rules to check the value of</span><span>
</span><span id="line-1248"></span><span>      </span><span class="hs-comment">-- this parameter cannot change to anything below this value.</span><span>
</span><span id="line-1249"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-1250"></span><span>      </span><span class="hs-comment">-- For now we choose an arbitrary constant.</span><span>
</span><span id="line-1251"></span><span>      </span><span class="annot"><span class="annottext">Range Word64 -&gt; GenT Identity Word64
forall (m :: * -&gt; *) a. (MonadGen m, Integral a) =&gt; Range a -&gt; m a
</span><span class="hs-identifier hs-var">Gen.integral</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word64 -&gt; Word64 -&gt; Word64 -&gt; Range Word64
forall a. Integral a =&gt; a -&gt; a -&gt; a -&gt; Range a
</span><span class="hs-identifier hs-var">Range.exponentialFrom</span></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679555422"><span class="hs-identifier hs-var">currUpTtl</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679555421"><span class="hs-identifier hs-var">minTtl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Word64 -&gt; Word64
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">*</span></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679555422"><span class="hs-identifier hs-var">currUpTtl</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1252"></span><span>      </span><span class="annot"><span class="annottext">GenT Identity Word64 -&gt; (Word64, Word64) -&gt; GenT Identity Word64
forall a. Gen a -&gt; (a, a) -&gt; Gen a
</span><a href="Byron.Spec.Ledger.Update.html#increasingProbabilityAt"><span class="hs-operator hs-var">`increasingProbabilityAt`</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679555421"><span class="hs-identifier hs-var">minTtl</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Word64 -&gt; Word64
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">*</span></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679555422"><span class="hs-identifier hs-var">currUpTtl</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1253"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-1254"></span><span>        </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#SlotCount"><span class="hs-identifier hs-type">SlotCount</span></a></span><span> </span><span id="local-6989586621679555422"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679555422"><span class="hs-identifier hs-var">currUpTtl</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SlotCount
</span><a href="#local-6989586621679555435"><span class="hs-identifier hs-var">_upTtl</span></a></span><span>
</span><span id="line-1255"></span><span>        </span><span id="local-6989586621679555421"><span class="annot"><span class="annottext">minTtl :: Word64
</span><a href="#local-6989586621679555421"><span class="hs-identifier hs-var hs-var">minTtl</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">2</span></span><span>
</span><span id="line-1256"></span><span>
</span><span id="line-1257"></span><span>    </span><span class="hs-comment">-- The new script version can be increased at most 1 unit</span><span>
</span><span id="line-1258"></span><span>    </span><span class="annot"><a href="#local-6989586621679555442"><span class="hs-identifier hs-type">nextScriptVersion</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Gen</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Natural</span></span><span>
</span><span id="line-1259"></span><span>    </span><span id="local-6989586621679555442"><span class="annot"><span class="annottext">nextScriptVersion :: GenT Identity Natural
</span><a href="#local-6989586621679555442"><span class="hs-identifier hs-var hs-var">nextScriptVersion</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Natural] -&gt; GenT Identity Natural
forall (m :: * -&gt; *) a. MonadGen m =&gt; [a] -&gt; m a
</span><span class="hs-identifier hs-var">Gen.element</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679555434"><span class="hs-identifier hs-var">_scriptVersion</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679555434"><span class="hs-identifier hs-var">_scriptVersion</span></a></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Natural -&gt; Natural
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">1</span></span><span class="hs-special">]</span><span>
</span><span id="line-1260"></span><span>
</span><span id="line-1261"></span><span>    </span><span class="annot"><a href="#local-6989586621679555441"><span class="hs-identifier hs-type">nextUpAdptThd</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Gen</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpAdptThd"><span class="hs-identifier hs-type">UpAdptThd</span></a></span><span>
</span><span id="line-1262"></span><span>    </span><span id="local-6989586621679555441"><span class="annot"><span class="annottext">nextUpAdptThd :: GenT Identity UpAdptThd
</span><a href="#local-6989586621679555441"><span class="hs-identifier hs-var hs-var">nextUpAdptThd</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Double -&gt; UpAdptThd
</span><a href="Byron.Spec.Ledger.Update.html#UpAdptThd"><span class="hs-identifier hs-var">UpAdptThd</span></a></span><span> </span><span class="annot"><span class="annottext">(Double -&gt; UpAdptThd)
-&gt; GenT Identity Double -&gt; GenT Identity UpAdptThd
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span>
</span><span id="line-1263"></span><span>      </span><span class="annot"><span class="annottext">Range Double -&gt; GenT Identity Double
forall (m :: * -&gt; *). MonadGen m =&gt; Range Double -&gt; m Double
</span><span class="hs-identifier hs-var">Gen.double</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Double -&gt; Double -&gt; Double -&gt; Range Double
forall a. (Floating a, Ord a) =&gt; a -&gt; a -&gt; a -&gt; Range a
</span><span class="hs-identifier hs-var">Range.exponentialFloatFrom</span></span><span> </span><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679555427"><span class="hs-identifier hs-var">uat</span></a></span><span> </span><span class="annot"><span class="annottext">Double
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Double
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-1264"></span><span>      </span><span class="annot"><span class="annottext">GenT Identity Double -&gt; (Double, Double) -&gt; GenT Identity Double
forall a. Gen a -&gt; (a, a) -&gt; Gen a
</span><a href="Byron.Spec.Ledger.Update.html#increasingProbabilityAt"><span class="hs-operator hs-var">`increasingProbabilityAt`</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Double
</span><span class="hs-number">0</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Double
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-1265"></span><span>
</span><span id="line-1266"></span><span>    </span><span class="annot"><a href="#local-6989586621679555440"><span class="hs-identifier hs-type">nextFactorA</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Gen</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#FactorA"><span class="hs-identifier hs-type">FactorA</span></a></span><span>
</span><span id="line-1267"></span><span>    </span><span id="local-6989586621679555440"><span class="annot"><span class="annottext">nextFactorA :: GenT Identity FactorA
</span><a href="#local-6989586621679555440"><span class="hs-identifier hs-var hs-var">nextFactorA</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; FactorA
</span><a href="Byron.Spec.Ledger.Update.html#FactorA"><span class="hs-identifier hs-var">FactorA</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; FactorA) -&gt; GenT Identity Int -&gt; GenT Identity FactorA
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span>
</span><span id="line-1268"></span><span>      </span><span class="hs-comment">-- TODO: we choose arbitrary numbers here for now.</span><span>
</span><span id="line-1269"></span><span>      </span><span class="annot"><span class="annottext">Range Int -&gt; GenT Identity Int
forall (m :: * -&gt; *) a. (MonadGen m, Integral a) =&gt; Range a -&gt; m a
</span><span class="hs-identifier hs-var">Gen.integral</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int -&gt; Range Int
forall a. Integral a =&gt; a -&gt; a -&gt; a -&gt; Range a
</span><span class="hs-identifier hs-var">Range.exponentialFrom</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679555430"><span class="hs-identifier hs-var">fA</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">10</span></span><span class="hs-special">)</span><span>
</span><span id="line-1270"></span><span>      </span><span class="annot"><span class="annottext">GenT Identity Int -&gt; (Int, Int) -&gt; GenT Identity Int
forall a. Gen a -&gt; (a, a) -&gt; Gen a
</span><a href="Byron.Spec.Ledger.Update.html#increasingProbabilityAt"><span class="hs-operator hs-var">`increasingProbabilityAt`</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">10</span></span><span class="hs-special">)</span><span>
</span><span id="line-1271"></span><span>
</span><span id="line-1272"></span><span>    </span><span class="hs-comment">-- The next value of the factor B shouldn't drop below 'GP.c' since when</span><span>
</span><span id="line-1273"></span><span>    </span><span class="hs-comment">-- elaborating this factor we divide it by 'GP.c' (see 'initialPParams').</span><span>
</span><span id="line-1274"></span><span>    </span><span class="annot"><a href="#local-6989586621679555439"><span class="hs-identifier hs-type">nextFactorB</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Gen</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#FactorB"><span class="hs-identifier hs-type">FactorB</span></a></span><span>
</span><span id="line-1275"></span><span>    </span><span id="local-6989586621679555439"><span class="annot"><span class="annottext">nextFactorB :: GenT Identity FactorB
</span><a href="#local-6989586621679555439"><span class="hs-identifier hs-var hs-var">nextFactorB</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; FactorB
</span><a href="Byron.Spec.Ledger.Update.html#FactorB"><span class="hs-identifier hs-var">FactorB</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; FactorB) -&gt; GenT Identity Int -&gt; GenT Identity FactorB
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span>
</span><span id="line-1276"></span><span>      </span><span class="annot"><span class="annottext">Range Int -&gt; GenT Identity Int
forall (m :: * -&gt; *) a. (MonadGen m, Integral a) =&gt; Range a -&gt; m a
</span><span class="hs-identifier hs-var">Gen.integral</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int -&gt; Range Int
forall a. Integral a =&gt; a -&gt; a -&gt; a -&gt; Range a
</span><span class="hs-identifier hs-var">Range.exponentialFrom</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679555429"><span class="hs-identifier hs-var">fB</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679555420"><span class="hs-identifier hs-var">minFactorB</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679555419"><span class="hs-identifier hs-var">maxFactorB</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1277"></span><span>      </span><span class="annot"><span class="annottext">GenT Identity Int -&gt; (Int, Int) -&gt; GenT Identity Int
forall a. Gen a -&gt; (a, a) -&gt; Gen a
</span><a href="Byron.Spec.Ledger.Update.html#increasingProbabilityAt"><span class="hs-operator hs-var">`increasingProbabilityAt`</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679555420"><span class="hs-identifier hs-var">minFactorB</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679555419"><span class="hs-identifier hs-var">maxFactorB</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1278"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-1279"></span><span>        </span><span id="local-6989586621679555420"><span class="annot"><span class="annottext">minFactorB :: Int
</span><a href="#local-6989586621679555420"><span class="hs-identifier hs-var hs-var">minFactorB</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">5</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">*</span></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="Byron.Spec.Ledger.GlobalParams.html#c"><span class="hs-identifier hs-var">GP.c</span></a></span><span>
</span><span id="line-1280"></span><span>        </span><span id="local-6989586621679555419"><span class="annot"><span class="annottext">maxFactorB :: Int
</span><a href="#local-6989586621679555419"><span class="hs-identifier hs-var hs-var">maxFactorB</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">15</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">*</span></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="Byron.Spec.Ledger.GlobalParams.html#c"><span class="hs-identifier hs-var">GP.c</span></a></span><span>
</span><span id="line-1281"></span><span>
</span><span id="line-1282"></span><span>    </span><span class="annot"><a href="#local-6989586621679555454"><span class="hs-operator hs-type">(-?)</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Natural</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Natural</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Natural</span></span><span>
</span><span id="line-1283"></span><span>    </span><span id="local-6989586621679555418"><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679555418"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621679555454"><span class="annot"><span class="annottext">-? :: Natural -&gt; Natural -&gt; Natural
</span><a href="#local-6989586621679555454"><span class="hs-operator hs-var hs-var">-?</span></a></span></span><span> </span><span id="local-6989586621679555417"><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679555417"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679555418"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Natural -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679555417"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">0</span></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679555418"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Natural -&gt; Natural
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679555417"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-1284"></span><span>
</span><span id="line-1285"></span><span class="hs-comment">-- | Generate values the given distribution in 90% of the cases, and values at</span><span>
</span><span id="line-1286"></span><span class="hs-comment">-- the bounds of the range in 10% of the cases.</span><span>
</span><span id="line-1287"></span><span class="hs-comment">--</span><span>
</span><span id="line-1288"></span><span class="hs-comment">-- This can be used to generate enough extreme values. The exponential and</span><span>
</span><span id="line-1289"></span><span class="hs-comment">-- linear distributions provided by @hedgehog@ will generate a small percentage</span><span>
</span><span id="line-1290"></span><span class="hs-comment">-- of these (0-1%).</span><span>
</span><span id="line-1291"></span><span id="local-6989586621679558332"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#increasingProbabilityAt"><span class="hs-identifier hs-type">increasingProbabilityAt</span></a></span><span>
</span><span id="line-1292"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Gen</span></span><span> </span><span class="annot"><a href="#local-6989586621679558332"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-1293"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679558332"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679558332"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1294"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Gen</span></span><span> </span><span class="annot"><a href="#local-6989586621679558332"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-1295"></span><span id="increasingProbabilityAt"><span class="annot"><span class="annottext">increasingProbabilityAt :: Gen a -&gt; (a, a) -&gt; Gen a
</span><a href="Byron.Spec.Ledger.Update.html#increasingProbabilityAt"><span class="hs-identifier hs-var hs-var">increasingProbabilityAt</span></a></span></span><span> </span><span id="local-6989586621679555416"><span class="annot"><span class="annottext">Gen a
</span><a href="#local-6989586621679555416"><span class="hs-identifier hs-var">gen</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679555415"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679555415"><span class="hs-identifier hs-var">lower</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555414"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679555414"><span class="hs-identifier hs-var">upper</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1296"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(Int, Gen a)] -&gt; Gen a
forall (m :: * -&gt; *) a. MonadGen m =&gt; [(Int, m a)] -&gt; m a
</span><span class="hs-identifier hs-var">Gen.frequency</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">5</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">a -&gt; Gen a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679555415"><span class="hs-identifier hs-var">lower</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1297"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">90</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Gen a
</span><a href="#local-6989586621679555416"><span class="hs-identifier hs-var">gen</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1298"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">5</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">a -&gt; Gen a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679555414"><span class="hs-identifier hs-var">upper</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1299"></span><span>                  </span><span class="hs-special">]</span><span>
</span><span id="line-1300"></span><span>
</span><span id="line-1301"></span><span>
</span><span id="line-1302"></span><span class="hs-comment">-- | Generate a random update proposal id, by picking a large number so that the</span><span>
</span><span id="line-1303"></span><span class="hs-comment">-- probability of having an update proposal with that id is nearly zero.</span><span>
</span><span id="line-1304"></span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#randomUpId"><span class="hs-identifier hs-type">randomUpId</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Gen</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpId"><span class="hs-identifier hs-type">UpId</span></a></span><span>
</span><span id="line-1305"></span><span id="randomUpId"><span class="annot"><span class="annottext">randomUpId :: Gen UpId
</span><a href="Byron.Spec.Ledger.Update.html#randomUpId"><span class="hs-identifier hs-var hs-var">randomUpId</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; UpId
</span><a href="Byron.Spec.Ledger.Update.html#UpId"><span class="hs-identifier hs-var">UpId</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; UpId) -&gt; GenT Identity Int -&gt; Gen UpId
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Range Int -&gt; GenT Identity Int
forall (m :: * -&gt; *) a. (MonadGen m, Integral a) =&gt; Range a -&gt; m a
</span><span class="hs-identifier hs-var">Gen.integral</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Range Int
forall a. a -&gt; a -&gt; Range a
</span><span class="hs-identifier hs-var">Range.constant</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">10000</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">10100</span></span><span class="hs-special">)</span><span>
</span><span id="line-1306"></span><span>
</span><span id="line-1307"></span><span class="hs-comment">-- | Update the signature of the update proposal.</span><span>
</span><span id="line-1308"></span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#reSign"><span class="hs-identifier hs-type">reSign</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UProp"><span class="hs-identifier hs-type">UProp</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UProp"><span class="hs-identifier hs-type">UProp</span></a></span><span>
</span><span id="line-1309"></span><span id="reSign"><span class="annot"><span class="annottext">reSign :: UProp -&gt; UProp
</span><a href="Byron.Spec.Ledger.Update.html#reSign"><span class="hs-identifier hs-var hs-var">reSign</span></a></span></span><span> </span><span id="local-6989586621679555411"><span class="annot"><span class="annottext">UProp
</span><a href="#local-6989586621679555411"><span class="hs-identifier hs-var">uprop</span></a></span></span><span>
</span><span id="line-1310"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UProp
</span><a href="#local-6989586621679555411"><span class="hs-identifier hs-var">uprop</span></a></span><span>
</span><span id="line-1311"></span><span>  </span><span class="annot"><span class="annottext">UProp -&gt; (UProp -&gt; UProp) -&gt; UProp
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(Sig UpSD -&gt; Identity (Sig UpSD)) -&gt; UProp -&gt; Identity UProp
Lens' UProp (Sig UpSD)
</span><a href="Byron.Spec.Ledger.Update.html#upSig"><span class="hs-identifier hs-var">upSig</span></a></span><span> </span><span class="annot"><span class="annottext">((Sig UpSD -&gt; Identity (Sig UpSD)) -&gt; UProp -&gt; Identity UProp)
-&gt; Sig UpSD -&gt; UProp -&gt; UProp
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">SKey -&gt; UpSD -&gt; Sig UpSD
forall a. SKey -&gt; a -&gt; Sig a
</span><a href="Byron.Spec.Ledger.Core.html#sign"><span class="hs-identifier hs-var">Core.sign</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VKey -&gt; SKey
</span><a href="Byron.Spec.Ledger.Core.Omniscient.html#skey"><span class="hs-identifier hs-var">skey</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UProp
</span><a href="#local-6989586621679555411"><span class="hs-identifier hs-var">uprop</span></a></span><span> </span><span class="annot"><span class="annottext">UProp -&gt; Getting VKey UProp VKey -&gt; VKey
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting VKey UProp VKey
Lens' UProp VKey
</span><a href="Byron.Spec.Ledger.Update.html#upIssuer"><span class="hs-identifier hs-var">upIssuer</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UProp
</span><a href="#local-6989586621679555411"><span class="hs-identifier hs-var">uprop</span></a></span><span> </span><span class="annot"><span class="annottext">UProp -&gt; Getting UpSD UProp UpSD -&gt; UpSD
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting UpSD UProp UpSD
Lens UProp UProp UpSD UpSD
</span><a href="Byron.Spec.Ledger.Update.html#upSigData"><span class="hs-identifier hs-var">upSigData</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1312"></span><span>
</span><span id="line-1313"></span><span id="local-6989586621679555409"><span id="local-6989586621679555410"></span></span><span class="hs-keyword">data</span><span> </span><span id="UPIVOTE"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIVOTE"><span class="hs-identifier hs-var">UPIVOTE</span></a></span></span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(forall x. UPIVOTE -&gt; Rep UPIVOTE x)
-&gt; (forall x. Rep UPIVOTE x -&gt; UPIVOTE) -&gt; Generic UPIVOTE
forall x. Rep UPIVOTE x -&gt; UPIVOTE
forall x. UPIVOTE -&gt; Rep UPIVOTE x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep UPIVOTE x -&gt; UPIVOTE
$cfrom :: forall x. UPIVOTE -&gt; Rep UPIVOTE x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">,</span><span> </span><span id="%24tUPIVOTE"><span id="local-6989586621679555378"><span id="local-6989586621679555380"><span id="local-6989586621679555382"><span id="local-6989586621679555384"><span id="local-6989586621679555386"><span id="local-6989586621679555388"><span id="local-6989586621679555390"><span id="local-6989586621679555392"><span id="local-6989586621679555394"><span id="local-6989586621679555396"><span id="local-6989586621679555398"><span id="local-6989586621679555400"><span id="local-6989586621679555402"><span id="local-6989586621679555404"><span class="annot"><span class="annottext">Typeable UPIVOTE
DataType
Typeable UPIVOTE
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; UPIVOTE -&gt; c UPIVOTE)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UPIVOTE)
-&gt; (UPIVOTE -&gt; Constr)
-&gt; (UPIVOTE -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UPIVOTE))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c UPIVOTE))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; UPIVOTE -&gt; UPIVOTE)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPIVOTE -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPIVOTE -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; UPIVOTE -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UPIVOTE -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; UPIVOTE -&gt; m UPIVOTE)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; UPIVOTE -&gt; m UPIVOTE)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; UPIVOTE -&gt; m UPIVOTE)
-&gt; Data UPIVOTE
UPIVOTE -&gt; DataType
UPIVOTE -&gt; Constr
(forall b. Data b =&gt; b -&gt; b) -&gt; UPIVOTE -&gt; UPIVOTE
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; UPIVOTE -&gt; c UPIVOTE
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UPIVOTE
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UPIVOTE -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; UPIVOTE -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPIVOTE -&gt; r
forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPIVOTE -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UPIVOTE -&gt; m UPIVOTE
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UPIVOTE -&gt; m UPIVOTE
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UPIVOTE
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; UPIVOTE -&gt; c UPIVOTE
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UPIVOTE)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c UPIVOTE)
$tUPIVOTE :: DataType
gmapMo :: (forall d. Data d =&gt; d -&gt; m d) -&gt; UPIVOTE -&gt; m UPIVOTE
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UPIVOTE -&gt; m UPIVOTE
gmapMp :: (forall d. Data d =&gt; d -&gt; m d) -&gt; UPIVOTE -&gt; m UPIVOTE
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UPIVOTE -&gt; m UPIVOTE
gmapM :: (forall d. Data d =&gt; d -&gt; m d) -&gt; UPIVOTE -&gt; m UPIVOTE
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UPIVOTE -&gt; m UPIVOTE
gmapQi :: Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UPIVOTE -&gt; u
$cgmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UPIVOTE -&gt; u
gmapQ :: (forall d. Data d =&gt; d -&gt; u) -&gt; UPIVOTE -&gt; [u]
$cgmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; UPIVOTE -&gt; [u]
gmapQr :: (r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPIVOTE -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPIVOTE -&gt; r
gmapQl :: (r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPIVOTE -&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPIVOTE -&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; UPIVOTE -&gt; UPIVOTE
$cgmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; UPIVOTE -&gt; UPIVOTE
dataCast2 :: (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c UPIVOTE)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c UPIVOTE)
dataCast1 :: (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UPIVOTE)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UPIVOTE)
dataTypeOf :: UPIVOTE -&gt; DataType
$cdataTypeOf :: UPIVOTE -&gt; DataType
toConstr :: UPIVOTE -&gt; Constr
$ctoConstr :: UPIVOTE -&gt; Constr
gunfold :: (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UPIVOTE
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UPIVOTE
gfoldl :: (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; UPIVOTE -&gt; c UPIVOTE
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; UPIVOTE -&gt; c UPIVOTE
$cp1Data :: Typeable UPIVOTE
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">)</span><span>
</span><span id="line-1314"></span><span>
</span><span id="line-1315"></span><span id="local-6989586621679555375"><span id="local-6989586621679555376"></span></span><span class="hs-keyword">data</span><span> </span><span id="UpivotePredicateFailure"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpivotePredicateFailure"><span class="hs-identifier hs-var">UpivotePredicateFailure</span></a></span></span><span>
</span><span id="line-1316"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="UPVOTEFailure"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPVOTEFailure"><span class="hs-identifier hs-var">UPVOTEFailure</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">PredicateFailure</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPVOTE"><span class="hs-identifier hs-type">UPVOTE</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1317"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679555370"><span id="local-6989586621679555372"><span class="annot"><span class="annottext">UpivotePredicateFailure -&gt; UpivotePredicateFailure -&gt; Bool
(UpivotePredicateFailure -&gt; UpivotePredicateFailure -&gt; Bool)
-&gt; (UpivotePredicateFailure -&gt; UpivotePredicateFailure -&gt; Bool)
-&gt; Eq UpivotePredicateFailure
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: UpivotePredicateFailure -&gt; UpivotePredicateFailure -&gt; Bool
$c/= :: UpivotePredicateFailure -&gt; UpivotePredicateFailure -&gt; Bool
== :: UpivotePredicateFailure -&gt; UpivotePredicateFailure -&gt; Bool
$c== :: UpivotePredicateFailure -&gt; UpivotePredicateFailure -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555364"><span id="local-6989586621679555366"><span id="local-6989586621679555368"><span class="annot"><span class="annottext">Int -&gt; UpivotePredicateFailure -&gt; ShowS
[UpivotePredicateFailure] -&gt; ShowS
UpivotePredicateFailure -&gt; String
(Int -&gt; UpivotePredicateFailure -&gt; ShowS)
-&gt; (UpivotePredicateFailure -&gt; String)
-&gt; ([UpivotePredicateFailure] -&gt; ShowS)
-&gt; Show UpivotePredicateFailure
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [UpivotePredicateFailure] -&gt; ShowS
$cshowList :: [UpivotePredicateFailure] -&gt; ShowS
show :: UpivotePredicateFailure -&gt; String
$cshow :: UpivotePredicateFailure -&gt; String
showsPrec :: Int -&gt; UpivotePredicateFailure -&gt; ShowS
$cshowsPrec :: Int -&gt; UpivotePredicateFailure -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="%24cUPVOTEFailure"><span id="%24tUpivotePredicateFailure"><span id="local-6989586621679555335"><span id="local-6989586621679555337"><span id="local-6989586621679555339"><span id="local-6989586621679555341"><span id="local-6989586621679555343"><span id="local-6989586621679555345"><span id="local-6989586621679555347"><span id="local-6989586621679555349"><span id="local-6989586621679555351"><span id="local-6989586621679555353"><span id="local-6989586621679555355"><span id="local-6989586621679555357"><span id="local-6989586621679555359"><span id="local-6989586621679555361"><span class="annot"><span class="annottext">Typeable UpivotePredicateFailure
DataType
Constr
Typeable UpivotePredicateFailure
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g)
    -&gt; UpivotePredicateFailure
    -&gt; c UpivotePredicateFailure)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UpivotePredicateFailure)
-&gt; (UpivotePredicateFailure -&gt; Constr)
-&gt; (UpivotePredicateFailure -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UpivotePredicateFailure))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e))
    -&gt; Maybe (c UpivotePredicateFailure))
-&gt; ((forall b. Data b =&gt; b -&gt; b)
    -&gt; UpivotePredicateFailure -&gt; UpivotePredicateFailure)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r
    -&gt; (forall d. Data d =&gt; d -&gt; r')
    -&gt; UpivotePredicateFailure
    -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r
    -&gt; (forall d. Data d =&gt; d -&gt; r')
    -&gt; UpivotePredicateFailure
    -&gt; r)
-&gt; (forall u.
    (forall d. Data d =&gt; d -&gt; u) -&gt; UpivotePredicateFailure -&gt; [u])
-&gt; (forall u.
    Int
    -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UpivotePredicateFailure -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; UpivotePredicateFailure -&gt; m UpivotePredicateFailure)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; UpivotePredicateFailure -&gt; m UpivotePredicateFailure)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; UpivotePredicateFailure -&gt; m UpivotePredicateFailure)
-&gt; Data UpivotePredicateFailure
UpivotePredicateFailure -&gt; DataType
UpivotePredicateFailure -&gt; Constr
(forall b. Data b =&gt; b -&gt; b)
-&gt; UpivotePredicateFailure -&gt; UpivotePredicateFailure
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; UpivotePredicateFailure
-&gt; c UpivotePredicateFailure
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UpivotePredicateFailure
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u.
Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UpivotePredicateFailure -&gt; u
forall u.
(forall d. Data d =&gt; d -&gt; u) -&gt; UpivotePredicateFailure -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; UpivotePredicateFailure
-&gt; r
forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; UpivotePredicateFailure
-&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; UpivotePredicateFailure -&gt; m UpivotePredicateFailure
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; UpivotePredicateFailure -&gt; m UpivotePredicateFailure
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UpivotePredicateFailure
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; UpivotePredicateFailure
-&gt; c UpivotePredicateFailure
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UpivotePredicateFailure)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c UpivotePredicateFailure)
$cUPVOTEFailure :: Constr
$tUpivotePredicateFailure :: DataType
gmapMo :: (forall d. Data d =&gt; d -&gt; m d)
-&gt; UpivotePredicateFailure -&gt; m UpivotePredicateFailure
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; UpivotePredicateFailure -&gt; m UpivotePredicateFailure
gmapMp :: (forall d. Data d =&gt; d -&gt; m d)
-&gt; UpivotePredicateFailure -&gt; m UpivotePredicateFailure
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; UpivotePredicateFailure -&gt; m UpivotePredicateFailure
gmapM :: (forall d. Data d =&gt; d -&gt; m d)
-&gt; UpivotePredicateFailure -&gt; m UpivotePredicateFailure
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; UpivotePredicateFailure -&gt; m UpivotePredicateFailure
gmapQi :: Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UpivotePredicateFailure -&gt; u
$cgmapQi :: forall u.
Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UpivotePredicateFailure -&gt; u
gmapQ :: (forall d. Data d =&gt; d -&gt; u) -&gt; UpivotePredicateFailure -&gt; [u]
$cgmapQ :: forall u.
(forall d. Data d =&gt; d -&gt; u) -&gt; UpivotePredicateFailure -&gt; [u]
gmapQr :: (r' -&gt; r -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; UpivotePredicateFailure
-&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; UpivotePredicateFailure
-&gt; r
gmapQl :: (r -&gt; r' -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; UpivotePredicateFailure
-&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; UpivotePredicateFailure
-&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b)
-&gt; UpivotePredicateFailure -&gt; UpivotePredicateFailure
$cgmapT :: (forall b. Data b =&gt; b -&gt; b)
-&gt; UpivotePredicateFailure -&gt; UpivotePredicateFailure
dataCast2 :: (forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c UpivotePredicateFailure)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c UpivotePredicateFailure)
dataCast1 :: (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UpivotePredicateFailure)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UpivotePredicateFailure)
dataTypeOf :: UpivotePredicateFailure -&gt; DataType
$cdataTypeOf :: UpivotePredicateFailure -&gt; DataType
toConstr :: UpivotePredicateFailure -&gt; Constr
$ctoConstr :: UpivotePredicateFailure -&gt; Constr
gunfold :: (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UpivotePredicateFailure
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UpivotePredicateFailure
gfoldl :: (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; UpivotePredicateFailure
-&gt; c UpivotePredicateFailure
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; UpivotePredicateFailure
-&gt; c UpivotePredicateFailure
$cp1Data :: Typeable UpivotePredicateFailure
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x.
 UpivotePredicateFailure -&gt; Rep UpivotePredicateFailure x)
-&gt; (forall x.
    Rep UpivotePredicateFailure x -&gt; UpivotePredicateFailure)
-&gt; Generic UpivotePredicateFailure
forall x. Rep UpivotePredicateFailure x -&gt; UpivotePredicateFailure
forall x. UpivotePredicateFailure -&gt; Rep UpivotePredicateFailure x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep UpivotePredicateFailure x -&gt; UpivotePredicateFailure
$cfrom :: forall x. UpivotePredicateFailure -&gt; Rep UpivotePredicateFailure x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555325"><span id="local-6989586621679555327"><span id="local-6989586621679555329"><span class="annot"><span class="annottext">Context -&gt; UpivotePredicateFailure -&gt; IO (Maybe ThunkInfo)
Proxy UpivotePredicateFailure -&gt; String
(Context -&gt; UpivotePredicateFailure -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; UpivotePredicateFailure -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy UpivotePredicateFailure -&gt; String)
-&gt; NoThunks UpivotePredicateFailure
forall a.
(Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy a -&gt; String)
-&gt; NoThunks a
showTypeOf :: Proxy UpivotePredicateFailure -&gt; String
$cshowTypeOf :: Proxy UpivotePredicateFailure -&gt; String
wNoThunks :: Context -&gt; UpivotePredicateFailure -&gt; IO (Maybe ThunkInfo)
$cwNoThunks :: Context -&gt; UpivotePredicateFailure -&gt; IO (Maybe ThunkInfo)
noThunks :: Context -&gt; UpivotePredicateFailure -&gt; IO (Maybe ThunkInfo)
$cnoThunks :: Context -&gt; UpivotePredicateFailure -&gt; IO (Maybe ThunkInfo)
</span><a href="#local-6989586621679555325"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">NoThunks</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-1318"></span><span>
</span><span id="line-1319"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679555315"><span id="local-6989586621679555317"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">STS</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIVOTE"><span class="hs-identifier hs-type">UPIVOTE</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1320"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Environment"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">Environment</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIVOTE"><span class="hs-identifier hs-type">UPIVOTE</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIEnv"><span class="hs-identifier hs-type">UPIEnv</span></a></span><span>
</span><span id="line-1321"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="State"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">State</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIVOTE"><span class="hs-identifier hs-type">UPIVOTE</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIState"><span class="hs-identifier hs-type">UPIState</span></a></span><span>
</span><span id="line-1322"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Signal"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">Signal</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIVOTE"><span class="hs-identifier hs-type">UPIVOTE</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#Vote"><span class="hs-identifier hs-type">Vote</span></a></span><span>
</span><span id="line-1323"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="PredicateFailure"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">PredicateFailure</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIVOTE"><span class="hs-identifier hs-type">UPIVOTE</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpivotePredicateFailure"><span class="hs-identifier hs-type">UpivotePredicateFailure</span></a></span><span>
</span><span id="line-1324"></span><span>
</span><span id="line-1325"></span><span>  </span><span id="local-6989586621679555314"><span class="annot"><span class="annottext">initialRules :: [InitialRule UPIVOTE]
</span><a href="#local-6989586621679555314"><span class="hs-identifier hs-var hs-var hs-var hs-var">initialRules</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1326"></span><span>  </span><span id="local-6989586621679555313"><span class="annot"><span class="annottext">transitionRules :: [TransitionRule UPIVOTE]
</span><a href="#local-6989586621679555313"><span class="hs-identifier hs-var hs-var hs-var hs-var">transitionRules</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1327"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1328"></span><span>        </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">TRC</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679555312"><span class="annot"><a href="#local-6989586621679555312"><span class="hs-identifier hs-var">sn</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555311"><span class="annot"><a href="#local-6989586621679555311"><span class="hs-identifier hs-var">dms</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555310"><span class="annot"><a href="#local-6989586621679555310"><span class="hs-identifier hs-var">_k</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555309"><span class="annot"><a href="#local-6989586621679555309"><span class="hs-identifier hs-var">ngk</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1329"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679555308"><span class="annot"><a href="#local-6989586621679555308"><span class="hs-identifier hs-var">pv</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555307"><span class="annot"><a href="#local-6989586621679555307"><span class="hs-identifier hs-var">pps</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1330"></span><span>              </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555306"><span class="annot"><a href="#local-6989586621679555306"><span class="hs-identifier hs-var">fads</span></a></span></span><span>
</span><span id="line-1331"></span><span>              </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555305"><span class="annot"><a href="#local-6989586621679555305"><span class="hs-identifier hs-var">avs</span></a></span></span><span>
</span><span id="line-1332"></span><span>              </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555304"><span class="annot"><a href="#local-6989586621679555304"><span class="hs-identifier hs-var">rpus</span></a></span></span><span>
</span><span id="line-1333"></span><span>              </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555303"><span class="annot"><a href="#local-6989586621679555303"><span class="hs-identifier hs-var">raus</span></a></span></span><span>
</span><span id="line-1334"></span><span>              </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555302"><span class="annot"><a href="#local-6989586621679555302"><span class="hs-identifier hs-var">cps</span></a></span></span><span>
</span><span id="line-1335"></span><span>              </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555301"><span class="annot"><a href="#local-6989586621679555301"><span class="hs-identifier hs-var">vts</span></a></span></span><span>
</span><span id="line-1336"></span><span>              </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555300"><span class="annot"><a href="#local-6989586621679555300"><span class="hs-identifier hs-var">bvs</span></a></span></span><span>
</span><span id="line-1337"></span><span>              </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555299"><span class="annot"><a href="#local-6989586621679555299"><span class="hs-identifier hs-var">pws</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1338"></span><span>            </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555298"><span class="annot"><span class="annottext">Signal UPIVOTE
</span><a href="#local-6989586621679555298"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">F (Clause UPIVOTE 'Transition) (TRC UPIVOTE)
forall sts (rtype :: RuleType).
Rule sts rtype (RuleContext rtype sts)
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">judgmentContext</span></a></span><span>
</span><span id="line-1339"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679555297"><span class="annot"><span class="annottext">q :: UpAdptThd
</span><a href="#local-6989586621679555297"><span class="hs-identifier hs-var hs-var">q</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PParams
</span><a href="#local-6989586621679555307"><span class="hs-identifier hs-var">pps</span></a></span><span> </span><span class="annot"><span class="annottext">PParams -&gt; Getting UpAdptThd PParams UpAdptThd -&gt; UpAdptThd
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting UpAdptThd PParams UpAdptThd
Lens' PParams UpAdptThd
</span><a href="Byron.Spec.Ledger.Update.html#upAdptThd"><span class="hs-identifier hs-var">upAdptThd</span></a></span><span>
</span><span id="line-1340"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621679555296"><span class="annot"><span class="annottext">Map UpId Slot
</span><a href="#local-6989586621679555296"><span class="hs-identifier hs-var">cps'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555295"><span class="annot"><span class="annottext">Set (UpId, VKeyGenesis)
</span><a href="#local-6989586621679555295"><span class="hs-identifier hs-var">vts'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall sub super (rtype :: RuleType).
Embed sub super =&gt;
RuleContext rtype sub -&gt; Rule super rtype (State sub)
forall super (rtype :: RuleType).
Embed UPVOTE super =&gt;
RuleContext rtype UPVOTE -&gt; Rule super rtype (State UPVOTE)
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">trans</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPVOTE"><span class="hs-identifier hs-type">UPVOTE</span></a></span><span> </span><span class="annot"><span class="annottext">(RuleContext 'Transition UPVOTE
 -&gt; Rule UPIVOTE 'Transition (State UPVOTE))
-&gt; RuleContext 'Transition UPVOTE
-&gt; Rule UPIVOTE 'Transition (State UPVOTE)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Environment UPVOTE, State UPVOTE, Signal UPVOTE) -&gt; TRC UPVOTE
forall sts. (Environment sts, State sts, Signal sts) -&gt; TRC sts
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">TRC</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">Slot
</span><a href="#local-6989586621679555312"><span class="hs-identifier hs-var">sn</span></a></span><span>
</span><span id="line-1341"></span><span>                                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">UpAdptThd -&gt; Word8
forall a b. (RealFrac a, Integral b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">floor</span></span><span> </span><span class="annot"><span class="annottext">(UpAdptThd -&gt; Word8) -&gt; UpAdptThd -&gt; Word8
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">UpAdptThd
</span><a href="#local-6989586621679555297"><span class="hs-identifier hs-var">q</span></a></span><span> </span><span class="annot"><span class="annottext">UpAdptThd -&gt; UpAdptThd -&gt; UpAdptThd
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">*</span></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; UpAdptThd
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679555309"><span class="hs-identifier hs-var">ngk</span></a></span><span>
</span><span id="line-1342"></span><span>                                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map UpId Slot -&gt; Set (Domain (Map UpId Slot))
forall m. (Relation m, Ord (Domain m)) =&gt; m -&gt; Set (Domain m)
</span><a href="Byron.Spec.Ledger.Core.html#dom"><span class="hs-identifier hs-var">dom</span></a></span><span> </span><span class="annot"><span class="annottext">Map UpId Slot
</span><a href="#local-6989586621679555299"><span class="hs-identifier hs-var">pws</span></a></span><span>
</span><span id="line-1343"></span><span>                                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bimap VKeyGenesis VKey
</span><a href="#local-6989586621679555311"><span class="hs-identifier hs-var">dms</span></a></span><span>
</span><span id="line-1344"></span><span>                                             </span><span class="hs-special">)</span><span>
</span><span id="line-1345"></span><span>                                            </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">Map UpId Slot
</span><a href="#local-6989586621679555302"><span class="hs-identifier hs-var">cps</span></a></span><span>
</span><span id="line-1346"></span><span>                                              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Set (UpId, VKeyGenesis)
</span><a href="#local-6989586621679555301"><span class="hs-identifier hs-var">vts</span></a></span><span>
</span><span id="line-1347"></span><span>                                              </span><span class="hs-special">)</span><span>
</span><span id="line-1348"></span><span>                                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Signal UPIVOTE
Signal UPVOTE
</span><a href="#local-6989586621679555298"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1349"></span><span>        </span><span class="annot"><span class="annottext">UPIState -&gt; F (Clause UPIVOTE 'Transition) UPIState
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(UPIState -&gt; F (Clause UPIVOTE 'Transition) UPIState)
-&gt; UPIState -&gt; F (Clause UPIVOTE 'Transition) UPIState
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ProtVer
</span><a href="#local-6989586621679555308"><span class="hs-identifier hs-var">pv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PParams
</span><a href="#local-6989586621679555307"><span class="hs-identifier hs-var">pps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1350"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[(Slot, (ProtVer, PParams))]
</span><a href="#local-6989586621679555306"><span class="hs-identifier hs-var">fads</span></a></span><span>
</span><span id="line-1351"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map ApName (ApVer, Slot, Metadata)
</span><a href="#local-6989586621679555305"><span class="hs-identifier hs-var">avs</span></a></span><span>
</span><span id="line-1352"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map UpId (ProtVer, PParams)
</span><a href="#local-6989586621679555304"><span class="hs-identifier hs-var">rpus</span></a></span><span>
</span><span id="line-1353"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map UpId (ApName, ApVer, Metadata)
</span><a href="#local-6989586621679555303"><span class="hs-identifier hs-var">raus</span></a></span><span>
</span><span id="line-1354"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map UpId Slot
</span><a href="#local-6989586621679555296"><span class="hs-identifier hs-var">cps'</span></a></span><span>
</span><span id="line-1355"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Set (UpId, VKeyGenesis)
</span><a href="#local-6989586621679555295"><span class="hs-identifier hs-var">vts'</span></a></span><span>
</span><span id="line-1356"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Set (ProtVer, VKeyGenesis)
</span><a href="#local-6989586621679555300"><span class="hs-identifier hs-var">bvs</span></a></span><span>
</span><span id="line-1357"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map UpId Slot
</span><a href="#local-6989586621679555299"><span class="hs-identifier hs-var">pws</span></a></span><span>
</span><span id="line-1358"></span><span>                </span><span class="hs-special">)</span><span>
</span><span id="line-1359"></span><span>
</span><span id="line-1360"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-1361"></span><span>
</span><span id="line-1362"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">Embed</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPVOTE"><span class="hs-identifier hs-type">UPVOTE</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIVOTE"><span class="hs-identifier hs-type">UPIVOTE</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1363"></span><span>  </span><span id="local-6989586621679555290"><span class="annot"><span class="annottext">wrapFailed :: PredicateFailure UPVOTE -&gt; PredicateFailure UPIVOTE
</span><a href="#local-6989586621679555290"><span class="hs-identifier hs-var hs-var hs-var hs-var">wrapFailed</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PredicateFailure UPVOTE -&gt; PredicateFailure UPIVOTE
PredicateFailure UPVOTE -&gt; UpivotePredicateFailure
</span><a href="Byron.Spec.Ledger.Update.html#UPVOTEFailure"><span class="hs-identifier hs-var">UPVOTEFailure</span></a></span><span>
</span><span id="line-1364"></span><span>
</span><span id="line-1365"></span><span>
</span><span id="line-1366"></span><span id="local-6989586621679555288"><span id="local-6989586621679555289"></span></span><span class="hs-keyword">data</span><span> </span><span id="APPLYVOTES"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#APPLYVOTES"><span class="hs-identifier hs-var">APPLYVOTES</span></a></span></span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(forall x. APPLYVOTES -&gt; Rep APPLYVOTES x)
-&gt; (forall x. Rep APPLYVOTES x -&gt; APPLYVOTES) -&gt; Generic APPLYVOTES
forall x. Rep APPLYVOTES x -&gt; APPLYVOTES
forall x. APPLYVOTES -&gt; Rep APPLYVOTES x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep APPLYVOTES x -&gt; APPLYVOTES
$cfrom :: forall x. APPLYVOTES -&gt; Rep APPLYVOTES x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">,</span><span> </span><span id="%24tAPPLYVOTES"><span id="local-6989586621679555257"><span id="local-6989586621679555259"><span id="local-6989586621679555261"><span id="local-6989586621679555263"><span id="local-6989586621679555265"><span id="local-6989586621679555267"><span id="local-6989586621679555269"><span id="local-6989586621679555271"><span id="local-6989586621679555273"><span id="local-6989586621679555275"><span id="local-6989586621679555277"><span id="local-6989586621679555279"><span id="local-6989586621679555281"><span id="local-6989586621679555283"><span class="annot"><span class="annottext">Typeable APPLYVOTES
DataType
Typeable APPLYVOTES
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; APPLYVOTES -&gt; c APPLYVOTES)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c APPLYVOTES)
-&gt; (APPLYVOTES -&gt; Constr)
-&gt; (APPLYVOTES -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c APPLYVOTES))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e))
    -&gt; Maybe (c APPLYVOTES))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; APPLYVOTES -&gt; APPLYVOTES)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; APPLYVOTES -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; APPLYVOTES -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; APPLYVOTES -&gt; [u])
-&gt; (forall u.
    Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; APPLYVOTES -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; APPLYVOTES -&gt; m APPLYVOTES)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; APPLYVOTES -&gt; m APPLYVOTES)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; APPLYVOTES -&gt; m APPLYVOTES)
-&gt; Data APPLYVOTES
APPLYVOTES -&gt; DataType
APPLYVOTES -&gt; Constr
(forall b. Data b =&gt; b -&gt; b) -&gt; APPLYVOTES -&gt; APPLYVOTES
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; APPLYVOTES -&gt; c APPLYVOTES
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c APPLYVOTES
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; APPLYVOTES -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; APPLYVOTES -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; APPLYVOTES -&gt; r
forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; APPLYVOTES -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; APPLYVOTES -&gt; m APPLYVOTES
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; APPLYVOTES -&gt; m APPLYVOTES
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c APPLYVOTES
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; APPLYVOTES -&gt; c APPLYVOTES
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c APPLYVOTES)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c APPLYVOTES)
$tAPPLYVOTES :: DataType
gmapMo :: (forall d. Data d =&gt; d -&gt; m d) -&gt; APPLYVOTES -&gt; m APPLYVOTES
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; APPLYVOTES -&gt; m APPLYVOTES
gmapMp :: (forall d. Data d =&gt; d -&gt; m d) -&gt; APPLYVOTES -&gt; m APPLYVOTES
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; APPLYVOTES -&gt; m APPLYVOTES
gmapM :: (forall d. Data d =&gt; d -&gt; m d) -&gt; APPLYVOTES -&gt; m APPLYVOTES
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; APPLYVOTES -&gt; m APPLYVOTES
gmapQi :: Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; APPLYVOTES -&gt; u
$cgmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; APPLYVOTES -&gt; u
gmapQ :: (forall d. Data d =&gt; d -&gt; u) -&gt; APPLYVOTES -&gt; [u]
$cgmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; APPLYVOTES -&gt; [u]
gmapQr :: (r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; APPLYVOTES -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; APPLYVOTES -&gt; r
gmapQl :: (r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; APPLYVOTES -&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; APPLYVOTES -&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; APPLYVOTES -&gt; APPLYVOTES
$cgmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; APPLYVOTES -&gt; APPLYVOTES
dataCast2 :: (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c APPLYVOTES)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c APPLYVOTES)
dataCast1 :: (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c APPLYVOTES)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c APPLYVOTES)
dataTypeOf :: APPLYVOTES -&gt; DataType
$cdataTypeOf :: APPLYVOTES -&gt; DataType
toConstr :: APPLYVOTES -&gt; Constr
$ctoConstr :: APPLYVOTES -&gt; Constr
gunfold :: (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c APPLYVOTES
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c APPLYVOTES
gfoldl :: (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; APPLYVOTES -&gt; c APPLYVOTES
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; APPLYVOTES -&gt; c APPLYVOTES
$cp1Data :: Typeable APPLYVOTES
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">)</span><span>
</span><span id="line-1367"></span><span>
</span><span id="line-1368"></span><span id="local-6989586621679555254"><span id="local-6989586621679555255"></span></span><span class="hs-keyword">data</span><span> </span><span id="ApplyVotesPredicateFailure"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ApplyVotesPredicateFailure"><span class="hs-identifier hs-var">ApplyVotesPredicateFailure</span></a></span></span><span>
</span><span id="line-1369"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="UpivoteFailure"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpivoteFailure"><span class="hs-identifier hs-var">UpivoteFailure</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">PredicateFailure</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIVOTE"><span class="hs-identifier hs-type">UPIVOTE</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1370"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679555249"><span id="local-6989586621679555251"><span class="annot"><span class="annottext">ApplyVotesPredicateFailure -&gt; ApplyVotesPredicateFailure -&gt; Bool
(ApplyVotesPredicateFailure -&gt; ApplyVotesPredicateFailure -&gt; Bool)
-&gt; (ApplyVotesPredicateFailure
    -&gt; ApplyVotesPredicateFailure -&gt; Bool)
-&gt; Eq ApplyVotesPredicateFailure
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: ApplyVotesPredicateFailure -&gt; ApplyVotesPredicateFailure -&gt; Bool
$c/= :: ApplyVotesPredicateFailure -&gt; ApplyVotesPredicateFailure -&gt; Bool
== :: ApplyVotesPredicateFailure -&gt; ApplyVotesPredicateFailure -&gt; Bool
$c== :: ApplyVotesPredicateFailure -&gt; ApplyVotesPredicateFailure -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555243"><span id="local-6989586621679555245"><span id="local-6989586621679555247"><span class="annot"><span class="annottext">Int -&gt; ApplyVotesPredicateFailure -&gt; ShowS
[ApplyVotesPredicateFailure] -&gt; ShowS
ApplyVotesPredicateFailure -&gt; String
(Int -&gt; ApplyVotesPredicateFailure -&gt; ShowS)
-&gt; (ApplyVotesPredicateFailure -&gt; String)
-&gt; ([ApplyVotesPredicateFailure] -&gt; ShowS)
-&gt; Show ApplyVotesPredicateFailure
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [ApplyVotesPredicateFailure] -&gt; ShowS
$cshowList :: [ApplyVotesPredicateFailure] -&gt; ShowS
show :: ApplyVotesPredicateFailure -&gt; String
$cshow :: ApplyVotesPredicateFailure -&gt; String
showsPrec :: Int -&gt; ApplyVotesPredicateFailure -&gt; ShowS
$cshowsPrec :: Int -&gt; ApplyVotesPredicateFailure -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="%24cUpivoteFailure"><span id="%24tApplyVotesPredicateFailure"><span id="local-6989586621679555214"><span id="local-6989586621679555216"><span id="local-6989586621679555218"><span id="local-6989586621679555220"><span id="local-6989586621679555222"><span id="local-6989586621679555224"><span id="local-6989586621679555226"><span id="local-6989586621679555228"><span id="local-6989586621679555230"><span id="local-6989586621679555232"><span id="local-6989586621679555234"><span id="local-6989586621679555236"><span id="local-6989586621679555238"><span id="local-6989586621679555240"><span class="annot"><span class="annottext">Typeable ApplyVotesPredicateFailure
DataType
Constr
Typeable ApplyVotesPredicateFailure
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g)
    -&gt; ApplyVotesPredicateFailure
    -&gt; c ApplyVotesPredicateFailure)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c ApplyVotesPredicateFailure)
-&gt; (ApplyVotesPredicateFailure -&gt; Constr)
-&gt; (ApplyVotesPredicateFailure -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d))
    -&gt; Maybe (c ApplyVotesPredicateFailure))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e))
    -&gt; Maybe (c ApplyVotesPredicateFailure))
-&gt; ((forall b. Data b =&gt; b -&gt; b)
    -&gt; ApplyVotesPredicateFailure -&gt; ApplyVotesPredicateFailure)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r
    -&gt; (forall d. Data d =&gt; d -&gt; r')
    -&gt; ApplyVotesPredicateFailure
    -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r
    -&gt; (forall d. Data d =&gt; d -&gt; r')
    -&gt; ApplyVotesPredicateFailure
    -&gt; r)
-&gt; (forall u.
    (forall d. Data d =&gt; d -&gt; u) -&gt; ApplyVotesPredicateFailure -&gt; [u])
-&gt; (forall u.
    Int
    -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; ApplyVotesPredicateFailure -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; ApplyVotesPredicateFailure -&gt; m ApplyVotesPredicateFailure)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; ApplyVotesPredicateFailure -&gt; m ApplyVotesPredicateFailure)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; ApplyVotesPredicateFailure -&gt; m ApplyVotesPredicateFailure)
-&gt; Data ApplyVotesPredicateFailure
ApplyVotesPredicateFailure -&gt; DataType
ApplyVotesPredicateFailure -&gt; Constr
(forall b. Data b =&gt; b -&gt; b)
-&gt; ApplyVotesPredicateFailure -&gt; ApplyVotesPredicateFailure
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; ApplyVotesPredicateFailure
-&gt; c ApplyVotesPredicateFailure
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c ApplyVotesPredicateFailure
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u.
Int
-&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; ApplyVotesPredicateFailure -&gt; u
forall u.
(forall d. Data d =&gt; d -&gt; u) -&gt; ApplyVotesPredicateFailure -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; ApplyVotesPredicateFailure
-&gt; r
forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; ApplyVotesPredicateFailure
-&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; ApplyVotesPredicateFailure -&gt; m ApplyVotesPredicateFailure
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; ApplyVotesPredicateFailure -&gt; m ApplyVotesPredicateFailure
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c ApplyVotesPredicateFailure
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; ApplyVotesPredicateFailure
-&gt; c ApplyVotesPredicateFailure
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d))
-&gt; Maybe (c ApplyVotesPredicateFailure)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c ApplyVotesPredicateFailure)
$cUpivoteFailure :: Constr
$tApplyVotesPredicateFailure :: DataType
gmapMo :: (forall d. Data d =&gt; d -&gt; m d)
-&gt; ApplyVotesPredicateFailure -&gt; m ApplyVotesPredicateFailure
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; ApplyVotesPredicateFailure -&gt; m ApplyVotesPredicateFailure
gmapMp :: (forall d. Data d =&gt; d -&gt; m d)
-&gt; ApplyVotesPredicateFailure -&gt; m ApplyVotesPredicateFailure
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; ApplyVotesPredicateFailure -&gt; m ApplyVotesPredicateFailure
gmapM :: (forall d. Data d =&gt; d -&gt; m d)
-&gt; ApplyVotesPredicateFailure -&gt; m ApplyVotesPredicateFailure
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; ApplyVotesPredicateFailure -&gt; m ApplyVotesPredicateFailure
gmapQi :: Int
-&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; ApplyVotesPredicateFailure -&gt; u
$cgmapQi :: forall u.
Int
-&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; ApplyVotesPredicateFailure -&gt; u
gmapQ :: (forall d. Data d =&gt; d -&gt; u) -&gt; ApplyVotesPredicateFailure -&gt; [u]
$cgmapQ :: forall u.
(forall d. Data d =&gt; d -&gt; u) -&gt; ApplyVotesPredicateFailure -&gt; [u]
gmapQr :: (r' -&gt; r -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; ApplyVotesPredicateFailure
-&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; ApplyVotesPredicateFailure
-&gt; r
gmapQl :: (r -&gt; r' -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; ApplyVotesPredicateFailure
-&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; ApplyVotesPredicateFailure
-&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b)
-&gt; ApplyVotesPredicateFailure -&gt; ApplyVotesPredicateFailure
$cgmapT :: (forall b. Data b =&gt; b -&gt; b)
-&gt; ApplyVotesPredicateFailure -&gt; ApplyVotesPredicateFailure
dataCast2 :: (forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c ApplyVotesPredicateFailure)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c ApplyVotesPredicateFailure)
dataCast1 :: (forall d. Data d =&gt; c (t d))
-&gt; Maybe (c ApplyVotesPredicateFailure)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d))
-&gt; Maybe (c ApplyVotesPredicateFailure)
dataTypeOf :: ApplyVotesPredicateFailure -&gt; DataType
$cdataTypeOf :: ApplyVotesPredicateFailure -&gt; DataType
toConstr :: ApplyVotesPredicateFailure -&gt; Constr
$ctoConstr :: ApplyVotesPredicateFailure -&gt; Constr
gunfold :: (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c ApplyVotesPredicateFailure
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c ApplyVotesPredicateFailure
gfoldl :: (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; ApplyVotesPredicateFailure
-&gt; c ApplyVotesPredicateFailure
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; ApplyVotesPredicateFailure
-&gt; c ApplyVotesPredicateFailure
$cp1Data :: Typeable ApplyVotesPredicateFailure
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x.
 ApplyVotesPredicateFailure -&gt; Rep ApplyVotesPredicateFailure x)
-&gt; (forall x.
    Rep ApplyVotesPredicateFailure x -&gt; ApplyVotesPredicateFailure)
-&gt; Generic ApplyVotesPredicateFailure
forall x.
Rep ApplyVotesPredicateFailure x -&gt; ApplyVotesPredicateFailure
forall x.
ApplyVotesPredicateFailure -&gt; Rep ApplyVotesPredicateFailure x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x.
Rep ApplyVotesPredicateFailure x -&gt; ApplyVotesPredicateFailure
$cfrom :: forall x.
ApplyVotesPredicateFailure -&gt; Rep ApplyVotesPredicateFailure x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555204"><span id="local-6989586621679555206"><span id="local-6989586621679555208"><span class="annot"><span class="annottext">Context -&gt; ApplyVotesPredicateFailure -&gt; IO (Maybe ThunkInfo)
Proxy ApplyVotesPredicateFailure -&gt; String
(Context -&gt; ApplyVotesPredicateFailure -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; ApplyVotesPredicateFailure -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy ApplyVotesPredicateFailure -&gt; String)
-&gt; NoThunks ApplyVotesPredicateFailure
forall a.
(Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy a -&gt; String)
-&gt; NoThunks a
showTypeOf :: Proxy ApplyVotesPredicateFailure -&gt; String
$cshowTypeOf :: Proxy ApplyVotesPredicateFailure -&gt; String
wNoThunks :: Context -&gt; ApplyVotesPredicateFailure -&gt; IO (Maybe ThunkInfo)
$cwNoThunks :: Context -&gt; ApplyVotesPredicateFailure -&gt; IO (Maybe ThunkInfo)
noThunks :: Context -&gt; ApplyVotesPredicateFailure -&gt; IO (Maybe ThunkInfo)
$cnoThunks :: Context -&gt; ApplyVotesPredicateFailure -&gt; IO (Maybe ThunkInfo)
</span><a href="#local-6989586621679555204"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">NoThunks</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-1371"></span><span>
</span><span id="line-1372"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679555194"><span id="local-6989586621679555196"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">STS</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#APPLYVOTES"><span class="hs-identifier hs-type">APPLYVOTES</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1373"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Environment"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">Environment</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#APPLYVOTES"><span class="hs-identifier hs-type">APPLYVOTES</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIEnv"><span class="hs-identifier hs-type">UPIEnv</span></a></span><span>
</span><span id="line-1374"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="State"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">State</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#APPLYVOTES"><span class="hs-identifier hs-type">APPLYVOTES</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIState"><span class="hs-identifier hs-type">UPIState</span></a></span><span>
</span><span id="line-1375"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Signal"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">Signal</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#APPLYVOTES"><span class="hs-identifier hs-type">APPLYVOTES</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#Vote"><span class="hs-identifier hs-type">Vote</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1376"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="PredicateFailure"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">PredicateFailure</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#APPLYVOTES"><span class="hs-identifier hs-type">APPLYVOTES</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ApplyVotesPredicateFailure"><span class="hs-identifier hs-type">ApplyVotesPredicateFailure</span></a></span><span>
</span><span id="line-1377"></span><span>
</span><span id="line-1378"></span><span>  </span><span id="local-6989586621679555193"><span class="annot"><span class="annottext">initialRules :: [InitialRule APPLYVOTES]
</span><a href="#local-6989586621679555193"><span class="hs-identifier hs-var hs-var hs-var hs-var">initialRules</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">UPIState -&gt; F (Clause APPLYVOTES 'Initial) UPIState
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(UPIState -&gt; F (Clause APPLYVOTES 'Initial) UPIState)
-&gt; UPIState -&gt; F (Clause APPLYVOTES 'Initial) UPIState
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="annot"><span class="annottext">UPIState
</span><a href="Byron.Spec.Ledger.Update.html#emptyUPIState"><span class="hs-identifier hs-var">emptyUPIState</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1379"></span><span>
</span><span id="line-1380"></span><span>  </span><span id="local-6989586621679555192"><span class="annot"><span class="annottext">transitionRules :: [TransitionRule APPLYVOTES]
</span><a href="#local-6989586621679555192"><span class="hs-identifier hs-var hs-var hs-var hs-var">transitionRules</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1381"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1382"></span><span>        </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">TRC</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679555191"><span class="annot"><span class="annottext">Environment APPLYVOTES
</span><a href="#local-6989586621679555191"><span class="hs-identifier hs-var">env</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555190"><span class="annot"><span class="annottext">State APPLYVOTES
</span><a href="#local-6989586621679555190"><span class="hs-identifier hs-var">us</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555189"><span class="annot"><span class="annottext">Signal APPLYVOTES
</span><a href="#local-6989586621679555189"><span class="hs-identifier hs-var">sig</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">F (Clause APPLYVOTES 'Transition) (TRC APPLYVOTES)
forall sts (rtype :: RuleType).
Rule sts rtype (RuleContext rtype sts)
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">judgmentContext</span></a></span><span>
</span><span id="line-1383"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Vote]
Signal APPLYVOTES
</span><a href="#local-6989586621679555189"><span class="hs-identifier hs-var">sig</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#Vote"><span class="hs-identifier hs-type">Vote</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1384"></span><span>          </span><span class="hs-special">[</span><span class="hs-special">]</span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UPIState -&gt; F (Clause APPLYVOTES 'Transition) UPIState
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">UPIState
State APPLYVOTES
</span><a href="#local-6989586621679555190"><span class="hs-identifier hs-var">us</span></a></span><span>
</span><span id="line-1385"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621679555188"><span class="annot"><span class="annottext">Vote
</span><a href="#local-6989586621679555188"><span class="hs-identifier hs-var">x</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621679555187"><span class="annot"><span class="annottext">[Vote]
</span><a href="#local-6989586621679555187"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1386"></span><span>            </span><span id="local-6989586621679555186"><span class="annot"><span class="annottext">UPIState
</span><a href="#local-6989586621679555186"><span class="hs-identifier hs-var">us'</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall sub super (rtype :: RuleType).
Embed sub super =&gt;
RuleContext rtype sub -&gt; Rule super rtype (State sub)
forall super (rtype :: RuleType).
Embed UPIVOTE super =&gt;
RuleContext rtype UPIVOTE -&gt; Rule super rtype (State UPIVOTE)
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">trans</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIVOTE"><span class="hs-identifier hs-type">UPIVOTE</span></a></span><span> </span><span class="annot"><span class="annottext">(RuleContext 'Transition UPIVOTE
 -&gt; Rule APPLYVOTES 'Transition (State UPIVOTE))
-&gt; RuleContext 'Transition UPIVOTE
-&gt; Rule APPLYVOTES 'Transition (State UPIVOTE)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Environment UPIVOTE, State UPIVOTE, Signal UPIVOTE) -&gt; TRC UPIVOTE
forall sts. (Environment sts, State sts, Signal sts) -&gt; TRC sts
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">TRC</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Environment APPLYVOTES
Environment UPIVOTE
</span><a href="#local-6989586621679555191"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">State APPLYVOTES
State UPIVOTE
</span><a href="#local-6989586621679555190"><span class="hs-identifier hs-var">us</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Signal UPIVOTE
Vote
</span><a href="#local-6989586621679555188"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1387"></span><span>            </span><span id="local-6989586621679555185"><span class="annot"><span class="annottext">UPIState
</span><a href="#local-6989586621679555185"><span class="hs-identifier hs-var">us''</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall sub super (rtype :: RuleType).
Embed sub super =&gt;
RuleContext rtype sub -&gt; Rule super rtype (State sub)
forall super (rtype :: RuleType).
Embed APPLYVOTES super =&gt;
RuleContext rtype APPLYVOTES -&gt; Rule super rtype (State APPLYVOTES)
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">trans</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#APPLYVOTES"><span class="hs-identifier hs-type">APPLYVOTES</span></a></span><span>  </span><span class="annot"><span class="annottext">(RuleContext 'Transition APPLYVOTES -&gt; TransitionRule APPLYVOTES)
-&gt; RuleContext 'Transition APPLYVOTES -&gt; TransitionRule APPLYVOTES
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Environment APPLYVOTES, State APPLYVOTES, Signal APPLYVOTES)
-&gt; TRC APPLYVOTES
forall sts. (Environment sts, State sts, Signal sts) -&gt; TRC sts
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">TRC</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Environment APPLYVOTES
</span><a href="#local-6989586621679555191"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">UPIState
State APPLYVOTES
</span><a href="#local-6989586621679555186"><span class="hs-identifier hs-var">us'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Vote]
Signal APPLYVOTES
</span><a href="#local-6989586621679555187"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1388"></span><span>            </span><span class="annot"><span class="annottext">UPIState -&gt; F (Clause APPLYVOTES 'Transition) UPIState
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">UPIState
</span><a href="#local-6989586621679555185"><span class="hs-identifier hs-var">us''</span></a></span><span>
</span><span id="line-1389"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-1390"></span><span>
</span><span id="line-1391"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">Embed</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIVOTE"><span class="hs-identifier hs-type">UPIVOTE</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#APPLYVOTES"><span class="hs-identifier hs-type">APPLYVOTES</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1392"></span><span>  </span><span id="local-6989586621679555181"><span class="annot"><span class="annottext">wrapFailed :: PredicateFailure UPIVOTE -&gt; PredicateFailure APPLYVOTES
</span><a href="#local-6989586621679555181"><span class="hs-identifier hs-var hs-var hs-var hs-var">wrapFailed</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PredicateFailure UPIVOTE -&gt; PredicateFailure APPLYVOTES
PredicateFailure UPIVOTE -&gt; ApplyVotesPredicateFailure
</span><a href="Byron.Spec.Ledger.Update.html#UpivoteFailure"><span class="hs-identifier hs-var">UpivoteFailure</span></a></span><span>
</span><span id="line-1393"></span><span>
</span><span id="line-1394"></span><span id="local-6989586621679555179"><span id="local-6989586621679555180"></span></span><span class="hs-keyword">data</span><span> </span><span id="UPIVOTES"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIVOTES"><span class="hs-identifier hs-var">UPIVOTES</span></a></span></span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(forall x. UPIVOTES -&gt; Rep UPIVOTES x)
-&gt; (forall x. Rep UPIVOTES x -&gt; UPIVOTES) -&gt; Generic UPIVOTES
forall x. Rep UPIVOTES x -&gt; UPIVOTES
forall x. UPIVOTES -&gt; Rep UPIVOTES x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep UPIVOTES x -&gt; UPIVOTES
$cfrom :: forall x. UPIVOTES -&gt; Rep UPIVOTES x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">,</span><span> </span><span id="%24tUPIVOTES"><span id="local-6989586621679555148"><span id="local-6989586621679555150"><span id="local-6989586621679555152"><span id="local-6989586621679555154"><span id="local-6989586621679555156"><span id="local-6989586621679555158"><span id="local-6989586621679555160"><span id="local-6989586621679555162"><span id="local-6989586621679555164"><span id="local-6989586621679555166"><span id="local-6989586621679555168"><span id="local-6989586621679555170"><span id="local-6989586621679555172"><span id="local-6989586621679555174"><span class="annot"><span class="annottext">Typeable UPIVOTES
DataType
Typeable UPIVOTES
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; UPIVOTES -&gt; c UPIVOTES)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UPIVOTES)
-&gt; (UPIVOTES -&gt; Constr)
-&gt; (UPIVOTES -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UPIVOTES))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c UPIVOTES))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; UPIVOTES -&gt; UPIVOTES)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPIVOTES -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPIVOTES -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; UPIVOTES -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UPIVOTES -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; UPIVOTES -&gt; m UPIVOTES)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; UPIVOTES -&gt; m UPIVOTES)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; UPIVOTES -&gt; m UPIVOTES)
-&gt; Data UPIVOTES
UPIVOTES -&gt; DataType
UPIVOTES -&gt; Constr
(forall b. Data b =&gt; b -&gt; b) -&gt; UPIVOTES -&gt; UPIVOTES
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; UPIVOTES -&gt; c UPIVOTES
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UPIVOTES
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UPIVOTES -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; UPIVOTES -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPIVOTES -&gt; r
forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPIVOTES -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UPIVOTES -&gt; m UPIVOTES
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UPIVOTES -&gt; m UPIVOTES
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UPIVOTES
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; UPIVOTES -&gt; c UPIVOTES
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UPIVOTES)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c UPIVOTES)
$tUPIVOTES :: DataType
gmapMo :: (forall d. Data d =&gt; d -&gt; m d) -&gt; UPIVOTES -&gt; m UPIVOTES
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UPIVOTES -&gt; m UPIVOTES
gmapMp :: (forall d. Data d =&gt; d -&gt; m d) -&gt; UPIVOTES -&gt; m UPIVOTES
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UPIVOTES -&gt; m UPIVOTES
gmapM :: (forall d. Data d =&gt; d -&gt; m d) -&gt; UPIVOTES -&gt; m UPIVOTES
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UPIVOTES -&gt; m UPIVOTES
gmapQi :: Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UPIVOTES -&gt; u
$cgmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UPIVOTES -&gt; u
gmapQ :: (forall d. Data d =&gt; d -&gt; u) -&gt; UPIVOTES -&gt; [u]
$cgmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; UPIVOTES -&gt; [u]
gmapQr :: (r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPIVOTES -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPIVOTES -&gt; r
gmapQl :: (r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPIVOTES -&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPIVOTES -&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; UPIVOTES -&gt; UPIVOTES
$cgmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; UPIVOTES -&gt; UPIVOTES
dataCast2 :: (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c UPIVOTES)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c UPIVOTES)
dataCast1 :: (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UPIVOTES)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UPIVOTES)
dataTypeOf :: UPIVOTES -&gt; DataType
$cdataTypeOf :: UPIVOTES -&gt; DataType
toConstr :: UPIVOTES -&gt; Constr
$ctoConstr :: UPIVOTES -&gt; Constr
gunfold :: (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UPIVOTES
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UPIVOTES
gfoldl :: (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; UPIVOTES -&gt; c UPIVOTES
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; UPIVOTES -&gt; c UPIVOTES
$cp1Data :: Typeable UPIVOTES
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">)</span><span>
</span><span id="line-1395"></span><span>
</span><span id="line-1396"></span><span id="local-6989586621679555145"><span id="local-6989586621679555146"></span></span><span class="hs-keyword">data</span><span> </span><span id="UpivotesPredicateFailure"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpivotesPredicateFailure"><span class="hs-identifier hs-var">UpivotesPredicateFailure</span></a></span></span><span>
</span><span id="line-1397"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="ApplyVotesFailure"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ApplyVotesFailure"><span class="hs-identifier hs-var">ApplyVotesFailure</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">PredicateFailure</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#APPLYVOTES"><span class="hs-identifier hs-type">APPLYVOTES</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1398"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679555140"><span id="local-6989586621679555142"><span class="annot"><span class="annottext">UpivotesPredicateFailure -&gt; UpivotesPredicateFailure -&gt; Bool
(UpivotesPredicateFailure -&gt; UpivotesPredicateFailure -&gt; Bool)
-&gt; (UpivotesPredicateFailure -&gt; UpivotesPredicateFailure -&gt; Bool)
-&gt; Eq UpivotesPredicateFailure
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: UpivotesPredicateFailure -&gt; UpivotesPredicateFailure -&gt; Bool
$c/= :: UpivotesPredicateFailure -&gt; UpivotesPredicateFailure -&gt; Bool
== :: UpivotesPredicateFailure -&gt; UpivotesPredicateFailure -&gt; Bool
$c== :: UpivotesPredicateFailure -&gt; UpivotesPredicateFailure -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555134"><span id="local-6989586621679555136"><span id="local-6989586621679555138"><span class="annot"><span class="annottext">Int -&gt; UpivotesPredicateFailure -&gt; ShowS
[UpivotesPredicateFailure] -&gt; ShowS
UpivotesPredicateFailure -&gt; String
(Int -&gt; UpivotesPredicateFailure -&gt; ShowS)
-&gt; (UpivotesPredicateFailure -&gt; String)
-&gt; ([UpivotesPredicateFailure] -&gt; ShowS)
-&gt; Show UpivotesPredicateFailure
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [UpivotesPredicateFailure] -&gt; ShowS
$cshowList :: [UpivotesPredicateFailure] -&gt; ShowS
show :: UpivotesPredicateFailure -&gt; String
$cshow :: UpivotesPredicateFailure -&gt; String
showsPrec :: Int -&gt; UpivotesPredicateFailure -&gt; ShowS
$cshowsPrec :: Int -&gt; UpivotesPredicateFailure -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="%24cApplyVotesFailure"><span id="%24tUpivotesPredicateFailure"><span id="local-6989586621679555105"><span id="local-6989586621679555107"><span id="local-6989586621679555109"><span id="local-6989586621679555111"><span id="local-6989586621679555113"><span id="local-6989586621679555115"><span id="local-6989586621679555117"><span id="local-6989586621679555119"><span id="local-6989586621679555121"><span id="local-6989586621679555123"><span id="local-6989586621679555125"><span id="local-6989586621679555127"><span id="local-6989586621679555129"><span id="local-6989586621679555131"><span class="annot"><span class="annottext">Typeable UpivotesPredicateFailure
DataType
Constr
Typeable UpivotesPredicateFailure
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g)
    -&gt; UpivotesPredicateFailure
    -&gt; c UpivotesPredicateFailure)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UpivotesPredicateFailure)
-&gt; (UpivotesPredicateFailure -&gt; Constr)
-&gt; (UpivotesPredicateFailure -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d))
    -&gt; Maybe (c UpivotesPredicateFailure))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e))
    -&gt; Maybe (c UpivotesPredicateFailure))
-&gt; ((forall b. Data b =&gt; b -&gt; b)
    -&gt; UpivotesPredicateFailure -&gt; UpivotesPredicateFailure)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r
    -&gt; (forall d. Data d =&gt; d -&gt; r')
    -&gt; UpivotesPredicateFailure
    -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r
    -&gt; (forall d. Data d =&gt; d -&gt; r')
    -&gt; UpivotesPredicateFailure
    -&gt; r)
-&gt; (forall u.
    (forall d. Data d =&gt; d -&gt; u) -&gt; UpivotesPredicateFailure -&gt; [u])
-&gt; (forall u.
    Int
    -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UpivotesPredicateFailure -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; UpivotesPredicateFailure -&gt; m UpivotesPredicateFailure)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; UpivotesPredicateFailure -&gt; m UpivotesPredicateFailure)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; UpivotesPredicateFailure -&gt; m UpivotesPredicateFailure)
-&gt; Data UpivotesPredicateFailure
UpivotesPredicateFailure -&gt; DataType
UpivotesPredicateFailure -&gt; Constr
(forall b. Data b =&gt; b -&gt; b)
-&gt; UpivotesPredicateFailure -&gt; UpivotesPredicateFailure
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; UpivotesPredicateFailure
-&gt; c UpivotesPredicateFailure
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UpivotesPredicateFailure
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u.
Int
-&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UpivotesPredicateFailure -&gt; u
forall u.
(forall d. Data d =&gt; d -&gt; u) -&gt; UpivotesPredicateFailure -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; UpivotesPredicateFailure
-&gt; r
forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; UpivotesPredicateFailure
-&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; UpivotesPredicateFailure -&gt; m UpivotesPredicateFailure
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; UpivotesPredicateFailure -&gt; m UpivotesPredicateFailure
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UpivotesPredicateFailure
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; UpivotesPredicateFailure
-&gt; c UpivotesPredicateFailure
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UpivotesPredicateFailure)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c UpivotesPredicateFailure)
$cApplyVotesFailure :: Constr
$tUpivotesPredicateFailure :: DataType
gmapMo :: (forall d. Data d =&gt; d -&gt; m d)
-&gt; UpivotesPredicateFailure -&gt; m UpivotesPredicateFailure
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; UpivotesPredicateFailure -&gt; m UpivotesPredicateFailure
gmapMp :: (forall d. Data d =&gt; d -&gt; m d)
-&gt; UpivotesPredicateFailure -&gt; m UpivotesPredicateFailure
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; UpivotesPredicateFailure -&gt; m UpivotesPredicateFailure
gmapM :: (forall d. Data d =&gt; d -&gt; m d)
-&gt; UpivotesPredicateFailure -&gt; m UpivotesPredicateFailure
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; UpivotesPredicateFailure -&gt; m UpivotesPredicateFailure
gmapQi :: Int
-&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UpivotesPredicateFailure -&gt; u
$cgmapQi :: forall u.
Int
-&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UpivotesPredicateFailure -&gt; u
gmapQ :: (forall d. Data d =&gt; d -&gt; u) -&gt; UpivotesPredicateFailure -&gt; [u]
$cgmapQ :: forall u.
(forall d. Data d =&gt; d -&gt; u) -&gt; UpivotesPredicateFailure -&gt; [u]
gmapQr :: (r' -&gt; r -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; UpivotesPredicateFailure
-&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; UpivotesPredicateFailure
-&gt; r
gmapQl :: (r -&gt; r' -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; UpivotesPredicateFailure
-&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; UpivotesPredicateFailure
-&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b)
-&gt; UpivotesPredicateFailure -&gt; UpivotesPredicateFailure
$cgmapT :: (forall b. Data b =&gt; b -&gt; b)
-&gt; UpivotesPredicateFailure -&gt; UpivotesPredicateFailure
dataCast2 :: (forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c UpivotesPredicateFailure)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c UpivotesPredicateFailure)
dataCast1 :: (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UpivotesPredicateFailure)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UpivotesPredicateFailure)
dataTypeOf :: UpivotesPredicateFailure -&gt; DataType
$cdataTypeOf :: UpivotesPredicateFailure -&gt; DataType
toConstr :: UpivotesPredicateFailure -&gt; Constr
$ctoConstr :: UpivotesPredicateFailure -&gt; Constr
gunfold :: (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UpivotesPredicateFailure
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UpivotesPredicateFailure
gfoldl :: (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; UpivotesPredicateFailure
-&gt; c UpivotesPredicateFailure
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; UpivotesPredicateFailure
-&gt; c UpivotesPredicateFailure
$cp1Data :: Typeable UpivotesPredicateFailure
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x.
 UpivotesPredicateFailure -&gt; Rep UpivotesPredicateFailure x)
-&gt; (forall x.
    Rep UpivotesPredicateFailure x -&gt; UpivotesPredicateFailure)
-&gt; Generic UpivotesPredicateFailure
forall x.
Rep UpivotesPredicateFailure x -&gt; UpivotesPredicateFailure
forall x.
UpivotesPredicateFailure -&gt; Rep UpivotesPredicateFailure x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x.
Rep UpivotesPredicateFailure x -&gt; UpivotesPredicateFailure
$cfrom :: forall x.
UpivotesPredicateFailure -&gt; Rep UpivotesPredicateFailure x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555095"><span id="local-6989586621679555097"><span id="local-6989586621679555099"><span class="annot"><span class="annottext">Context -&gt; UpivotesPredicateFailure -&gt; IO (Maybe ThunkInfo)
Proxy UpivotesPredicateFailure -&gt; String
(Context -&gt; UpivotesPredicateFailure -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; UpivotesPredicateFailure -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy UpivotesPredicateFailure -&gt; String)
-&gt; NoThunks UpivotesPredicateFailure
forall a.
(Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy a -&gt; String)
-&gt; NoThunks a
showTypeOf :: Proxy UpivotesPredicateFailure -&gt; String
$cshowTypeOf :: Proxy UpivotesPredicateFailure -&gt; String
wNoThunks :: Context -&gt; UpivotesPredicateFailure -&gt; IO (Maybe ThunkInfo)
$cwNoThunks :: Context -&gt; UpivotesPredicateFailure -&gt; IO (Maybe ThunkInfo)
noThunks :: Context -&gt; UpivotesPredicateFailure -&gt; IO (Maybe ThunkInfo)
$cnoThunks :: Context -&gt; UpivotesPredicateFailure -&gt; IO (Maybe ThunkInfo)
</span><a href="#local-6989586621679555095"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">NoThunks</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-1399"></span><span>
</span><span id="line-1400"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679555085"><span id="local-6989586621679555087"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">STS</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIVOTES"><span class="hs-identifier hs-type">UPIVOTES</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1401"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Environment"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">Environment</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIVOTES"><span class="hs-identifier hs-type">UPIVOTES</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIEnv"><span class="hs-identifier hs-type">UPIEnv</span></a></span><span>
</span><span id="line-1402"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="State"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">State</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIVOTES"><span class="hs-identifier hs-type">UPIVOTES</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIState"><span class="hs-identifier hs-type">UPIState</span></a></span><span>
</span><span id="line-1403"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Signal"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">Signal</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIVOTES"><span class="hs-identifier hs-type">UPIVOTES</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#Vote"><span class="hs-identifier hs-type">Vote</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1404"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="PredicateFailure"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">PredicateFailure</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIVOTES"><span class="hs-identifier hs-type">UPIVOTES</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpivotesPredicateFailure"><span class="hs-identifier hs-type">UpivotesPredicateFailure</span></a></span><span>
</span><span id="line-1405"></span><span>
</span><span id="line-1406"></span><span>  </span><span id="local-6989586621679555084"><span class="annot"><span class="annottext">initialRules :: [InitialRule UPIVOTES]
</span><a href="#local-6989586621679555084"><span class="hs-identifier hs-var hs-var hs-var hs-var">initialRules</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">UPIState -&gt; F (Clause UPIVOTES 'Initial) UPIState
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(UPIState -&gt; F (Clause UPIVOTES 'Initial) UPIState)
-&gt; UPIState -&gt; F (Clause UPIVOTES 'Initial) UPIState
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="annot"><span class="annottext">UPIState
</span><a href="Byron.Spec.Ledger.Update.html#emptyUPIState"><span class="hs-identifier hs-var">emptyUPIState</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1407"></span><span>
</span><span id="line-1408"></span><span>  </span><span id="local-6989586621679555083"><span class="annot"><span class="annottext">transitionRules :: [TransitionRule UPIVOTES]
</span><a href="#local-6989586621679555083"><span class="hs-identifier hs-var hs-var hs-var hs-var">transitionRules</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1409"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1410"></span><span>        </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">TRC</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679555082"><span class="annot"><span class="annottext">Environment UPIVOTES
</span><a href="#local-6989586621679555082"><span class="hs-identifier hs-var">env</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555081"><span class="annot"><span class="annottext">State UPIVOTES
</span><a href="#local-6989586621679555081"><span class="hs-identifier hs-var">us</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555080"><span class="annot"><span class="annottext">Signal UPIVOTES
</span><a href="#local-6989586621679555080"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">F (Clause UPIVOTES 'Transition) (TRC UPIVOTES)
forall sts (rtype :: RuleType).
Rule sts rtype (RuleContext rtype sts)
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">judgmentContext</span></a></span><span>
</span><span id="line-1411"></span><span>        </span><span id="local-6989586621679555079"><span class="annot"><span class="annottext">UPIState
</span><a href="#local-6989586621679555079"><span class="hs-identifier hs-var">us'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall sub super (rtype :: RuleType).
Embed sub super =&gt;
RuleContext rtype sub -&gt; Rule super rtype (State sub)
forall super (rtype :: RuleType).
Embed APPLYVOTES super =&gt;
RuleContext rtype APPLYVOTES -&gt; Rule super rtype (State APPLYVOTES)
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">trans</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#APPLYVOTES"><span class="hs-identifier hs-type">APPLYVOTES</span></a></span><span>  </span><span class="annot"><span class="annottext">(RuleContext 'Transition APPLYVOTES
 -&gt; Rule UPIVOTES 'Transition (State APPLYVOTES))
-&gt; RuleContext 'Transition APPLYVOTES
-&gt; Rule UPIVOTES 'Transition (State APPLYVOTES)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Environment APPLYVOTES, State APPLYVOTES, Signal APPLYVOTES)
-&gt; TRC APPLYVOTES
forall sts. (Environment sts, State sts, Signal sts) -&gt; TRC sts
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">TRC</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Environment UPIVOTES
Environment APPLYVOTES
</span><a href="#local-6989586621679555082"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">State UPIVOTES
State APPLYVOTES
</span><a href="#local-6989586621679555081"><span class="hs-identifier hs-var">us</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Signal UPIVOTES
Signal APPLYVOTES
</span><a href="#local-6989586621679555080"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1412"></span><span>        </span><span class="hs-comment">-- Check which proposals are confirmed and stable, and update the</span><span>
</span><span id="line-1413"></span><span>        </span><span class="hs-comment">-- application versions map.</span><span>
</span><span id="line-1414"></span><span>        </span><span class="hs-keyword">let</span><span>
</span><span id="line-1415"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621679555078"><span class="annot"><span class="annottext">Slot
</span><a href="#local-6989586621679555078"><span class="hs-identifier hs-var">sn</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555077"><span class="annot"><span class="annottext">Bimap VKeyGenesis VKey
</span><a href="#local-6989586621679555077"><span class="hs-identifier hs-var">_dms</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555076"><span class="annot"><span class="annottext">BlockCount
</span><a href="#local-6989586621679555076"><span class="hs-identifier hs-var">_k</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555075"><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679555075"><span class="hs-identifier hs-var">_ngk</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UPIEnv
Environment UPIVOTES
</span><a href="#local-6989586621679555082"><span class="hs-identifier hs-var">env</span></a></span><span>
</span><span id="line-1416"></span><span>          </span><span class="hs-special">(</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679555074"><span class="annot"><span class="annottext">ProtVer
</span><a href="#local-6989586621679555074"><span class="hs-identifier hs-var">pv</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555073"><span class="annot"><span class="annottext">PParams
</span><a href="#local-6989586621679555073"><span class="hs-identifier hs-var">pps</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1417"></span><span>            </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555072"><span class="annot"><span class="annottext">[(Slot, (ProtVer, PParams))]
</span><a href="#local-6989586621679555072"><span class="hs-identifier hs-var">fads</span></a></span></span><span>
</span><span id="line-1418"></span><span>            </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555071"><span class="annot"><span class="annottext">Map ApName (ApVer, Slot, Metadata)
</span><a href="#local-6989586621679555071"><span class="hs-identifier hs-var">avs</span></a></span></span><span>
</span><span id="line-1419"></span><span>            </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555070"><span class="annot"><span class="annottext">Map UpId (ProtVer, PParams)
</span><a href="#local-6989586621679555070"><span class="hs-identifier hs-var">rpus</span></a></span></span><span>
</span><span id="line-1420"></span><span>            </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555069"><span class="annot"><span class="annottext">Map UpId (ApName, ApVer, Metadata)
</span><a href="#local-6989586621679555069"><span class="hs-identifier hs-var">raus</span></a></span></span><span>
</span><span id="line-1421"></span><span>            </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555068"><span class="annot"><span class="annottext">Map UpId Slot
</span><a href="#local-6989586621679555068"><span class="hs-identifier hs-var">cps</span></a></span></span><span>
</span><span id="line-1422"></span><span>            </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555067"><span class="annot"><span class="annottext">Set (UpId, VKeyGenesis)
</span><a href="#local-6989586621679555067"><span class="hs-identifier hs-var">vts</span></a></span></span><span>
</span><span id="line-1423"></span><span>            </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555066"><span class="annot"><span class="annottext">Set (ProtVer, VKeyGenesis)
</span><a href="#local-6989586621679555066"><span class="hs-identifier hs-var">bvs</span></a></span></span><span>
</span><span id="line-1424"></span><span>            </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555065"><span class="annot"><span class="annottext">Map UpId Slot
</span><a href="#local-6989586621679555065"><span class="hs-identifier hs-var">pws</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UPIState
</span><a href="#local-6989586621679555079"><span class="hs-identifier hs-var">us'</span></a></span><span>
</span><span id="line-1425"></span><span>          </span><span class="hs-comment">-- Ideally we could bump application versions for those proposals that</span><span>
</span><span id="line-1426"></span><span>          </span><span class="hs-comment">-- are stable, i.e. in:</span><span>
</span><span id="line-1427"></span><span>          </span><span class="hs-comment">--</span><span>
</span><span id="line-1428"></span><span>          </span><span class="hs-comment">-- &gt; dom (cps &#9655;&lt;= sn -. 2 *. k)</span><span>
</span><span id="line-1429"></span><span>          </span><span class="hs-comment">--</span><span>
</span><span id="line-1430"></span><span>          </span><span class="hs-comment">-- However in the legacy code, application versions are adopted as</span><span>
</span><span id="line-1431"></span><span>          </span><span class="hs-comment">-- soon as they are confirmed. The mainnet chain already contains such</span><span>
</span><span id="line-1432"></span><span>          </span><span class="hs-comment">-- proposal, so we cannot improve this.</span><span>
</span><span id="line-1433"></span><span>          </span><span id="local-6989586621679555064"><span class="annot"><span class="annottext">cfmRaus :: Map UpId (ApName, ApVer, Metadata)
</span><a href="#local-6989586621679555064"><span class="hs-identifier hs-var hs-var">cfmRaus</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map UpId Slot -&gt; Set (Domain (Map UpId Slot))
forall m. (Relation m, Ord (Domain m)) =&gt; m -&gt; Set (Domain m)
</span><a href="Byron.Spec.Ledger.Core.html#dom"><span class="hs-identifier hs-var">dom</span></a></span><span> </span><span class="annot"><span class="annottext">Map UpId Slot
</span><a href="#local-6989586621679555068"><span class="hs-identifier hs-var">cps</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Set (Domain (Map UpId (ApName, ApVer, Metadata)))
-&gt; Map UpId (ApName, ApVer, Metadata)
-&gt; Map UpId (ApName, ApVer, Metadata)
forall m (f :: * -&gt; *).
(Relation m, Ord (Domain m), Foldable f) =&gt;
f (Domain m) -&gt; m -&gt; m
</span><a href="Byron.Spec.Ledger.Core.html#%25C1"><span class="hs-operator hs-var">&#9665;</span></a></span><span> </span><span class="annot"><span class="annottext">Map UpId (ApName, ApVer, Metadata)
</span><a href="#local-6989586621679555069"><span class="hs-identifier hs-var">raus</span></a></span><span>
</span><span id="line-1434"></span><span>          </span><span id="local-6989586621679555063"><span class="annot"><span class="annottext">avsNew :: [(ApName, (ApVer, Slot, Metadata))]
</span><a href="#local-6989586621679555063"><span class="hs-identifier hs-var hs-var">avsNew</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ApName
</span><a href="#local-6989586621679555062"><span class="hs-identifier hs-var">an</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ApVer
</span><a href="#local-6989586621679555061"><span class="hs-identifier hs-var">av</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Slot
</span><a href="#local-6989586621679555078"><span class="hs-identifier hs-var">sn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Metadata
</span><a href="#local-6989586621679555060"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1435"></span><span>                   </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679555062"><span class="annot"><span class="annottext">ApName
</span><a href="#local-6989586621679555062"><span class="hs-identifier hs-var">an</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555061"><span class="annot"><span class="annottext">ApVer
</span><a href="#local-6989586621679555061"><span class="hs-identifier hs-var">av</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555060"><span class="annot"><span class="annottext">Metadata
</span><a href="#local-6989586621679555060"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Map UpId (ApName, ApVer, Metadata) -&gt; [(ApName, ApVer, Metadata)]
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><span class="hs-identifier hs-var">toList</span></span><span> </span><span class="annot"><span class="annottext">Map UpId (ApName, ApVer, Metadata)
</span><a href="#local-6989586621679555064"><span class="hs-identifier hs-var">cfmRaus</span></a></span><span>
</span><span id="line-1436"></span><span>                   </span><span class="hs-special">]</span><span>
</span><span id="line-1437"></span><span>        </span><span class="annot"><span class="annottext">UPIState -&gt; F (Clause UPIVOTES 'Transition) UPIState
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(UPIState -&gt; F (Clause UPIVOTES 'Transition) UPIState)
-&gt; UPIState -&gt; F (Clause UPIVOTES 'Transition) UPIState
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ProtVer
</span><a href="#local-6989586621679555074"><span class="hs-identifier hs-var">pv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PParams
</span><a href="#local-6989586621679555073"><span class="hs-identifier hs-var">pps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1438"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[(Slot, (ProtVer, PParams))]
</span><a href="#local-6989586621679555072"><span class="hs-identifier hs-var">fads</span></a></span><span>
</span><span id="line-1439"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map ApName (ApVer, Slot, Metadata)
</span><a href="#local-6989586621679555071"><span class="hs-identifier hs-var">avs</span></a></span><span> </span><span class="annot"><span class="annottext">Map ApName (ApVer, Slot, Metadata)
-&gt; [(Domain (Map ApName (ApVer, Slot, Metadata)),
     Range (Map ApName (ApVer, Slot, Metadata)))]
-&gt; Map ApName (ApVer, Slot, Metadata)
forall m (f :: * -&gt; *).
(Relation m, Ord (Domain m), Ord (Range m), Foldable f) =&gt;
m -&gt; f (Domain m, Range m) -&gt; m
</span><a href="Byron.Spec.Ledger.Core.html#%2A03"><span class="hs-operator hs-var">&#10755;</span></a></span><span> </span><span class="annot"><span class="annottext">[(Domain (Map ApName (ApVer, Slot, Metadata)),
  Range (Map ApName (ApVer, Slot, Metadata)))]
[(ApName, (ApVer, Slot, Metadata))]
</span><a href="#local-6989586621679555063"><span class="hs-identifier hs-var">avsNew</span></a></span><span>
</span><span id="line-1440"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map UpId (ProtVer, PParams)
</span><a href="#local-6989586621679555070"><span class="hs-identifier hs-var">rpus</span></a></span><span>
</span><span id="line-1441"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map UpId Slot -&gt; Set (Domain (Map UpId Slot))
forall m. (Relation m, Ord (Domain m)) =&gt; m -&gt; Set (Domain m)
</span><a href="Byron.Spec.Ledger.Core.html#dom"><span class="hs-identifier hs-var">dom</span></a></span><span> </span><span class="annot"><span class="annottext">Map UpId Slot
</span><a href="#local-6989586621679555068"><span class="hs-identifier hs-var">cps</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Set (Domain (Map UpId (ApName, ApVer, Metadata)))
-&gt; Map UpId (ApName, ApVer, Metadata)
-&gt; Map UpId (ApName, ApVer, Metadata)
forall m (f :: * -&gt; *).
(Relation m, Ord (Domain m), Foldable f) =&gt;
f (Domain m) -&gt; m -&gt; m
</span><a href="Byron.Spec.Ledger.Core.html#%22EA"><span class="hs-operator hs-var">&#8938;</span></a></span><span> </span><span class="annot"><span class="annottext">Map UpId (ApName, ApVer, Metadata)
</span><a href="#local-6989586621679555069"><span class="hs-identifier hs-var">raus</span></a></span><span>
</span><span id="line-1442"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map UpId Slot
</span><a href="#local-6989586621679555068"><span class="hs-identifier hs-var">cps</span></a></span><span>
</span><span id="line-1443"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Set (UpId, VKeyGenesis)
</span><a href="#local-6989586621679555067"><span class="hs-identifier hs-var">vts</span></a></span><span>
</span><span id="line-1444"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Set (ProtVer, VKeyGenesis)
</span><a href="#local-6989586621679555066"><span class="hs-identifier hs-var">bvs</span></a></span><span>
</span><span id="line-1445"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map UpId Slot
</span><a href="#local-6989586621679555065"><span class="hs-identifier hs-var">pws</span></a></span><span>
</span><span id="line-1446"></span><span>                </span><span class="hs-special">)</span><span>
</span><span id="line-1447"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-1448"></span><span>
</span><span id="line-1449"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">Embed</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#APPLYVOTES"><span class="hs-identifier hs-type">APPLYVOTES</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIVOTES"><span class="hs-identifier hs-type">UPIVOTES</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1450"></span><span>  </span><span id="local-6989586621679555056"><span class="annot"><span class="annottext">wrapFailed :: PredicateFailure APPLYVOTES -&gt; PredicateFailure UPIVOTES
</span><a href="#local-6989586621679555056"><span class="hs-identifier hs-var hs-var hs-var hs-var">wrapFailed</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PredicateFailure APPLYVOTES -&gt; PredicateFailure UPIVOTES
PredicateFailure APPLYVOTES -&gt; UpivotesPredicateFailure
</span><a href="Byron.Spec.Ledger.Update.html#ApplyVotesFailure"><span class="hs-identifier hs-var">ApplyVotesFailure</span></a></span><span>
</span><span id="line-1451"></span><span>
</span><span id="line-1452"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679555043"><span id="local-6989586621679555045"><span id="local-6989586621679555047"><span id="local-6989586621679555049"><span id="local-6989586621679555053"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-test-0.1.0.0/noopt/doc/html/small-steps-test/src"><span class="hs-identifier hs-type">HasTrace</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIVOTES"><span class="hs-identifier hs-type">UPIVOTES</span></a></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1453"></span><span>
</span><span id="line-1454"></span><span>  </span><span id="local-6989586621679555042"><span class="annot"><span class="annottext">envGen :: Word64 -&gt; Gen (Environment UPIVOTES)
</span><a href="#local-6989586621679555042"><span class="hs-identifier hs-var hs-var hs-var hs-var">envGen</span></a></span></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Gen UPIEnv
Gen (Environment UPIVOTES)
</span><a href="Byron.Spec.Ledger.Update.html#upiEnvGen"><span class="hs-identifier hs-var">upiEnvGen</span></a></span><span>
</span><span id="line-1455"></span><span>
</span><span id="line-1456"></span><span>  </span><span id="local-6989586621679555041"><span class="annot"><span class="annottext">sigGen :: SignalGenerator UPIVOTES
</span><a href="#local-6989586621679555041"><span class="hs-identifier hs-var hs-var hs-var hs-var">sigGen</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679555040"><span class="annot"><a href="#local-6989586621679555040"><span class="hs-identifier hs-var">_slot</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555039"><span class="annot"><a href="#local-6989586621679555039"><span class="hs-identifier hs-var">dms</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555038"><span class="annot"><a href="#local-6989586621679555038"><span class="hs-identifier hs-var">_k</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555037"><span class="annot"><a href="#local-6989586621679555037"><span class="hs-identifier hs-var">_ngk</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621679555036"><span class="annot"><a href="#local-6989586621679555036"><span class="hs-identifier hs-var">_pv</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555035"><span class="annot"><a href="#local-6989586621679555035"><span class="hs-identifier hs-var">_pps</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555034"><span class="annot"><a href="#local-6989586621679555034"><span class="hs-identifier hs-var">_fads</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555033"><span class="annot"><a href="#local-6989586621679555033"><span class="hs-identifier hs-var">_avs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555032"><span class="annot"><a href="#local-6989586621679555032"><span class="hs-identifier hs-var">rpus</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555031"><span class="annot"><a href="#local-6989586621679555031"><span class="hs-identifier hs-var">_raus</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555030"><span class="annot"><a href="#local-6989586621679555030"><span class="hs-identifier hs-var">_cps</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555029"><span class="annot"><a href="#local-6989586621679555029"><span class="hs-identifier hs-var">vts</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555028"><span class="annot"><a href="#local-6989586621679555028"><span class="hs-identifier hs-var">_bvs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555027"><span class="annot"><a href="#local-6989586621679555027"><span class="hs-identifier hs-var">_pws</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1457"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(UpId, VKeyGenesis) -&gt; Vote
</span><a href="#local-6989586621679555026"><span class="hs-identifier hs-var">mkVoteForDelegate</span></a></span><span> </span><span class="annot"><span class="annottext">((UpId, VKeyGenesis) -&gt; Vote) -&gt; [(UpId, VKeyGenesis)] -&gt; [Vote]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([(UpId, VKeyGenesis)] -&gt; [Vote])
-&gt; ([(UpId, [VKeyGenesis])] -&gt; [(UpId, VKeyGenesis)])
-&gt; [(UpId, [VKeyGenesis])]
-&gt; [Vote]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">((UpId, [VKeyGenesis]) -&gt; [(UpId, VKeyGenesis)])
-&gt; [(UpId, [VKeyGenesis])] -&gt; [(UpId, VKeyGenesis)]
forall (t :: * -&gt; *) a b. Foldable t =&gt; (a -&gt; [b]) -&gt; t a -&gt; [b]
</span><span class="hs-identifier hs-var">concatMap</span></span><span> </span><span class="annot"><span class="annottext">(UpId, [VKeyGenesis]) -&gt; [(UpId, VKeyGenesis)]
forall a b. (a, [b]) -&gt; [(a, b)]
</span><a href="#local-6989586621679555024"><span class="hs-identifier hs-var">replicateFst</span></a></span><span>
</span><span id="line-1458"></span><span>      </span><span class="annot"><span class="annottext">([(UpId, [VKeyGenesis])] -&gt; [Vote])
-&gt; GenT Identity [(UpId, [VKeyGenesis])] -&gt; GenT Identity [Vote]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[(UpId, [VKeyGenesis])] -&gt; GenT Identity [(UpId, [VKeyGenesis])]
</span><a href="#local-6989586621679555023"><span class="hs-identifier hs-var">genVotesOnMostVotedProposals</span></a></span><span> </span><span class="annot"><span class="annottext">[(UpId, [VKeyGenesis])]
</span><a href="#local-6989586621679555022"><span class="hs-identifier hs-var">completedVotes</span></a></span><span>
</span><span id="line-1459"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-1460"></span><span>        </span><span class="hs-comment">-- Votes needed for confirmation, per proposal ID.</span><span>
</span><span id="line-1461"></span><span>        </span><span class="annot"><a href="#local-6989586621679555022"><span class="hs-identifier hs-type">completedVotes</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpId"><span class="hs-identifier hs-type">UpId</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">Core.VKeyGenesis</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1462"></span><span>        </span><span id="local-6989586621679555022"><span class="annot"><span class="annottext">completedVotes :: [(UpId, [VKeyGenesis])]
</span><a href="#local-6989586621679555022"><span class="hs-identifier hs-var hs-var">completedVotes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set VKeyGenesis
-&gt; Map UpId (Set VKeyGenesis) -&gt; Map UpId (Set VKeyGenesis)
</span><a href="#local-6989586621679555021"><span class="hs-identifier hs-var">completeVotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bimap VKeyGenesis VKey -&gt; Set (Domain (Bimap VKeyGenesis VKey))
forall m. (Relation m, Ord (Domain m)) =&gt; m -&gt; Set (Domain m)
</span><a href="Byron.Spec.Ledger.Core.html#dom"><span class="hs-identifier hs-var">dom</span></a></span><span> </span><span class="annot"><span class="annottext">Bimap VKeyGenesis VKey
</span><a href="#local-6989586621679555039"><span class="hs-identifier hs-var">dms</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1463"></span><span>                                       </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Set (UpId, VKeyGenesis) -&gt; Map UpId (Set VKeyGenesis)
</span><a href="#local-6989586621679555020"><span class="hs-identifier hs-var">groupVotesPerProposalId</span></a></span><span> </span><span class="annot"><span class="annottext">Set (UpId, VKeyGenesis)
</span><a href="#local-6989586621679555029"><span class="hs-identifier hs-var">vts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1464"></span><span>                       </span><span class="annot"><span class="annottext">Map UpId (Set VKeyGenesis)
-&gt; (Map UpId (Set VKeyGenesis) -&gt; Map UpId [VKeyGenesis])
-&gt; Map UpId [VKeyGenesis]
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(Set VKeyGenesis -&gt; [VKeyGenesis])
-&gt; Map UpId (Set VKeyGenesis) -&gt; Map UpId [VKeyGenesis]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Set VKeyGenesis -&gt; [VKeyGenesis]
forall a. Set a -&gt; [a]
</span><span class="hs-identifier hs-var">Set.toList</span></span><span>
</span><span id="line-1465"></span><span>                       </span><span class="annot"><span class="annottext">Map UpId [VKeyGenesis]
-&gt; (Map UpId [VKeyGenesis] -&gt; [(UpId, [VKeyGenesis])])
-&gt; [(UpId, [VKeyGenesis])]
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">Map UpId [VKeyGenesis] -&gt; [(UpId, [VKeyGenesis])]
forall k a. Map k a -&gt; [(k, a)]
</span><span class="hs-identifier hs-var">Map.toList</span></span><span>
</span><span id="line-1466"></span><span>
</span><span id="line-1467"></span><span>        </span><span class="hs-comment">-- Make a vote for a delegate of a genesis key.</span><span>
</span><span id="line-1468"></span><span>        </span><span class="annot"><a href="#local-6989586621679555026"><span class="hs-identifier hs-type">mkVoteForDelegate</span></a></span><span>
</span><span id="line-1469"></span><span>          </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpId"><span class="hs-identifier hs-type">UpId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">Core.VKeyGenesis</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1470"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#Vote"><span class="hs-identifier hs-type">Vote</span></a></span><span>
</span><span id="line-1471"></span><span>        </span><span id="local-6989586621679555026"><span class="annot"><span class="annottext">mkVoteForDelegate :: (UpId, VKeyGenesis) -&gt; Vote
</span><a href="#local-6989586621679555026"><span class="hs-identifier hs-var hs-var">mkVoteForDelegate</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679555019"><span class="annot"><span class="annottext">UpId
</span><a href="#local-6989586621679555019"><span class="hs-identifier hs-var">proposalId</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555018"><span class="annot"><span class="annottext">VKeyGenesis
</span><a href="#local-6989586621679555018"><span class="hs-identifier hs-var">vkg</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1472"></span><span>          </span><span class="annot"><span class="annottext">VKey -&gt; UpId -&gt; Sig UpId -&gt; Vote
</span><a href="Byron.Spec.Ledger.Update.html#Vote"><span class="hs-identifier hs-var">Vote</span></a></span><span> </span><span class="annot"><span class="annottext">VKey
</span><a href="#local-6989586621679555017"><span class="hs-identifier hs-var">vk</span></a></span><span> </span><span class="annot"><span class="annottext">UpId
</span><a href="#local-6989586621679555019"><span class="hs-identifier hs-var">proposalId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SKey -&gt; UpId -&gt; Sig UpId
forall a. SKey -&gt; a -&gt; Sig a
</span><a href="Byron.Spec.Ledger.Core.html#sign"><span class="hs-identifier hs-var">Core.sign</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VKey -&gt; SKey
</span><a href="Byron.Spec.Ledger.Core.Omniscient.html#skey"><span class="hs-identifier hs-var">skey</span></a></span><span> </span><span class="annot"><span class="annottext">VKey
</span><a href="#local-6989586621679555017"><span class="hs-identifier hs-var">vk</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">UpId
</span><a href="#local-6989586621679555019"><span class="hs-identifier hs-var">proposalId</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1473"></span><span>          </span><span class="hs-keyword">where</span><span>
</span><span id="line-1474"></span><span>            </span><span id="local-6989586621679555017"><span class="annot"><span class="annottext">vk :: VKey
</span><a href="#local-6989586621679555017"><span class="hs-identifier hs-var hs-var">vk</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">VKey -&gt; Maybe VKey -&gt; VKey
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="annot"><span class="annottext">VKey
forall a. a
</span><a href="#local-6989586621679555016"><span class="hs-identifier hs-var">err</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe VKey -&gt; VKey) -&gt; Maybe VKey -&gt; VKey
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">VKeyGenesis -&gt; Bimap VKeyGenesis VKey -&gt; Maybe VKey
forall a b (m :: * -&gt; *).
(Ord a, Ord b, MonadThrow m) =&gt;
a -&gt; Bimap a b -&gt; m b
</span><span class="hs-identifier hs-var">Bimap.lookup</span></span><span> </span><span class="annot"><span class="annottext">VKeyGenesis
</span><a href="#local-6989586621679555018"><span class="hs-identifier hs-var">vkg</span></a></span><span> </span><span class="annot"><span class="annottext">Bimap VKeyGenesis VKey
</span><a href="#local-6989586621679555039"><span class="hs-identifier hs-var">dms</span></a></span><span>
</span><span id="line-1475"></span><span>              </span><span class="hs-keyword">where</span><span>
</span><span id="line-1476"></span><span>                </span><span id="local-6989586621679555016"><span class="annot"><span class="annottext">err :: a
</span><a href="#local-6989586621679555016"><span class="hs-identifier hs-var hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; a
forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; a) -&gt; String -&gt; a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>  </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Byron.Spec.Ledger.Update.mkVoteForDelegate: &quot;</span></span><span>
</span><span id="line-1477"></span><span>                            </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;the genesis key was not found in the delegation map, &quot;</span></span><span>
</span><span id="line-1478"></span><span>                            </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;but it should be since we used `dms` to get the keys&quot;</span></span><span>
</span><span id="line-1479"></span><span>                            </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;that can vote (and so they should have a pre-image in `dms`).&quot;</span></span><span>
</span><span id="line-1480"></span><span>
</span><span id="line-1481"></span><span>        </span><span class="hs-comment">-- Group the votes issuing proposal id, taking into account the</span><span>
</span><span id="line-1482"></span><span>        </span><span class="hs-comment">-- proposals with no votes.</span><span>
</span><span id="line-1483"></span><span>        </span><span class="annot"><a href="#local-6989586621679555020"><span class="hs-identifier hs-type">groupVotesPerProposalId</span></a></span><span>
</span><span id="line-1484"></span><span>          </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpId"><span class="hs-identifier hs-type">UpId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">Core.VKeyGenesis</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1485"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpId"><span class="hs-identifier hs-type">UpId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">Core.VKeyGenesis</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1486"></span><span>        </span><span id="local-6989586621679555020"><span class="annot"><span class="annottext">groupVotesPerProposalId :: Set (UpId, VKeyGenesis) -&gt; Map UpId (Set VKeyGenesis)
</span><a href="#local-6989586621679555020"><span class="hs-identifier hs-var hs-var">groupVotesPerProposalId</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1487"></span><span>          </span><span class="annot"><span class="annottext">(Map UpId (Set VKeyGenesis)
 -&gt; (UpId, VKeyGenesis) -&gt; Map UpId (Set VKeyGenesis))
-&gt; Map UpId (Set VKeyGenesis)
-&gt; Set (UpId, VKeyGenesis)
-&gt; Map UpId (Set VKeyGenesis)
forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldl'</span></span><span> </span><span class="annot"><span class="annottext">Map UpId (Set VKeyGenesis)
-&gt; (UpId, VKeyGenesis) -&gt; Map UpId (Set VKeyGenesis)
</span><a href="#local-6989586621679555014"><span class="hs-identifier hs-var">addVote</span></a></span><span> </span><span class="annot"><span class="annottext">Map UpId (Set VKeyGenesis)
</span><a href="#local-6989586621679555013"><span class="hs-identifier hs-var">proposalIdsWithNoVotes</span></a></span><span>
</span><span id="line-1488"></span><span>          </span><span class="hs-keyword">where</span><span>
</span><span id="line-1489"></span><span>            </span><span class="annot"><a href="#local-6989586621679555013"><span class="hs-identifier hs-type">proposalIdsWithNoVotes</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpId"><span class="hs-identifier hs-type">UpId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">Core.VKeyGenesis</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1490"></span><span>            </span><span id="local-6989586621679555013"><span class="annot"><span class="annottext">proposalIdsWithNoVotes :: Map UpId (Set VKeyGenesis)
</span><a href="#local-6989586621679555013"><span class="hs-identifier hs-var hs-var">proposalIdsWithNoVotes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(UpId, Set VKeyGenesis)] -&gt; Map UpId (Set VKeyGenesis)
forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.fromList</span></span><span> </span><span class="annot"><span class="annottext">([(UpId, Set VKeyGenesis)] -&gt; Map UpId (Set VKeyGenesis))
-&gt; [(UpId, Set VKeyGenesis)] -&gt; Map UpId (Set VKeyGenesis)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-special">,</span></span><span> </span><span class="annot"><span class="annottext">Set VKeyGenesis
forall a. Set a
</span><span class="hs-identifier hs-var">Set.empty</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(UpId -&gt; (UpId, Set VKeyGenesis))
-&gt; [UpId] -&gt; [(UpId, Set VKeyGenesis)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Set UpId -&gt; [UpId]
forall a. Set a -&gt; [a]
</span><span class="hs-identifier hs-var">Set.toList</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map UpId (ProtVer, PParams)
-&gt; Set (Domain (Map UpId (ProtVer, PParams)))
forall m. (Relation m, Ord (Domain m)) =&gt; m -&gt; Set (Domain m)
</span><a href="Byron.Spec.Ledger.Core.html#dom"><span class="hs-identifier hs-var">dom</span></a></span><span> </span><span class="annot"><span class="annottext">Map UpId (ProtVer, PParams)
</span><a href="#local-6989586621679555032"><span class="hs-identifier hs-var">rpus</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1491"></span><span>
</span><span id="line-1492"></span><span>            </span><span class="annot"><a href="#local-6989586621679555014"><span class="hs-identifier hs-type">addVote</span></a></span><span>
</span><span id="line-1493"></span><span>              </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpId"><span class="hs-identifier hs-type">UpId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">Core.VKeyGenesis</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1494"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpId"><span class="hs-identifier hs-type">UpId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">Core.VKeyGenesis</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1495"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpId"><span class="hs-identifier hs-type">UpId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">Core.VKeyGenesis</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1496"></span><span>            </span><span id="local-6989586621679555014"><span class="annot"><span class="annottext">addVote :: Map UpId (Set VKeyGenesis)
-&gt; (UpId, VKeyGenesis) -&gt; Map UpId (Set VKeyGenesis)
</span><a href="#local-6989586621679555014"><span class="hs-identifier hs-var hs-var">addVote</span></a></span></span><span> </span><span id="local-6989586621679555011"><span class="annot"><span class="annottext">Map UpId (Set VKeyGenesis)
</span><a href="#local-6989586621679555011"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679555010"><span class="annot"><span class="annottext">UpId
</span><a href="#local-6989586621679555010"><span class="hs-identifier hs-var">proposalId</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555009"><span class="annot"><span class="annottext">VKeyGenesis
</span><a href="#local-6989586621679555009"><span class="hs-identifier hs-var">genesisKey</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1497"></span><span>              </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">UpId -&gt; Map UpId (Set VKeyGenesis) -&gt; Maybe (Set VKeyGenesis)
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="annot"><span class="annottext">UpId
</span><a href="#local-6989586621679555010"><span class="hs-identifier hs-var">proposalId</span></a></span><span> </span><span class="annot"><span class="annottext">Map UpId (Set VKeyGenesis)
</span><a href="#local-6989586621679555011"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1498"></span><span>                </span><span class="annot"><span class="annottext">Maybe (Set VKeyGenesis)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1499"></span><span>                  </span><span class="annot"><span class="annottext">UpId
-&gt; Set VKeyGenesis
-&gt; Map UpId (Set VKeyGenesis)
-&gt; Map UpId (Set VKeyGenesis)
forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.insert</span></span><span> </span><span class="annot"><span class="annottext">UpId
</span><a href="#local-6989586621679555010"><span class="hs-identifier hs-var">proposalId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VKeyGenesis -&gt; Set VKeyGenesis
forall a. a -&gt; Set a
</span><span class="hs-identifier hs-var">Set.singleton</span></span><span> </span><span class="annot"><span class="annottext">VKeyGenesis
</span><a href="#local-6989586621679555009"><span class="hs-identifier hs-var">genesisKey</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map UpId (Set VKeyGenesis)
</span><a href="#local-6989586621679555011"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-1500"></span><span>                </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679555007"><span class="annot"><span class="annottext">Set VKeyGenesis
</span><a href="#local-6989586621679555007"><span class="hs-identifier hs-var">votesForProposalId</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1501"></span><span>                  </span><span class="annot"><span class="annottext">UpId
-&gt; Set VKeyGenesis
-&gt; Map UpId (Set VKeyGenesis)
-&gt; Map UpId (Set VKeyGenesis)
forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.insert</span></span><span> </span><span class="annot"><span class="annottext">UpId
</span><a href="#local-6989586621679555010"><span class="hs-identifier hs-var">proposalId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VKeyGenesis -&gt; Set VKeyGenesis -&gt; Set VKeyGenesis
forall a. Ord a =&gt; a -&gt; Set a -&gt; Set a
</span><span class="hs-identifier hs-var">Set.insert</span></span><span> </span><span class="annot"><span class="annottext">VKeyGenesis
</span><a href="#local-6989586621679555009"><span class="hs-identifier hs-var">genesisKey</span></a></span><span> </span><span class="annot"><span class="annottext">Set VKeyGenesis
</span><a href="#local-6989586621679555007"><span class="hs-identifier hs-var">votesForProposalId</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map UpId (Set VKeyGenesis)
</span><a href="#local-6989586621679555011"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-1502"></span><span>
</span><span id="line-1503"></span><span>        </span><span class="hs-comment">-- Add the missing votes w.r.t. a set of votes cast so far and genesis</span><span>
</span><span id="line-1504"></span><span>        </span><span class="hs-comment">-- keys that can vote.</span><span>
</span><span id="line-1505"></span><span>        </span><span class="annot"><a href="#local-6989586621679555021"><span class="hs-identifier hs-type">completeVotes</span></a></span><span>
</span><span id="line-1506"></span><span>          </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">Core.VKeyGenesis</span></a></span><span>
</span><span id="line-1507"></span><span>          </span><span class="hs-comment">-- ^ Genesis keys that can vote</span><span>
</span><span id="line-1508"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpId"><span class="hs-identifier hs-type">UpId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">Core.VKeyGenesis</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1509"></span><span>          </span><span class="hs-comment">-- ^ Votes for the registered update proposals</span><span>
</span><span id="line-1510"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpId"><span class="hs-identifier hs-type">UpId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">Core.VKeyGenesis</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1511"></span><span>        </span><span id="local-6989586621679555021"><span class="annot"><span class="annottext">completeVotes :: Set VKeyGenesis
-&gt; Map UpId (Set VKeyGenesis) -&gt; Map UpId (Set VKeyGenesis)
</span><a href="#local-6989586621679555021"><span class="hs-identifier hs-var hs-var">completeVotes</span></a></span></span><span> </span><span id="local-6989586621679555005"><span class="annot"><span class="annottext">Set VKeyGenesis
</span><a href="#local-6989586621679555005"><span class="hs-identifier hs-var">genesisKeys</span></a></span></span><span> </span><span id="local-6989586621679555004"><span class="annot"><span class="annottext">Map UpId (Set VKeyGenesis)
</span><a href="#local-6989586621679555004"><span class="hs-identifier hs-var">votes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1512"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Set VKeyGenesis
</span><a href="#local-6989586621679555005"><span class="hs-identifier hs-var">genesisKeys</span></a></span><span> </span><span class="annot"><span class="annottext">Set VKeyGenesis -&gt; Set VKeyGenesis -&gt; Set VKeyGenesis
forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Set a
</span><span class="hs-operator hs-var">\\</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Set VKeyGenesis -&gt; Set VKeyGenesis)
-&gt; Map UpId (Set VKeyGenesis) -&gt; Map UpId (Set VKeyGenesis)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Map UpId (Set VKeyGenesis)
</span><a href="#local-6989586621679555004"><span class="hs-identifier hs-var">votes</span></a></span><span>
</span><span id="line-1513"></span><span>
</span><span id="line-1514"></span><span>        </span><span class="hs-comment">-- Given a sequence of update proposals ID's and the genesis keys that need</span><span>
</span><span id="line-1515"></span><span>        </span><span class="hs-comment">-- to vote for confirmation, generate votes on the most voted proposals.</span><span>
</span><span id="line-1516"></span><span>        </span><span class="hs-comment">--</span><span>
</span><span id="line-1517"></span><span>        </span><span class="hs-comment">-- A proposal is said to be most voted if it is associated to the</span><span>
</span><span id="line-1518"></span><span>        </span><span class="hs-comment">-- minimal number of votes needed for confirmation.</span><span>
</span><span id="line-1519"></span><span>        </span><span class="hs-comment">--</span><span>
</span><span id="line-1520"></span><span>        </span><span class="hs-comment">-- This basically takes the top @n@ most voted proposals (for some arbitrary</span><span>
</span><span id="line-1521"></span><span>        </span><span class="hs-comment">-- @n@), say @[(p_0, vs_0), ..., (p_n-1, vs_(n-1))]@ and generates votes of the</span><span>
</span><span id="line-1522"></span><span>        </span><span class="hs-comment">-- form, @(p_i, vs_i_j)@, where @vs_i_j@ is an arbitrary subsequence of @vs_i@.</span><span>
</span><span id="line-1523"></span><span>        </span><span class="annot"><a href="#local-6989586621679555023"><span class="hs-identifier hs-type">genVotesOnMostVotedProposals</span></a></span><span>
</span><span id="line-1524"></span><span>          </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpId"><span class="hs-identifier hs-type">UpId</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">Core.VKeyGenesis</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1525"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Gen</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpId"><span class="hs-identifier hs-type">UpId</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">Core.VKeyGenesis</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1526"></span><span>        </span><span id="local-6989586621679555023"><span class="annot"><span class="annottext">genVotesOnMostVotedProposals :: [(UpId, [VKeyGenesis])] -&gt; GenT Identity [(UpId, [VKeyGenesis])]
</span><a href="#local-6989586621679555023"><span class="hs-identifier hs-var hs-var">genVotesOnMostVotedProposals</span></a></span></span><span> </span><span id="local-6989586621679555003"><span class="annot"><span class="annottext">[(UpId, [VKeyGenesis])]
</span><a href="#local-6989586621679555003"><span class="hs-identifier hs-var">votesNeeded</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1527"></span><span>          </span><span class="hs-comment">-- Determine on how many proposals we will vote</span><span>
</span><span id="line-1528"></span><span>          </span><span id="local-6989586621679555002"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679555002"><span class="hs-identifier hs-var">numberOfProposals</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Range Int -&gt; GenT Identity Int
forall (m :: * -&gt; *). MonadGen m =&gt; Range Int -&gt; m Int
</span><span class="hs-identifier hs-var">Gen.int</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Range Int
forall a. a -&gt; a -&gt; Range a
</span><span class="hs-identifier hs-var">Range.constant</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(UpId, [VKeyGenesis])] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[(UpId, [VKeyGenesis])]
</span><a href="#local-6989586621679555003"><span class="hs-identifier hs-var">votesNeeded</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1529"></span><span>          </span><span class="hs-keyword">let</span><span>
</span><span id="line-1530"></span><span>            </span><span class="annot"><a href="#local-6989586621679555000"><span class="hs-identifier hs-type">votes</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpId"><span class="hs-identifier hs-type">UpId</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">Core.VKeyGenesis</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1531"></span><span>            </span><span id="local-6989586621679555000"><span class="annot"><span class="annottext">votes :: [(UpId, [VKeyGenesis])]
</span><a href="#local-6989586621679555000"><span class="hs-identifier hs-var hs-var">votes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; [(UpId, [VKeyGenesis])] -&gt; [(UpId, [VKeyGenesis])]
forall a. Int -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">take</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679555002"><span class="hs-identifier hs-var">numberOfProposals</span></a></span><span> </span><span class="annot"><span class="annottext">([(UpId, [VKeyGenesis])] -&gt; [(UpId, [VKeyGenesis])])
-&gt; [(UpId, [VKeyGenesis])] -&gt; [(UpId, [VKeyGenesis])]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">((UpId, [VKeyGenesis]) -&gt; Int)
-&gt; [(UpId, [VKeyGenesis])] -&gt; [(UpId, [VKeyGenesis])]
forall b a. Ord b =&gt; (a -&gt; b) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">sortOn</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[VKeyGenesis] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span class="annot"><span class="annottext">([VKeyGenesis] -&gt; Int)
-&gt; ((UpId, [VKeyGenesis]) -&gt; [VKeyGenesis])
-&gt; (UpId, [VKeyGenesis])
-&gt; Int
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(UpId, [VKeyGenesis]) -&gt; [VKeyGenesis]
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(UpId, [VKeyGenesis])]
</span><a href="#local-6989586621679555003"><span class="hs-identifier hs-var">votesNeeded</span></a></span><span>
</span><span id="line-1532"></span><span>          </span><span class="annot"><span class="annottext">[UpId] -&gt; [[VKeyGenesis]] -&gt; [(UpId, [VKeyGenesis])]
forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><span class="hs-identifier hs-var">zip</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(UpId, [VKeyGenesis]) -&gt; UpId
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">((UpId, [VKeyGenesis]) -&gt; UpId)
-&gt; [(UpId, [VKeyGenesis])] -&gt; [UpId]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[(UpId, [VKeyGenesis])]
</span><a href="#local-6989586621679555000"><span class="hs-identifier hs-var">votes</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([[VKeyGenesis]] -&gt; [(UpId, [VKeyGenesis])])
-&gt; GenT Identity [[VKeyGenesis]]
-&gt; GenT Identity [(UpId, [VKeyGenesis])]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">([VKeyGenesis] -&gt; GenT Identity [VKeyGenesis])
-&gt; [[VKeyGenesis]] -&gt; GenT Identity [[VKeyGenesis]]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">[VKeyGenesis] -&gt; GenT Identity [VKeyGenesis]
forall (m :: * -&gt; *) a. MonadGen m =&gt; [a] -&gt; m [a]
</span><span class="hs-identifier hs-var">Gen.subsequence</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(UpId, [VKeyGenesis]) -&gt; [VKeyGenesis]
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="annot"><span class="annottext">((UpId, [VKeyGenesis]) -&gt; [VKeyGenesis])
-&gt; [(UpId, [VKeyGenesis])] -&gt; [[VKeyGenesis]]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[(UpId, [VKeyGenesis])]
</span><a href="#local-6989586621679555000"><span class="hs-identifier hs-var">votes</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1533"></span><span>
</span><span id="line-1534"></span><span>        </span><span id="local-6989586621679558214"><span id="local-6989586621679558215"><span class="annot"><a href="#local-6989586621679555024"><span class="hs-identifier hs-type">replicateFst</span></a></span><span>
</span><span id="line-1535"></span><span>          </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679558215"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679558214"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1536"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679558215"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679558214"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span></span></span><span>
</span><span id="line-1537"></span><span>        </span><span id="local-6989586621679555024"><span class="annot"><span class="annottext">replicateFst :: (a, [b]) -&gt; [(a, b)]
</span><a href="#local-6989586621679555024"><span class="hs-identifier hs-var hs-var">replicateFst</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679554997"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679554997"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679554996"><span class="annot"><span class="annottext">[b]
</span><a href="#local-6989586621679554996"><span class="hs-identifier hs-var">bs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[a] -&gt; [b] -&gt; [(a, b)]
forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><span class="hs-identifier hs-var">zip</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; [a]
forall a. a -&gt; [a]
</span><span class="hs-identifier hs-var">repeat</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679554997"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[b]
</span><a href="#local-6989586621679554996"><span class="hs-identifier hs-var">bs</span></a></span><span>
</span><span id="line-1538"></span><span>
</span><span id="line-1539"></span><span>
</span><span id="line-1540"></span><span id="local-6989586621679554993"><span id="local-6989586621679554994"></span></span><span class="hs-keyword">data</span><span> </span><span id="UPIEND"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIEND"><span class="hs-identifier hs-var">UPIEND</span></a></span></span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(forall x. UPIEND -&gt; Rep UPIEND x)
-&gt; (forall x. Rep UPIEND x -&gt; UPIEND) -&gt; Generic UPIEND
forall x. Rep UPIEND x -&gt; UPIEND
forall x. UPIEND -&gt; Rep UPIEND x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep UPIEND x -&gt; UPIEND
$cfrom :: forall x. UPIEND -&gt; Rep UPIEND x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">,</span><span> </span><span id="%24tUPIEND"><span id="local-6989586621679554962"><span id="local-6989586621679554964"><span id="local-6989586621679554966"><span id="local-6989586621679554968"><span id="local-6989586621679554970"><span id="local-6989586621679554972"><span id="local-6989586621679554974"><span id="local-6989586621679554976"><span id="local-6989586621679554978"><span id="local-6989586621679554980"><span id="local-6989586621679554982"><span id="local-6989586621679554984"><span id="local-6989586621679554986"><span id="local-6989586621679554988"><span class="annot"><span class="annottext">Typeable UPIEND
DataType
Typeable UPIEND
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; UPIEND -&gt; c UPIEND)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UPIEND)
-&gt; (UPIEND -&gt; Constr)
-&gt; (UPIEND -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UPIEND))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c UPIEND))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; UPIEND -&gt; UPIEND)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPIEND -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPIEND -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; UPIEND -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UPIEND -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; UPIEND -&gt; m UPIEND)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; UPIEND -&gt; m UPIEND)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; UPIEND -&gt; m UPIEND)
-&gt; Data UPIEND
UPIEND -&gt; DataType
UPIEND -&gt; Constr
(forall b. Data b =&gt; b -&gt; b) -&gt; UPIEND -&gt; UPIEND
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; UPIEND -&gt; c UPIEND
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UPIEND
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UPIEND -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; UPIEND -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPIEND -&gt; r
forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPIEND -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UPIEND -&gt; m UPIEND
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UPIEND -&gt; m UPIEND
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UPIEND
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; UPIEND -&gt; c UPIEND
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UPIEND)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c UPIEND)
$tUPIEND :: DataType
gmapMo :: (forall d. Data d =&gt; d -&gt; m d) -&gt; UPIEND -&gt; m UPIEND
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UPIEND -&gt; m UPIEND
gmapMp :: (forall d. Data d =&gt; d -&gt; m d) -&gt; UPIEND -&gt; m UPIEND
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UPIEND -&gt; m UPIEND
gmapM :: (forall d. Data d =&gt; d -&gt; m d) -&gt; UPIEND -&gt; m UPIEND
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UPIEND -&gt; m UPIEND
gmapQi :: Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UPIEND -&gt; u
$cgmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UPIEND -&gt; u
gmapQ :: (forall d. Data d =&gt; d -&gt; u) -&gt; UPIEND -&gt; [u]
$cgmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; UPIEND -&gt; [u]
gmapQr :: (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPIEND -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPIEND -&gt; r
gmapQl :: (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPIEND -&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPIEND -&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; UPIEND -&gt; UPIEND
$cgmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; UPIEND -&gt; UPIEND
dataCast2 :: (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c UPIEND)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c UPIEND)
dataCast1 :: (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UPIEND)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UPIEND)
dataTypeOf :: UPIEND -&gt; DataType
$cdataTypeOf :: UPIEND -&gt; DataType
toConstr :: UPIEND -&gt; Constr
$ctoConstr :: UPIEND -&gt; Constr
gunfold :: (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UPIEND
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UPIEND
gfoldl :: (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; UPIEND -&gt; c UPIEND
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; UPIEND -&gt; c UPIEND
$cp1Data :: Typeable UPIEND
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">)</span><span>
</span><span id="line-1541"></span><span>
</span><span id="line-1542"></span><span id="local-6989586621679554959"><span id="local-6989586621679554960"></span></span><span class="hs-keyword">data</span><span> </span><span id="UpiendPredicateFailure"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpiendPredicateFailure"><span class="hs-identifier hs-var">UpiendPredicateFailure</span></a></span></span><span>
</span><span id="line-1543"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="UPENDFailure"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPENDFailure"><span class="hs-identifier hs-var">UPENDFailure</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">PredicateFailure</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPEND"><span class="hs-identifier hs-type">UPEND</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1544"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679554954"><span id="local-6989586621679554956"><span class="annot"><span class="annottext">UpiendPredicateFailure -&gt; UpiendPredicateFailure -&gt; Bool
(UpiendPredicateFailure -&gt; UpiendPredicateFailure -&gt; Bool)
-&gt; (UpiendPredicateFailure -&gt; UpiendPredicateFailure -&gt; Bool)
-&gt; Eq UpiendPredicateFailure
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: UpiendPredicateFailure -&gt; UpiendPredicateFailure -&gt; Bool
$c/= :: UpiendPredicateFailure -&gt; UpiendPredicateFailure -&gt; Bool
== :: UpiendPredicateFailure -&gt; UpiendPredicateFailure -&gt; Bool
$c== :: UpiendPredicateFailure -&gt; UpiendPredicateFailure -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679554948"><span id="local-6989586621679554950"><span id="local-6989586621679554952"><span class="annot"><span class="annottext">Int -&gt; UpiendPredicateFailure -&gt; ShowS
[UpiendPredicateFailure] -&gt; ShowS
UpiendPredicateFailure -&gt; String
(Int -&gt; UpiendPredicateFailure -&gt; ShowS)
-&gt; (UpiendPredicateFailure -&gt; String)
-&gt; ([UpiendPredicateFailure] -&gt; ShowS)
-&gt; Show UpiendPredicateFailure
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [UpiendPredicateFailure] -&gt; ShowS
$cshowList :: [UpiendPredicateFailure] -&gt; ShowS
show :: UpiendPredicateFailure -&gt; String
$cshow :: UpiendPredicateFailure -&gt; String
showsPrec :: Int -&gt; UpiendPredicateFailure -&gt; ShowS
$cshowsPrec :: Int -&gt; UpiendPredicateFailure -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="%24cUPENDFailure"><span id="%24tUpiendPredicateFailure"><span id="local-6989586621679554919"><span id="local-6989586621679554921"><span id="local-6989586621679554923"><span id="local-6989586621679554925"><span id="local-6989586621679554927"><span id="local-6989586621679554929"><span id="local-6989586621679554931"><span id="local-6989586621679554933"><span id="local-6989586621679554935"><span id="local-6989586621679554937"><span id="local-6989586621679554939"><span id="local-6989586621679554941"><span id="local-6989586621679554943"><span id="local-6989586621679554945"><span class="annot"><span class="annottext">Typeable UpiendPredicateFailure
DataType
Constr
Typeable UpiendPredicateFailure
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g)
    -&gt; UpiendPredicateFailure
    -&gt; c UpiendPredicateFailure)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UpiendPredicateFailure)
-&gt; (UpiendPredicateFailure -&gt; Constr)
-&gt; (UpiendPredicateFailure -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UpiendPredicateFailure))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e))
    -&gt; Maybe (c UpiendPredicateFailure))
-&gt; ((forall b. Data b =&gt; b -&gt; b)
    -&gt; UpiendPredicateFailure -&gt; UpiendPredicateFailure)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r
    -&gt; (forall d. Data d =&gt; d -&gt; r')
    -&gt; UpiendPredicateFailure
    -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r
    -&gt; (forall d. Data d =&gt; d -&gt; r')
    -&gt; UpiendPredicateFailure
    -&gt; r)
-&gt; (forall u.
    (forall d. Data d =&gt; d -&gt; u) -&gt; UpiendPredicateFailure -&gt; [u])
-&gt; (forall u.
    Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UpiendPredicateFailure -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; UpiendPredicateFailure -&gt; m UpiendPredicateFailure)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; UpiendPredicateFailure -&gt; m UpiendPredicateFailure)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; UpiendPredicateFailure -&gt; m UpiendPredicateFailure)
-&gt; Data UpiendPredicateFailure
UpiendPredicateFailure -&gt; DataType
UpiendPredicateFailure -&gt; Constr
(forall b. Data b =&gt; b -&gt; b)
-&gt; UpiendPredicateFailure -&gt; UpiendPredicateFailure
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; UpiendPredicateFailure
-&gt; c UpiendPredicateFailure
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UpiendPredicateFailure
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u.
Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UpiendPredicateFailure -&gt; u
forall u.
(forall d. Data d =&gt; d -&gt; u) -&gt; UpiendPredicateFailure -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; UpiendPredicateFailure
-&gt; r
forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; UpiendPredicateFailure
-&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; UpiendPredicateFailure -&gt; m UpiendPredicateFailure
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; UpiendPredicateFailure -&gt; m UpiendPredicateFailure
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UpiendPredicateFailure
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; UpiendPredicateFailure
-&gt; c UpiendPredicateFailure
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UpiendPredicateFailure)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c UpiendPredicateFailure)
$cUPENDFailure :: Constr
$tUpiendPredicateFailure :: DataType
gmapMo :: (forall d. Data d =&gt; d -&gt; m d)
-&gt; UpiendPredicateFailure -&gt; m UpiendPredicateFailure
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; UpiendPredicateFailure -&gt; m UpiendPredicateFailure
gmapMp :: (forall d. Data d =&gt; d -&gt; m d)
-&gt; UpiendPredicateFailure -&gt; m UpiendPredicateFailure
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; UpiendPredicateFailure -&gt; m UpiendPredicateFailure
gmapM :: (forall d. Data d =&gt; d -&gt; m d)
-&gt; UpiendPredicateFailure -&gt; m UpiendPredicateFailure
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; UpiendPredicateFailure -&gt; m UpiendPredicateFailure
gmapQi :: Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UpiendPredicateFailure -&gt; u
$cgmapQi :: forall u.
Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UpiendPredicateFailure -&gt; u
gmapQ :: (forall d. Data d =&gt; d -&gt; u) -&gt; UpiendPredicateFailure -&gt; [u]
$cgmapQ :: forall u.
(forall d. Data d =&gt; d -&gt; u) -&gt; UpiendPredicateFailure -&gt; [u]
gmapQr :: (r' -&gt; r -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; UpiendPredicateFailure
-&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; UpiendPredicateFailure
-&gt; r
gmapQl :: (r -&gt; r' -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; UpiendPredicateFailure
-&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; UpiendPredicateFailure
-&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b)
-&gt; UpiendPredicateFailure -&gt; UpiendPredicateFailure
$cgmapT :: (forall b. Data b =&gt; b -&gt; b)
-&gt; UpiendPredicateFailure -&gt; UpiendPredicateFailure
dataCast2 :: (forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c UpiendPredicateFailure)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c UpiendPredicateFailure)
dataCast1 :: (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UpiendPredicateFailure)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UpiendPredicateFailure)
dataTypeOf :: UpiendPredicateFailure -&gt; DataType
$cdataTypeOf :: UpiendPredicateFailure -&gt; DataType
toConstr :: UpiendPredicateFailure -&gt; Constr
$ctoConstr :: UpiendPredicateFailure -&gt; Constr
gunfold :: (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UpiendPredicateFailure
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UpiendPredicateFailure
gfoldl :: (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; UpiendPredicateFailure
-&gt; c UpiendPredicateFailure
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; UpiendPredicateFailure
-&gt; c UpiendPredicateFailure
$cp1Data :: Typeable UpiendPredicateFailure
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. UpiendPredicateFailure -&gt; Rep UpiendPredicateFailure x)
-&gt; (forall x.
    Rep UpiendPredicateFailure x -&gt; UpiendPredicateFailure)
-&gt; Generic UpiendPredicateFailure
forall x. Rep UpiendPredicateFailure x -&gt; UpiendPredicateFailure
forall x. UpiendPredicateFailure -&gt; Rep UpiendPredicateFailure x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep UpiendPredicateFailure x -&gt; UpiendPredicateFailure
$cfrom :: forall x. UpiendPredicateFailure -&gt; Rep UpiendPredicateFailure x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679554909"><span id="local-6989586621679554911"><span id="local-6989586621679554913"><span class="annot"><span class="annottext">Context -&gt; UpiendPredicateFailure -&gt; IO (Maybe ThunkInfo)
Proxy UpiendPredicateFailure -&gt; String
(Context -&gt; UpiendPredicateFailure -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; UpiendPredicateFailure -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy UpiendPredicateFailure -&gt; String)
-&gt; NoThunks UpiendPredicateFailure
forall a.
(Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy a -&gt; String)
-&gt; NoThunks a
showTypeOf :: Proxy UpiendPredicateFailure -&gt; String
$cshowTypeOf :: Proxy UpiendPredicateFailure -&gt; String
wNoThunks :: Context -&gt; UpiendPredicateFailure -&gt; IO (Maybe ThunkInfo)
$cwNoThunks :: Context -&gt; UpiendPredicateFailure -&gt; IO (Maybe ThunkInfo)
noThunks :: Context -&gt; UpiendPredicateFailure -&gt; IO (Maybe ThunkInfo)
$cnoThunks :: Context -&gt; UpiendPredicateFailure -&gt; IO (Maybe ThunkInfo)
</span><a href="#local-6989586621679554909"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">NoThunks</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-1545"></span><span>
</span><span id="line-1546"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679554899"><span id="local-6989586621679554901"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">STS</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIEND"><span class="hs-identifier hs-type">UPIEND</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1547"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Environment"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">Environment</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIEND"><span class="hs-identifier hs-type">UPIEND</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIEnv"><span class="hs-identifier hs-type">UPIEnv</span></a></span><span>
</span><span id="line-1548"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="State"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">State</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIEND"><span class="hs-identifier hs-type">UPIEND</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIState"><span class="hs-identifier hs-type">UPIState</span></a></span><span>
</span><span id="line-1549"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Signal"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">Signal</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIEND"><span class="hs-identifier hs-type">UPIEND</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ProtVer"><span class="hs-identifier hs-type">ProtVer</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier hs-type">Core.VKey</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1550"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="PredicateFailure"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">PredicateFailure</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIEND"><span class="hs-identifier hs-type">UPIEND</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpiendPredicateFailure"><span class="hs-identifier hs-type">UpiendPredicateFailure</span></a></span><span>
</span><span id="line-1551"></span><span>
</span><span id="line-1552"></span><span>  </span><span id="local-6989586621679554898"><span class="annot"><span class="annottext">initialRules :: [InitialRule UPIEND]
</span><a href="#local-6989586621679554898"><span class="hs-identifier hs-var hs-var hs-var hs-var">initialRules</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">UPIState -&gt; F (Clause UPIEND 'Initial) UPIState
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(UPIState -&gt; F (Clause UPIEND 'Initial) UPIState)
-&gt; UPIState -&gt; F (Clause UPIEND 'Initial) UPIState
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="annot"><span class="annottext">UPIState
</span><a href="Byron.Spec.Ledger.Update.html#emptyUPIState"><span class="hs-identifier hs-var">emptyUPIState</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1553"></span><span>
</span><span id="line-1554"></span><span>  </span><span id="local-6989586621679554897"><span class="annot"><span class="annottext">transitionRules :: [TransitionRule UPIEND]
</span><a href="#local-6989586621679554897"><span class="hs-identifier hs-var hs-var hs-var hs-var">transitionRules</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1555"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1556"></span><span>        </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">TRC</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679554896"><span class="annot"><a href="#local-6989586621679554896"><span class="hs-identifier hs-var">sn</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679554895"><span class="annot"><a href="#local-6989586621679554895"><span class="hs-identifier hs-var">dms</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679554894"><span class="annot"><a href="#local-6989586621679554894"><span class="hs-identifier hs-var">k</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679554893"><span class="annot"><a href="#local-6989586621679554893"><span class="hs-identifier hs-var">ngk</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1557"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679554892"><span class="annot"><a href="#local-6989586621679554892"><span class="hs-identifier hs-var">pv</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679554891"><span class="annot"><a href="#local-6989586621679554891"><span class="hs-identifier hs-var">pps</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1558"></span><span>              </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679554890"><span class="annot"><a href="#local-6989586621679554890"><span class="hs-identifier hs-var">fads</span></a></span></span><span>
</span><span id="line-1559"></span><span>              </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679554889"><span class="annot"><a href="#local-6989586621679554889"><span class="hs-identifier hs-var">avs</span></a></span></span><span>
</span><span id="line-1560"></span><span>              </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679554888"><span class="annot"><a href="#local-6989586621679554888"><span class="hs-identifier hs-var">rpus</span></a></span></span><span>
</span><span id="line-1561"></span><span>              </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679554887"><span class="annot"><a href="#local-6989586621679554887"><span class="hs-identifier hs-var">raus</span></a></span></span><span>
</span><span id="line-1562"></span><span>              </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679554886"><span class="annot"><a href="#local-6989586621679554886"><span class="hs-identifier hs-var">cps</span></a></span></span><span>
</span><span id="line-1563"></span><span>              </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679554885"><span class="annot"><a href="#local-6989586621679554885"><span class="hs-identifier hs-var">vts</span></a></span></span><span>
</span><span id="line-1564"></span><span>              </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679554884"><span class="annot"><a href="#local-6989586621679554884"><span class="hs-identifier hs-var">bvs</span></a></span></span><span>
</span><span id="line-1565"></span><span>              </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679554883"><span class="annot"><a href="#local-6989586621679554883"><span class="hs-identifier hs-var">pws</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1566"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679554882"><span class="annot"><a href="#local-6989586621679554882"><span class="hs-identifier hs-var">bv</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679554881"><span class="annot"><a href="#local-6989586621679554881"><span class="hs-identifier hs-var">vk</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">F (Clause UPIEND 'Transition) (TRC UPIEND)
forall sts (rtype :: RuleType).
Rule sts rtype (RuleContext rtype sts)
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">judgmentContext</span></a></span><span>
</span><span id="line-1567"></span><span>        </span><span class="hs-keyword">let</span><span>
</span><span id="line-1568"></span><span>          </span><span id="local-6989586621679554880"><span class="annot"><span class="annottext">t :: Natural
</span><a href="#local-6989586621679554880"><span class="hs-identifier hs-var hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UpAdptThd -&gt; Natural
forall a b. (RealFrac a, Integral b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">floor</span></span><span> </span><span class="annot"><span class="annottext">(UpAdptThd -&gt; Natural) -&gt; UpAdptThd -&gt; Natural
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PParams
</span><a href="#local-6989586621679554891"><span class="hs-identifier hs-var">pps</span></a></span><span> </span><span class="annot"><span class="annottext">PParams -&gt; Getting UpAdptThd PParams UpAdptThd -&gt; UpAdptThd
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting UpAdptThd PParams UpAdptThd
Lens' PParams UpAdptThd
</span><a href="Byron.Spec.Ledger.Update.html#upAdptThd"><span class="hs-identifier hs-var">upAdptThd</span></a></span><span> </span><span class="annot"><span class="annottext">UpAdptThd -&gt; UpAdptThd -&gt; UpAdptThd
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">*</span></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; UpAdptThd
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679554893"><span class="hs-identifier hs-var">ngk</span></a></span><span>
</span><span id="line-1569"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621679554879"><span class="annot"><span class="annottext">[(Slot, (ProtVer, PParams))]
</span><a href="#local-6989586621679554879"><span class="hs-identifier hs-var">fads'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679554878"><span class="annot"><span class="annottext">Set (ProtVer, VKeyGenesis)
</span><a href="#local-6989586621679554878"><span class="hs-identifier hs-var">bvs'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall sub super (rtype :: RuleType).
Embed sub super =&gt;
RuleContext rtype sub -&gt; Rule super rtype (State sub)
forall super (rtype :: RuleType).
Embed UPEND super =&gt;
RuleContext rtype UPEND -&gt; Rule super rtype (State UPEND)
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">trans</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPEND"><span class="hs-identifier hs-type">UPEND</span></a></span><span> </span><span class="annot"><span class="annottext">(RuleContext 'Transition UPEND
 -&gt; Rule UPIEND 'Transition (State UPEND))
-&gt; RuleContext 'Transition UPEND
-&gt; Rule UPIEND 'Transition (State UPEND)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Environment UPEND, State UPEND, Signal UPEND) -&gt; TRC UPEND
forall sts. (Environment sts, State sts, Signal sts) -&gt; TRC sts
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">TRC</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Slot
</span><a href="#local-6989586621679554896"><span class="hs-identifier hs-var">sn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679554880"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bimap VKeyGenesis VKey
</span><a href="#local-6989586621679554895"><span class="hs-identifier hs-var">dms</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map UpId Slot
</span><a href="#local-6989586621679554886"><span class="hs-identifier hs-var">cps</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map UpId (ProtVer, PParams)
</span><a href="#local-6989586621679554888"><span class="hs-identifier hs-var">rpus</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">BlockCount
</span><a href="#local-6989586621679554894"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(Slot, (ProtVer, PParams))]
</span><a href="#local-6989586621679554890"><span class="hs-identifier hs-var">fads</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Set (ProtVer, VKeyGenesis)
</span><a href="#local-6989586621679554884"><span class="hs-identifier hs-var">bvs</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ProtVer
</span><a href="#local-6989586621679554882"><span class="hs-identifier hs-var">bv</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">VKey
</span><a href="#local-6989586621679554881"><span class="hs-identifier hs-var">vk</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1570"></span><span>        </span><span class="hs-keyword">let</span><span>
</span><span id="line-1571"></span><span>          </span><span id="local-6989586621679554877"><span class="annot"><span class="annottext">u :: SlotCount
</span><a href="#local-6989586621679554877"><span class="hs-identifier hs-var hs-var">u</span></a></span></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PParams
</span><a href="#local-6989586621679554891"><span class="hs-identifier hs-var">pps</span></a></span><span> </span><span class="annot"><span class="annottext">PParams -&gt; Getting SlotCount PParams SlotCount -&gt; SlotCount
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting SlotCount PParams SlotCount
Lens' PParams SlotCount
</span><a href="Byron.Spec.Ledger.Update.html#upTtl"><span class="hs-identifier hs-var">upTtl</span></a></span><span>
</span><span id="line-1572"></span><span>          </span><span id="local-6989586621679554876"><span class="annot"><span class="annottext">pidskeep :: Set UpId
</span><a href="#local-6989586621679554876"><span class="hs-identifier hs-var hs-var">pidskeep</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map UpId Slot -&gt; Set (Domain (Map UpId Slot))
forall m. (Relation m, Ord (Domain m)) =&gt; m -&gt; Set (Domain m)
</span><a href="Byron.Spec.Ledger.Core.html#dom"><span class="hs-identifier hs-var">dom</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map UpId Slot
</span><a href="#local-6989586621679554883"><span class="hs-identifier hs-var">pws</span></a></span><span> </span><span class="annot"><span class="annottext">Map UpId Slot -&gt; Range (Map UpId Slot) -&gt; Map UpId Slot
forall m. (Relation m, Ord (Range m)) =&gt; m -&gt; Range m -&gt; m
</span><a href="Byron.Spec.Ledger.Core.html#%25B7%3E%3D"><span class="hs-operator hs-var">&#9655;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">Slot
</span><a href="#local-6989586621679554896"><span class="hs-identifier hs-var">sn</span></a></span><span> </span><span class="annot"><span class="annottext">Slot -&gt; SlotCount -&gt; Slot
</span><a href="Byron.Spec.Ledger.Core.html#-."><span class="hs-operator hs-var">-.</span></a></span><span> </span><span class="annot"><span class="annottext">SlotCount
</span><a href="#local-6989586621679554877"><span class="hs-identifier hs-var">u</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Set UpId -&gt; Set UpId -&gt; Set UpId
forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Set a
</span><span class="hs-operator hs-var">`union`</span></span><span> </span><span class="annot"><span class="annottext">Map UpId Slot -&gt; Set (Domain (Map UpId Slot))
forall m. (Relation m, Ord (Domain m)) =&gt; m -&gt; Set (Domain m)
</span><a href="Byron.Spec.Ledger.Core.html#dom"><span class="hs-identifier hs-var">dom</span></a></span><span> </span><span class="annot"><span class="annottext">Map UpId Slot
</span><a href="#local-6989586621679554886"><span class="hs-identifier hs-var">cps</span></a></span><span>
</span><span id="line-1573"></span><span>          </span><span id="local-6989586621679554875"><span class="annot"><span class="annottext">vskeep :: Set (Domain (Set (ProtVer, PParams)))
</span><a href="#local-6989586621679554875"><span class="hs-identifier hs-var hs-var">vskeep</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set (ProtVer, PParams) -&gt; Set (Domain (Set (ProtVer, PParams)))
forall m. (Relation m, Ord (Domain m)) =&gt; m -&gt; Set (Domain m)
</span><a href="Byron.Spec.Ledger.Core.html#dom"><span class="hs-identifier hs-var">dom</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map UpId (ProtVer, PParams)
-&gt; Set (Range (Map UpId (ProtVer, PParams)))
forall m. (Relation m, Ord (Range m)) =&gt; m -&gt; Set (Range m)
</span><a href="Byron.Spec.Ledger.Core.html#range"><span class="hs-identifier hs-var">range</span></a></span><span> </span><span class="annot"><span class="annottext">Map UpId (ProtVer, PParams)
</span><a href="#local-6989586621679554874"><span class="hs-identifier hs-var">rpus'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1574"></span><span>          </span><span id="local-6989586621679554874"><span class="annot"><span class="annottext">rpus' :: Map UpId (ProtVer, PParams)
</span><a href="#local-6989586621679554874"><span class="hs-identifier hs-var hs-var">rpus'</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set (Domain (Map UpId (ProtVer, PParams)))
Set UpId
</span><a href="#local-6989586621679554876"><span class="hs-identifier hs-var">pidskeep</span></a></span><span> </span><span class="annot"><span class="annottext">Set (Domain (Map UpId (ProtVer, PParams)))
-&gt; Map UpId (ProtVer, PParams) -&gt; Map UpId (ProtVer, PParams)
forall m (f :: * -&gt; *).
(Relation m, Ord (Domain m), Foldable f) =&gt;
f (Domain m) -&gt; m -&gt; m
</span><a href="Byron.Spec.Ledger.Core.html#%25C1"><span class="hs-operator hs-var">&#9665;</span></a></span><span> </span><span class="annot"><span class="annottext">Map UpId (ProtVer, PParams)
</span><a href="#local-6989586621679554888"><span class="hs-identifier hs-var">rpus</span></a></span><span>
</span><span id="line-1575"></span><span>        </span><span class="annot"><span class="annottext">UPIState -&gt; F (Clause UPIEND 'Transition) UPIState
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ProtVer
</span><a href="#local-6989586621679554892"><span class="hs-identifier hs-var">pv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PParams
</span><a href="#local-6989586621679554891"><span class="hs-identifier hs-var">pps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1576"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[(Slot, (ProtVer, PParams))]
</span><a href="#local-6989586621679554879"><span class="hs-identifier hs-var">fads'</span></a></span><span>
</span><span id="line-1577"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map ApName (ApVer, Slot, Metadata)
</span><a href="#local-6989586621679554889"><span class="hs-identifier hs-var">avs</span></a></span><span>
</span><span id="line-1578"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map UpId (ProtVer, PParams)
</span><a href="#local-6989586621679554874"><span class="hs-identifier hs-var">rpus'</span></a></span><span>
</span><span id="line-1579"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Set (Domain (Map UpId (ApName, ApVer, Metadata)))
Set UpId
</span><a href="#local-6989586621679554876"><span class="hs-identifier hs-var">pidskeep</span></a></span><span> </span><span class="annot"><span class="annottext">Set (Domain (Map UpId (ApName, ApVer, Metadata)))
-&gt; Map UpId (ApName, ApVer, Metadata)
-&gt; Map UpId (ApName, ApVer, Metadata)
forall m (f :: * -&gt; *).
(Relation m, Ord (Domain m), Foldable f) =&gt;
f (Domain m) -&gt; m -&gt; m
</span><a href="Byron.Spec.Ledger.Core.html#%25C1"><span class="hs-operator hs-var">&#9665;</span></a></span><span> </span><span class="annot"><span class="annottext">Map UpId (ApName, ApVer, Metadata)
</span><a href="#local-6989586621679554887"><span class="hs-identifier hs-var">raus</span></a></span><span>
</span><span id="line-1580"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map UpId Slot
</span><a href="#local-6989586621679554886"><span class="hs-identifier hs-var">cps</span></a></span><span>
</span><span id="line-1581"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Set (Domain (Set (UpId, VKeyGenesis)))
Set UpId
</span><a href="#local-6989586621679554876"><span class="hs-identifier hs-var">pidskeep</span></a></span><span> </span><span class="annot"><span class="annottext">Set (Domain (Set (UpId, VKeyGenesis)))
-&gt; Set (UpId, VKeyGenesis) -&gt; Set (UpId, VKeyGenesis)
forall m (f :: * -&gt; *).
(Relation m, Ord (Domain m), Foldable f) =&gt;
f (Domain m) -&gt; m -&gt; m
</span><a href="Byron.Spec.Ledger.Core.html#%25C1"><span class="hs-operator hs-var">&#9665;</span></a></span><span> </span><span class="annot"><span class="annottext">Set (UpId, VKeyGenesis)
</span><a href="#local-6989586621679554885"><span class="hs-identifier hs-var">vts</span></a></span><span>
</span><span id="line-1582"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Set (Domain (Set (ProtVer, VKeyGenesis)))
Set (Domain (Set (ProtVer, PParams)))
</span><a href="#local-6989586621679554875"><span class="hs-identifier hs-var">vskeep</span></a></span><span> </span><span class="annot"><span class="annottext">Set (Domain (Set (ProtVer, VKeyGenesis)))
-&gt; Set (ProtVer, VKeyGenesis) -&gt; Set (ProtVer, VKeyGenesis)
forall m (f :: * -&gt; *).
(Relation m, Ord (Domain m), Foldable f) =&gt;
f (Domain m) -&gt; m -&gt; m
</span><a href="Byron.Spec.Ledger.Core.html#%25C1"><span class="hs-operator hs-var">&#9665;</span></a></span><span> </span><span class="annot"><span class="annottext">Set (ProtVer, VKeyGenesis)
</span><a href="#local-6989586621679554878"><span class="hs-identifier hs-var">bvs'</span></a></span><span>
</span><span id="line-1583"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Set (Domain (Map UpId Slot))
Set UpId
</span><a href="#local-6989586621679554876"><span class="hs-identifier hs-var">pidskeep</span></a></span><span> </span><span class="annot"><span class="annottext">Set (Domain (Map UpId Slot)) -&gt; Map UpId Slot -&gt; Map UpId Slot
forall m (f :: * -&gt; *).
(Relation m, Ord (Domain m), Foldable f) =&gt;
f (Domain m) -&gt; m -&gt; m
</span><a href="Byron.Spec.Ledger.Core.html#%25C1"><span class="hs-operator hs-var">&#9665;</span></a></span><span> </span><span class="annot"><span class="annottext">Map UpId Slot
</span><a href="#local-6989586621679554883"><span class="hs-identifier hs-var">pws</span></a></span><span>
</span><span id="line-1584"></span><span>                </span><span class="hs-special">)</span><span>
</span><span id="line-1585"></span><span>
</span><span id="line-1586"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-1587"></span><span>
</span><span id="line-1588"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">Embed</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPEND"><span class="hs-identifier hs-type">UPEND</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIEND"><span class="hs-identifier hs-type">UPIEND</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1589"></span><span>  </span><span id="local-6989586621679554870"><span class="annot"><span class="annottext">wrapFailed :: PredicateFailure UPEND -&gt; PredicateFailure UPIEND
</span><a href="#local-6989586621679554870"><span class="hs-identifier hs-var hs-var hs-var hs-var">wrapFailed</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PredicateFailure UPEND -&gt; PredicateFailure UPIEND
PredicateFailure UPEND -&gt; UpiendPredicateFailure
</span><a href="Byron.Spec.Ledger.Update.html#UPENDFailure"><span class="hs-identifier hs-var">UPENDFailure</span></a></span><span>
</span><span id="line-1590"></span><span>
</span><span id="line-1591"></span><span class="hs-comment">-- | Given a list of protocol versions and keys endorsing those versions,</span><span>
</span><span id="line-1592"></span><span class="hs-comment">-- generate a protocol-version endorsement, or 'Nothing' if the list of</span><span>
</span><span id="line-1593"></span><span class="hs-comment">-- endorsements is empty. The version to be endorsed will be selected from those</span><span>
</span><span id="line-1594"></span><span class="hs-comment">-- versions that have the most endorsements.</span><span>
</span><span id="line-1595"></span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#pickHighlyEndorsedProtocolVersion"><span class="hs-identifier hs-type">pickHighlyEndorsedProtocolVersion</span></a></span><span>
</span><span id="line-1596"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ProtVer"><span class="hs-identifier hs-type">ProtVer</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">Core.VKeyGenesis</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1597"></span><span>  </span><span class="hs-comment">-- ^ Current set of endorsements</span><span>
</span><span id="line-1598"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Gen</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ProtVer"><span class="hs-identifier hs-type">ProtVer</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1599"></span><span id="pickHighlyEndorsedProtocolVersion"><span class="annot"><span class="annottext">pickHighlyEndorsedProtocolVersion :: [(ProtVer, Set VKeyGenesis)] -&gt; Gen (Maybe ProtVer)
</span><a href="Byron.Spec.Ledger.Update.html#pickHighlyEndorsedProtocolVersion"><span class="hs-identifier hs-var hs-var">pickHighlyEndorsedProtocolVersion</span></a></span></span><span> </span><span id="local-6989586621679554868"><span class="annot"><span class="annottext">[(ProtVer, Set VKeyGenesis)]
</span><a href="#local-6989586621679554868"><span class="hs-identifier hs-var">endorsementsList</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1600"></span><span>  </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">[ProtVer] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">[ProtVer]
</span><a href="#local-6989586621679554867"><span class="hs-identifier hs-var">mostEndorsedProposals</span></a></span><span>
</span><span id="line-1601"></span><span>  </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Maybe ProtVer -&gt; Gen (Maybe ProtVer)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Maybe ProtVer
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1602"></span><span>  </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">ProtVer -&gt; Maybe ProtVer
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(ProtVer -&gt; Maybe ProtVer)
-&gt; GenT Identity ProtVer -&gt; Gen (Maybe ProtVer)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[ProtVer] -&gt; GenT Identity ProtVer
forall (m :: * -&gt; *) a. MonadGen m =&gt; [a] -&gt; m a
</span><span class="hs-identifier hs-var">Gen.element</span></span><span> </span><span class="annot"><span class="annottext">[ProtVer]
</span><a href="#local-6989586621679554867"><span class="hs-identifier hs-var">mostEndorsedProposals</span></a></span><span>
</span><span id="line-1603"></span><span>  </span><span class="hs-comment">-- Take the top 5 most voted proposals, and endorse them. The constant 5 is determined arbitrarily</span><span>
</span><span id="line-1604"></span><span>  </span><span class="hs-comment">-- here.</span><span>
</span><span id="line-1605"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1606"></span><span>    </span><span class="annot"><a href="#local-6989586621679554867"><span class="hs-identifier hs-type">mostEndorsedProposals</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ProtVer"><span class="hs-identifier hs-type">ProtVer</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1607"></span><span>    </span><span id="local-6989586621679554867"><span class="annot"><span class="annottext">mostEndorsedProposals :: [ProtVer]
</span><a href="#local-6989586621679554867"><span class="hs-identifier hs-var hs-var">mostEndorsedProposals</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((ProtVer, Set VKeyGenesis) -&gt; Down (ProtVer, Int))
-&gt; [(ProtVer, Set VKeyGenesis)] -&gt; [(ProtVer, Set VKeyGenesis)]
forall b a. Ord b =&gt; (a -&gt; b) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">sortOn</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(ProtVer, Int) -&gt; Down (ProtVer, Int)
forall a. a -&gt; Down a
</span><span class="hs-identifier hs-var">Down</span></span><span> </span><span class="annot"><span class="annottext">((ProtVer, Int) -&gt; Down (ProtVer, Int))
-&gt; ((ProtVer, Set VKeyGenesis) -&gt; (ProtVer, Int))
-&gt; (ProtVer, Set VKeyGenesis)
-&gt; Down (ProtVer, Int)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Set VKeyGenesis -&gt; Int)
-&gt; (ProtVer, Set VKeyGenesis) -&gt; (ProtVer, Int)
forall (a :: * -&gt; * -&gt; *) b c d.
Arrow a =&gt;
a b c -&gt; a (d, b) (d, c)
</span><span class="hs-identifier hs-var">second</span></span><span> </span><span class="annot"><span class="annottext">Set VKeyGenesis -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(ProtVer, Set VKeyGenesis)]
</span><a href="#local-6989586621679554868"><span class="hs-identifier hs-var">endorsementsList</span></a></span><span>
</span><span id="line-1608"></span><span>                          </span><span class="annot"><span class="annottext">[(ProtVer, Set VKeyGenesis)]
-&gt; ([(ProtVer, Set VKeyGenesis)] -&gt; [(ProtVer, Set VKeyGenesis)])
-&gt; [(ProtVer, Set VKeyGenesis)]
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; [(ProtVer, Set VKeyGenesis)] -&gt; [(ProtVer, Set VKeyGenesis)]
forall a. Int -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">take</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">5</span></span><span>
</span><span id="line-1609"></span><span>                          </span><span class="annot"><span class="annottext">[(ProtVer, Set VKeyGenesis)]
-&gt; ([(ProtVer, Set VKeyGenesis)] -&gt; [ProtVer]) -&gt; [ProtVer]
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">((ProtVer, Set VKeyGenesis) -&gt; ProtVer)
-&gt; [(ProtVer, Set VKeyGenesis)] -&gt; [ProtVer]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">(ProtVer, Set VKeyGenesis) -&gt; ProtVer
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span>
</span><span id="line-1610"></span><span>
</span><span id="line-1611"></span><span id="local-6989586621679554865"><span id="local-6989586621679554866"></span></span><span class="hs-keyword">data</span><span> </span><span id="PVBUMP"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#PVBUMP"><span class="hs-identifier hs-var">PVBUMP</span></a></span></span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(forall x. PVBUMP -&gt; Rep PVBUMP x)
-&gt; (forall x. Rep PVBUMP x -&gt; PVBUMP) -&gt; Generic PVBUMP
forall x. Rep PVBUMP x -&gt; PVBUMP
forall x. PVBUMP -&gt; Rep PVBUMP x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep PVBUMP x -&gt; PVBUMP
$cfrom :: forall x. PVBUMP -&gt; Rep PVBUMP x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">,</span><span> </span><span id="%24tPVBUMP"><span id="local-6989586621679554834"><span id="local-6989586621679554836"><span id="local-6989586621679554838"><span id="local-6989586621679554840"><span id="local-6989586621679554842"><span id="local-6989586621679554844"><span id="local-6989586621679554846"><span id="local-6989586621679554848"><span id="local-6989586621679554850"><span id="local-6989586621679554852"><span id="local-6989586621679554854"><span id="local-6989586621679554856"><span id="local-6989586621679554858"><span id="local-6989586621679554860"><span class="annot"><span class="annottext">Typeable PVBUMP
DataType
Typeable PVBUMP
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; PVBUMP -&gt; c PVBUMP)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c PVBUMP)
-&gt; (PVBUMP -&gt; Constr)
-&gt; (PVBUMP -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c PVBUMP))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c PVBUMP))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; PVBUMP -&gt; PVBUMP)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; PVBUMP -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; PVBUMP -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; PVBUMP -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; PVBUMP -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; PVBUMP -&gt; m PVBUMP)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; PVBUMP -&gt; m PVBUMP)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; PVBUMP -&gt; m PVBUMP)
-&gt; Data PVBUMP
PVBUMP -&gt; DataType
PVBUMP -&gt; Constr
(forall b. Data b =&gt; b -&gt; b) -&gt; PVBUMP -&gt; PVBUMP
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; PVBUMP -&gt; c PVBUMP
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c PVBUMP
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; PVBUMP -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; PVBUMP -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; PVBUMP -&gt; r
forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; PVBUMP -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; PVBUMP -&gt; m PVBUMP
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; PVBUMP -&gt; m PVBUMP
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c PVBUMP
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; PVBUMP -&gt; c PVBUMP
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c PVBUMP)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c PVBUMP)
$tPVBUMP :: DataType
gmapMo :: (forall d. Data d =&gt; d -&gt; m d) -&gt; PVBUMP -&gt; m PVBUMP
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; PVBUMP -&gt; m PVBUMP
gmapMp :: (forall d. Data d =&gt; d -&gt; m d) -&gt; PVBUMP -&gt; m PVBUMP
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; PVBUMP -&gt; m PVBUMP
gmapM :: (forall d. Data d =&gt; d -&gt; m d) -&gt; PVBUMP -&gt; m PVBUMP
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; PVBUMP -&gt; m PVBUMP
gmapQi :: Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; PVBUMP -&gt; u
$cgmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; PVBUMP -&gt; u
gmapQ :: (forall d. Data d =&gt; d -&gt; u) -&gt; PVBUMP -&gt; [u]
$cgmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; PVBUMP -&gt; [u]
gmapQr :: (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; PVBUMP -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; PVBUMP -&gt; r
gmapQl :: (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; PVBUMP -&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; PVBUMP -&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; PVBUMP -&gt; PVBUMP
$cgmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; PVBUMP -&gt; PVBUMP
dataCast2 :: (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c PVBUMP)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c PVBUMP)
dataCast1 :: (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c PVBUMP)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c PVBUMP)
dataTypeOf :: PVBUMP -&gt; DataType
$cdataTypeOf :: PVBUMP -&gt; DataType
toConstr :: PVBUMP -&gt; Constr
$ctoConstr :: PVBUMP -&gt; Constr
gunfold :: (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c PVBUMP
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c PVBUMP
gfoldl :: (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; PVBUMP -&gt; c PVBUMP
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; PVBUMP -&gt; c PVBUMP
$cp1Data :: Typeable PVBUMP
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">)</span><span>
</span><span id="line-1612"></span><span>
</span><span id="line-1613"></span><span class="hs-comment">-- PVBUMP has no predicate failures</span><span>
</span><span id="line-1614"></span><span id="local-6989586621679554831"><span id="local-6989586621679554832"></span></span><span class="hs-keyword">data</span><span> </span><span id="PvbumpPredicateFailure"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#PvbumpPredicateFailure"><span class="hs-identifier hs-var">PvbumpPredicateFailure</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="NoPVBUMPFailure"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#NoPVBUMPFailure"><span class="hs-identifier hs-var">NoPVBUMPFailure</span></a></span></span><span>
</span><span id="line-1615"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679554826"><span id="local-6989586621679554828"><span class="annot"><span class="annottext">PvbumpPredicateFailure -&gt; PvbumpPredicateFailure -&gt; Bool
(PvbumpPredicateFailure -&gt; PvbumpPredicateFailure -&gt; Bool)
-&gt; (PvbumpPredicateFailure -&gt; PvbumpPredicateFailure -&gt; Bool)
-&gt; Eq PvbumpPredicateFailure
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: PvbumpPredicateFailure -&gt; PvbumpPredicateFailure -&gt; Bool
$c/= :: PvbumpPredicateFailure -&gt; PvbumpPredicateFailure -&gt; Bool
== :: PvbumpPredicateFailure -&gt; PvbumpPredicateFailure -&gt; Bool
$c== :: PvbumpPredicateFailure -&gt; PvbumpPredicateFailure -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679554820"><span id="local-6989586621679554822"><span id="local-6989586621679554824"><span class="annot"><span class="annottext">Int -&gt; PvbumpPredicateFailure -&gt; ShowS
[PvbumpPredicateFailure] -&gt; ShowS
PvbumpPredicateFailure -&gt; String
(Int -&gt; PvbumpPredicateFailure -&gt; ShowS)
-&gt; (PvbumpPredicateFailure -&gt; String)
-&gt; ([PvbumpPredicateFailure] -&gt; ShowS)
-&gt; Show PvbumpPredicateFailure
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [PvbumpPredicateFailure] -&gt; ShowS
$cshowList :: [PvbumpPredicateFailure] -&gt; ShowS
show :: PvbumpPredicateFailure -&gt; String
$cshow :: PvbumpPredicateFailure -&gt; String
showsPrec :: Int -&gt; PvbumpPredicateFailure -&gt; ShowS
$cshowsPrec :: Int -&gt; PvbumpPredicateFailure -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="%24cNoPVBUMPFailure"><span id="%24tPvbumpPredicateFailure"><span id="local-6989586621679554791"><span id="local-6989586621679554793"><span id="local-6989586621679554795"><span id="local-6989586621679554797"><span id="local-6989586621679554799"><span id="local-6989586621679554801"><span id="local-6989586621679554803"><span id="local-6989586621679554805"><span id="local-6989586621679554807"><span id="local-6989586621679554809"><span id="local-6989586621679554811"><span id="local-6989586621679554813"><span id="local-6989586621679554815"><span id="local-6989586621679554817"><span class="annot"><span class="annottext">Typeable PvbumpPredicateFailure
DataType
Constr
Typeable PvbumpPredicateFailure
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g)
    -&gt; PvbumpPredicateFailure
    -&gt; c PvbumpPredicateFailure)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c PvbumpPredicateFailure)
-&gt; (PvbumpPredicateFailure -&gt; Constr)
-&gt; (PvbumpPredicateFailure -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c PvbumpPredicateFailure))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e))
    -&gt; Maybe (c PvbumpPredicateFailure))
-&gt; ((forall b. Data b =&gt; b -&gt; b)
    -&gt; PvbumpPredicateFailure -&gt; PvbumpPredicateFailure)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r
    -&gt; (forall d. Data d =&gt; d -&gt; r')
    -&gt; PvbumpPredicateFailure
    -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r
    -&gt; (forall d. Data d =&gt; d -&gt; r')
    -&gt; PvbumpPredicateFailure
    -&gt; r)
-&gt; (forall u.
    (forall d. Data d =&gt; d -&gt; u) -&gt; PvbumpPredicateFailure -&gt; [u])
-&gt; (forall u.
    Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; PvbumpPredicateFailure -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; PvbumpPredicateFailure -&gt; m PvbumpPredicateFailure)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; PvbumpPredicateFailure -&gt; m PvbumpPredicateFailure)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; PvbumpPredicateFailure -&gt; m PvbumpPredicateFailure)
-&gt; Data PvbumpPredicateFailure
PvbumpPredicateFailure -&gt; DataType
PvbumpPredicateFailure -&gt; Constr
(forall b. Data b =&gt; b -&gt; b)
-&gt; PvbumpPredicateFailure -&gt; PvbumpPredicateFailure
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; PvbumpPredicateFailure
-&gt; c PvbumpPredicateFailure
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c PvbumpPredicateFailure
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u.
Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; PvbumpPredicateFailure -&gt; u
forall u.
(forall d. Data d =&gt; d -&gt; u) -&gt; PvbumpPredicateFailure -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; PvbumpPredicateFailure
-&gt; r
forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; PvbumpPredicateFailure
-&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; PvbumpPredicateFailure -&gt; m PvbumpPredicateFailure
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; PvbumpPredicateFailure -&gt; m PvbumpPredicateFailure
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c PvbumpPredicateFailure
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; PvbumpPredicateFailure
-&gt; c PvbumpPredicateFailure
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c PvbumpPredicateFailure)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c PvbumpPredicateFailure)
$cNoPVBUMPFailure :: Constr
$tPvbumpPredicateFailure :: DataType
gmapMo :: (forall d. Data d =&gt; d -&gt; m d)
-&gt; PvbumpPredicateFailure -&gt; m PvbumpPredicateFailure
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; PvbumpPredicateFailure -&gt; m PvbumpPredicateFailure
gmapMp :: (forall d. Data d =&gt; d -&gt; m d)
-&gt; PvbumpPredicateFailure -&gt; m PvbumpPredicateFailure
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; PvbumpPredicateFailure -&gt; m PvbumpPredicateFailure
gmapM :: (forall d. Data d =&gt; d -&gt; m d)
-&gt; PvbumpPredicateFailure -&gt; m PvbumpPredicateFailure
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; PvbumpPredicateFailure -&gt; m PvbumpPredicateFailure
gmapQi :: Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; PvbumpPredicateFailure -&gt; u
$cgmapQi :: forall u.
Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; PvbumpPredicateFailure -&gt; u
gmapQ :: (forall d. Data d =&gt; d -&gt; u) -&gt; PvbumpPredicateFailure -&gt; [u]
$cgmapQ :: forall u.
(forall d. Data d =&gt; d -&gt; u) -&gt; PvbumpPredicateFailure -&gt; [u]
gmapQr :: (r' -&gt; r -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; PvbumpPredicateFailure
-&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; PvbumpPredicateFailure
-&gt; r
gmapQl :: (r -&gt; r' -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; PvbumpPredicateFailure
-&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; PvbumpPredicateFailure
-&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b)
-&gt; PvbumpPredicateFailure -&gt; PvbumpPredicateFailure
$cgmapT :: (forall b. Data b =&gt; b -&gt; b)
-&gt; PvbumpPredicateFailure -&gt; PvbumpPredicateFailure
dataCast2 :: (forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c PvbumpPredicateFailure)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c PvbumpPredicateFailure)
dataCast1 :: (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c PvbumpPredicateFailure)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c PvbumpPredicateFailure)
dataTypeOf :: PvbumpPredicateFailure -&gt; DataType
$cdataTypeOf :: PvbumpPredicateFailure -&gt; DataType
toConstr :: PvbumpPredicateFailure -&gt; Constr
$ctoConstr :: PvbumpPredicateFailure -&gt; Constr
gunfold :: (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c PvbumpPredicateFailure
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c PvbumpPredicateFailure
gfoldl :: (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; PvbumpPredicateFailure
-&gt; c PvbumpPredicateFailure
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; PvbumpPredicateFailure
-&gt; c PvbumpPredicateFailure
$cp1Data :: Typeable PvbumpPredicateFailure
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. PvbumpPredicateFailure -&gt; Rep PvbumpPredicateFailure x)
-&gt; (forall x.
    Rep PvbumpPredicateFailure x -&gt; PvbumpPredicateFailure)
-&gt; Generic PvbumpPredicateFailure
forall x. Rep PvbumpPredicateFailure x -&gt; PvbumpPredicateFailure
forall x. PvbumpPredicateFailure -&gt; Rep PvbumpPredicateFailure x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep PvbumpPredicateFailure x -&gt; PvbumpPredicateFailure
$cfrom :: forall x. PvbumpPredicateFailure -&gt; Rep PvbumpPredicateFailure x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679554781"><span id="local-6989586621679554783"><span id="local-6989586621679554785"><span class="annot"><span class="annottext">Context -&gt; PvbumpPredicateFailure -&gt; IO (Maybe ThunkInfo)
Proxy PvbumpPredicateFailure -&gt; String
(Context -&gt; PvbumpPredicateFailure -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; PvbumpPredicateFailure -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy PvbumpPredicateFailure -&gt; String)
-&gt; NoThunks PvbumpPredicateFailure
forall a.
(Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy a -&gt; String)
-&gt; NoThunks a
showTypeOf :: Proxy PvbumpPredicateFailure -&gt; String
$cshowTypeOf :: Proxy PvbumpPredicateFailure -&gt; String
wNoThunks :: Context -&gt; PvbumpPredicateFailure -&gt; IO (Maybe ThunkInfo)
$cwNoThunks :: Context -&gt; PvbumpPredicateFailure -&gt; IO (Maybe ThunkInfo)
noThunks :: Context -&gt; PvbumpPredicateFailure -&gt; IO (Maybe ThunkInfo)
$cnoThunks :: Context -&gt; PvbumpPredicateFailure -&gt; IO (Maybe ThunkInfo)
</span><a href="#local-6989586621679554781"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">NoThunks</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-1616"></span><span>
</span><span id="line-1617"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679554771"><span id="local-6989586621679554773"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">STS</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#PVBUMP"><span class="hs-identifier hs-type">PVBUMP</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1618"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Environment"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">Environment</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#PVBUMP"><span class="hs-identifier hs-type">PVBUMP</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1619"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Slot"><span class="hs-identifier hs-type">Core.Slot</span></a></span><span>
</span><span id="line-1620"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Slot"><span class="hs-identifier hs-type">Core.Slot</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ProtVer"><span class="hs-identifier hs-type">ProtVer</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#PParams"><span class="hs-identifier hs-type">PParams</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1621"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#BlockCount"><span class="hs-identifier hs-type">BlockCount</span></a></span><span> </span><span class="hs-comment">-- Chain stability parameter; this is a global</span><span>
</span><span id="line-1622"></span><span>                 </span><span class="hs-comment">-- constant in the formal specification, which we put</span><span>
</span><span id="line-1623"></span><span>                 </span><span class="hs-comment">-- in this environment so that we can test with</span><span>
</span><span id="line-1624"></span><span>                 </span><span class="hs-comment">-- different values of it.</span><span>
</span><span id="line-1625"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-1626"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="State"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">State</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#PVBUMP"><span class="hs-identifier hs-type">PVBUMP</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1627"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ProtVer"><span class="hs-identifier hs-type">ProtVer</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#PParams"><span class="hs-identifier hs-type">PParams</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1628"></span><span>
</span><span id="line-1629"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Signal"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">Signal</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#PVBUMP"><span class="hs-identifier hs-type">PVBUMP</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1630"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="PredicateFailure"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">PredicateFailure</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#PVBUMP"><span class="hs-identifier hs-type">PVBUMP</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#PvbumpPredicateFailure"><span class="hs-identifier hs-type">PvbumpPredicateFailure</span></a></span><span>
</span><span id="line-1631"></span><span>
</span><span id="line-1632"></span><span>  </span><span id="local-6989586621679554770"><span class="annot"><span class="annottext">initialRules :: [InitialRule PVBUMP]
</span><a href="#local-6989586621679554770"><span class="hs-identifier hs-var hs-var hs-var hs-var">initialRules</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1633"></span><span>  </span><span id="local-6989586621679554769"><span class="annot"><span class="annottext">transitionRules :: [TransitionRule PVBUMP]
</span><a href="#local-6989586621679554769"><span class="hs-identifier hs-var hs-var hs-var hs-var">transitionRules</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1634"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1635"></span><span>        </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">TRC</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621679554768"><span class="annot"><a href="#local-6989586621679554768"><span class="hs-identifier hs-var">s_n</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679554767"><span class="annot"><a href="#local-6989586621679554767"><span class="hs-identifier hs-var">fads</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679554766"><span class="annot"><a href="#local-6989586621679554766"><span class="hs-identifier hs-var">k</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679554765"><span class="annot"><a href="#local-6989586621679554765"><span class="hs-identifier hs-var">pv</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679554764"><span class="annot"><a href="#local-6989586621679554764"><span class="hs-identifier hs-var">pps</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">F (Clause PVBUMP 'Transition) (TRC PVBUMP)
forall sts (rtype :: RuleType).
Rule sts rtype (RuleContext rtype sts)
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">judgmentContext</span></a></span><span>
</span><span id="line-1636"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Slot
</span><a href="#local-6989586621679554768"><span class="hs-identifier hs-var">s_n</span></a></span><span>  </span><span class="annot"><span class="annottext">Slot -&gt; SlotCount -&gt; Slot
</span><a href="Byron.Spec.Ledger.Core.html#-."><span class="hs-operator hs-var">-.</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">4</span></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; BlockCount -&gt; SlotCount
</span><a href="Byron.Spec.Ledger.Core.html#%2A."><span class="hs-operator hs-var">*.</span></a></span><span> </span><span class="annot"><span class="annottext">BlockCount
</span><a href="#local-6989586621679554766"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">Domain [(Slot, (ProtVer, PParams))]
-&gt; [(Slot, (ProtVer, PParams))] -&gt; [(Slot, (ProtVer, PParams))]
forall m. (Relation m, Ord (Domain m)) =&gt; Domain m -&gt; m -&gt; m
</span><a href="Byron.Spec.Ledger.Core.html#%3C%3D%25C1"><span class="hs-operator hs-var">&lt;=&#9665;</span></a></span><span> </span><span class="annot"><span class="annottext">[(Slot, (ProtVer, PParams))]
</span><a href="#local-6989586621679554767"><span class="hs-identifier hs-var">fads</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1637"></span><span>          </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1638"></span><span>            </span><span class="annot"><span class="annottext">(ProtVer, PParams)
-&gt; F (Clause PVBUMP 'Transition) (ProtVer, PParams)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">((ProtVer, PParams)
 -&gt; F (Clause PVBUMP 'Transition) (ProtVer, PParams))
-&gt; (ProtVer, PParams)
-&gt; F (Clause PVBUMP 'Transition) (ProtVer, PParams)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ProtVer
</span><a href="#local-6989586621679554765"><span class="hs-identifier hs-var">pv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PParams
</span><a href="#local-6989586621679554764"><span class="hs-identifier hs-var">pps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1639"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621679554762"><span class="annot"><span class="annottext">Slot
</span><a href="#local-6989586621679554762"><span class="hs-identifier hs-var">_s</span></a></span></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679554761"><span class="annot"><span class="annottext">ProtVer
</span><a href="#local-6989586621679554761"><span class="hs-identifier hs-var">pv_c</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679554760"><span class="annot"><span class="annottext">PParams
</span><a href="#local-6989586621679554760"><span class="hs-identifier hs-var">pps_c</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621679554759"><span class="annot"><span class="annottext">[(Slot, (ProtVer, PParams))]
</span><a href="#local-6989586621679554759"><span class="hs-identifier hs-var">_xs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1640"></span><span>            </span><span class="annot"><span class="annottext">(ProtVer, PParams)
-&gt; F (Clause PVBUMP 'Transition) (ProtVer, PParams)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">((ProtVer, PParams)
 -&gt; F (Clause PVBUMP 'Transition) (ProtVer, PParams))
-&gt; (ProtVer, PParams)
-&gt; F (Clause PVBUMP 'Transition) (ProtVer, PParams)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ProtVer
</span><a href="#local-6989586621679554761"><span class="hs-identifier hs-var">pv_c</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PParams
</span><a href="#local-6989586621679554760"><span class="hs-identifier hs-var">pps_c</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1641"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-1642"></span><span>
</span><span id="line-1643"></span><span id="local-6989586621679554757"><span id="local-6989586621679554758"></span></span><span class="hs-keyword">data</span><span> </span><span id="UPIEC"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIEC"><span class="hs-identifier hs-var">UPIEC</span></a></span></span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(forall x. UPIEC -&gt; Rep UPIEC x)
-&gt; (forall x. Rep UPIEC x -&gt; UPIEC) -&gt; Generic UPIEC
forall x. Rep UPIEC x -&gt; UPIEC
forall x. UPIEC -&gt; Rep UPIEC x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep UPIEC x -&gt; UPIEC
$cfrom :: forall x. UPIEC -&gt; Rep UPIEC x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">,</span><span> </span><span id="%24tUPIEC"><span id="local-6989586621679554726"><span id="local-6989586621679554728"><span id="local-6989586621679554730"><span id="local-6989586621679554732"><span id="local-6989586621679554734"><span id="local-6989586621679554736"><span id="local-6989586621679554738"><span id="local-6989586621679554740"><span id="local-6989586621679554742"><span id="local-6989586621679554744"><span id="local-6989586621679554746"><span id="local-6989586621679554748"><span id="local-6989586621679554750"><span id="local-6989586621679554752"><span class="annot"><span class="annottext">Typeable UPIEC
DataType
Typeable UPIEC
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; UPIEC -&gt; c UPIEC)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UPIEC)
-&gt; (UPIEC -&gt; Constr)
-&gt; (UPIEC -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UPIEC))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c UPIEC))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; UPIEC -&gt; UPIEC)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPIEC -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPIEC -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; UPIEC -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UPIEC -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; UPIEC -&gt; m UPIEC)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; UPIEC -&gt; m UPIEC)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; UPIEC -&gt; m UPIEC)
-&gt; Data UPIEC
UPIEC -&gt; DataType
UPIEC -&gt; Constr
(forall b. Data b =&gt; b -&gt; b) -&gt; UPIEC -&gt; UPIEC
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; UPIEC -&gt; c UPIEC
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UPIEC
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UPIEC -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; UPIEC -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPIEC -&gt; r
forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPIEC -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UPIEC -&gt; m UPIEC
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UPIEC -&gt; m UPIEC
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UPIEC
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; UPIEC -&gt; c UPIEC
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UPIEC)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c UPIEC)
$tUPIEC :: DataType
gmapMo :: (forall d. Data d =&gt; d -&gt; m d) -&gt; UPIEC -&gt; m UPIEC
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UPIEC -&gt; m UPIEC
gmapMp :: (forall d. Data d =&gt; d -&gt; m d) -&gt; UPIEC -&gt; m UPIEC
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UPIEC -&gt; m UPIEC
gmapM :: (forall d. Data d =&gt; d -&gt; m d) -&gt; UPIEC -&gt; m UPIEC
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; UPIEC -&gt; m UPIEC
gmapQi :: Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UPIEC -&gt; u
$cgmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UPIEC -&gt; u
gmapQ :: (forall d. Data d =&gt; d -&gt; u) -&gt; UPIEC -&gt; [u]
$cgmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; UPIEC -&gt; [u]
gmapQr :: (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPIEC -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPIEC -&gt; r
gmapQl :: (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPIEC -&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UPIEC -&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; UPIEC -&gt; UPIEC
$cgmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; UPIEC -&gt; UPIEC
dataCast2 :: (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c UPIEC)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c UPIEC)
dataCast1 :: (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UPIEC)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UPIEC)
dataTypeOf :: UPIEC -&gt; DataType
$cdataTypeOf :: UPIEC -&gt; DataType
toConstr :: UPIEC -&gt; Constr
$ctoConstr :: UPIEC -&gt; Constr
gunfold :: (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UPIEC
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UPIEC
gfoldl :: (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; UPIEC -&gt; c UPIEC
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; UPIEC -&gt; c UPIEC
$cp1Data :: Typeable UPIEC
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">)</span><span>
</span><span id="line-1644"></span><span>
</span><span id="line-1645"></span><span id="local-6989586621679554723"><span id="local-6989586621679554724"></span></span><span class="hs-keyword">data</span><span> </span><span id="UpiecPredicateFailure"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpiecPredicateFailure"><span class="hs-identifier hs-var">UpiecPredicateFailure</span></a></span></span><span>
</span><span id="line-1646"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="PVBUMPFailure"><span class="annot"><a href="Byron.Spec.Ledger.Update.html#PVBUMPFailure"><span class="hs-identifier hs-var">PVBUMPFailure</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">PredicateFailure</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#PVBUMP"><span class="hs-identifier hs-type">PVBUMP</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1647"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679554718"><span id="local-6989586621679554720"><span class="annot"><span class="annottext">UpiecPredicateFailure -&gt; UpiecPredicateFailure -&gt; Bool
(UpiecPredicateFailure -&gt; UpiecPredicateFailure -&gt; Bool)
-&gt; (UpiecPredicateFailure -&gt; UpiecPredicateFailure -&gt; Bool)
-&gt; Eq UpiecPredicateFailure
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: UpiecPredicateFailure -&gt; UpiecPredicateFailure -&gt; Bool
$c/= :: UpiecPredicateFailure -&gt; UpiecPredicateFailure -&gt; Bool
== :: UpiecPredicateFailure -&gt; UpiecPredicateFailure -&gt; Bool
$c== :: UpiecPredicateFailure -&gt; UpiecPredicateFailure -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679554712"><span id="local-6989586621679554714"><span id="local-6989586621679554716"><span class="annot"><span class="annottext">Int -&gt; UpiecPredicateFailure -&gt; ShowS
[UpiecPredicateFailure] -&gt; ShowS
UpiecPredicateFailure -&gt; String
(Int -&gt; UpiecPredicateFailure -&gt; ShowS)
-&gt; (UpiecPredicateFailure -&gt; String)
-&gt; ([UpiecPredicateFailure] -&gt; ShowS)
-&gt; Show UpiecPredicateFailure
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [UpiecPredicateFailure] -&gt; ShowS
$cshowList :: [UpiecPredicateFailure] -&gt; ShowS
show :: UpiecPredicateFailure -&gt; String
$cshow :: UpiecPredicateFailure -&gt; String
showsPrec :: Int -&gt; UpiecPredicateFailure -&gt; ShowS
$cshowsPrec :: Int -&gt; UpiecPredicateFailure -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="%24cPVBUMPFailure"><span id="%24tUpiecPredicateFailure"><span id="local-6989586621679554683"><span id="local-6989586621679554685"><span id="local-6989586621679554687"><span id="local-6989586621679554689"><span id="local-6989586621679554691"><span id="local-6989586621679554693"><span id="local-6989586621679554695"><span id="local-6989586621679554697"><span id="local-6989586621679554699"><span id="local-6989586621679554701"><span id="local-6989586621679554703"><span id="local-6989586621679554705"><span id="local-6989586621679554707"><span id="local-6989586621679554709"><span class="annot"><span class="annottext">Typeable UpiecPredicateFailure
DataType
Constr
Typeable UpiecPredicateFailure
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g)
    -&gt; UpiecPredicateFailure
    -&gt; c UpiecPredicateFailure)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UpiecPredicateFailure)
-&gt; (UpiecPredicateFailure -&gt; Constr)
-&gt; (UpiecPredicateFailure -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UpiecPredicateFailure))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e))
    -&gt; Maybe (c UpiecPredicateFailure))
-&gt; ((forall b. Data b =&gt; b -&gt; b)
    -&gt; UpiecPredicateFailure -&gt; UpiecPredicateFailure)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r
    -&gt; (forall d. Data d =&gt; d -&gt; r')
    -&gt; UpiecPredicateFailure
    -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r
    -&gt; (forall d. Data d =&gt; d -&gt; r')
    -&gt; UpiecPredicateFailure
    -&gt; r)
-&gt; (forall u.
    (forall d. Data d =&gt; d -&gt; u) -&gt; UpiecPredicateFailure -&gt; [u])
-&gt; (forall u.
    Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UpiecPredicateFailure -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; UpiecPredicateFailure -&gt; m UpiecPredicateFailure)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; UpiecPredicateFailure -&gt; m UpiecPredicateFailure)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; UpiecPredicateFailure -&gt; m UpiecPredicateFailure)
-&gt; Data UpiecPredicateFailure
UpiecPredicateFailure -&gt; DataType
UpiecPredicateFailure -&gt; Constr
(forall b. Data b =&gt; b -&gt; b)
-&gt; UpiecPredicateFailure -&gt; UpiecPredicateFailure
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; UpiecPredicateFailure
-&gt; c UpiecPredicateFailure
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UpiecPredicateFailure
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u.
Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UpiecPredicateFailure -&gt; u
forall u.
(forall d. Data d =&gt; d -&gt; u) -&gt; UpiecPredicateFailure -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UpiecPredicateFailure -&gt; r
forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UpiecPredicateFailure -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; UpiecPredicateFailure -&gt; m UpiecPredicateFailure
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; UpiecPredicateFailure -&gt; m UpiecPredicateFailure
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UpiecPredicateFailure
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; UpiecPredicateFailure
-&gt; c UpiecPredicateFailure
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UpiecPredicateFailure)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c UpiecPredicateFailure)
$cPVBUMPFailure :: Constr
$tUpiecPredicateFailure :: DataType
gmapMo :: (forall d. Data d =&gt; d -&gt; m d)
-&gt; UpiecPredicateFailure -&gt; m UpiecPredicateFailure
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; UpiecPredicateFailure -&gt; m UpiecPredicateFailure
gmapMp :: (forall d. Data d =&gt; d -&gt; m d)
-&gt; UpiecPredicateFailure -&gt; m UpiecPredicateFailure
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; UpiecPredicateFailure -&gt; m UpiecPredicateFailure
gmapM :: (forall d. Data d =&gt; d -&gt; m d)
-&gt; UpiecPredicateFailure -&gt; m UpiecPredicateFailure
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; UpiecPredicateFailure -&gt; m UpiecPredicateFailure
gmapQi :: Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UpiecPredicateFailure -&gt; u
$cgmapQi :: forall u.
Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UpiecPredicateFailure -&gt; u
gmapQ :: (forall d. Data d =&gt; d -&gt; u) -&gt; UpiecPredicateFailure -&gt; [u]
$cgmapQ :: forall u.
(forall d. Data d =&gt; d -&gt; u) -&gt; UpiecPredicateFailure -&gt; [u]
gmapQr :: (r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UpiecPredicateFailure -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UpiecPredicateFailure -&gt; r
gmapQl :: (r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UpiecPredicateFailure -&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UpiecPredicateFailure -&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b)
-&gt; UpiecPredicateFailure -&gt; UpiecPredicateFailure
$cgmapT :: (forall b. Data b =&gt; b -&gt; b)
-&gt; UpiecPredicateFailure -&gt; UpiecPredicateFailure
dataCast2 :: (forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c UpiecPredicateFailure)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c UpiecPredicateFailure)
dataCast1 :: (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UpiecPredicateFailure)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UpiecPredicateFailure)
dataTypeOf :: UpiecPredicateFailure -&gt; DataType
$cdataTypeOf :: UpiecPredicateFailure -&gt; DataType
toConstr :: UpiecPredicateFailure -&gt; Constr
$ctoConstr :: UpiecPredicateFailure -&gt; Constr
gunfold :: (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UpiecPredicateFailure
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UpiecPredicateFailure
gfoldl :: (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; UpiecPredicateFailure
-&gt; c UpiecPredicateFailure
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; UpiecPredicateFailure
-&gt; c UpiecPredicateFailure
$cp1Data :: Typeable UpiecPredicateFailure
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. UpiecPredicateFailure -&gt; Rep UpiecPredicateFailure x)
-&gt; (forall x. Rep UpiecPredicateFailure x -&gt; UpiecPredicateFailure)
-&gt; Generic UpiecPredicateFailure
forall x. Rep UpiecPredicateFailure x -&gt; UpiecPredicateFailure
forall x. UpiecPredicateFailure -&gt; Rep UpiecPredicateFailure x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep UpiecPredicateFailure x -&gt; UpiecPredicateFailure
$cfrom :: forall x. UpiecPredicateFailure -&gt; Rep UpiecPredicateFailure x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679554673"><span id="local-6989586621679554675"><span id="local-6989586621679554677"><span class="annot"><span class="annottext">Context -&gt; UpiecPredicateFailure -&gt; IO (Maybe ThunkInfo)
Proxy UpiecPredicateFailure -&gt; String
(Context -&gt; UpiecPredicateFailure -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; UpiecPredicateFailure -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy UpiecPredicateFailure -&gt; String)
-&gt; NoThunks UpiecPredicateFailure
forall a.
(Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy a -&gt; String)
-&gt; NoThunks a
showTypeOf :: Proxy UpiecPredicateFailure -&gt; String
$cshowTypeOf :: Proxy UpiecPredicateFailure -&gt; String
wNoThunks :: Context -&gt; UpiecPredicateFailure -&gt; IO (Maybe ThunkInfo)
$cwNoThunks :: Context -&gt; UpiecPredicateFailure -&gt; IO (Maybe ThunkInfo)
noThunks :: Context -&gt; UpiecPredicateFailure -&gt; IO (Maybe ThunkInfo)
$cnoThunks :: Context -&gt; UpiecPredicateFailure -&gt; IO (Maybe ThunkInfo)
</span><a href="#local-6989586621679554673"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">NoThunks</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-1648"></span><span>
</span><span id="line-1649"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679554663"><span id="local-6989586621679554665"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">STS</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIEC"><span class="hs-identifier hs-type">UPIEC</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1650"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Environment"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">Environment</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIEC"><span class="hs-identifier hs-type">UPIEC</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1651"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Epoch"><span class="hs-identifier hs-type">Core.Epoch</span></a></span><span>
</span><span id="line-1652"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#BlockCount"><span class="hs-identifier hs-type">BlockCount</span></a></span><span> </span><span class="hs-comment">-- Chain stability parameter; this is a global</span><span>
</span><span id="line-1653"></span><span>                 </span><span class="hs-comment">-- constant in the formal specification, which we put</span><span>
</span><span id="line-1654"></span><span>                 </span><span class="hs-comment">-- in this environment so that we can test with</span><span>
</span><span id="line-1655"></span><span>                 </span><span class="hs-comment">-- different values of it.</span><span>
</span><span id="line-1656"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-1657"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="State"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">State</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIEC"><span class="hs-identifier hs-type">UPIEC</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIState"><span class="hs-identifier hs-type">UPIState</span></a></span><span>
</span><span id="line-1658"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Signal"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">Signal</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIEC"><span class="hs-identifier hs-type">UPIEC</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1659"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="PredicateFailure"><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">PredicateFailure</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIEC"><span class="hs-identifier hs-type">UPIEC</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpiecPredicateFailure"><span class="hs-identifier hs-type">UpiecPredicateFailure</span></a></span><span>
</span><span id="line-1660"></span><span>
</span><span id="line-1661"></span><span>  </span><span id="local-6989586621679554662"><span class="annot"><span class="annottext">initialRules :: [InitialRule UPIEC]
</span><a href="#local-6989586621679554662"><span class="hs-identifier hs-var hs-var hs-var hs-var">initialRules</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1662"></span><span>  </span><span id="local-6989586621679554661"><span class="annot"><span class="annottext">transitionRules :: [TransitionRule UPIEC]
</span><a href="#local-6989586621679554661"><span class="hs-identifier hs-var hs-var hs-var hs-var">transitionRules</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1663"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1664"></span><span>        </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">TRC</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621679554660"><span class="annot"><a href="#local-6989586621679554660"><span class="hs-identifier hs-var">e_n</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679554659"><span class="annot"><a href="#local-6989586621679554659"><span class="hs-identifier hs-var">k</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621679554658"><span class="annot"><span class="annottext">State UPIEC
</span><a href="#local-6989586621679554658"><span class="hs-identifier hs-var">us</span></a></span></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">F (Clause UPIEC 'Transition) (TRC UPIEC)
forall sts (rtype :: RuleType).
Rule sts rtype (RuleContext rtype sts)
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">judgmentContext</span></a></span><span>
</span><span id="line-1665"></span><span>        </span><span class="hs-keyword">let</span><span>
</span><span id="line-1666"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621679554657"><span class="annot"><span class="annottext">ProtVer
</span><a href="#local-6989586621679554657"><span class="hs-identifier hs-var">pv</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679554656"><span class="annot"><span class="annottext">PParams
</span><a href="#local-6989586621679554656"><span class="hs-identifier hs-var">pps</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UPIState
State UPIEC
</span><a href="#local-6989586621679554658"><span class="hs-identifier hs-var">us</span></a></span><span> </span><span class="annot"><span class="annottext">UPIState
-&gt; Getting (ProtVer, PParams) UPIState (ProtVer, PParams)
-&gt; (ProtVer, PParams)
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting (ProtVer, PParams) UPIState (ProtVer, PParams)
forall s t a b. Field1 s t a b =&gt; Lens s t a b
</span><span class="hs-identifier hs-var">_1</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ProtVer"><span class="hs-identifier hs-type">ProtVer</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#PParams"><span class="hs-identifier hs-type">PParams</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1667"></span><span>          </span><span id="local-6989586621679554654"><span class="annot"><span class="annottext">fads :: [(Slot, (ProtVer, PParams))]
</span><a href="#local-6989586621679554654"><span class="hs-identifier hs-var hs-var">fads</span></a></span></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UPIState
State UPIEC
</span><a href="#local-6989586621679554658"><span class="hs-identifier hs-var">us</span></a></span><span> </span><span class="annot"><span class="annottext">UPIState
-&gt; Getting
     [(Slot, (ProtVer, PParams))] UPIState [(Slot, (ProtVer, PParams))]
-&gt; [(Slot, (ProtVer, PParams))]
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting
  [(Slot, (ProtVer, PParams))] UPIState [(Slot, (ProtVer, PParams))]
forall s t a b. Field2 s t a b =&gt; Lens s t a b
</span><span class="hs-identifier hs-var">_2</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Slot"><span class="hs-identifier hs-type">Core.Slot</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ProtVer"><span class="hs-identifier hs-type">ProtVer</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#PParams"><span class="hs-identifier hs-type">PParams</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1668"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621679554652"><span class="annot"><span class="annottext">ProtVer
</span><a href="#local-6989586621679554652"><span class="hs-identifier hs-var">pv'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679554651"><span class="annot"><span class="annottext">PParams
</span><a href="#local-6989586621679554651"><span class="hs-identifier hs-var">pps'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall sub super (rtype :: RuleType).
Embed sub super =&gt;
RuleContext rtype sub -&gt; Rule super rtype (State sub)
forall super (rtype :: RuleType).
Embed PVBUMP super =&gt;
RuleContext rtype PVBUMP -&gt; Rule super rtype (State PVBUMP)
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">trans</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#PVBUMP"><span class="hs-identifier hs-type">PVBUMP</span></a></span><span>
</span><span id="line-1669"></span><span>          </span><span class="annot"><span class="annottext">(RuleContext 'Transition PVBUMP
 -&gt; Rule UPIEC 'Transition (State PVBUMP))
-&gt; RuleContext 'Transition PVBUMP
-&gt; Rule UPIEC 'Transition (State PVBUMP)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Environment PVBUMP, State PVBUMP, Signal PVBUMP) -&gt; TRC PVBUMP
forall sts. (Environment sts, State sts, Signal sts) -&gt; TRC sts
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">TRC</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">BlockCount -&gt; Epoch -&gt; Slot
</span><a href="Byron.Spec.Ledger.GlobalParams.html#epochFirstSlot"><span class="hs-identifier hs-var">GP.epochFirstSlot</span></a></span><span> </span><span class="annot"><span class="annottext">BlockCount
</span><a href="#local-6989586621679554659"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">Epoch
</span><a href="#local-6989586621679554660"><span class="hs-identifier hs-var">e_n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[(Slot, (ProtVer, PParams))]
</span><a href="#local-6989586621679554654"><span class="hs-identifier hs-var">fads</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">BlockCount
</span><a href="#local-6989586621679554659"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ProtVer
</span><a href="#local-6989586621679554657"><span class="hs-identifier hs-var">pv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PParams
</span><a href="#local-6989586621679554656"><span class="hs-identifier hs-var">pps</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1670"></span><span>        </span><span class="annot"><span class="annottext">UPIState -&gt; F (Clause UPIEC 'Transition) UPIState
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(UPIState -&gt; F (Clause UPIEC 'Transition) UPIState)
-&gt; UPIState -&gt; F (Clause UPIEC 'Transition) UPIState
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">ProtVer
</span><a href="#local-6989586621679554657"><span class="hs-identifier hs-var">pv</span></a></span><span> </span><span class="annot"><span class="annottext">ProtVer -&gt; ProtVer -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">ProtVer
</span><a href="#local-6989586621679554652"><span class="hs-identifier hs-var">pv'</span></a></span><span>
</span><span id="line-1671"></span><span>          </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">UPIState
State UPIEC
</span><a href="#local-6989586621679554658"><span class="hs-identifier hs-var">us</span></a></span><span>
</span><span id="line-1672"></span><span>          </span><span class="hs-keyword">else</span><span>
</span><span id="line-1673"></span><span>            </span><span class="hs-special">(</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ProtVer
</span><a href="#local-6989586621679554652"><span class="hs-identifier hs-var">pv'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PParams
</span><a href="#local-6989586621679554651"><span class="hs-identifier hs-var">pps'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ProtVer"><span class="hs-identifier hs-type">ProtVer</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#PParams"><span class="hs-identifier hs-type">PParams</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1674"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>          </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Slot"><span class="hs-identifier hs-type">Core.Slot</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ProtVer"><span class="hs-identifier hs-type">ProtVer</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#PParams"><span class="hs-identifier hs-type">PParams</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1675"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">UPIState
State UPIEC
</span><a href="#local-6989586621679554658"><span class="hs-identifier hs-var">us</span></a></span><span> </span><span class="annot"><span class="annottext">UPIState
-&gt; Getting
     (Map ApName (ApVer, Slot, Metadata))
     UPIState
     (Map ApName (ApVer, Slot, Metadata))
-&gt; Map ApName (ApVer, Slot, Metadata)
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting
  (Map ApName (ApVer, Slot, Metadata))
  UPIState
  (Map ApName (ApVer, Slot, Metadata))
forall s t a b. Field3 s t a b =&gt; Lens s t a b
</span><span class="hs-identifier hs-var">_3</span></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ApName"><span class="hs-identifier hs-type">ApName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ApVer"><span class="hs-identifier hs-type">ApVer</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Slot"><span class="hs-identifier hs-type">Core.Slot</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#Metadata"><span class="hs-identifier hs-type">Metadata</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1676"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map UpId (ProtVer, PParams)
forall k a. Map k a
</span><span class="hs-identifier hs-var">Map.empty</span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpId"><span class="hs-identifier hs-type">UpId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ProtVer"><span class="hs-identifier hs-type">ProtVer</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#PParams"><span class="hs-identifier hs-type">PParams</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1677"></span><span>            </span><span class="hs-comment">-- Note that we delete the registered application proposals from the</span><span>
</span><span id="line-1678"></span><span>            </span><span class="hs-comment">-- state on epoch change, since adopting these depends on the @cps@</span><span>
</span><span id="line-1679"></span><span>            </span><span class="hs-comment">-- and @pws@ sets, which are deleted as well. So it doesn't seem</span><span>
</span><span id="line-1680"></span><span>            </span><span class="hs-comment">-- sensible to keep @raus@ around.</span><span>
</span><span id="line-1681"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map UpId (ApName, ApVer, Metadata)
forall k a. Map k a
</span><span class="hs-identifier hs-var">Map.empty</span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpId"><span class="hs-identifier hs-type">UpId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ApName"><span class="hs-identifier hs-type">ApName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ApVer"><span class="hs-identifier hs-type">ApVer</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#Metadata"><span class="hs-identifier hs-type">Metadata</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1682"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map UpId Slot
forall k a. Map k a
</span><span class="hs-identifier hs-var">Map.empty</span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpId"><span class="hs-identifier hs-type">UpId</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Slot"><span class="hs-identifier hs-type">Core.Slot</span></a></span><span>
</span><span id="line-1683"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Set (UpId, VKeyGenesis)
forall a. Set a
</span><span class="hs-identifier hs-var">Set.empty</span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpId"><span class="hs-identifier hs-type">UpId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">Core.VKeyGenesis</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1684"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Set (ProtVer, VKeyGenesis)
forall a. Set a
</span><span class="hs-identifier hs-var">Set.empty</span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ProtVer"><span class="hs-identifier hs-type">ProtVer</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">Core.VKeyGenesis</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1685"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map UpId Slot
forall k a. Map k a
</span><span class="hs-identifier hs-var">Map.empty</span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpId"><span class="hs-identifier hs-type">UpId</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Slot"><span class="hs-identifier hs-type">Core.Slot</span></a></span><span>
</span><span id="line-1686"></span><span>            </span><span class="hs-special">)</span><span>
</span><span id="line-1687"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-1688"></span><span>
</span><span id="line-1689"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-type">Embed</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#PVBUMP"><span class="hs-identifier hs-type">PVBUMP</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIEC"><span class="hs-identifier hs-type">UPIEC</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1690"></span><span>  </span><span id="local-6989586621679554645"><span class="annot"><span class="annottext">wrapFailed :: PredicateFailure PVBUMP -&gt; PredicateFailure UPIEC
</span><a href="#local-6989586621679554645"><span class="hs-identifier hs-var hs-var hs-var hs-var">wrapFailed</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PredicateFailure PVBUMP -&gt; PredicateFailure UPIEC
PredicateFailure PVBUMP -&gt; UpiecPredicateFailure
</span><a href="Byron.Spec.Ledger.Update.html#PVBUMPFailure"><span class="hs-identifier hs-var">PVBUMPFailure</span></a></span><span>
</span><span id="line-1691"></span><span>
</span><span id="line-1692"></span><span class="hs-comment">-- | Generate an optional update-proposal and a list of votes, given an update</span><span>
</span><span id="line-1693"></span><span class="hs-comment">-- environment and state.</span><span>
</span><span id="line-1694"></span><span class="hs-comment">--</span><span>
</span><span id="line-1695"></span><span class="hs-comment">-- The update proposal and votes need to be generated at the same time, since</span><span>
</span><span id="line-1696"></span><span class="hs-comment">-- this allow us to generate update votes for update proposals issued in the</span><span>
</span><span id="line-1697"></span><span class="hs-comment">-- same block as the votes.</span><span>
</span><span id="line-1698"></span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#updateProposalAndVotesGen"><span class="hs-identifier hs-type">updateProposalAndVotesGen</span></a></span><span>
</span><span id="line-1699"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIEnv"><span class="hs-identifier hs-type">UPIEnv</span></a></span><span>
</span><span id="line-1700"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIState"><span class="hs-identifier hs-type">UPIState</span></a></span><span>
</span><span id="line-1701"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Gen</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UProp"><span class="hs-identifier hs-type">UProp</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#Vote"><span class="hs-identifier hs-type">Vote</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1702"></span><span id="updateProposalAndVotesGen"><span class="annot"><span class="annottext">updateProposalAndVotesGen :: UPIEnv -&gt; UPIState -&gt; Gen (Maybe UProp, [Vote])
</span><a href="Byron.Spec.Ledger.Update.html#updateProposalAndVotesGen"><span class="hs-identifier hs-var hs-var">updateProposalAndVotesGen</span></a></span></span><span> </span><span id="local-6989586621679554643"><span class="annot"><span class="annottext">UPIEnv
</span><a href="#local-6989586621679554643"><span class="hs-identifier hs-var">upienv</span></a></span></span><span> </span><span id="local-6989586621679554642"><span class="annot"><span class="annottext">UPIState
</span><a href="#local-6989586621679554642"><span class="hs-identifier hs-var">upistate</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1703"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679554641"><span class="annot"><span class="annottext">rpus :: Map UpId (ProtVer, PParams)
</span><a href="#local-6989586621679554641"><span class="hs-identifier hs-var hs-var">rpus</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UPIState -&gt; Map UpId (ProtVer, PParams)
</span><a href="Byron.Spec.Ledger.Update.html#registeredProtocolUpdateProposals"><span class="hs-identifier hs-var">registeredProtocolUpdateProposals</span></a></span><span> </span><span class="annot"><span class="annottext">UPIState
</span><a href="#local-6989586621679554642"><span class="hs-identifier hs-var">upistate</span></a></span><span>
</span><span id="line-1704"></span><span>  </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Set UpId -&gt; Bool
forall a. Set a -&gt; Bool
</span><span class="hs-identifier hs-var">Set.null</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map UpId (ProtVer, PParams)
-&gt; Set (Domain (Map UpId (ProtVer, PParams)))
forall m. (Relation m, Ord (Domain m)) =&gt; m -&gt; Set (Domain m)
</span><a href="Byron.Spec.Ledger.Core.html#dom"><span class="hs-identifier hs-var">dom</span></a></span><span> </span><span class="annot"><span class="annottext">Map UpId (ProtVer, PParams)
</span><a href="#local-6989586621679554641"><span class="hs-identifier hs-var">rpus</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1705"></span><span>    </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Gen (Maybe UProp, [Vote])
</span><a href="#local-6989586621679554639"><span class="hs-identifier hs-var">generateUpdateProposalAndVotes</span></a></span><span>
</span><span id="line-1706"></span><span>    </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">[(Int, Gen (Maybe UProp, [Vote]))] -&gt; Gen (Maybe UProp, [Vote])
forall (m :: * -&gt; *) a. MonadGen m =&gt; [(Int, m a)] -&gt; m a
</span><span class="hs-identifier hs-var">Gen.frequency</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">5</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Gen (Maybe UProp, [Vote])
</span><a href="#local-6989586621679554638"><span class="hs-identifier hs-var">generateOnlyVotes</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1707"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Gen (Maybe UProp, [Vote])
</span><a href="#local-6989586621679554639"><span class="hs-identifier hs-var">generateUpdateProposalAndVotes</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1708"></span><span>                       </span><span class="hs-special">]</span><span>
</span><span id="line-1709"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1710"></span><span>    </span><span id="local-6989586621679554638"><span class="annot"><span class="annottext">generateOnlyVotes :: Gen (Maybe UProp, [Vote])
</span><a href="#local-6989586621679554638"><span class="hs-identifier hs-var hs-var">generateOnlyVotes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe UProp
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([Vote] -&gt; (Maybe UProp, [Vote]))
-&gt; GenT Identity [Vote] -&gt; Gen (Maybe UProp, [Vote])
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">SignalGenerator UPIVOTES
forall s. HasTrace s =&gt; SignalGenerator s
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-test-0.1.0.0/noopt/doc/html/small-steps-test/src"><span class="hs-identifier hs-var">sigGen</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIVOTES"><span class="hs-identifier hs-type">UPIVOTES</span></a></span><span> </span><span class="annot"><span class="annottext">UPIEnv
Environment UPIVOTES
</span><a href="#local-6989586621679554643"><span class="hs-identifier hs-var">upienv</span></a></span><span> </span><span class="annot"><span class="annottext">UPIState
State UPIVOTES
</span><a href="#local-6989586621679554642"><span class="hs-identifier hs-var">upistate</span></a></span><span>
</span><span id="line-1711"></span><span>    </span><span id="local-6989586621679554639"><span class="annot"><span class="annottext">generateUpdateProposalAndVotes :: Gen (Maybe UProp, [Vote])
</span><a href="#local-6989586621679554639"><span class="hs-identifier hs-var hs-var">generateUpdateProposalAndVotes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1712"></span><span>      </span><span id="local-6989586621679554637"><span class="annot"><span class="annottext">UProp
</span><a href="#local-6989586621679554637"><span class="hs-identifier hs-var">updateProposal</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SignalGenerator UPIREG
forall s. HasTrace s =&gt; SignalGenerator s
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-test-0.1.0.0/noopt/doc/html/small-steps-test/src"><span class="hs-identifier hs-var">sigGen</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIREG"><span class="hs-identifier hs-type">UPIREG</span></a></span><span> </span><span class="annot"><span class="annottext">UPIEnv
Environment UPIREG
</span><a href="#local-6989586621679554643"><span class="hs-identifier hs-var">upienv</span></a></span><span> </span><span class="annot"><span class="annottext">UPIState
State UPIREG
</span><a href="#local-6989586621679554642"><span class="hs-identifier hs-var">upistate</span></a></span><span>
</span><span id="line-1713"></span><span>      </span><span class="hs-comment">-- We want to have the possibility of generating votes for the proposal we</span><span>
</span><span id="line-1714"></span><span>      </span><span class="hs-comment">-- registered.</span><span>
</span><span id="line-1715"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">RuleContext 'Transition UPIREG
-&gt; Either [[PredicateFailure UPIREG]] (State UPIREG)
forall s (rtype :: RuleType).
(STS s, RuleTypeRep rtype, BaseM s ~ Identity) =&gt;
RuleContext rtype s -&gt; Either [[PredicateFailure s]] (State s)
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">applySTS</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIREG"><span class="hs-identifier hs-type">UPIREG</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Environment UPIREG, State UPIREG, Signal UPIREG) -&gt; TRC UPIREG
forall sts. (Environment sts, State sts, Signal sts) -&gt; TRC sts
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-0.1.0.0/noopt/doc/html/small-steps/src"><span class="hs-identifier hs-var">TRC</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UPIEnv
Environment UPIREG
</span><a href="#local-6989586621679554643"><span class="hs-identifier hs-var">upienv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">UPIState
State UPIREG
</span><a href="#local-6989586621679554642"><span class="hs-identifier hs-var">upistate</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Signal UPIREG
UProp
</span><a href="#local-6989586621679554637"><span class="hs-identifier hs-var">updateProposal</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1716"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span class="annot"><span class="annottext">[[PredicateFailure UPIREG]]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1717"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UProp -&gt; Maybe UProp
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">UProp
</span><a href="#local-6989586621679554637"><span class="hs-identifier hs-var">updateProposal</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-1718"></span><span>            </span><span class="annot"><span class="annottext">([Vote] -&gt; (Maybe UProp, [Vote]))
-&gt; GenT Identity [Vote] -&gt; Gen (Maybe UProp, [Vote])
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">SignalGenerator UPIVOTES
forall s. HasTrace s =&gt; SignalGenerator s
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-test-0.1.0.0/noopt/doc/html/small-steps-test/src"><span class="hs-identifier hs-var">sigGen</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIVOTES"><span class="hs-identifier hs-type">UPIVOTES</span></a></span><span> </span><span class="annot"><span class="annottext">UPIEnv
Environment UPIVOTES
</span><a href="#local-6989586621679554643"><span class="hs-identifier hs-var">upienv</span></a></span><span> </span><span class="annot"><span class="annottext">UPIState
State UPIVOTES
</span><a href="#local-6989586621679554642"><span class="hs-identifier hs-var">upistate</span></a></span><span>
</span><span id="line-1719"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679554635"><span class="annot"><span class="annottext">State UPIREG
</span><a href="#local-6989586621679554635"><span class="hs-identifier hs-var">upistateAfterRegistration</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1720"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UProp -&gt; Maybe UProp
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">UProp
</span><a href="#local-6989586621679554637"><span class="hs-identifier hs-var">updateProposal</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-1721"></span><span>            </span><span class="annot"><span class="annottext">([Vote] -&gt; (Maybe UProp, [Vote]))
-&gt; GenT Identity [Vote] -&gt; Gen (Maybe UProp, [Vote])
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">SignalGenerator UPIVOTES
forall s. HasTrace s =&gt; SignalGenerator s
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/small-steps-test-0.1.0.0/noopt/doc/html/small-steps-test/src"><span class="hs-identifier hs-var">sigGen</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIVOTES"><span class="hs-identifier hs-type">UPIVOTES</span></a></span><span> </span><span class="annot"><span class="annottext">UPIEnv
Environment UPIVOTES
</span><a href="#local-6989586621679554643"><span class="hs-identifier hs-var">upienv</span></a></span><span> </span><span class="annot"><span class="annottext">State UPIVOTES
State UPIREG
</span><a href="#local-6989586621679554635"><span class="hs-identifier hs-var">upistateAfterRegistration</span></a></span><span>
</span><span id="line-1722"></span><span>
</span><span id="line-1723"></span><span>
</span><span id="line-1724"></span><span class="hs-comment">-- | Generate an endorsement given an update environment and state.</span><span>
</span><span id="line-1725"></span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#protocolVersionEndorsementGen"><span class="hs-identifier hs-type">protocolVersionEndorsementGen</span></a></span><span>
</span><span id="line-1726"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIEnv"><span class="hs-identifier hs-type">UPIEnv</span></a></span><span>
</span><span id="line-1727"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIState"><span class="hs-identifier hs-type">UPIState</span></a></span><span>
</span><span id="line-1728"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Gen</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ProtVer"><span class="hs-identifier hs-type">ProtVer</span></a></span><span>
</span><span id="line-1729"></span><span id="protocolVersionEndorsementGen"><span class="annot"><span class="annottext">protocolVersionEndorsementGen :: UPIEnv -&gt; UPIState -&gt; GenT Identity ProtVer
</span><a href="Byron.Spec.Ledger.Update.html#protocolVersionEndorsementGen"><span class="hs-identifier hs-var hs-var">protocolVersionEndorsementGen</span></a></span></span><span> </span><span id="local-6989586621679554633"><span class="annot"><span class="annottext">UPIEnv
</span><a href="#local-6989586621679554633"><span class="hs-identifier hs-var">upienv</span></a></span></span><span> </span><span id="local-6989586621679554632"><span class="annot"><span class="annottext">UPIState
</span><a href="#local-6989586621679554632"><span class="hs-identifier hs-var">upistate</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1730"></span><span>  </span><span class="annot"><span class="annottext">ProtVer -&gt; Maybe ProtVer -&gt; ProtVer
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UPIState -&gt; ProtVer
</span><a href="Byron.Spec.Ledger.Update.html#protocolVersion"><span class="hs-identifier hs-var">protocolVersion</span></a></span><span> </span><span class="annot"><span class="annottext">UPIState
</span><a href="#local-6989586621679554632"><span class="hs-identifier hs-var">upistate</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1731"></span><span>    </span><span class="annot"><span class="annottext">(Maybe ProtVer -&gt; ProtVer)
-&gt; Gen (Maybe ProtVer) -&gt; GenT Identity ProtVer
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[(ProtVer, Set VKeyGenesis)] -&gt; Gen (Maybe ProtVer)
</span><a href="Byron.Spec.Ledger.Update.html#pickHighlyEndorsedProtocolVersion"><span class="hs-identifier hs-var">pickHighlyEndorsedProtocolVersion</span></a></span><span> </span><span class="annot"><span class="annottext">[(ProtVer, Set VKeyGenesis)]
</span><a href="#local-6989586621679554631"><span class="hs-identifier hs-var">endorsementsList</span></a></span><span>
</span><span id="line-1732"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1733"></span><span>    </span><span class="hs-comment">-- Generate a list of protocol version endorsements. For this we look at the</span><span>
</span><span id="line-1734"></span><span>    </span><span class="hs-comment">-- current endorsements, and confirmed and stable proposals.</span><span>
</span><span id="line-1735"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-1736"></span><span>    </span><span class="hs-comment">-- If there are no endorsements, then the confirmed and stable proposals</span><span>
</span><span id="line-1737"></span><span>    </span><span class="hs-comment">-- provide fresh protocol versions that can be endorsed.</span><span>
</span><span id="line-1738"></span><span>    </span><span class="annot"><a href="#local-6989586621679554631"><span class="hs-identifier hs-type">endorsementsList</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ProtVer"><span class="hs-identifier hs-type">ProtVer</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">Core.VKeyGenesis</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1739"></span><span>    </span><span id="local-6989586621679554631"><span class="annot"><span class="annottext">endorsementsList :: [(ProtVer, Set VKeyGenesis)]
</span><a href="#local-6989586621679554631"><span class="hs-identifier hs-var hs-var">endorsementsList</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map ProtVer (Set VKeyGenesis)
</span><a href="#local-6989586621679554630"><span class="hs-identifier hs-var">endorsementsMap</span></a></span><span> </span><span class="annot"><span class="annottext">Map ProtVer (Set VKeyGenesis)
-&gt; Map ProtVer (Set VKeyGenesis) -&gt; Map ProtVer (Set VKeyGenesis)
forall k a. Ord k =&gt; Map k a -&gt; Map k a -&gt; Map k a
</span><span class="hs-operator hs-var">`Map.union`</span></span><span> </span><span class="annot"><span class="annottext">Map ProtVer (Set VKeyGenesis)
</span><a href="#local-6989586621679554628"><span class="hs-identifier hs-var">emptyEndorsements</span></a></span><span>
</span><span id="line-1740"></span><span>                     </span><span class="annot"><span class="annottext">Map ProtVer (Set VKeyGenesis)
-&gt; (Map ProtVer (Set VKeyGenesis) -&gt; [(ProtVer, Set VKeyGenesis)])
-&gt; [(ProtVer, Set VKeyGenesis)]
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">Map ProtVer (Set VKeyGenesis) -&gt; [(ProtVer, Set VKeyGenesis)]
forall k a. Map k a -&gt; [(k, a)]
</span><span class="hs-identifier hs-var">Map.toList</span></span><span>
</span><span id="line-1741"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-1742"></span><span>        </span><span class="annot"><a href="#local-6989586621679554628"><span class="hs-identifier hs-type">emptyEndorsements</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ProtVer"><span class="hs-identifier hs-type">ProtVer</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">Core.VKeyGenesis</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1743"></span><span>        </span><span id="local-6989586621679554628"><span class="annot"><span class="annottext">emptyEndorsements :: Map ProtVer (Set VKeyGenesis)
</span><a href="#local-6989586621679554628"><span class="hs-identifier hs-var hs-var">emptyEndorsements</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[ProtVer] -&gt; [Set VKeyGenesis] -&gt; [(ProtVer, Set VKeyGenesis)]
forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><span class="hs-identifier hs-var">zip</span></span><span> </span><span class="annot"><span class="annottext">[ProtVer]
</span><a href="#local-6989586621679554627"><span class="hs-identifier hs-var">stableAndConfirmedVersions</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Set VKeyGenesis -&gt; [Set VKeyGenesis]
forall a. a -&gt; [a]
</span><span class="hs-identifier hs-var">repeat</span></span><span> </span><span class="annot"><span class="annottext">Set VKeyGenesis
forall a. Set a
</span><span class="hs-identifier hs-var">Set.empty</span></span><span class="hs-special">)</span><span>
</span><span id="line-1744"></span><span>                          </span><span class="annot"><span class="annottext">[(ProtVer, Set VKeyGenesis)]
-&gt; ([(ProtVer, Set VKeyGenesis)] -&gt; Map ProtVer (Set VKeyGenesis))
-&gt; Map ProtVer (Set VKeyGenesis)
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">[(ProtVer, Set VKeyGenesis)] -&gt; Map ProtVer (Set VKeyGenesis)
forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.fromList</span></span><span>
</span><span id="line-1745"></span><span>          </span><span class="hs-keyword">where</span><span>
</span><span id="line-1746"></span><span>            </span><span class="annot"><a href="#local-6989586621679554627"><span class="hs-identifier hs-type">stableAndConfirmedVersions</span></a></span><span>
</span><span id="line-1747"></span><span>              </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ProtVer"><span class="hs-identifier hs-type">ProtVer</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1748"></span><span>            </span><span id="local-6989586621679554627"><span class="annot"><span class="annottext">stableAndConfirmedVersions :: [ProtVer]
</span><a href="#local-6989586621679554627"><span class="hs-identifier hs-var hs-var">stableAndConfirmedVersions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set (Domain (Map UpId (ProtVer, PParams)))
Set (Domain (Map UpId Slot))
</span><a href="#local-6989586621679554626"><span class="hs-identifier hs-var">stableAndConfirmedProposalIDs</span></a></span><span> </span><span class="annot"><span class="annottext">Set (Domain (Map UpId (ProtVer, PParams)))
-&gt; Map UpId (ProtVer, PParams) -&gt; Map UpId (ProtVer, PParams)
forall m (f :: * -&gt; *).
(Relation m, Ord (Domain m), Foldable f) =&gt;
f (Domain m) -&gt; m -&gt; m
</span><a href="Byron.Spec.Ledger.Core.html#%25C1"><span class="hs-operator hs-var">&#9665;</span></a></span><span> </span><span class="annot"><span class="annottext">Map UpId (ProtVer, PParams)
</span><a href="#local-6989586621679554625"><span class="hs-identifier hs-var">rpus</span></a></span><span>
</span><span id="line-1749"></span><span>                                       </span><span class="annot"><span class="annottext">Map UpId (ProtVer, PParams)
-&gt; (Map UpId (ProtVer, PParams) -&gt; [(ProtVer, PParams)])
-&gt; [(ProtVer, PParams)]
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">Map UpId (ProtVer, PParams) -&gt; [(ProtVer, PParams)]
forall k a. Map k a -&gt; [a]
</span><span class="hs-identifier hs-var">Map.elems</span></span><span>
</span><span id="line-1750"></span><span>                                       </span><span class="annot"><span class="annottext">[(ProtVer, PParams)]
-&gt; ([(ProtVer, PParams)] -&gt; [ProtVer]) -&gt; [ProtVer]
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">((ProtVer, PParams) -&gt; ProtVer)
-&gt; [(ProtVer, PParams)] -&gt; [ProtVer]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">(ProtVer, PParams) -&gt; ProtVer
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span>
</span><span id="line-1751"></span><span>              </span><span class="hs-keyword">where</span><span>
</span><span id="line-1752"></span><span>                </span><span id="local-6989586621679554626"><span class="annot"><span class="annottext">stableAndConfirmedProposalIDs :: Set (Domain (Map UpId Slot))
</span><a href="#local-6989586621679554626"><span class="hs-identifier hs-var hs-var">stableAndConfirmedProposalIDs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1753"></span><span>                  </span><span class="annot"><span class="annottext">Map UpId Slot -&gt; Set (Domain (Map UpId Slot))
forall m. (Relation m, Ord (Domain m)) =&gt; m -&gt; Set (Domain m)
</span><a href="Byron.Spec.Ledger.Core.html#dom"><span class="hs-identifier hs-var">dom</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UPIState -&gt; Map UpId Slot
</span><a href="Byron.Spec.Ledger.Update.html#confirmedProposals"><span class="hs-identifier hs-var">confirmedProposals</span></a></span><span> </span><span class="annot"><span class="annottext">UPIState
</span><a href="#local-6989586621679554632"><span class="hs-identifier hs-var">upistate</span></a></span><span> </span><span class="annot"><span class="annottext">Map UpId Slot -&gt; Range (Map UpId Slot) -&gt; Map UpId Slot
forall m. (Relation m, Ord (Range m)) =&gt; m -&gt; Range m -&gt; m
</span><a href="Byron.Spec.Ledger.Core.html#%25B7%3C%3D"><span class="hs-operator hs-var">&#9655;&lt;=</span></a></span><span> </span><span class="annot"><span class="annottext">Slot
</span><a href="#local-6989586621679554624"><span class="hs-identifier hs-var">sn</span></a></span><span>  </span><span class="annot"><span class="annottext">Slot -&gt; SlotCount -&gt; Slot
</span><a href="Byron.Spec.Ledger.Core.html#-."><span class="hs-operator hs-var">-.</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">4</span></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; BlockCount -&gt; SlotCount
</span><a href="Byron.Spec.Ledger.Core.html#%2A."><span class="hs-operator hs-var">*.</span></a></span><span> </span><span class="annot"><span class="annottext">BlockCount
</span><a href="#local-6989586621679554623"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1754"></span><span>                  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1755"></span><span>                    </span><span class="hs-special">(</span><span id="local-6989586621679554624"><span class="annot"><span class="annottext">Slot
</span><a href="#local-6989586621679554624"><span class="hs-identifier hs-var">sn</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bimap VKeyGenesis VKey
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679554623"><span class="annot"><span class="annottext">BlockCount
</span><a href="#local-6989586621679554623"><span class="hs-identifier hs-var">k</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UPIEnv
</span><a href="#local-6989586621679554633"><span class="hs-identifier hs-var">upienv</span></a></span><span>
</span><span id="line-1756"></span><span>
</span><span id="line-1757"></span><span>                </span><span id="local-6989586621679554625"><span class="annot"><span class="annottext">rpus :: Map UpId (ProtVer, PParams)
</span><a href="#local-6989586621679554625"><span class="hs-identifier hs-var hs-var">rpus</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UPIState -&gt; Map UpId (ProtVer, PParams)
</span><a href="Byron.Spec.Ledger.Update.html#registeredProtocolUpdateProposals"><span class="hs-identifier hs-var">registeredProtocolUpdateProposals</span></a></span><span> </span><span class="annot"><span class="annottext">UPIState
</span><a href="#local-6989586621679554632"><span class="hs-identifier hs-var">upistate</span></a></span><span>
</span><span id="line-1758"></span><span>
</span><span id="line-1759"></span><span>        </span><span class="annot"><a href="#local-6989586621679554630"><span class="hs-identifier hs-type">endorsementsMap</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#ProtVer"><span class="hs-identifier hs-type">ProtVer</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">Core.VKeyGenesis</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1760"></span><span>        </span><span id="local-6989586621679554630"><span class="annot"><span class="annottext">endorsementsMap :: Map ProtVer (Set VKeyGenesis)
</span><a href="#local-6989586621679554630"><span class="hs-identifier hs-var hs-var">endorsementsMap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set (ProtVer, VKeyGenesis) -&gt; [(ProtVer, VKeyGenesis)]
forall a. Set a -&gt; [a]
</span><span class="hs-identifier hs-var">Set.toList</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UPIState -&gt; Set (ProtVer, VKeyGenesis)
</span><a href="Byron.Spec.Ledger.Update.html#endorsements"><span class="hs-identifier hs-var">endorsements</span></a></span><span> </span><span class="annot"><span class="annottext">UPIState
</span><a href="#local-6989586621679554632"><span class="hs-identifier hs-var">upistate</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1761"></span><span>                        </span><span class="annot"><span class="annottext">[(ProtVer, VKeyGenesis)]
-&gt; ([(ProtVer, VKeyGenesis)] -&gt; [(ProtVer, Set VKeyGenesis)])
-&gt; [(ProtVer, Set VKeyGenesis)]
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">((ProtVer, VKeyGenesis) -&gt; (ProtVer, Set VKeyGenesis))
-&gt; [(ProtVer, VKeyGenesis)] -&gt; [(ProtVer, Set VKeyGenesis)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(VKeyGenesis -&gt; Set VKeyGenesis)
-&gt; (ProtVer, VKeyGenesis) -&gt; (ProtVer, Set VKeyGenesis)
forall (a :: * -&gt; * -&gt; *) b c d.
Arrow a =&gt;
a b c -&gt; a (d, b) (d, c)
</span><span class="hs-identifier hs-var">second</span></span><span> </span><span class="annot"><span class="annottext">VKeyGenesis -&gt; Set VKeyGenesis
forall a. a -&gt; Set a
</span><span class="hs-identifier hs-var">Set.singleton</span></span><span class="hs-special">)</span><span>
</span><span id="line-1762"></span><span>                        </span><span class="annot"><span class="annottext">[(ProtVer, Set VKeyGenesis)]
-&gt; ([(ProtVer, Set VKeyGenesis)] -&gt; Map ProtVer (Set VKeyGenesis))
-&gt; Map ProtVer (Set VKeyGenesis)
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(Set VKeyGenesis -&gt; Set VKeyGenesis -&gt; Set VKeyGenesis)
-&gt; [(ProtVer, Set VKeyGenesis)] -&gt; Map ProtVer (Set VKeyGenesis)
forall k a. Ord k =&gt; (a -&gt; a -&gt; a) -&gt; [(k, a)] -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.fromListWith</span></span><span> </span><span class="annot"><span class="annottext">Set VKeyGenesis -&gt; Set VKeyGenesis -&gt; Set VKeyGenesis
forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Set a
</span><span class="hs-identifier hs-var">Set.union</span></span><span>
</span><span id="line-1763"></span><span>
</span><span id="line-1764"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-1765"></span><span class="hs-comment">-- Goblins instances</span><span>
</span><span id="line-1766"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-1767"></span><span>
</span><span id="line-1768"></span><span id="local-6989586621679554616"><span id="local-6989586621679554618"><span id="local-6989586621679554622"><span class="hs-identifier">deriveGoblin</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">ApVer</span></span></span></span><span>
</span><span id="line-1769"></span><span id="local-6989586621679554606"><span id="local-6989586621679554608"><span id="local-6989586621679554612"><span class="hs-identifier">deriveGoblin</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">ApName</span></span></span></span><span>
</span><span id="line-1770"></span><span id="local-6989586621679554599"><span id="local-6989586621679554601"><span id="local-6989586621679554605"><span class="hs-identifier">deriveGoblin</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">Metadata</span></span></span></span><span>
</span><span id="line-1771"></span><span id="local-6989586621679554592"><span id="local-6989586621679554594"><span id="local-6989586621679554598"><span class="hs-identifier">deriveGoblin</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">ProtVer</span></span></span></span><span>
</span><span id="line-1772"></span><span id="local-6989586621679554585"><span id="local-6989586621679554587"><span id="local-6989586621679554591"><span class="hs-identifier">deriveGoblin</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">PParams</span></span></span></span><span>
</span><span id="line-1773"></span><span id="local-6989586621679554578"><span id="local-6989586621679554580"><span id="local-6989586621679554584"><span class="hs-identifier">deriveGoblin</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">SwVer</span></span></span></span><span>
</span><span id="line-1774"></span><span id="local-6989586621679554571"><span id="local-6989586621679554573"><span id="local-6989586621679554577"><span class="hs-identifier">deriveGoblin</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">UpId</span></span></span></span><span>
</span><span id="line-1775"></span><span id="local-6989586621679554564"><span id="local-6989586621679554566"><span id="local-6989586621679554570"><span class="hs-identifier">deriveGoblin</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">UProp</span></span></span></span><span>
</span><span id="line-1776"></span><span id="local-6989586621679554557"><span id="local-6989586621679554559"><span id="local-6989586621679554563"><span class="hs-identifier">deriveGoblin</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">Vote</span></span></span></span><span>
</span><span id="line-1777"></span><span>
</span><span id="line-1778"></span><span id="local-6989586621679554556"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/goblins-0.2.0.0/noopt/doc/html/goblins/src"><span class="hs-identifier hs-type">GeneOps</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679554556"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/goblins-0.2.0.0/noopt/doc/html/goblins/src"><span class="hs-identifier hs-type">Goblin</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679554556"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#FactorA"><span class="hs-identifier hs-type">FactorA</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1779"></span><span>  </span><span id="local-6989586621679554551"><span class="annot"><span class="annottext">tinker :: GenT Identity FactorA -&gt; TinkerM g (GenT Identity FactorA)
</span><a href="#local-6989586621679554551"><span class="hs-identifier hs-var hs-var hs-var hs-var">tinker</span></a></span></span><span> </span><span id="local-6989586621679554550"><span class="annot"><span class="annottext">GenT Identity FactorA
</span><a href="#local-6989586621679554550"><span class="hs-identifier hs-var">gen</span></a></span></span><span>
</span><span id="line-1780"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TinkerM g (GenT Identity FactorA)
-&gt; TinkerM g (GenT Identity FactorA)
forall g a.
(Goblin g a, AddShrinks a) =&gt;
TinkerM g (Gen a) -&gt; TinkerM g (Gen a)
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/goblins-0.2.0.0/noopt/doc/html/goblins/src"><span class="hs-identifier hs-var">tinkerRummagedOrConjureOrSave</span></a></span><span>
</span><span id="line-1781"></span><span>        </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679554549"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679554549"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; FactorA
</span><a href="Byron.Spec.Ledger.Update.html#FactorA"><span class="hs-identifier hs-var">FactorA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679554549"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Integral a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">`mod`</span></span><span> </span><span class="annot"><span class="annottext">Lovelace -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Lovelace
</span><a href="Byron.Spec.Ledger.Core.html#lovelaceCap"><span class="hs-identifier hs-var">GP.lovelaceCap</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1782"></span><span>           </span><span class="annot"><span class="annottext">(Int -&gt; FactorA)
-&gt; StateT (GoblinData g) Identity (GenT Identity Int)
-&gt; TinkerM g (GenT Identity FactorA)
forall (f :: * -&gt; *) (g :: * -&gt; *) a b.
(Functor f, Functor g) =&gt;
(a -&gt; b) -&gt; f (g a) -&gt; f (g b)
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/goblins-0.2.0.0/noopt/doc/html/goblins/src"><span class="hs-operator hs-var">&lt;$$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">GenT Identity Int
-&gt; StateT (GoblinData g) Identity (GenT Identity Int)
forall g a. Goblin g a =&gt; Gen a -&gt; TinkerM g (Gen a)
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/goblins-0.2.0.0/noopt/doc/html/goblins/src"><span class="hs-identifier hs-var">tinker</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#FactorA"><span class="hs-identifier hs-type">FactorA</span></a></span><span> </span><span id="local-6989586621679554546"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679554546"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679554546"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(FactorA -&gt; Int) -&gt; GenT Identity FactorA -&gt; GenT Identity Int
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">GenT Identity FactorA
</span><a href="#local-6989586621679554550"><span class="hs-identifier hs-var">gen</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1783"></span><span>  </span><span id="local-6989586621679554545"><span class="annot"><span class="annottext">conjure :: TinkerM g FactorA
</span><a href="#local-6989586621679554545"><span class="hs-identifier hs-var hs-var hs-var hs-var">conjure</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FactorA -&gt; TinkerM g FactorA
forall g a. Typeable a =&gt; a -&gt; TinkerM g a
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/goblins-0.2.0.0/noopt/doc/html/goblins/src"><span class="hs-identifier hs-var">saveInBagOfTricks</span></a></span><span> </span><span class="annot"><span class="annottext">(FactorA -&gt; TinkerM g FactorA)
-&gt; TinkerM g FactorA -&gt; TinkerM g FactorA
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; FactorA
</span><a href="Byron.Spec.Ledger.Update.html#FactorA"><span class="hs-identifier hs-var">FactorA</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; FactorA) -&gt; (Int -&gt; Int) -&gt; Int -&gt; FactorA
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Integral a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">`mod`</span></span><span> </span><span class="annot"><span class="annottext">Lovelace -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Lovelace
</span><a href="Byron.Spec.Ledger.Core.html#lovelaceCap"><span class="hs-identifier hs-var">GP.lovelaceCap</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1784"></span><span>    </span><span class="annot"><span class="annottext">(Int -&gt; FactorA)
-&gt; StateT (GoblinData g) Identity Int -&gt; TinkerM g FactorA
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">StateT (GoblinData g) Identity Int
forall g a. Goblin g a =&gt; TinkerM g a
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/goblins-0.2.0.0/noopt/doc/html/goblins/src"><span class="hs-identifier hs-var">conjure</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1785"></span><span>
</span><span id="line-1786"></span><span id="local-6989586621679554543"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/goblins-0.2.0.0/noopt/doc/html/goblins/src"><span class="hs-identifier hs-type">GeneOps</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679554543"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/goblins-0.2.0.0/noopt/doc/html/goblins/src"><span class="hs-identifier hs-type">Goblin</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679554543"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#FactorB"><span class="hs-identifier hs-type">FactorB</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1787"></span><span>  </span><span id="local-6989586621679554538"><span class="annot"><span class="annottext">tinker :: GenT Identity FactorB -&gt; TinkerM g (GenT Identity FactorB)
</span><a href="#local-6989586621679554538"><span class="hs-identifier hs-var hs-var hs-var hs-var">tinker</span></a></span></span><span> </span><span id="local-6989586621679554537"><span class="annot"><span class="annottext">GenT Identity FactorB
</span><a href="#local-6989586621679554537"><span class="hs-identifier hs-var">gen</span></a></span></span><span>
</span><span id="line-1788"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TinkerM g (GenT Identity FactorB)
-&gt; TinkerM g (GenT Identity FactorB)
forall g a.
(Goblin g a, AddShrinks a) =&gt;
TinkerM g (Gen a) -&gt; TinkerM g (Gen a)
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/goblins-0.2.0.0/noopt/doc/html/goblins/src"><span class="hs-identifier hs-var">tinkerRummagedOrConjureOrSave</span></a></span><span>
</span><span id="line-1789"></span><span>        </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679554536"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679554536"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; FactorB
</span><a href="Byron.Spec.Ledger.Update.html#FactorB"><span class="hs-identifier hs-var">FactorB</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679554536"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Integral a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">`mod`</span></span><span> </span><span class="annot"><span class="annottext">Lovelace -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Lovelace
</span><a href="Byron.Spec.Ledger.Core.html#lovelaceCap"><span class="hs-identifier hs-var">GP.lovelaceCap</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1790"></span><span>           </span><span class="annot"><span class="annottext">(Int -&gt; FactorB)
-&gt; StateT (GoblinData g) Identity (GenT Identity Int)
-&gt; TinkerM g (GenT Identity FactorB)
forall (f :: * -&gt; *) (g :: * -&gt; *) a b.
(Functor f, Functor g) =&gt;
(a -&gt; b) -&gt; f (g a) -&gt; f (g b)
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/goblins-0.2.0.0/noopt/doc/html/goblins/src"><span class="hs-operator hs-var">&lt;$$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">GenT Identity Int
-&gt; StateT (GoblinData g) Identity (GenT Identity Int)
forall g a. Goblin g a =&gt; Gen a -&gt; TinkerM g (Gen a)
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/goblins-0.2.0.0/noopt/doc/html/goblins/src"><span class="hs-identifier hs-var">tinker</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#FactorB"><span class="hs-identifier hs-type">FactorB</span></a></span><span> </span><span id="local-6989586621679554535"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679554535"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679554535"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(FactorB -&gt; Int) -&gt; GenT Identity FactorB -&gt; GenT Identity Int
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">GenT Identity FactorB
</span><a href="#local-6989586621679554537"><span class="hs-identifier hs-var">gen</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1791"></span><span>  </span><span id="local-6989586621679554534"><span class="annot"><span class="annottext">conjure :: TinkerM g FactorB
</span><a href="#local-6989586621679554534"><span class="hs-identifier hs-var hs-var hs-var hs-var">conjure</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FactorB -&gt; TinkerM g FactorB
forall g a. Typeable a =&gt; a -&gt; TinkerM g a
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/goblins-0.2.0.0/noopt/doc/html/goblins/src"><span class="hs-identifier hs-var">saveInBagOfTricks</span></a></span><span> </span><span class="annot"><span class="annottext">(FactorB -&gt; TinkerM g FactorB)
-&gt; TinkerM g FactorB -&gt; TinkerM g FactorB
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; FactorB
</span><a href="Byron.Spec.Ledger.Update.html#FactorB"><span class="hs-identifier hs-var">FactorB</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; FactorB) -&gt; (Int -&gt; Int) -&gt; Int -&gt; FactorB
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Integral a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">`mod`</span></span><span> </span><span class="annot"><span class="annottext">Lovelace -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Lovelace
</span><a href="Byron.Spec.Ledger.Core.html#lovelaceCap"><span class="hs-identifier hs-var">GP.lovelaceCap</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1792"></span><span>    </span><span class="annot"><span class="annottext">(Int -&gt; FactorB)
-&gt; StateT (GoblinData g) Identity Int -&gt; TinkerM g FactorB
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">StateT (GoblinData g) Identity Int
forall g a. Goblin g a =&gt; TinkerM g a
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/goblins-0.2.0.0/noopt/doc/html/goblins/src"><span class="hs-identifier hs-var">conjure</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1793"></span><span>
</span><span id="line-1794"></span><span id="local-6989586621679554533"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/goblins-0.2.0.0/noopt/doc/html/goblins/src"><span class="hs-identifier hs-type">GeneOps</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679554533"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/goblins-0.2.0.0/noopt/doc/html/goblins/src"><span class="hs-identifier hs-type">Goblin</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679554533"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#BkSgnCntT"><span class="hs-identifier hs-type">BkSgnCntT</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1795"></span><span>  </span><span id="local-6989586621679554528"><span class="annot"><span class="annottext">tinker :: GenT Identity BkSgnCntT -&gt; TinkerM g (GenT Identity BkSgnCntT)
</span><a href="#local-6989586621679554528"><span class="hs-identifier hs-var hs-var hs-var hs-var">tinker</span></a></span></span><span> </span><span class="annot"><span class="annottext">GenT Identity BkSgnCntT
</span><span class="hs-identifier">_</span></span><span>
</span><span id="line-1796"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BkSgnCntT -&gt; GenT Identity BkSgnCntT
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(BkSgnCntT -&gt; GenT Identity BkSgnCntT)
-&gt; TinkerM g BkSgnCntT -&gt; TinkerM g (GenT Identity BkSgnCntT)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">TinkerM g BkSgnCntT
forall g a. Goblin g a =&gt; TinkerM g a
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/goblins-0.2.0.0/noopt/doc/html/goblins/src"><span class="hs-identifier hs-var">conjure</span></a></span><span>
</span><span id="line-1797"></span><span>  </span><span id="local-6989586621679554527"><span class="annot"><span class="annottext">conjure :: TinkerM g BkSgnCntT
</span><a href="#local-6989586621679554527"><span class="hs-identifier hs-var hs-var hs-var hs-var">conjure</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BkSgnCntT -&gt; TinkerM g BkSgnCntT
forall g a. Typeable a =&gt; a -&gt; TinkerM g a
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/goblins-0.2.0.0/noopt/doc/html/goblins/src"><span class="hs-identifier hs-var">saveInBagOfTricks</span></a></span><span> </span><span class="annot"><span class="annottext">(BkSgnCntT -&gt; TinkerM g BkSgnCntT)
-&gt; TinkerM g BkSgnCntT -&gt; TinkerM g BkSgnCntT
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1798"></span><span>    </span><span id="local-6989586621679554526"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679554526"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Int -&gt; TinkerM g Int
forall g. GeneOps g =&gt; Int -&gt; TinkerM g Int
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/goblins-0.2.0.0/noopt/doc/html/goblins/src"><span class="hs-identifier hs-var">transcribeGenesAsInt</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">100</span></span><span>
</span><span id="line-1799"></span><span>    </span><span class="annot"><span class="annottext">BkSgnCntT -&gt; TinkerM g BkSgnCntT
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Double -&gt; BkSgnCntT
</span><a href="Byron.Spec.Ledger.Update.html#BkSgnCntT"><span class="hs-identifier hs-var">BkSgnCntT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Double
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679554526"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Double -&gt; Double -&gt; Double
forall a. Fractional a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">/</span></span><span> </span><span class="annot"><span class="annottext">Double
</span><span class="hs-number">100</span></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-1800"></span><span>
</span><span id="line-1801"></span><span id="local-6989586621679554524"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/goblins-0.2.0.0/noopt/doc/html/goblins/src"><span class="hs-identifier hs-type">GeneOps</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679554524"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/goblins-0.2.0.0/noopt/doc/html/goblins/src"><span class="hs-identifier hs-type">Goblin</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679554524"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UpAdptThd"><span class="hs-identifier hs-type">UpAdptThd</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1802"></span><span>  </span><span id="local-6989586621679554519"><span class="annot"><span class="annottext">tinker :: GenT Identity UpAdptThd -&gt; TinkerM g (GenT Identity UpAdptThd)
</span><a href="#local-6989586621679554519"><span class="hs-identifier hs-var hs-var hs-var hs-var">tinker</span></a></span></span><span> </span><span class="annot"><span class="annottext">GenT Identity UpAdptThd
</span><span class="hs-identifier">_</span></span><span>
</span><span id="line-1803"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UpAdptThd -&gt; GenT Identity UpAdptThd
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(UpAdptThd -&gt; GenT Identity UpAdptThd)
-&gt; TinkerM g UpAdptThd -&gt; TinkerM g (GenT Identity UpAdptThd)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">TinkerM g UpAdptThd
forall g a. Goblin g a =&gt; TinkerM g a
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/goblins-0.2.0.0/noopt/doc/html/goblins/src"><span class="hs-identifier hs-var">conjure</span></a></span><span>
</span><span id="line-1804"></span><span>  </span><span id="local-6989586621679554518"><span class="annot"><span class="annottext">conjure :: TinkerM g UpAdptThd
</span><a href="#local-6989586621679554518"><span class="hs-identifier hs-var hs-var hs-var hs-var">conjure</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UpAdptThd -&gt; TinkerM g UpAdptThd
forall g a. Typeable a =&gt; a -&gt; TinkerM g a
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/goblins-0.2.0.0/noopt/doc/html/goblins/src"><span class="hs-identifier hs-var">saveInBagOfTricks</span></a></span><span> </span><span class="annot"><span class="annottext">(UpAdptThd -&gt; TinkerM g UpAdptThd)
-&gt; TinkerM g UpAdptThd -&gt; TinkerM g UpAdptThd
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1805"></span><span>    </span><span id="local-6989586621679554517"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679554517"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Int -&gt; TinkerM g Int
forall g. GeneOps g =&gt; Int -&gt; TinkerM g Int
</span><a href="../file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.2/goblins-0.2.0.0/noopt/doc/html/goblins/src"><span class="hs-identifier hs-var">transcribeGenesAsInt</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">100</span></span><span>
</span><span id="line-1806"></span><span>    </span><span class="annot"><span class="annottext">UpAdptThd -&gt; TinkerM g UpAdptThd
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Double -&gt; UpAdptThd
</span><a href="Byron.Spec.Ledger.Update.html#UpAdptThd"><span class="hs-identifier hs-var">UpAdptThd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Double
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679554517"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Double -&gt; Double -&gt; Double
forall a. Fractional a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">/</span></span><span> </span><span class="annot"><span class="annottext">Double
</span><span class="hs-number">100</span></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-1807"></span><span>
</span><span id="line-1808"></span><span>
</span><span id="line-1809"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-1810"></span><span class="hs-comment">-- AddShrinks instances</span><span>
</span><span id="line-1811"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-1812"></span><span>
</span><span id="line-1813"></span><span id="local-6989586621679554515"><span class="hs-identifier">deriveAddShrinks</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">ApName</span></span><span>
</span><span id="line-1814"></span><span id="local-6989586621679554511"><span class="hs-identifier">deriveAddShrinks</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">ApVer</span></span><span>
</span><span id="line-1815"></span><span id="local-6989586621679554509"><span class="hs-identifier">deriveAddShrinks</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">BkSgnCntT</span></span><span>
</span><span id="line-1816"></span><span id="local-6989586621679554507"><span class="hs-identifier">deriveAddShrinks</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">FactorA</span></span><span>
</span><span id="line-1817"></span><span id="local-6989586621679554505"><span class="hs-identifier">deriveAddShrinks</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">FactorB</span></span><span>
</span><span id="line-1818"></span><span id="local-6989586621679554503"><span class="hs-identifier">deriveAddShrinks</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">Metadata</span></span><span>
</span><span id="line-1819"></span><span id="local-6989586621679554501"><span class="hs-identifier">deriveAddShrinks</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">PParams</span></span><span>
</span><span id="line-1820"></span><span id="local-6989586621679554499"><span class="hs-identifier">deriveAddShrinks</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">ProtVer</span></span><span>
</span><span id="line-1821"></span><span id="local-6989586621679554497"><span class="hs-identifier">deriveAddShrinks</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">SwVer</span></span><span>
</span><span id="line-1822"></span><span id="local-6989586621679554495"><span class="hs-identifier">deriveAddShrinks</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">UpAdptThd</span></span><span>
</span><span id="line-1823"></span><span id="local-6989586621679554493"><span class="hs-identifier">deriveAddShrinks</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">UpId</span></span><span>
</span><span id="line-1824"></span><span id="local-6989586621679554491"><span class="hs-identifier">deriveAddShrinks</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">UProp</span></span><span>
</span><span id="line-1825"></span><span id="local-6989586621679554489"><span class="hs-identifier">deriveAddShrinks</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">Vote</span></span><span>
</span><span id="line-1826"></span><span>
</span><span id="line-1827"></span><span>
</span><span id="line-1828"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-1829"></span><span class="hs-comment">-- SeedGoblin instances</span><span>
</span><span id="line-1830"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-1831"></span><span>
</span><span id="line-1832"></span><span id="local-6989586621679554487"><span class="hs-identifier">deriveSeedGoblin</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">ApName</span></span><span>
</span><span id="line-1833"></span><span id="local-6989586621679554483"><span class="hs-identifier">deriveSeedGoblin</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">ApVer</span></span><span>
</span><span id="line-1834"></span><span id="local-6989586621679554481"><span class="hs-identifier">deriveSeedGoblin</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">BkSgnCntT</span></span><span>
</span><span id="line-1835"></span><span id="local-6989586621679554479"><span class="hs-identifier">deriveSeedGoblin</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">FactorA</span></span><span>
</span><span id="line-1836"></span><span id="local-6989586621679554477"><span class="hs-identifier">deriveSeedGoblin</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">FactorB</span></span><span>
</span><span id="line-1837"></span><span id="local-6989586621679554475"><span class="hs-identifier">deriveSeedGoblin</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">SwVer</span></span><span>
</span><span id="line-1838"></span><span id="local-6989586621679554473"><span class="hs-identifier">deriveSeedGoblin</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">PParams</span></span><span>
</span><span id="line-1839"></span><span id="local-6989586621679554471"><span class="hs-identifier">deriveSeedGoblin</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">ProtVer</span></span><span>
</span><span id="line-1840"></span><span id="local-6989586621679554469"><span class="hs-identifier">deriveSeedGoblin</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">Metadata</span></span><span>
</span><span id="line-1841"></span><span id="local-6989586621679554467"><span class="hs-identifier">deriveSeedGoblin</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">UpAdptThd</span></span><span>
</span><span id="line-1842"></span><span id="local-6989586621679554465"><span class="hs-identifier">deriveSeedGoblin</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">UpId</span></span><span>
</span><span id="line-1843"></span><span>
</span><span id="line-1844"></span><span>
</span><span id="line-1845"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-1846"></span><span class="hs-comment">-- GoblinData &amp; goblin-tinkered SignalGenerators</span><span>
</span><span id="line-1847"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-1848"></span><span>
</span><span id="line-1849"></span><span id="goblinGensUPIREG"><span id="goblinGen_UPIREG_UPREGFailure_UPVFailure_UPSVVFailure_InvalidSystemTags"><span id="goblinData_UPIREG_UPREGFailure_UPVFailure_UPSVVFailure_InvalidSystemTags"><span id="goblinGen_UPIREG_UPREGFailure_UPVFailure_UPSVVFailure_InvalidApplicationName"><span id="goblinData_UPIREG_UPREGFailure_UPVFailure_UPSVVFailure_InvalidApplicationName"><span id="goblinGen_UPIREG_UPREGFailure_UPVFailure_UPSVVFailure_CannotFollowSv"><span id="goblinData_UPIREG_UPREGFailure_UPVFailure_UPSVVFailure_CannotFollowSv"><span id="goblinGen_UPIREG_UPREGFailure_UPVFailure_UPSVVFailure_AlreadyProposedSv"><span id="goblinData_UPIREG_UPREGFailure_UPVFailure_UPSVVFailure_AlreadyProposedSv"><span id="goblinGen_UPIREG_UPREGFailure_UPVFailure_UPPVVFailure_CannotUpdatePv"><span id="goblinData_UPIREG_UPREGFailure_UPVFailure_UPPVVFailure_CannotUpdatePv"><span id="goblinGen_UPIREG_UPREGFailure_UPVFailure_UPPVVFailure_CannotFollowPv"><span id="goblinData_UPIREG_UPREGFailure_UPVFailure_UPPVVFailure_CannotFollowPv"><span id="goblinGen_UPIREG_UPREGFailure_UPVFailure_ParamsChangedInSVUpdate"><span id="goblinData_UPIREG_UPREGFailure_UPVFailure_ParamsChangedInSVUpdate"><span id="goblinGen_UPIREG_UPREGFailure_UPVFailure_PVChangedInSVUpdate"><span id="goblinData_UPIREG_UPREGFailure_UPVFailure_PVChangedInSVUpdate"><span id="goblinGen_UPIREG_UPREGFailure_UPVFailure_AVChangedInPVUpdate"><span id="goblinData_UPIREG_UPREGFailure_UPVFailure_AVChangedInPVUpdate"><span id="goblinGen_UPIREG_UPREGFailure_NotGenesisDelegate"><span id="goblinData_UPIREG_UPREGFailure_NotGenesisDelegate"><span id="goblinGen_UPIREG_UPREGFailure_DoesNotVerify"><span id="goblinData_UPIREG_UPREGFailure_DoesNotVerify"><span class="hs-identifier">mkGoblinGens</span><span>
</span><span id="line-1850"></span><span>  </span><span class="hs-string">&quot;UPIREG&quot;</span><span>
</span><span id="line-1851"></span><span>  </span><span class="hs-special">[</span><span> </span><span class="hs-string">&quot;UPREGFailure_DoesNotVerify&quot;</span><span>
</span><span id="line-1852"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;UPREGFailure_NotGenesisDelegate&quot;</span><span>
</span><span id="line-1853"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;UPREGFailure_UPVFailure_AVChangedInPVUpdate&quot;</span><span>
</span><span id="line-1854"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;UPREGFailure_UPVFailure_PVChangedInSVUpdate&quot;</span><span>
</span><span id="line-1855"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;UPREGFailure_UPVFailure_ParamsChangedInSVUpdate&quot;</span><span>
</span><span id="line-1856"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;UPREGFailure_UPVFailure_UPPVVFailure_CannotFollowPv&quot;</span><span>
</span><span id="line-1857"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;UPREGFailure_UPVFailure_UPPVVFailure_CannotUpdatePv&quot;</span><span>
</span><span id="line-1858"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;UPREGFailure_UPVFailure_UPSVVFailure_AlreadyProposedSv&quot;</span><span>
</span><span id="line-1859"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;UPREGFailure_UPVFailure_UPSVVFailure_CannotFollowSv&quot;</span><span>
</span><span id="line-1860"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;UPREGFailure_UPVFailure_UPSVVFailure_InvalidApplicationName&quot;</span><span>
</span><span id="line-1861"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;UPREGFailure_UPVFailure_UPSVVFailure_InvalidSystemTags&quot;</span><span>
</span><span id="line-1862"></span><span>  </span><span class="hs-special">]</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span>
</span><span id="line-1863"></span><span>
</span><span id="line-1864"></span><span id="goblinGensUPIVOTES"><span id="goblinGen_UPIVOTES_ApplyVotesFailure_UpivoteFailure_UPVOTEFailure_ADDVOTEFailure_NoUpdateProposal"><span id="goblinData_UPIVOTES_ApplyVotesFailure_UpivoteFailure_UPVOTEFailure_ADDVOTEFailure_NoUpdateProposal"><span id="goblinGen_UPIVOTES_ApplyVotesFailure_UpivoteFailure_UPVOTEFailure_ADDVOTEFailure_AVSigDoesNotVerify"><span id="goblinData_UPIVOTES_ApplyVotesFailure_UpivoteFailure_UPVOTEFailure_ADDVOTEFailure_AVSigDoesNotVerify"><span class="hs-identifier">mkGoblinGens</span><span>
</span><span id="line-1865"></span><span>  </span><span class="hs-string">&quot;UPIVOTES&quot;</span><span>
</span><span id="line-1866"></span><span>  </span><span class="hs-special">[</span><span> </span><span class="hs-string">&quot;ApplyVotesFailure_UpivoteFailure_UPVOTEFailure_ADDVOTEFailure_AVSigDoesNotVerify&quot;</span><span>
</span><span id="line-1867"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;ApplyVotesFailure_UpivoteFailure_UPVOTEFailure_ADDVOTEFailure_NoUpdateProposal&quot;</span><span>
</span><span id="line-1868"></span><span>  </span><span class="hs-special">]</span></span></span></span></span></span><span>
</span><span id="line-1869"></span><span>
</span><span id="line-1870"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-1871"></span><span class="hs-comment">-- Tampering functions</span><span>
</span><span id="line-1872"></span><span class="hs-comment">--</span><span>
</span><span id="line-1873"></span><span class="hs-comment">-- These must be dropped at the end of the file because they reference</span><span>
</span><span id="line-1874"></span><span class="hs-comment">-- TH-expanded definitions.</span><span>
</span><span id="line-1875"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-1876"></span><span>
</span><span id="line-1877"></span><span class="hs-comment">-- | Tamper with the update proposal in such a way that the following</span><span>
</span><span id="line-1878"></span><span class="hs-comment">-- predicate failures are triggered with equal probability:</span><span>
</span><span id="line-1879"></span><span class="hs-comment">--</span><span>
</span><span id="line-1880"></span><span class="hs-comment">-- - UPREGFailure</span><span>
</span><span id="line-1881"></span><span class="hs-comment">--   - UPVFailure</span><span>
</span><span id="line-1882"></span><span class="hs-comment">--     - UPVFailure</span><span>
</span><span id="line-1883"></span><span class="hs-comment">--       - UPPVVFailure</span><span>
</span><span id="line-1884"></span><span class="hs-comment">--         - CannotFollowPv</span><span>
</span><span id="line-1885"></span><span class="hs-comment">--         - CannotUpdatePv</span><span>
</span><span id="line-1886"></span><span class="hs-comment">--         - AlreadyProposedPv</span><span>
</span><span id="line-1887"></span><span class="hs-comment">--       - UPSVVFailure</span><span>
</span><span id="line-1888"></span><span class="hs-comment">--         - AlreadyProposedSv</span><span>
</span><span id="line-1889"></span><span class="hs-comment">--         - CannotFollowSv</span><span>
</span><span id="line-1890"></span><span class="hs-comment">--         - InvalidApplicationName</span><span>
</span><span id="line-1891"></span><span class="hs-comment">--         - InvalidSystemTags</span><span>
</span><span id="line-1892"></span><span class="hs-comment">--       - AVChangedInPVUpdate</span><span>
</span><span id="line-1893"></span><span class="hs-comment">--       - ParamsChangedInSVUpdate</span><span>
</span><span id="line-1894"></span><span class="hs-comment">--       - PVChangedInSVUpdate</span><span>
</span><span id="line-1895"></span><span class="hs-comment">--   - NotGenesisDelegate</span><span>
</span><span id="line-1896"></span><span class="hs-comment">--   - DoesNotVerify</span><span>
</span><span id="line-1897"></span><span class="hs-comment">--</span><span>
</span><span id="line-1898"></span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#tamperWithUpdateProposal"><span class="hs-identifier hs-type">tamperWithUpdateProposal</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIEnv"><span class="hs-identifier hs-type">UPIEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIState"><span class="hs-identifier hs-type">UPIState</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UProp"><span class="hs-identifier hs-type">UProp</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Gen</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UProp"><span class="hs-identifier hs-type">UProp</span></a></span><span>
</span><span id="line-1899"></span><span id="tamperWithUpdateProposal"><span class="annot"><span class="annottext">tamperWithUpdateProposal :: UPIEnv -&gt; UPIState -&gt; UProp -&gt; GenT Identity UProp
</span><a href="Byron.Spec.Ledger.Update.html#tamperWithUpdateProposal"><span class="hs-identifier hs-var hs-var">tamperWithUpdateProposal</span></a></span></span><span> </span><span id="local-6989586621679554435"><span class="annot"><span class="annottext">UPIEnv
</span><a href="#local-6989586621679554435"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621679554434"><span class="annot"><span class="annottext">UPIState
</span><a href="#local-6989586621679554434"><span class="hs-identifier hs-var">st</span></a></span></span><span> </span><span id="local-6989586621679554433"><span class="annot"><span class="annottext">UProp
</span><a href="#local-6989586621679554433"><span class="hs-identifier hs-var">uprop</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1900"></span><span>  </span><span class="hs-comment">-- The frequencies above were determined ad-hoc to get an even coverage in the</span><span>
</span><span id="line-1901"></span><span>  </span><span class="hs-comment">-- resulting predicate failures.</span><span>
</span><span id="line-1902"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679554432"><span class="annot"><span class="annottext">failureGenerators :: [(Int, GenT Identity UProp)]
</span><a href="#local-6989586621679554432"><span class="hs-identifier hs-var hs-var">failureGenerators</span></a></span></span><span>
</span><span id="line-1903"></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">GenT Identity UProp
</span><a href="#local-6989586621679554431"><span class="hs-identifier hs-var">invalidProtocolVersion</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1904"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">GenT Identity UProp
</span><a href="#local-6989586621679554430"><span class="hs-identifier hs-var">invalidParametersUpdate</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1905"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">5</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">GenT Identity UProp
</span><a href="#local-6989586621679554429"><span class="hs-identifier hs-var">duplicatedProtocolVersion</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1906"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">5</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">GenT Identity UProp
</span><a href="#local-6989586621679554428"><span class="hs-identifier hs-var">duplicatedSoftwareVersion</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1907"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">GenT Identity UProp
</span><a href="#local-6989586621679554427"><span class="hs-identifier hs-var">invalidSoftwareVersion</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1908"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">GenT Identity UProp
</span><a href="#local-6989586621679554426"><span class="hs-identifier hs-var">invalidApplicationName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1909"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">GenT Identity UProp
</span><a href="#local-6989586621679554425"><span class="hs-identifier hs-var">invalidSystemTag</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1910"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">GenT Identity UProp
</span><a href="#local-6989586621679554424"><span class="hs-identifier hs-var">invalidIssuer</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1911"></span><span>          </span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[(Int, GenT Identity UProp)]
-&gt; [(Int, GenT Identity UProp)] -&gt; [(Int, GenT Identity UProp)]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((UPIEnv -&gt; UPIState -&gt; GenT Identity UProp)
 -&gt; (Int, GenT Identity UProp))
-&gt; [UPIEnv -&gt; UPIState -&gt; GenT Identity UProp]
-&gt; [(Int, GenT Identity UProp)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679554423"><span class="annot"><span class="annottext">UPIEnv -&gt; UPIState -&gt; GenT Identity UProp
</span><a href="#local-6989586621679554423"><span class="hs-identifier hs-var">sg</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">UPIEnv -&gt; UPIState -&gt; GenT Identity UProp
</span><a href="#local-6989586621679554423"><span class="hs-identifier hs-var">sg</span></a></span><span> </span><span class="annot"><span class="annottext">UPIEnv
</span><a href="#local-6989586621679554435"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">UPIState
</span><a href="#local-6989586621679554434"><span class="hs-identifier hs-var">st</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[UPIEnv -&gt; UPIState -&gt; GenT Identity UProp]
[SignalGenerator UPIREG]
</span><a href="Byron.Spec.Ledger.Update.html#goblinGensUPIREG"><span class="hs-identifier hs-var">goblinGensUPIREG</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1912"></span><span>  </span><span id="local-6989586621679554422"><span class="annot"><span class="annottext">UProp
</span><a href="#local-6989586621679554422"><span class="hs-identifier hs-var">tamperedUprop</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(Int, GenT Identity UProp)] -&gt; GenT Identity UProp
forall (m :: * -&gt; *) a. MonadGen m =&gt; [(Int, m a)] -&gt; m a
</span><span class="hs-identifier hs-var">Gen.frequency</span></span><span> </span><span class="annot"><span class="annottext">[(Int, GenT Identity UProp)]
</span><a href="#local-6989586621679554432"><span class="hs-identifier hs-var">failureGenerators</span></a></span><span>
</span><span id="line-1913"></span><span>  </span><span class="hs-comment">-- We need to re-sign the update proposal since we changed the contents of</span><span>
</span><span id="line-1914"></span><span>  </span><span class="hs-comment">-- 'uprop', however in 10/n of the cases we want to trigger a 'DoesNotVerify'</span><span>
</span><span id="line-1915"></span><span>  </span><span class="hs-comment">-- error (where 'n' is the total number of predicate failures, 'n = length</span><span>
</span><span id="line-1916"></span><span>  </span><span class="hs-comment">-- failureGenerators + 1'). Thus, in 1-/n of the cases we simply return the</span><span>
</span><span id="line-1917"></span><span>  </span><span class="hs-comment">-- tampered proposal without re-signing it, which will cause the</span><span>
</span><span id="line-1918"></span><span>  </span><span class="hs-comment">-- 'DoesNotVerify' failure.</span><span>
</span><span id="line-1919"></span><span>  </span><span class="annot"><span class="annottext">[(Int, GenT Identity UProp)] -&gt; GenT Identity UProp
forall (m :: * -&gt; *) a. MonadGen m =&gt; [(Int, m a)] -&gt; m a
</span><span class="hs-identifier hs-var">Gen.frequency</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(Int, GenT Identity UProp)] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[(Int, GenT Identity UProp)]
</span><a href="#local-6989586621679554432"><span class="hs-identifier hs-var">failureGenerators</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">UProp -&gt; GenT Identity UProp
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(UProp -&gt; GenT Identity UProp) -&gt; UProp -&gt; GenT Identity UProp
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="annot"><span class="annottext">UProp -&gt; UProp
</span><a href="Byron.Spec.Ledger.Update.html#reSign"><span class="hs-identifier hs-var">reSign</span></a></span><span> </span><span class="annot"><span class="annottext">UProp
</span><a href="#local-6989586621679554422"><span class="hs-identifier hs-var">tamperedUprop</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1920"></span><span>                </span><span class="hs-comment">-- Using 10 in the frequency below will give you us around 15%</span><span>
</span><span id="line-1921"></span><span>                </span><span class="hs-comment">-- of proposals with an invalid hash.</span><span>
</span><span id="line-1922"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">10</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">UProp -&gt; GenT Identity UProp
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(UProp -&gt; GenT Identity UProp) -&gt; UProp -&gt; GenT Identity UProp
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="annot"><span class="annottext">UProp
</span><a href="#local-6989586621679554422"><span class="hs-identifier hs-var">tamperedUprop</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1923"></span><span>                </span><span class="hs-special">]</span><span>
</span><span id="line-1924"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1925"></span><span>    </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621679554421"><span class="annot"><span class="annottext">ProtVer
</span><a href="#local-6989586621679554421"><span class="hs-identifier hs-var">_pv</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679554420"><span class="annot"><span class="annottext">PParams
</span><a href="#local-6989586621679554420"><span class="hs-identifier hs-var">_pps</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621679554419"><span class="annot"><span class="annottext">[(Slot, (ProtVer, PParams))]
</span><a href="#local-6989586621679554419"><span class="hs-identifier hs-var">_fads</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679554418"><span class="annot"><span class="annottext">Map ApName (ApVer, Slot, Metadata)
</span><a href="#local-6989586621679554418"><span class="hs-identifier hs-var">_avs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679554417"><span class="annot"><span class="annottext">Map UpId (ProtVer, PParams)
</span><a href="#local-6989586621679554417"><span class="hs-identifier hs-var">rpus</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679554416"><span class="annot"><span class="annottext">Map UpId (ApName, ApVer, Metadata)
</span><a href="#local-6989586621679554416"><span class="hs-identifier hs-var">raus</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679554415"><span class="annot"><span class="annottext">Map UpId Slot
</span><a href="#local-6989586621679554415"><span class="hs-identifier hs-var">_cps</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679554414"><span class="annot"><span class="annottext">Set (UpId, VKeyGenesis)
</span><a href="#local-6989586621679554414"><span class="hs-identifier hs-var">_vts</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679554413"><span class="annot"><span class="annottext">Set (ProtVer, VKeyGenesis)
</span><a href="#local-6989586621679554413"><span class="hs-identifier hs-var">_bvs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679554412"><span class="annot"><span class="annottext">Map UpId Slot
</span><a href="#local-6989586621679554412"><span class="hs-identifier hs-var">_pws</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UPIState
</span><a href="#local-6989586621679554434"><span class="hs-identifier hs-var">st</span></a></span><span>
</span><span id="line-1926"></span><span>
</span><span id="line-1927"></span><span>    </span><span class="annot"><a href="#local-6989586621679554431"><span class="hs-identifier hs-type">invalidProtocolVersion</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Gen</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UProp"><span class="hs-identifier hs-type">UProp</span></a></span><span>
</span><span id="line-1928"></span><span>    </span><span id="local-6989586621679554431"><span class="annot"><span class="annottext">invalidProtocolVersion :: GenT Identity UProp
</span><a href="#local-6989586621679554431"><span class="hs-identifier hs-var hs-var">invalidProtocolVersion</span></a></span></span><span>
</span><span id="line-1929"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679554411"><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679554411"><span class="hs-identifier hs-var">mj</span></a></span></span><span> </span><span id="local-6989586621679554410"><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679554410"><span class="hs-identifier hs-var">mn</span></a></span></span><span> </span><span id="local-6989586621679554409"><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679554409"><span class="hs-identifier hs-var">alt</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UProp
</span><a href="#local-6989586621679554433"><span class="hs-identifier hs-var">uprop</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">_upPV :: ProtVer
</span><a href="Byron.Spec.Ledger.Update.html#_upPV"><span class="hs-identifier hs-var">_upPV</span></a></span><span> </span><span class="hs-glyph">=</span><span>  </span><span class="annot"><span class="annottext">Natural -&gt; Natural -&gt; Natural -&gt; ProtVer
</span><a href="Byron.Spec.Ledger.Update.html#ProtVer"><span class="hs-identifier hs-var">ProtVer</span></a></span><span> </span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679554411"><span class="hs-identifier hs-var">mj</span></a></span><span> </span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679554410"><span class="hs-identifier hs-var">mn</span></a></span><span> </span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679554409"><span class="hs-identifier hs-var">alt</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1930"></span><span>      </span><span class="annot"><span class="annottext">(Natural -&gt; Natural -&gt; Natural -&gt; UProp)
-&gt; GenT Identity Natural
-&gt; GenT Identity (Natural -&gt; Natural -&gt; UProp)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Range Natural -&gt; GenT Identity Natural
forall (m :: * -&gt; *) a. (MonadGen m, Integral a) =&gt; Range a -&gt; m a
</span><span class="hs-identifier hs-var">Gen.integral</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Natural -&gt; Natural -&gt; Range Natural
forall a. a -&gt; a -&gt; Range a
</span><span class="hs-identifier hs-var">Range.constant</span></span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">100</span></span><span class="hs-special">)</span><span>
</span><span id="line-1931"></span><span>      </span><span class="annot"><span class="annottext">GenT Identity (Natural -&gt; Natural -&gt; UProp)
-&gt; GenT Identity Natural -&gt; GenT Identity (Natural -&gt; UProp)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Range Natural -&gt; GenT Identity Natural
forall (m :: * -&gt; *) a. (MonadGen m, Integral a) =&gt; Range a -&gt; m a
</span><span class="hs-identifier hs-var">Gen.integral</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Natural -&gt; Natural -&gt; Range Natural
forall a. a -&gt; a -&gt; Range a
</span><span class="hs-identifier hs-var">Range.constant</span></span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">100</span></span><span class="hs-special">)</span><span>
</span><span id="line-1932"></span><span>      </span><span class="annot"><span class="annottext">GenT Identity (Natural -&gt; UProp)
-&gt; GenT Identity Natural -&gt; GenT Identity UProp
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Range Natural -&gt; GenT Identity Natural
forall (m :: * -&gt; *) a. (MonadGen m, Integral a) =&gt; Range a -&gt; m a
</span><span class="hs-identifier hs-var">Gen.integral</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Natural -&gt; Natural -&gt; Range Natural
forall a. a -&gt; a -&gt; Range a
</span><span class="hs-identifier hs-var">Range.constant</span></span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">100</span></span><span class="hs-special">)</span><span>
</span><span id="line-1933"></span><span>
</span><span id="line-1934"></span><span>    </span><span class="annot"><a href="#local-6989586621679554430"><span class="hs-identifier hs-type">invalidParametersUpdate</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Gen</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UProp"><span class="hs-identifier hs-type">UProp</span></a></span><span>
</span><span id="line-1935"></span><span>    </span><span id="local-6989586621679554430"><span class="annot"><span class="annottext">invalidParametersUpdate :: GenT Identity UProp
</span><a href="#local-6989586621679554430"><span class="hs-identifier hs-var hs-var">invalidParametersUpdate</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1936"></span><span>      </span><span class="annot"><span class="annottext">[UProp] -&gt; GenT Identity UProp
forall (m :: * -&gt; *) a. MonadGen m =&gt; [a] -&gt; m a
</span><span class="hs-identifier hs-var">Gen.element</span></span><span>
</span><span id="line-1937"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">UProp
</span><a href="#local-6989586621679554433"><span class="hs-identifier hs-var">uprop</span></a></span><span> </span><span class="annot"><span class="annottext">UProp -&gt; (UProp -&gt; UProp) -&gt; UProp
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(PParams -&gt; Identity PParams) -&gt; UProp -&gt; Identity UProp
Lens' UProp PParams
</span><a href="Byron.Spec.Ledger.Update.html#upParams"><span class="hs-identifier hs-var">upParams</span></a></span><span> </span><span class="annot"><span class="annottext">((PParams -&gt; Identity PParams) -&gt; UProp -&gt; Identity UProp)
-&gt; ((Natural -&gt; Identity Natural) -&gt; PParams -&gt; Identity PParams)
-&gt; (Natural -&gt; Identity Natural)
-&gt; UProp
-&gt; Identity UProp
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Natural -&gt; Identity Natural) -&gt; PParams -&gt; Identity PParams
Lens' PParams Natural
</span><a href="Byron.Spec.Ledger.Update.html#maxBkSz"><span class="hs-identifier hs-var">maxBkSz</span></a></span><span> </span><span class="annot"><span class="annottext">((Natural -&gt; Identity Natural) -&gt; UProp -&gt; Identity UProp)
-&gt; Natural -&gt; UProp -&gt; UProp
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">UProp
</span><a href="#local-6989586621679554433"><span class="hs-identifier hs-var">uprop</span></a></span><span> </span><span class="annot"><span class="annottext">UProp -&gt; Getting Natural UProp Natural -&gt; Natural
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">(PParams -&gt; Const Natural PParams) -&gt; UProp -&gt; Const Natural UProp
Lens' UProp PParams
</span><a href="Byron.Spec.Ledger.Update.html#upParams"><span class="hs-identifier hs-var">upParams</span></a></span><span> </span><span class="annot"><span class="annottext">((PParams -&gt; Const Natural PParams)
 -&gt; UProp -&gt; Const Natural UProp)
-&gt; ((Natural -&gt; Const Natural Natural)
    -&gt; PParams -&gt; Const Natural PParams)
-&gt; Getting Natural UProp Natural
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Natural -&gt; Const Natural Natural)
-&gt; PParams -&gt; Const Natural PParams
Lens' PParams Natural
</span><a href="Byron.Spec.Ledger.Update.html#maxBkSz"><span class="hs-identifier hs-var">maxBkSz</span></a></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Natural -&gt; Natural
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">*</span></span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">3</span></span><span>
</span><span id="line-1938"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">UProp
</span><a href="#local-6989586621679554433"><span class="hs-identifier hs-var">uprop</span></a></span><span> </span><span class="annot"><span class="annottext">UProp -&gt; (UProp -&gt; UProp) -&gt; UProp
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(PParams -&gt; Identity PParams) -&gt; UProp -&gt; Identity UProp
Lens' UProp PParams
</span><a href="Byron.Spec.Ledger.Update.html#upParams"><span class="hs-identifier hs-var">upParams</span></a></span><span> </span><span class="annot"><span class="annottext">((PParams -&gt; Identity PParams) -&gt; UProp -&gt; Identity UProp)
-&gt; ((Natural -&gt; Identity Natural) -&gt; PParams -&gt; Identity PParams)
-&gt; (Natural -&gt; Identity Natural)
-&gt; UProp
-&gt; Identity UProp
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Natural -&gt; Identity Natural) -&gt; PParams -&gt; Identity PParams
Lens' PParams Natural
</span><a href="Byron.Spec.Ledger.Update.html#maxTxSz"><span class="hs-identifier hs-var">maxTxSz</span></a></span><span> </span><span class="annot"><span class="annottext">((Natural -&gt; Identity Natural) -&gt; UProp -&gt; Identity UProp)
-&gt; Natural -&gt; UProp -&gt; UProp
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">UProp
</span><a href="#local-6989586621679554433"><span class="hs-identifier hs-var">uprop</span></a></span><span> </span><span class="annot"><span class="annottext">UProp -&gt; Getting Natural UProp Natural -&gt; Natural
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">(PParams -&gt; Const Natural PParams) -&gt; UProp -&gt; Const Natural UProp
Lens' UProp PParams
</span><a href="Byron.Spec.Ledger.Update.html#upParams"><span class="hs-identifier hs-var">upParams</span></a></span><span> </span><span class="annot"><span class="annottext">((PParams -&gt; Const Natural PParams)
 -&gt; UProp -&gt; Const Natural UProp)
-&gt; ((Natural -&gt; Const Natural Natural)
    -&gt; PParams -&gt; Const Natural PParams)
-&gt; Getting Natural UProp Natural
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Natural -&gt; Const Natural Natural)
-&gt; PParams -&gt; Const Natural PParams
Lens' PParams Natural
</span><a href="Byron.Spec.Ledger.Update.html#maxBkSz"><span class="hs-identifier hs-var">maxBkSz</span></a></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Natural -&gt; Natural
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">*</span></span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">2</span></span><span>
</span><span id="line-1939"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">UProp
</span><a href="#local-6989586621679554433"><span class="hs-identifier hs-var">uprop</span></a></span><span> </span><span class="annot"><span class="annottext">UProp -&gt; (UProp -&gt; UProp) -&gt; UProp
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(PParams -&gt; Identity PParams) -&gt; UProp -&gt; Identity UProp
Lens' UProp PParams
</span><a href="Byron.Spec.Ledger.Update.html#upParams"><span class="hs-identifier hs-var">upParams</span></a></span><span> </span><span class="annot"><span class="annottext">((PParams -&gt; Identity PParams) -&gt; UProp -&gt; Identity UProp)
-&gt; ((Natural -&gt; Identity Natural) -&gt; PParams -&gt; Identity PParams)
-&gt; (Natural -&gt; Identity Natural)
-&gt; UProp
-&gt; Identity UProp
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Natural -&gt; Identity Natural) -&gt; PParams -&gt; Identity PParams
Lens' PParams Natural
</span><a href="Byron.Spec.Ledger.Update.html#scriptVersion"><span class="hs-identifier hs-var">scriptVersion</span></a></span><span> </span><span class="annot"><span class="annottext">((Natural -&gt; Identity Natural) -&gt; UProp -&gt; Identity UProp)
-&gt; Natural -&gt; UProp -&gt; UProp
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">UProp
</span><a href="#local-6989586621679554433"><span class="hs-identifier hs-var">uprop</span></a></span><span> </span><span class="annot"><span class="annottext">UProp -&gt; Getting Natural UProp Natural -&gt; Natural
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">(PParams -&gt; Const Natural PParams) -&gt; UProp -&gt; Const Natural UProp
Lens' UProp PParams
</span><a href="Byron.Spec.Ledger.Update.html#upParams"><span class="hs-identifier hs-var">upParams</span></a></span><span> </span><span class="annot"><span class="annottext">((PParams -&gt; Const Natural PParams)
 -&gt; UProp -&gt; Const Natural UProp)
-&gt; ((Natural -&gt; Const Natural Natural)
    -&gt; PParams -&gt; Const Natural PParams)
-&gt; Getting Natural UProp Natural
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Natural -&gt; Const Natural Natural)
-&gt; PParams -&gt; Const Natural PParams
Lens' PParams Natural
</span><a href="Byron.Spec.Ledger.Update.html#scriptVersion"><span class="hs-identifier hs-var">scriptVersion</span></a></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Natural -&gt; Natural
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">2</span></span><span>
</span><span id="line-1940"></span><span>        </span><span class="hs-special">]</span><span>
</span><span id="line-1941"></span><span>
</span><span id="line-1942"></span><span>    </span><span class="annot"><a href="#local-6989586621679554429"><span class="hs-identifier hs-type">duplicatedProtocolVersion</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Gen</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UProp"><span class="hs-identifier hs-type">UProp</span></a></span><span>
</span><span id="line-1943"></span><span>    </span><span id="local-6989586621679554429"><span class="annot"><span class="annottext">duplicatedProtocolVersion :: GenT Identity UProp
</span><a href="#local-6989586621679554429"><span class="hs-identifier hs-var hs-var">duplicatedProtocolVersion</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1944"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679554408"><span class="annot"><span class="annottext">registeredVersions :: [ProtVer]
</span><a href="#local-6989586621679554408"><span class="hs-identifier hs-var hs-var">registeredVersions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ProtVer, PParams) -&gt; ProtVer
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">((ProtVer, PParams) -&gt; ProtVer)
-&gt; [(ProtVer, PParams)] -&gt; [ProtVer]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Map UpId (ProtVer, PParams) -&gt; [(ProtVer, PParams)]
forall k a. Map k a -&gt; [a]
</span><span class="hs-identifier hs-var">Map.elems</span></span><span> </span><span class="annot"><span class="annottext">Map UpId (ProtVer, PParams)
</span><a href="#local-6989586621679554417"><span class="hs-identifier hs-var">rpus</span></a></span><span> </span><span class="hs-keyword">in</span><span>
</span><span id="line-1945"></span><span>        </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">[ProtVer] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">[ProtVer]
</span><a href="#local-6989586621679554408"><span class="hs-identifier hs-var">registeredVersions</span></a></span><span>
</span><span id="line-1946"></span><span>          </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">GenT Identity UProp
forall (m :: * -&gt; *) a. MonadPlus m =&gt; m a
</span><span class="hs-identifier hs-var">mzero</span></span><span>
</span><span id="line-1947"></span><span>          </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1948"></span><span>            </span><span id="local-6989586621679554407"><span class="annot"><span class="annottext">ProtVer
</span><a href="#local-6989586621679554407"><span class="hs-identifier hs-var">duplicatedVersion</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[ProtVer] -&gt; GenT Identity ProtVer
forall (m :: * -&gt; *) a. MonadGen m =&gt; [a] -&gt; m a
</span><span class="hs-identifier hs-var">Gen.element</span></span><span> </span><span class="annot"><span class="annottext">[ProtVer]
</span><a href="#local-6989586621679554408"><span class="hs-identifier hs-var">registeredVersions</span></a></span><span>
</span><span id="line-1949"></span><span>            </span><span class="annot"><span class="annottext">UProp -&gt; GenT Identity UProp
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(UProp -&gt; GenT Identity UProp) -&gt; UProp -&gt; GenT Identity UProp
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="annot"><span class="annottext">UProp
</span><a href="#local-6989586621679554433"><span class="hs-identifier hs-var">uprop</span></a></span><span> </span><span class="annot"><span class="annottext">UProp -&gt; (UProp -&gt; UProp) -&gt; UProp
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(ProtVer -&gt; Identity ProtVer) -&gt; UProp -&gt; Identity UProp
Lens' UProp ProtVer
</span><a href="Byron.Spec.Ledger.Update.html#upPV"><span class="hs-identifier hs-var">upPV</span></a></span><span> </span><span class="annot"><span class="annottext">((ProtVer -&gt; Identity ProtVer) -&gt; UProp -&gt; Identity UProp)
-&gt; ProtVer -&gt; UProp -&gt; UProp
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">ProtVer
</span><a href="#local-6989586621679554407"><span class="hs-identifier hs-var">duplicatedVersion</span></a></span><span>
</span><span id="line-1950"></span><span>
</span><span id="line-1951"></span><span>    </span><span class="annot"><a href="#local-6989586621679554428"><span class="hs-identifier hs-type">duplicatedSoftwareVersion</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Gen</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UProp"><span class="hs-identifier hs-type">UProp</span></a></span><span>
</span><span id="line-1952"></span><span>    </span><span id="local-6989586621679554428"><span class="annot"><span class="annottext">duplicatedSoftwareVersion :: GenT Identity UProp
</span><a href="#local-6989586621679554428"><span class="hs-identifier hs-var hs-var">duplicatedSoftwareVersion</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1953"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679554406"><span class="annot"><span class="annottext">registeredVersions :: [(ApName, ApVer)]
</span><a href="#local-6989586621679554406"><span class="hs-identifier hs-var hs-var">registeredVersions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((ApName, ApVer, Metadata) -&gt; (ApName, ApVer))
-&gt; [(ApName, ApVer, Metadata)] -&gt; [(ApName, ApVer)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">(ApName, ApVer, Metadata) -&gt; (ApName, ApVer)
forall a b c. (a, b, c) -&gt; (a, b)
</span><a href="#local-6989586621679554405"><span class="hs-identifier hs-var">fstSnd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map UpId (ApName, ApVer, Metadata) -&gt; [(ApName, ApVer, Metadata)]
forall k a. Map k a -&gt; [a]
</span><span class="hs-identifier hs-var">Map.elems</span></span><span> </span><span class="annot"><span class="annottext">Map UpId (ApName, ApVer, Metadata)
</span><a href="#local-6989586621679554416"><span class="hs-identifier hs-var">raus</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">in</span><span>
</span><span id="line-1954"></span><span>        </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">[(ApName, ApVer)] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">[(ApName, ApVer)]
</span><a href="#local-6989586621679554406"><span class="hs-identifier hs-var">registeredVersions</span></a></span><span>
</span><span id="line-1955"></span><span>          </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">GenT Identity UProp
forall (m :: * -&gt; *) a. MonadPlus m =&gt; m a
</span><span class="hs-identifier hs-var">mzero</span></span><span>
</span><span id="line-1956"></span><span>          </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1957"></span><span>            </span><span class="hs-special">(</span><span id="local-6989586621679554404"><span class="annot"><span class="annottext">ApName
</span><a href="#local-6989586621679554404"><span class="hs-identifier hs-var">an</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679554403"><span class="annot"><span class="annottext">ApVer
</span><a href="#local-6989586621679554403"><span class="hs-identifier hs-var">av</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(ApName, ApVer)] -&gt; GenT Identity (ApName, ApVer)
forall (m :: * -&gt; *) a. MonadGen m =&gt; [a] -&gt; m a
</span><span class="hs-identifier hs-var">Gen.element</span></span><span> </span><span class="annot"><span class="annottext">[(ApName, ApVer)]
</span><a href="#local-6989586621679554406"><span class="hs-identifier hs-var">registeredVersions</span></a></span><span>
</span><span id="line-1958"></span><span>            </span><span class="annot"><span class="annottext">UProp -&gt; GenT Identity UProp
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(UProp -&gt; GenT Identity UProp) -&gt; UProp -&gt; GenT Identity UProp
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="annot"><span class="annottext">UProp
</span><a href="#local-6989586621679554433"><span class="hs-identifier hs-var">uprop</span></a></span><span> </span><span class="annot"><span class="annottext">UProp -&gt; (UProp -&gt; UProp) -&gt; UProp
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(SwVer -&gt; Identity SwVer) -&gt; UProp -&gt; Identity UProp
Lens' UProp SwVer
</span><a href="Byron.Spec.Ledger.Update.html#upSwVer"><span class="hs-identifier hs-var">upSwVer</span></a></span><span> </span><span class="annot"><span class="annottext">((SwVer -&gt; Identity SwVer) -&gt; UProp -&gt; Identity UProp)
-&gt; SwVer -&gt; UProp -&gt; UProp
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">SwVer :: ApName -&gt; ApVer -&gt; SwVer
</span><a href="Byron.Spec.Ledger.Update.html#SwVer"><span class="hs-identifier hs-type">SwVer</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">_svName :: ApName
</span><a href="Byron.Spec.Ledger.Update.html#_svName"><span class="hs-identifier hs-var">_svName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ApName
</span><a href="#local-6989586621679554404"><span class="hs-identifier hs-var">an</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_svVer :: ApVer
</span><a href="Byron.Spec.Ledger.Update.html#_svVer"><span class="hs-identifier hs-var">_svVer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ApVer
</span><a href="#local-6989586621679554403"><span class="hs-identifier hs-var">av</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1959"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-1960"></span><span>        </span><span id="local-6989586621679557996"><span id="local-6989586621679557997"><span id="local-6989586621679557998"><span class="annot"><a href="#local-6989586621679554405"><span class="hs-identifier hs-type">fstSnd</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679557998"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679557997"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679557996"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679557998"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679557997"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-1961"></span><span>        </span><span id="local-6989586621679554405"><span class="annot"><span class="annottext">fstSnd :: (a, b, c) -&gt; (a, b)
</span><a href="#local-6989586621679554405"><span class="hs-identifier hs-var hs-var">fstSnd</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679554402"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679554402"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679554401"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679554401"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">c
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679554402"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679554401"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1962"></span><span>
</span><span id="line-1963"></span><span>
</span><span id="line-1964"></span><span>    </span><span class="annot"><a href="#local-6989586621679554427"><span class="hs-identifier hs-type">invalidSoftwareVersion</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Gen</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UProp"><span class="hs-identifier hs-type">UProp</span></a></span><span>
</span><span id="line-1965"></span><span>    </span><span id="local-6989586621679554427"><span class="annot"><span class="annottext">invalidSoftwareVersion :: GenT Identity UProp
</span><a href="#local-6989586621679554427"><span class="hs-identifier hs-var hs-var">invalidSoftwareVersion</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1966"></span><span>      </span><span class="annot"><span class="annottext">UProp -&gt; GenT Identity UProp
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(UProp -&gt; GenT Identity UProp) -&gt; UProp -&gt; GenT Identity UProp
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="annot"><span class="annottext">ASetter UProp UProp ApVer ApVer
-&gt; (ApVer -&gt; ApVer) -&gt; UProp -&gt; UProp
forall s t a b. ASetter s t a b -&gt; (a -&gt; b) -&gt; s -&gt; t
</span><span class="hs-identifier hs-var">over</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(SwVer -&gt; Identity SwVer) -&gt; UProp -&gt; Identity UProp
Lens' UProp SwVer
</span><a href="Byron.Spec.Ledger.Update.html#upSwVer"><span class="hs-identifier hs-var">upSwVer</span></a></span><span> </span><span class="annot"><span class="annottext">((SwVer -&gt; Identity SwVer) -&gt; UProp -&gt; Identity UProp)
-&gt; ((ApVer -&gt; Identity ApVer) -&gt; SwVer -&gt; Identity SwVer)
-&gt; ASetter UProp UProp ApVer ApVer
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(ApVer -&gt; Identity ApVer) -&gt; SwVer -&gt; Identity SwVer
Lens' SwVer ApVer
</span><a href="Byron.Spec.Ledger.Update.html#svVer"><span class="hs-identifier hs-var">svVer</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ApVer -&gt; ApVer -&gt; ApVer
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span class="annot"><span class="annottext">ApVer
</span><span class="hs-number">42</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">UProp
</span><a href="#local-6989586621679554433"><span class="hs-identifier hs-var">uprop</span></a></span><span>
</span><span id="line-1967"></span><span>
</span><span id="line-1968"></span><span>    </span><span class="annot"><a href="#local-6989586621679554426"><span class="hs-identifier hs-type">invalidApplicationName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Gen</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UProp"><span class="hs-identifier hs-type">UProp</span></a></span><span>
</span><span id="line-1969"></span><span>    </span><span id="local-6989586621679554426"><span class="annot"><span class="annottext">invalidApplicationName :: GenT Identity UProp
</span><a href="#local-6989586621679554426"><span class="hs-identifier hs-var hs-var">invalidApplicationName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1970"></span><span>      </span><span id="local-6989586621679554399"><span class="annot"><span class="annottext">ApName
</span><a href="#local-6989586621679554399"><span class="hs-identifier hs-var">randomName</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; ApName
</span><a href="Byron.Spec.Ledger.Update.html#ApName"><span class="hs-identifier hs-var">ApName</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; ApName) -&gt; GenT Identity String -&gt; Gen ApName
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Range Int -&gt; GenT Identity Char -&gt; GenT Identity String
forall (m :: * -&gt; *). MonadGen m =&gt; Range Int -&gt; m Char -&gt; m String
</span><span class="hs-identifier hs-var">Gen.string</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Range Int
forall a. Integral a =&gt; a -&gt; a -&gt; Range a
</span><span class="hs-identifier hs-var">Range.linear</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">10</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">GenT Identity Char
forall (m :: * -&gt; *). MonadGen m =&gt; m Char
</span><span class="hs-identifier hs-var">Gen.unicode</span></span><span>
</span><span id="line-1971"></span><span>      </span><span class="annot"><span class="annottext">UProp -&gt; GenT Identity UProp
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(UProp -&gt; GenT Identity UProp) -&gt; UProp -&gt; GenT Identity UProp
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="annot"><span class="annottext">UProp
</span><a href="#local-6989586621679554433"><span class="hs-identifier hs-var">uprop</span></a></span><span> </span><span class="annot"><span class="annottext">UProp -&gt; (UProp -&gt; UProp) -&gt; UProp
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(SwVer -&gt; Identity SwVer) -&gt; UProp -&gt; Identity UProp
Lens' UProp SwVer
</span><a href="Byron.Spec.Ledger.Update.html#upSwVer"><span class="hs-identifier hs-var">upSwVer</span></a></span><span> </span><span class="annot"><span class="annottext">((SwVer -&gt; Identity SwVer) -&gt; UProp -&gt; Identity UProp)
-&gt; ((ApName -&gt; Identity ApName) -&gt; SwVer -&gt; Identity SwVer)
-&gt; (ApName -&gt; Identity ApName)
-&gt; UProp
-&gt; Identity UProp
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(ApName -&gt; Identity ApName) -&gt; SwVer -&gt; Identity SwVer
Lens' SwVer ApName
</span><a href="Byron.Spec.Ledger.Update.html#svName"><span class="hs-identifier hs-var">svName</span></a></span><span> </span><span class="annot"><span class="annottext">((ApName -&gt; Identity ApName) -&gt; UProp -&gt; Identity UProp)
-&gt; ApName -&gt; UProp -&gt; UProp
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">ApName
</span><a href="#local-6989586621679554399"><span class="hs-identifier hs-var">randomName</span></a></span><span>
</span><span id="line-1972"></span><span>
</span><span id="line-1973"></span><span>    </span><span class="annot"><a href="#local-6989586621679554425"><span class="hs-identifier hs-type">invalidSystemTag</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Gen</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UProp"><span class="hs-identifier hs-type">UProp</span></a></span><span>
</span><span id="line-1974"></span><span>    </span><span id="local-6989586621679554425"><span class="annot"><span class="annottext">invalidSystemTag :: GenT Identity UProp
</span><a href="#local-6989586621679554425"><span class="hs-identifier hs-var hs-var">invalidSystemTag</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1975"></span><span>      </span><span id="local-6989586621679554396"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679554396"><span class="hs-identifier hs-var">randomTag</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Range Int -&gt; GenT Identity Char -&gt; GenT Identity String
forall (m :: * -&gt; *). MonadGen m =&gt; Range Int -&gt; m Char -&gt; m String
</span><span class="hs-identifier hs-var">Gen.string</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Range Int
forall a. Integral a =&gt; a -&gt; a -&gt; Range a
</span><span class="hs-identifier hs-var">Range.linear</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">10</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">GenT Identity Char
forall (m :: * -&gt; *). MonadGen m =&gt; m Char
</span><span class="hs-identifier hs-var">Gen.unicode</span></span><span>
</span><span id="line-1976"></span><span>      </span><span class="annot"><span class="annottext">UProp -&gt; GenT Identity UProp
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(UProp -&gt; GenT Identity UProp) -&gt; UProp -&gt; GenT Identity UProp
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="annot"><span class="annottext">((Set String -&gt; Identity (Set String)) -&gt; UProp -&gt; Identity UProp)
-&gt; (Set String -&gt; Set String) -&gt; UProp -&gt; UProp
forall s t a b. ASetter s t a b -&gt; (a -&gt; b) -&gt; s -&gt; t
</span><span class="hs-identifier hs-var">over</span></span><span> </span><span class="annot"><span class="annottext">(Set String -&gt; Identity (Set String)) -&gt; UProp -&gt; Identity UProp
Lens' UProp (Set String)
</span><a href="Byron.Spec.Ledger.Update.html#upSTags"><span class="hs-identifier hs-var">upSTags</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Set String -&gt; Set String
forall a. Ord a =&gt; a -&gt; Set a -&gt; Set a
</span><span class="hs-identifier hs-var">Set.insert</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679554396"><span class="hs-identifier hs-var">randomTag</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">UProp
</span><a href="#local-6989586621679554433"><span class="hs-identifier hs-var">uprop</span></a></span><span>
</span><span id="line-1977"></span><span>
</span><span id="line-1978"></span><span>    </span><span class="annot"><a href="#local-6989586621679554424"><span class="hs-identifier hs-type">invalidIssuer</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Gen</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UProp"><span class="hs-identifier hs-type">UProp</span></a></span><span>
</span><span id="line-1979"></span><span>    </span><span id="local-6989586621679554424"><span class="annot"><span class="annottext">invalidIssuer :: GenT Identity UProp
</span><a href="#local-6989586621679554424"><span class="hs-identifier hs-var hs-var">invalidIssuer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1980"></span><span>      </span><span class="hs-comment">-- We use a large (constant) increment here, so that we have a bigger chance to get a</span><span>
</span><span id="line-1981"></span><span>      </span><span class="hs-comment">-- non-genesis delegate.</span><span>
</span><span id="line-1982"></span><span>      </span><span class="annot"><span class="annottext">UProp -&gt; GenT Identity UProp
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(UProp -&gt; GenT Identity UProp) -&gt; UProp -&gt; GenT Identity UProp
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="annot"><span class="annottext">ASetter UProp UProp VKey VKey -&gt; (VKey -&gt; VKey) -&gt; UProp -&gt; UProp
forall s t a b. ASetter s t a b -&gt; (a -&gt; b) -&gt; s -&gt; t
</span><span class="hs-identifier hs-var">over</span></span><span> </span><span class="annot"><span class="annottext">ASetter UProp UProp VKey VKey
Lens' UProp VKey
</span><a href="Byron.Spec.Ledger.Update.html#upIssuer"><span class="hs-identifier hs-var">upIssuer</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Owner -&gt; VKey
</span><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier hs-var">VKey</span></a></span><span> </span><span class="annot"><span class="annottext">(Owner -&gt; VKey) -&gt; (VKey -&gt; Owner) -&gt; VKey -&gt; VKey
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Owner
</span><a href="Byron.Spec.Ledger.Core.html#Owner"><span class="hs-identifier hs-var">Owner</span></a></span><span> </span><span class="annot"><span class="annottext">(Natural -&gt; Owner) -&gt; (VKey -&gt; Natural) -&gt; VKey -&gt; Owner
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">100</span></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Natural -&gt; Natural
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Natural -&gt; Natural) -&gt; (VKey -&gt; Natural) -&gt; VKey -&gt; Natural
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">VKey -&gt; Natural
</span><span class="hs-identifier hs-var">coerce</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">UProp
</span><a href="#local-6989586621679554433"><span class="hs-identifier hs-var">uprop</span></a></span><span>
</span><span id="line-1983"></span><span>
</span><span id="line-1984"></span><span>
</span><span id="line-1985"></span><span class="hs-comment">-- | Tamper with some of the votes provided as parameter in such a way that the following</span><span>
</span><span id="line-1986"></span><span class="hs-comment">-- predicate failures are triggered with equal probability:</span><span>
</span><span id="line-1987"></span><span class="hs-comment">--</span><span>
</span><span id="line-1988"></span><span class="hs-comment">-- - AVSigDoesNotVerify</span><span>
</span><span id="line-1989"></span><span class="hs-comment">-- - NoUpdateProposal</span><span>
</span><span id="line-1990"></span><span class="hs-comment">--</span><span>
</span><span id="line-1991"></span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#tamperWithVotes"><span class="hs-identifier hs-type">tamperWithVotes</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIEnv"><span class="hs-identifier hs-type">UPIEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#UPIState"><span class="hs-identifier hs-type">UPIState</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#Vote"><span class="hs-identifier hs-type">Vote</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Gen</span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#Vote"><span class="hs-identifier hs-type">Vote</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1992"></span><span id="tamperWithVotes"><span class="annot"><span class="annottext">tamperWithVotes :: UPIEnv -&gt; UPIState -&gt; [Vote] -&gt; GenT Identity [Vote]
</span><a href="Byron.Spec.Ledger.Update.html#tamperWithVotes"><span class="hs-identifier hs-var hs-var">tamperWithVotes</span></a></span></span><span> </span><span id="local-6989586621679554394"><span class="annot"><span class="annottext">UPIEnv
</span><a href="#local-6989586621679554394"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621679554393"><span class="annot"><span class="annottext">UPIState
</span><a href="#local-6989586621679554393"><span class="hs-identifier hs-var">st</span></a></span></span><span> </span><span id="local-6989586621679554392"><span class="annot"><span class="annottext">[Vote]
</span><a href="#local-6989586621679554392"><span class="hs-identifier hs-var">vs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1993"></span><span>  </span><span class="annot"><span class="annottext">[(Int, GenT Identity [Vote])] -&gt; GenT Identity [Vote]
forall (m :: * -&gt; *) a. MonadGen m =&gt; [(Int, m a)] -&gt; m a
</span><span class="hs-identifier hs-var">Gen.frequency</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Vote] -&gt; GenT Identity [Vote]
</span><a href="#local-6989586621679554391"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">[Vote]
</span><a href="#local-6989586621679554392"><span class="hs-identifier hs-var">vs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1994"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[GenT Identity [Vote]] -&gt; GenT Identity [Vote]
forall (m :: * -&gt; *) a. MonadGen m =&gt; [m a] -&gt; m a
</span><span class="hs-identifier hs-var">Gen.choice</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((UPIEnv -&gt; UPIState -&gt; GenT Identity [Vote])
 -&gt; GenT Identity [Vote])
-&gt; [UPIEnv -&gt; UPIState -&gt; GenT Identity [Vote]]
-&gt; [GenT Identity [Vote]]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679554390"><span class="annot"><span class="annottext">UPIEnv -&gt; UPIState -&gt; GenT Identity [Vote]
</span><a href="#local-6989586621679554390"><span class="hs-identifier hs-var">sg</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UPIEnv -&gt; UPIState -&gt; GenT Identity [Vote]
</span><a href="#local-6989586621679554390"><span class="hs-identifier hs-var">sg</span></a></span><span> </span><span class="annot"><span class="annottext">UPIEnv
</span><a href="#local-6989586621679554394"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">UPIState
</span><a href="#local-6989586621679554393"><span class="hs-identifier hs-var">st</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[UPIEnv -&gt; UPIState -&gt; GenT Identity [Vote]]
[SignalGenerator UPIVOTES]
</span><a href="Byron.Spec.Ledger.Update.html#goblinGensUPIVOTES"><span class="hs-identifier hs-var">goblinGensUPIVOTES</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1995"></span><span>                </span><span class="hs-special">]</span><span>
</span><span id="line-1996"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1997"></span><span>  </span><span id="local-6989586621679554391"><span class="annot"><span class="annottext">go :: [Vote] -&gt; GenT Identity [Vote]
</span><a href="#local-6989586621679554391"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1998"></span><span>    </span><span class="hs-comment">-- If there are no votes, then we generate a random one.</span><span>
</span><span id="line-1999"></span><span>    </span><span id="local-6989586621679554389"><span class="annot"><span class="annottext">Vote
</span><a href="#local-6989586621679554389"><span class="hs-identifier hs-var">vote</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">VKey -&gt; UpId -&gt; Vote
</span><a href="Byron.Spec.Ledger.Update.html#mkVote"><span class="hs-identifier hs-var">mkVote</span></a></span><span> </span><span class="annot"><span class="annottext">(VKey -&gt; UpId -&gt; Vote)
-&gt; GenT Identity VKey -&gt; GenT Identity (UpId -&gt; Vote)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">GenT Identity VKey
</span><a href="Byron.Spec.Ledger.Core.Generators.html#vkGen"><span class="hs-identifier hs-var">CoreGen.vkGen</span></a></span><span> </span><span class="annot"><span class="annottext">GenT Identity (UpId -&gt; Vote) -&gt; Gen UpId -&gt; Gen Vote
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Gen UpId
</span><a href="Byron.Spec.Ledger.Update.html#randomUpId"><span class="hs-identifier hs-var">randomUpId</span></a></span><span>
</span><span id="line-2000"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Vote -&gt; [Vote] -&gt; [Vote]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Vote -&gt; [Vote]) -&gt; Gen Vote -&gt; GenT Identity [Vote]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Vote -&gt; Gen Vote
</span><a href="Byron.Spec.Ledger.Update.html#tamperWithVote"><span class="hs-identifier hs-var">tamperWithVote</span></a></span><span> </span><span class="annot"><span class="annottext">Vote
</span><a href="#local-6989586621679554389"><span class="hs-identifier hs-var">vote</span></a></span><span>
</span><span id="line-2001"></span><span>  </span><span class="annot"><a href="#local-6989586621679554391"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">[</span><span id="local-6989586621679554386"><span class="annot"><span class="annottext">Vote
</span><a href="#local-6989586621679554386"><span class="hs-identifier hs-var">vote</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2002"></span><span>    </span><span class="hs-comment">-- If we have only one vote we duplicate it and try again, raising the</span><span>
</span><span id="line-2003"></span><span>    </span><span class="hs-comment">-- probabilities that one of the votes in the list will be tampered with.</span><span>
</span><span id="line-2004"></span><span>    </span><span class="annot"><span class="annottext">[Vote] -&gt; GenT Identity [Vote]
</span><a href="#local-6989586621679554391"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Vote
</span><a href="#local-6989586621679554386"><span class="hs-identifier hs-var">vote</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Vote
</span><a href="#local-6989586621679554386"><span class="hs-identifier hs-var">vote</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2005"></span><span>  </span><span class="annot"><a href="#local-6989586621679554391"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621679554385"><span class="annot"><span class="annottext">[Vote]
</span><a href="#local-6989586621679554385"><span class="hs-identifier hs-var">votes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2006"></span><span>    </span><span class="annot"><span class="annottext">(Vote -&gt; Gen Vote) -&gt; [Vote] -&gt; GenT Identity [Vote]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">Vote -&gt; Gen Vote
</span><a href="Byron.Spec.Ledger.Update.html#tamperWithVote"><span class="hs-identifier hs-var">tamperWithVote</span></a></span><span> </span><span class="annot"><span class="annottext">[Vote]
</span><a href="#local-6989586621679554385"><span class="hs-identifier hs-var">votes</span></a></span><span>
</span><span id="line-2007"></span><span>
</span><span id="line-2008"></span><span>
</span><span id="line-2009"></span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#tamperWithVote"><span class="hs-identifier hs-type">tamperWithVote</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#Vote"><span class="hs-identifier hs-type">Vote</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Gen</span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Update.html#Vote"><span class="hs-identifier hs-type">Vote</span></a></span><span>
</span><span id="line-2010"></span><span id="tamperWithVote"><span class="annot"><span class="annottext">tamperWithVote :: Vote -&gt; Gen Vote
</span><a href="Byron.Spec.Ledger.Update.html#tamperWithVote"><span class="hs-identifier hs-var hs-var">tamperWithVote</span></a></span></span><span> </span><span id="local-6989586621679554384"><span class="annot"><span class="annottext">Vote
</span><a href="#local-6989586621679554384"><span class="hs-identifier hs-var">vote</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2011"></span><span>  </span><span class="annot"><span class="annottext">[Gen Vote] -&gt; Gen Vote
forall (m :: * -&gt; *) a. MonadGen m =&gt; [m a] -&gt; m a
</span><span class="hs-identifier hs-var">Gen.choice</span></span><span>
</span><span id="line-2012"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="hs-comment">-- Change the vote by some random proposal id. There might be a chance</span><span>
</span><span id="line-2013"></span><span>      </span><span class="hs-comment">-- that the proposal id exists though, but this should be minimal if</span><span>
</span><span id="line-2014"></span><span>      </span><span class="hs-comment">-- we generate only small valid proposal id's.</span><span>
</span><span id="line-2015"></span><span>       </span><span class="annot"><span class="annottext">VKey -&gt; UpId -&gt; Vote
</span><a href="Byron.Spec.Ledger.Update.html#mkVote"><span class="hs-identifier hs-var">mkVote</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Vote
</span><a href="#local-6989586621679554384"><span class="hs-identifier hs-var">vote</span></a></span><span> </span><span class="annot"><span class="annottext">Vote -&gt; Getting VKey Vote VKey -&gt; VKey
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting VKey Vote VKey
Lens' Vote VKey
</span><a href="Byron.Spec.Ledger.Update.html#vCaster"><span class="hs-identifier hs-var">vCaster</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2016"></span><span>       </span><span class="annot"><span class="annottext">(UpId -&gt; Vote) -&gt; (Int -&gt; UpId) -&gt; Int -&gt; Vote
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span>   </span><span class="annot"><span class="annottext">Int -&gt; UpId
</span><a href="Byron.Spec.Ledger.Update.html#UpId"><span class="hs-identifier hs-var">UpId</span></a></span><span>
</span><span id="line-2017"></span><span>       </span><span class="annot"><span class="annottext">(Int -&gt; Vote) -&gt; GenT Identity Int -&gt; Gen Vote
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Range Int -&gt; GenT Identity Int
forall (m :: * -&gt; *) a. (MonadGen m, Integral a) =&gt; Range a -&gt; m a
</span><span class="hs-identifier hs-var">Gen.integral</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Range Int
forall a. a -&gt; a -&gt; Range a
</span><span class="hs-identifier hs-var">Range.constant</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">10000</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">10100</span></span><span class="hs-special">)</span><span>
</span><span id="line-2018"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2019"></span><span>        </span><span id="local-6989586621679554383"><span class="annot"><span class="annottext">VKey
</span><a href="#local-6989586621679554383"><span class="hs-identifier hs-var">vk</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GenT Identity VKey
</span><a href="Byron.Spec.Ledger.Core.Generators.html#vkGen"><span class="hs-identifier hs-var">CoreGen.vkGen</span></a></span><span>
</span><span id="line-2020"></span><span>        </span><span class="hs-comment">-- Replace the signature by the signature of some random key.</span><span>
</span><span id="line-2021"></span><span>        </span><span class="annot"><span class="annottext">Vote -&gt; Gen Vote
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Vote -&gt; Gen Vote) -&gt; Vote -&gt; Gen Vote
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="annot"><span class="annottext">Vote
</span><a href="#local-6989586621679554384"><span class="hs-identifier hs-var">vote</span></a></span><span> </span><span class="annot"><span class="annottext">Vote -&gt; (Vote -&gt; Vote) -&gt; Vote
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(Sig UpId -&gt; Identity (Sig UpId)) -&gt; Vote -&gt; Identity Vote
Lens' Vote (Sig UpId)
</span><a href="Byron.Spec.Ledger.Update.html#vSig"><span class="hs-identifier hs-var">vSig</span></a></span><span> </span><span class="annot"><span class="annottext">((Sig UpId -&gt; Identity (Sig UpId)) -&gt; Vote -&gt; Identity Vote)
-&gt; Sig UpId -&gt; Vote -&gt; Vote
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">SKey -&gt; UpId -&gt; Sig UpId
forall a. SKey -&gt; a -&gt; Sig a
</span><a href="Byron.Spec.Ledger.Core.html#sign"><span class="hs-identifier hs-var">Core.sign</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VKey -&gt; SKey
</span><a href="Byron.Spec.Ledger.Core.Omniscient.html#skey"><span class="hs-identifier hs-var">skey</span></a></span><span> </span><span class="annot"><span class="annottext">VKey
</span><a href="#local-6989586621679554383"><span class="hs-identifier hs-var">vk</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Vote
</span><a href="#local-6989586621679554384"><span class="hs-identifier hs-var">vote</span></a></span><span> </span><span class="annot"><span class="annottext">Vote -&gt; Getting UpId Vote UpId -&gt; UpId
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting UpId Vote UpId
Lens' Vote UpId
</span><a href="Byron.Spec.Ledger.Update.html#vPropId"><span class="hs-identifier hs-var">vPropId</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2022"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Vote -&gt; Gen Vote
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Vote -&gt; Gen Vote) -&gt; Vote -&gt; Gen Vote
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="annot"><span class="annottext">Vote
</span><a href="#local-6989586621679554384"><span class="hs-identifier hs-var">vote</span></a></span><span>
</span><span id="line-2023"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-2024"></span><span>
</span><span id="line-2025"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-2026"></span><span class="hs-comment">-- FieldX instances for a 9-tuple</span><span>
</span><span id="line-2027"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-2028"></span><span>
</span><span id="line-2029"></span><span id="local-6989586621679554373"><span id="local-6989586621679554374"><span id="local-6989586621679554375"><span id="local-6989586621679554376"><span id="local-6989586621679554377"><span id="local-6989586621679554378"><span id="local-6989586621679554379"><span id="local-6989586621679554380"><span id="local-6989586621679554381"><span id="local-6989586621679554382"><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Field1</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679554382"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621679554381"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621679554380"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621679554379"><span class="hs-identifier hs-type">d</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621679554378"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621679554377"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621679554376"><span class="hs-identifier hs-type">g</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621679554375"><span class="hs-identifier hs-type">h</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621679554374"><span class="hs-identifier hs-type">i</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679554373"><span class="hs-identifier hs-type">a'</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621679554381"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621679554380"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621679554379"><span class="hs-identifier hs-type">d</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621679554378"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621679554377"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621679554376"><span class="hs-identifier hs-type">g</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621679554375"><span class="hs-identifier hs-type">h</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621679554374"><span class="hs-identifier hs-type">i</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679554382"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679554373"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-2030"></span><span>  </span><span id="local-6989586621679554370"><span class="annot"><span class="annottext">_1 :: (a -&gt; f a')
-&gt; (a, b, c, d, e, f, g, h, i) -&gt; f (a', b, c, d, e, f, g, h, i)
</span><a href="#local-6989586621679554370"><span class="hs-identifier hs-var hs-var hs-var hs-var">_1</span></a></span></span><span> </span><span id="local-6989586621679554369"><span class="annot"><span class="annottext">a -&gt; f a'
</span><a href="#local-6989586621679554369"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">~</span><span class="hs-special">(</span><span id="local-6989586621679554368"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679554368"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679554367"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679554367"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679554366"><span class="annot"><span class="annottext">c
</span><a href="#local-6989586621679554366"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679554365"><span class="annot"><span class="annottext">d
</span><a href="#local-6989586621679554365"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679554364"><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621679554364"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679554363"><span class="annot"><span class="annottext">f
</span><a href="#local-6989586621679554363"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679554362"><span class="annot"><span class="annottext">g
</span><a href="#local-6989586621679554362"><span class="hs-identifier hs-var">g</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679554361"><span class="annot"><span class="annottext">h
</span><a href="#local-6989586621679554361"><span class="hs-identifier hs-var">h</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679554360"><span class="annot"><span class="annottext">i
</span><a href="#local-6989586621679554360"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679554359"><span class="annot"><span class="annottext">a'
</span><a href="#local-6989586621679554359"><span class="hs-identifier hs-var">a'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a'
</span><a href="#local-6989586621679554359"><span class="hs-identifier hs-var">a'</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679554367"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">c
</span><a href="#local-6989586621679554366"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">d
</span><a href="#local-6989586621679554365"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621679554364"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">f
</span><a href="#local-6989586621679554363"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">g
</span><a href="#local-6989586621679554362"><span class="hs-identifier hs-var">g</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">h
</span><a href="#local-6989586621679554361"><span class="hs-identifier hs-var">h</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">i
</span><a href="#local-6989586621679554360"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(a' -&gt; (a', b, c, d, e, f, g, h, i))
-&gt; f a' -&gt; f (a', b, c, d, e, f, g, h, i)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; f a'
</span><a href="#local-6989586621679554369"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679554368"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-2031"></span><span>  </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">_1</span></span><span> </span><span class="hs-pragma">#-}</span></span></span></span></span></span></span></span></span></span></span><span>
</span><span id="line-2032"></span><span>
</span><span id="line-2033"></span><span id="local-6989586621679554349"><span id="local-6989586621679554350"><span id="local-6989586621679554351"><span id="local-6989586621679554352"><span id="local-6989586621679554353"><span id="local-6989586621679554354"><span id="local-6989586621679554355"><span id="local-6989586621679554356"><span id="local-6989586621679554357"><span id="local-6989586621679554358"><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Field2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679554358"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621679554357"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621679554356"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621679554355"><span class="hs-identifier hs-type">d</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621679554354"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621679554353"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621679554352"><span class="hs-identifier hs-type">g</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621679554351"><span class="hs-identifier hs-type">h</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621679554350"><span class="hs-identifier hs-type">i</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679554358"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621679554349"><span class="hs-identifier hs-type">b'</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621679554356"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621679554355"><span class="hs-identifier hs-type">d</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621679554354"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621679554353"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621679554352"><span class="hs-identifier hs-type">g</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621679554351"><span class="hs-identifier hs-type">h</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621679554350"><span class="hs-identifier hs-type">i</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679554357"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679554349"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-2034"></span><span>  </span><span id="local-6989586621679554346"><span class="annot"><span class="annottext">_2 :: (b -&gt; f b')
-&gt; (a, b, c, d, e, f, g, h, i) -&gt; f (a, b', c, d, e, f, g, h, i)
</span><a href="#local-6989586621679554346"><span class="hs-identifier hs-var hs-var hs-var hs-var">_2</span></a></span></span><span> </span><span id="local-6989586621679554345"><span class="annot"><span class="annottext">b -&gt; f b'
</span><a href="#local-6989586621679554345"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">~</span><span class="hs-special">(</span><span id="local-6989586621679554344"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679554344"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679554343"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679554343"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679554342"><span class="annot"><span class="annottext">c
</span><a href="#local-6989586621679554342"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679554341"><span class="annot"><span class="annottext">d
</span><a href="#local-6989586621679554341"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679554340"><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621679554340"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679554339"><span class="annot"><span class="annottext">f
</span><a href="#local-6989586621679554339"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679554338"><span class="annot"><span class="annottext">g
</span><a href="#local-6989586621679554338"><span class="hs-identifier hs-var">g</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679554337"><span class="annot"><span class="annottext">h
</span><a href="#local-6989586621679554337"><span class="hs-identifier hs-var">h</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679554336"><span class="annot"><span class="annottext">i
</span><a href="#local-6989586621679554336"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679554335"><span class="annot"><span class="annottext">b'
</span><a href="#local-6989586621679554335"><span class="hs-identifier hs-var">b'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679554344"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">b'
</span><a href="#local-6989586621679554335"><span class="hs-identifier hs-var">b'</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">c
</span><a href="#local-6989586621679554342"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">d
</span><a href="#local-6989586621679554341"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621679554340"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">f
</span><a href="#local-6989586621679554339"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">g
</span><a href="#local-6989586621679554338"><span class="hs-identifier hs-var">g</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">h
</span><a href="#local-6989586621679554337"><span class="hs-identifier hs-var">h</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">i
</span><a href="#local-6989586621679554336"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(b' -&gt; (a, b', c, d, e, f, g, h, i))
-&gt; f b' -&gt; f (a, b', c, d, e, f, g, h, i)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">b -&gt; f b'
</span><a href="#local-6989586621679554345"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679554343"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-2035"></span><span>  </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">_2</span></span><span> </span><span class="hs-pragma">#-}</span></span></span></span></span></span></span></span></span></span></span><span>
</span><span id="line-2036"></span><span>
</span><span id="line-2037"></span><span id="local-6989586621679554325"><span id="local-6989586621679554326"><span id="local-6989586621679554327"><span id="local-6989586621679554328"><span id="local-6989586621679554329"><span id="local-6989586621679554330"><span id="local-6989586621679554331"><span id="local-6989586621679554332"><span id="local-6989586621679554333"><span id="local-6989586621679554334"><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Field3</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679554334"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621679554333"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621679554332"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621679554331"><span class="hs-identifier hs-type">d</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621679554330"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621679554329"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621679554328"><span class="hs-identifier hs-type">g</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621679554327"><span class="hs-identifier hs-type">h</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621679554326"><span class="hs-identifier hs-type">i</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679554334"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621679554333"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621679554325"><span class="hs-identifier hs-type">c'</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621679554331"><span class="hs-identifier hs-type">d</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621679554330"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621679554329"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621679554328"><span class="hs-identifier hs-type">g</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621679554327"><span class="hs-identifier hs-type">h</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621679554326"><span class="hs-identifier hs-type">i</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679554332"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679554325"><span class="hs-identifier hs-type">c'</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-2038"></span><span>  </span><span id="local-6989586621679554322"><span class="annot"><span class="annottext">_3 :: (c -&gt; f c')
-&gt; (a, b, c, d, e, f, g, h, i) -&gt; f (a, b, c', d, e, f, g, h, i)
</span><a href="#local-6989586621679554322"><span class="hs-identifier hs-var hs-var hs-var hs-var">_3</span></a></span></span><span> </span><span id="local-6989586621679554321"><span class="annot"><span class="annottext">c -&gt; f c'
</span><a href="#local-6989586621679554321"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">~</span><span class="hs-special">(</span><span id="local-6989586621679554320"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679554320"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679554319"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679554319"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679554318"><span class="annot"><span class="annottext">c
</span><a href="#local-6989586621679554318"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679554317"><span class="annot"><span class="annottext">d
</span><a href="#local-6989586621679554317"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679554316"><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621679554316"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679554315"><span class="annot"><span class="annottext">f
</span><a href="#local-6989586621679554315"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679554314"><span class="annot"><span class="annottext">g
</span><a href="#local-6989586621679554314"><span class="hs-identifier hs-var">g</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679554313"><span class="annot"><span class="annottext">h
</span><a href="#local-6989586621679554313"><span class="hs-identifier hs-var">h</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679554312"><span class="annot"><span class="annottext">i
</span><a href="#local-6989586621679554312"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679554311"><span class="annot"><span class="annottext">c'
</span><a href="#local-6989586621679554311"><span class="hs-identifier hs-var">c'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679554320"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679554319"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">c'
</span><a href="#local-6989586621679554311"><span class="hs-identifier hs-var">c'</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">d
</span><a href="#local-6989586621679554317"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621679554316"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">f
</span><a href="#local-6989586621679554315"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">g
</span><a href="#local-6989586621679554314"><span class="hs-identifier hs-var">g</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">h
</span><a href="#local-6989586621679554313"><span class="hs-identifier hs-var">h</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">i
</span><a href="#local-6989586621679554312"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(c' -&gt; (a, b, c', d, e, f, g, h, i))
-&gt; f c' -&gt; f (a, b, c', d, e, f, g, h, i)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">c -&gt; f c'
</span><a href="#local-6989586621679554321"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">c
</span><a href="#local-6989586621679554318"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-2039"></span><span>  </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">_3</span></span><span> </span><span class="hs-pragma">#-}</span></span></span></span></span></span></span></span></span></span></span><span>
</span><span id="line-2040"></span></pre></body></html>